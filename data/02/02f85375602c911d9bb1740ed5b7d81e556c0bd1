<p>In a recent post I was talking about the benefits of mapping the RAlt key to the Ctrl key and this set up is so far still feeling very comfortable.</p>
<p>However, there are many ways to set up the mapping, so below are instructions on how to map the right Alt key (RAlt) to Ctrl for different platforms. These are just the methods I have used in the past, I&rsquo;m sure there are a multitude of other options out there.</p>
<hr>
<div class="ox-hugo-toc toc local">
<ul>
<li><a href="https://emacs.dyerdwelling.family/emacs/20240425213402-emacs--how-to-map-ralt-to-ctrl/#linux">Linux</a></li>
<li><a href="https://emacs.dyerdwelling.family/emacs/20240425213402-emacs--how-to-map-ralt-to-ctrl/#windows">Windows</a></li>
<li><a href="https://emacs.dyerdwelling.family/emacs/20240425213402-emacs--how-to-map-ralt-to-ctrl/#linux-or-windows">Linux or Windows</a></li>
</ul>
</div>
<!--endtoc-->
<hr>
<p>Before you dive in, here is a rough plantuml diagram to give you a top level diagrammatical overview of what I am describing below (note: kmonad is not included):</p>
<figure><img src="https://emacs.dyerdwelling.family/ox-hugo/20240425213402-emacs--How-To-Map-Ralt-to-Ctrl-puml.jpg" width="100%">
</figure>

<h2 id="linux">Linux</h2>
<h3 id="x11-or-wayland">X11 or Wayland</h3>
<h4 id="xkb--x-keyboard-extension">xkb (X Keyboard Extension)</h4>
<p>First generate an xkb file which defines all keybindings for the current layout by running the follwing command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>xkbcomp $DISPLAY -xkb keymap.xkb
</span></span></code></pre></div><p>Add to the keymap.xkb file along with the other defined modifier_maps:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>modifier_map Mod1 { &lt;RALT&gt; };
</span></span></code></pre></div><p>and set the definition of key to:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>key &lt;RALT&gt; { [ Alt_L, Meta_L ] };
</span></span></code></pre></div><p>Now load the modified file back in again:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>xkbcomp keymap.xkb $DISPLAY
</span></span></code></pre></div><p>If you want it to be applied every time you log in, you can add this command to your startup applications or add it to your .bashrc or .profile file.</p>
<h3 id="x11-only">X11 only</h3>
<h4 id="xmodmap">xmodmap</h4>
<p>Xmodmap is a little archaic these days and is seen as being a little deprecated and soon to become obsolete (especially with the incoming Wayland protocol) but especially on X11 it can still be used if you don&rsquo;t want to fiddle around with xkb files.</p>
<p>To map the right Alt key (RAlt) to Ctrl using xmodmap in Linux, you can follow these steps:</p>
<p>Create a file named .Xmodmap in your home directory if it doesn&rsquo;t exist already.</p>
<p>Add the following line to the file:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>keycode &lt;keycode_of_RAlt&gt; = Control_L
</span></span></code></pre></div><p>Replace with the keycode of your right Alt key.</p>
<p>To find the keycode, you can use the xev command. Open a terminal and run:</p>
<p>xev</p>
<p>This will open a small window. Move your cursor into that window and press the right Alt key. Look for the keycode in the terminal output. It should look something like keycode 108 (maybe exactly like!)</p>
<p>To apply the changes, run:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>xmodmap ~/.Xmodmap
</span></span></code></pre></div><p>Now your right Alt key should behave like the Ctrl key. Keep in mind that this mapping will only persist for your current session. If you want it to be applied every time you log in, you can add the xmodmap ~/.Xmodmap command to your startup applications or add it to your .bashrc or .profile file.</p>
<h4 id="setxkbmap">setxkbmap</h4>
<p>Simply run the following command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>setxkbmap -option ctrl:ralt_rctrl
</span></span></code></pre></div><p>If you want it to be applied every time you log in, you can add this command to your startup applications or add it to your .bashrc or .profile file.</p>
<h3 id="wayland-tiling-window-managers">Wayland Tiling Window Managers</h3>
<h4 id="sway">Sway</h4>
<p>Perform the xkb steps defined above and then modify the sway config file as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>input type:keyboard {
</span></span><span style="display:flex;"><span>   xkb_file keymap.xkb
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>alternatively modify the sway config file as follow:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>input type:keyboard {
</span></span><span style="display:flex;"><span>    xkb_options ctrl:ralt_rctrl
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>As this is modifying the basic config file it will be guaranteed to be loaded every time you log in.</p>
<h4 id="hyprland">Hyprland</h4>
<p>As the xkb steps above and then modify the hyprland config file as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>input {
</span></span><span style="display:flex;"><span>   kb_file = keymap.xkb
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>alternatively modify the hyprland config file as follow:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>input {
</span></span><span style="display:flex;"><span>   kb_options = caps:ctrl_modifier
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>As this is modifying the basic config file it will be guaranteed to be loaded every time you log in.</p>
<hr>
<h2 id="windows">Windows</h2>
<h3 id="autohotkey">AutoHotKey</h3>
<p>Install AutoHotkey if you haven&rsquo;t already. You can download it from the official website: <a href="https://www.autohotkey.com/">https://www.autohotkey.com/</a></p>
<p>Once AutoHotkey is installed, right-click on your desktop or in a folder, hover over &ldquo;New,&rdquo; and select &ldquo;AutoHotkey Script.&rdquo; Name the script whatever you like, for example, RAlt_to_Ctrl.ahk.</p>
<p>Right-click the newly created script file and select &ldquo;Edit Script&rdquo; to open it in your default text editor.</p>
<p>Add the following line to the script:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>RAlt::Ctrl
</span></span></code></pre></div><p>Save the script and close the text editor.</p>
<p>Double-click the script file to run it. You should see a green &ldquo;H&rdquo; icon in the system tray indicating that the script is running.</p>
<p>Now, whenever you press the right Alt key, it will function as the Ctrl key. To stop the remapping, right-click the AutoHotkey icon in the system tray and select &ldquo;Exit.&rdquo;</p>
<p>This remapping will persist until you close the script or disable AutoHotkey. If you want the remapping to be applied automatically every time you start your computer, you can place a shortcut to the script in the &ldquo;Startup&rdquo; folder of your Start Menu.</p>
<hr>
<h2 id="linux-or-windows">Linux or Windows</h2>
<h3 id="kmonad">kmonad</h3>
<p>Install kmonad if you haven&rsquo;t already. You can find installation
instructions on the GitHub repository: <a href="https://github.com/kmonad/kmonad">https://github.com/kmonad/kmonad</a></p>
<p>Once kmonad is installed, create a configuration file called kmonad.hs</p>
<h4 id="linux">linux</h4>
<p>Add the following lines :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>(defcfg
</span></span><span style="display:flex;"><span>  input  (device-file &#34;/dev/input/by-path/&lt;device&gt;&#34;)
</span></span><span style="display:flex;"><span>  output (uinput-sink &#34;My KMonad output&#34;)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  ;; Comment this if you want unhandled events not to be emitted
</span></span><span style="display:flex;"><span>  fallthrough true
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  ;; Set this to false to disable any command-execution in KMonad
</span></span><span style="display:flex;"><span>  allow-cmd true
</span></span><span style="display:flex;"><span>  )
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(defsrc ralt)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(deflayer default lctrl)
</span></span></code></pre></div><p>Now on the command line run up:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>kmonad kmonad.hs
</span></span></code></pre></div><p>To ensure that the mapping persists place the command to your startup
applications or add it to your .bashrc or .profile file.</p>
<h4 id="windows">windows</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>(defcfg
</span></span><span style="display:flex;"><span>  input (low-level-hook)
</span></span><span style="display:flex;"><span>  output (send-event-sink)
</span></span><span style="display:flex;"><span>  fallthrough true)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(defsrc ralt)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(deflayer default lctrl)
</span></span></code></pre></div><p>Now create a batch script called kmonad.bat and add:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>kmonad.exe kmonad.hs
</span></span></code></pre></div><p>This remapping will persist until you close kmonad.exe. If you want the
remapping to be applied automatically every time you start your
computer, you can place a shortcut to the script in the &ldquo;Startup&rdquo; folder
of your Start Menu.</p>
<hr>
<p>This post may end up turning into some kind of living document when I find out other ways to perform the mapping, for example I might start to look at Kanata and also see if PowerToys can perform this mapping on Windows.</p>