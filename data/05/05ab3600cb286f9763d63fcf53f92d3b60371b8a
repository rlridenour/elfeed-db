
	
<p>
Most data collected in operational processes are time series. These are data sets where each measurement is associated with the time of the measurement or observation. This chapter introduces a study which looks at synthetic data collected from water meters from individual houses. Meter reads collected at a high frequency provide valuable insights into water consumption, such as leak detection. <a href="https://dx.doi.org/10.1201/9781003326977-11">This chapter</a> of <em>Data Science for Water Utilities</em> explains how the R language manages dates and times and uses this knowledge to explore time series data. The learning objectives for this chapter are:</p>
<ul>
<li>Understand the principles of how the R language processes date and time variables.</li>
<li>Apply the functionality of the Lubridate package to manipulate dates and times.</li>
<li>Use date and time variables in calculations and visualisations.</li>
</ul>
<p>

  <div class="box">
    <div class="media">
      <figure class="media-left">
        <p class="image is-128x128">
          <img src="https://lucidmanager.org/images/books/2023_ds4wu.jpg" alt = "Data Science for Water Utilities" title = "Data Science for Water Utilities">
        </p>
      </figure>
      <div class="media-content">
        <div class="content">
          <p class="is-size-5 has-text-weight-bold">Data Science for Water Utilities</p>
          <p class="mb-2">Data Science for Water Utilities published by CRC Press is an applied, practical guide that shows water professionals how to use data science to solve urban water management problems using the R language for statistical computing.</p>
          <div class="buttons">
            <a class="button is-info" href="https://routledge.com/9781032354545" target="_blank">
              <span class="icon">
                <i class="fas fa-shopping-cart"></i>
              </span>
              <span>Routledge</span>
            </a>
            <a class="button is-info" href="https://www.amazon.com/Data-Science-Water-Utilities-Chapman/dp/1032354550" target="_blank">
              <span class="icon">
                <i class="fas fa-shopping-cart"></i>
              </span>
              <span>Amazon</span>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</p>
<p>
The data and code used in this chapter are available on GitHub:</p>
<p>
<a href = "https://github.com/pprevos/r4h2o/" target="_blank"
   title="Download r4h2o from GitHub"
   alt="Download r4h2o from GitHub">
  <button class="button is-medium is-primary">
    <span class="icon is-large">
      <i class="fab fa-github"></i>
    </span>
    <span style="font-family: monospace">r4h2o</span>
  </button>
</a>

</p>
<div id="outline-container-headline-1" class="outline-2">
<h2 id="headline-1">
Date and Time Variables
</h2>
<div id="outline-text-headline-1" class="outline-text-2">
<p>All date and time variables in R use integer numbers starting at the Unix Epoch (1 January 1970). Spreadsheets tend to use 31 December 1899 as their datum.</p>
<p>
The basic time string uses the ISO <a href="https://en.wikipedia.org/wiki/ISO_8601">8601 convention</a>, i.e. &#34;2023-06-15 18:23:45 AEST&#34;.</p>
<div id="outline-container-headline-2" class="outline-3">
<h3 id="headline-2">
Lubridate Package
</h3>
<div id="outline-text-headline-2" class="outline-text-3">
<p>Working with dates and times in base R can be challenging. The <a href="https://lubridate.tidyverse.org/">lubridate package</a> in the Tidyverse lubricates dates and times with some convenient functions.</p>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-3" class="outline-2">
<h2 id="headline-3">
Digital Metering Leak Detection
</h2>
<div id="outline-text-headline-3" class="outline-text-2">
<p>The case study for this chapter uses synthetic digital metering data. The data for this case study was <a href="https://lucidmanager.org/data-science/simulating-water-consumption/">simulated using R scripts</a>.</p>
<p>
The article on <a href="https://lucidmanager.org/data-science/analyse-digital-water-meter-data/">analysing digital metering data</a> explains some of the principles and creates a diurnal curve.</p>
<figure>
<img src="https://lucidmanager.org/images/r4h2o/diurnal-curve.png" alt="Example of a diurnal curve for domestic water consumption" title="Example of a diurnal curve for domestic water consumption" width="600"/>
<figcaption>
Example of a diurnal curve for domestic water consumption.
</figcaption>
</figure>
</div>
</div>
<div id="outline-container-headline-4" class="outline-2">
<h2 id="headline-4">
Working with Dates and Times in R Screencast
</h2>
<div id="outline-text-headline-4" class="outline-text-2">
<p>Chapter eleven of <em>Data Science for Water Utilities</em> explains working with dates and times and leak detection in more detail. This screencast below reviews the code for this chapter.</p>
<figure>
<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/bjcBbZXbO8A?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"></iframe>
    </div>

<figcaption>
Working with Dates and Times in R.
</figcaption>
</figure>
<p>
The data and code used in this chapter are available on GitHub:</p>
<p>
<a href = "https://github.com/pprevos/r4h2o/" target="_blank"
   title="Download r4h2o from GitHub"
   alt="Download r4h2o from GitHub">
  <button class="button is-medium is-primary">
    <span class="icon is-large">
      <i class="fab fa-github"></i>
    </span>
    <span style="font-family: monospace">r4h2o</span>
  </button>
</a>

</p>
</div>
</div>
<div id="outline-container-headline-5" class="outline-2">
<h2 id="headline-5">
Additional Resources
</h2>
<div id="outline-text-headline-5" class="outline-text-2">
<div id="outline-container-headline-6" class="outline-3">
<h3 id="headline-6">
Addendum
</h3>
<div id="outline-text-headline-6" class="outline-text-3">
<p>The code on page 150 uses the <code class="verbatim">summarise()</code> function to calculate daily flows. This function has been deprecated for this particular case. While <code>summarise()</code> requires that each argument returns a single value, and <code>mutate()</code> requires that each argument returns the same number of rows as the input, <a href="https://dplyr.tidyverse.org/reference/reframe.html">reframe()</a> is a more general workhorse with no requirements on the number of rows returned per group.</p>
&nbsp;
</div>
</div>
<div id="outline-container-headline-7" class="outline-3">
<h3 id="headline-7">
Other Chapters
</h3>
<div id="outline-text-headline-7" class="outline-text-3">
<p><a href="https://lucidmanager.org/data-science/cluster-analysis-to-segment-customers/">Previous Chapter</a>: <em>Clustering Customers to Define Segments</em></p>
<p>
<a href="https://lucidmanager.org/data-science/detecting-outliers-and-anomalies/">Next Chapter</a>: <em>Detecting Anomalies and Outliers in Water Data</em>.</p>
<p>
Feel free to <a href="https://lucidmanager.org/contact/">contact me</a> if you have any comments, suggestions or questions about this book.</p>
</div>
</div>
</div>
</div>

      