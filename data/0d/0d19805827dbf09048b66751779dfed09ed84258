<p><img src="https://xenodium.github.io/images/yasnippet-in-emacs-eshell/yas-eshell.gif" alt=""></p>
<p>I recently <a href="https://twitter.com/xenodium/status/1404746233860837378">tweeted</a> that Vivek Haldar's <a href="https://blog.vivekhaldar.com/post/3996068979/the-levels-of-emacs-proficiency">10-year old post</a> rings true today just the same. He writes about <a href="https://blog.vivekhaldar.com/post/3996068979/the-levels-of-emacs-proficiency">the levels of Emacs proficiency</a>. All 6 levels are insightful in their own right, but for the sake of this post, let's quote an extract from level <em>4. Shell inside Emacs</em>:</p>
<blockquote>
<p>&quot;And then, you learned about it: M-x shell.</p>
<p>It was all just text. Why did you need another application for it? Why should only the shell prompt be editable? Why can’t I move my cursor up a few lines to where the last command spewed out its results? All these problems simply disappear when your shell (or shells) simply becomes another Emacs buffer, upon which all of the text manipulation power of Emacs can be brought to bear.&quot;</p>
</blockquote>
<p>In other words, we aren't merely removing shell restrictions, but opening up possibilities…</p>
<p>Take Emacs eshell looping, for example. I use it so infrequently, I could never remember eshell's syntax. I would refer back to EmacsWiki's <a href="https://www.emacswiki.org/emacs/EshellForLoop">Eshell For Loop</a> or Mastering Emacs's <a href="https://masteringemacs.org/article/complete-guide-mastering-eshell">Mastering Eshell</a> comments for a reminder. It finally dawned on me. I don't need to internalize this eshell syntax. I have <a href="https://github.com/joaotavora/YASnippet">YASnippet</a> available like any other buffer. I could just type &quot;for&quot; and let YASnippet do the rest for me.</p>
<p><img src="https://xenodium.github.io/images/yasnippet-in-emacs-eshell/yas-for.gif" alt=""></p>
<p>All I need is a tiny YASnippet:</p>
<pre><code class="language-YASnippet">#name : Eshell for loop
#key : for
# --
for f in ${1:*} { ${2:echo} &quot;$f&quot;; $3} $0
</code></pre>
<p>Want a gentle and succinct YASnippet intro? Check out Jake's <a href="https://www.reddit.com/r/emacs/comments/o282fq/YASnippet_snippetstemplating_introductiontutorial/">YASnippet introduction video</a>.</p>
<p>If you're a <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Shell-Mode.html">shell-mode</a> user, YASnippet would have you covered in your favorite shell. The expansion snippet can be modified to a Bash equivalent, giving us the same benefit. We type &quot;for&quot; and let YASnippet expand and hop over arguments. Here's a Bash equivalent emphasizing the hopping a little more:</p>
<p><img src="https://xenodium.github.io/images/yasnippet-in-emacs-eshell/yasbash.gif" alt=""></p>
<pre><code class="language-YASnippet">#name : bash for loop
#key : for
# --
for f in ${1:*}; do ${2:echo} $f; done $0
</code></pre>
<p>ps. Looks like <a href="https://github.com/akermu/emacs-libvterm">vterm</a>, <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Term-Mode.html">term</a>, or <a href="https://www.emacswiki.org/emacs/AnsiTerm">ansi-term</a> work too. See Shane Mulligan's post: <a href="https://mullikine.github.io/posts/use-yasnippets-in-term/">Use YASnippets in term and vterm in emacs</a>.</p>
