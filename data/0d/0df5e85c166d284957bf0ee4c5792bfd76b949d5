<p>When thinking about working with a friend on a small project, we instinctively create a repository on GitHub or GitLab. This practice, or reflex, is relatively modern. But although it may seem strange, you can collaborate on projects without using Git hosting services. Though it may seem unthinkable, these services didn't exist before, and software was developed with equal or better quality.</p>
<p>The workflow consists of connecting git with your email, or sending patches to the maintainer's inbox. Git is designed to support this workflow natively, it contains a set of tools to facilitate each of the steps. In fact, it's used today by very important projects like the Linux kernel, QEMU, GNU, or Git itself. Don't think for a moment that it's an obsolete or outdated method.</p>
<p>Its advantages are several:</p>
<ul>
<li>You don't depend on a specific platform (GitHub, GitLab, etc).</li>
<li>A copy of discussions and patches between developers is kept in public mailing lists.</li>
<li>You can review code offline (if you've downloaded the emails).</li>
<li>It's a very quick workflow to master.</li>
</ul>
<p>But of course, it also has its downsides:</p>
<ul>
<li>It's not as visual as using a Git hosting service (GitHub, GitLab, etc).</li>
<li>It requires knowing some extra Git tools.</li>
<li>The maintainer must manage patches and reviews by email.</li>
<li>If you want it to be open, you need a public mailing list.</li>
<li>It's not as simple for beginners.</li>
</ul>
<p>And with that said, prepare your coffee because we're going into action.</p>
<h1 id="blog-single-content__title--initial-setup" class="blog-single__content-title">Initial Setup</h1>
<p>Before jumping into sending patches, you need to prepare your environment.</p>
<h2 id="blog-single-content__title--1-configure-your-identity" class="blog-single__content-title">1. Configure your identity</h2>
<p>First, make sure Git knows your name and email. This data will appear in your commits and in the headers of the patches you send. It's basic even if you don't want to send patches by email.</p>
<pre class="highlight"><code class="language-sh">git config --global user.name "Your Name"
git config --global user.email "youremail@example.com"</code></pre>
<h2 id="blog-single-content__title--2-install-git-send-email" class="blog-single__content-title">2. Install git-send-email</h2>
<p><code>git-send-email</code> is the tool you'll use to send patches directly from the terminal. It's optional since you can use your email client, but it's much more convenient and avoids formatting errors.</p>
<p>It doesn't come installed by default on all distributions, so you'll need to install it manually:</p>
<pre class="highlight"><code class="language-sh"># Debian/Ubuntu
sudo apt install git-email

# Fedora
sudo dnf install git-email

# Arch
sudo pacman -S git-send-email</code></pre>
<p>If you use macOS or Windows, you may or may not already have it included with Git. I'll let you investigate.</p>
<h2 id="blog-single-content__title--3-configure-the-smtp-server" class="blog-single__content-title">3. Configure the SMTP server</h2>
<p>To send emails you need to connect to an SMTP server. Here I show you typical Gmail configurations, but you'll need to adapt them to your provider if you use another one.</p>
<p>Gmail:
<pre class="highlight"><code class="language-sh">git config --global sendemail.smtpserver smtp.gmail.com
git config --global sendemail.smtpserverport 587
git config --global sendemail.smtpencryption tls
git config --global sendemail.smtpuser youremail@gmail.com</code></pre></p>
<blockquote>
<p>Note that Gmail requires an <a href="https://myaccount.google.com/apppasswords">app password</a>. Don't use your normal password, generate a specific one for this tool.</p>
</blockquote>
<p>With this, you're all set to send patches by email. Let's send our first patch.</p>
<h1 id="blog-single-content__title--creating-and-sending-a-patch" class="blog-single__content-title">Creating and Sending a Patch</h1>
<p>Now comes the interesting part: making changes to the code and sending them as a patch.</p>
<h2 id="blog-single-content__title--1-prepare-your-environment" class="blog-single__content-title">1. Prepare your environment</h2>
<p>Clone the repository of the project you want to contribute to and create a new branch for your work:</p>
<pre class="highlight"><code class="language-sh">git clone https://example.com/repo.git
cd repo
git switch -c my-fix</code></pre>
<h2 id="blog-single-content__title--2-make-changes-and-create-a-commit" class="blog-single__content-title">2. Make changes and create a commit</h2>
<p>Modify the files you need.</p>
<p>Use the <code>-s</code> flag when making the commit: this automatically adds the <code>Signed-off-by</code> line with your name, which is mandatory in many projects as a way to accept the license.</p>
<blockquote>
<p><code>Signed-off-by</code> is not a cryptographic signature, but a declaration that you accept the project's terms. It will include your name and email address as you have it configured in Git.</p>
</blockquote>
<pre class="highlight"><code class="language-sh">git add modified-file.py
git commit -s</code></pre>
<p>It's widespread that messages follow a specific structure, although it's completely optional. The typical structure is: brief summary on the first line, blank line, detailed explanation in several lines, another blank line, and finally <code>Signed-off-by</code> (which is added automatically with the <code>-s</code> flag).</p>
<pre class="highlight"><code>component: brief description (max ~50 characters)

Detailed explanation of the change. Here you can expand
explaining the reason, context, and any relevant details.

Signed-off-by: Your Name &lt;youremail@example.com&gt;</code></pre>
<h2 id="blog-single-content__title--3-generate-the-patch" class="blog-single__content-title">3. Generate the patch</h2>
<p>Now comes the technical part: converting your commits into patch files. Git includes the <code>format-patch</code> command that does exactly that.</p>
<pre class="highlight"><code class="language-sh">git format-patch -1 HEAD          # last commit
git format-patch -3 HEAD          # last 3 commits
git format-patch origin/main      # all commits since main</code></pre>
<p>These commands generate <code>.patch</code> files in your current directory. Each one contains a commit.</p>
<h2 id="blog-single-content__title--4-send-your-patch" class="blog-single__content-title">4. Send your patch</h2>
<p>You have 2 options, depending on your preference.</p>
<h3 id="blog-single-content__title--option-a-git-send-email" class="blog-single__content-title">Option A: git send-email</h3>
<p>If you've followed the previous steps, configuring git with your email provider's SMTP configuration, you can send them directly with the command:</p>
<pre class="highlight"><code class="language-sh">git send-email --to=maintainer@project.org *.patch</code></pre>
<p>It takes care of everything. It's the most recommended way since it will prevent your email client from messing up the format.</p>
<p>When your contribution requires several related commits, you can send them as a series. Git facilitates this with the <code>--cover-letter</code> option, which generates an introductory email where you explain the set of changes.</p>
<pre class="highlight"><code class="language-sh">git format-patch --cover-letter origin/main</code></pre>
<p>This generates several files: <code>0000-cover-letter.patch</code> and one for each commit. Edit the cover letter file to explain what your patch series does and why it's necessary.</p>
<p>Then send everything together:</p>
<pre class="highlight"><code class="language-sh">git send-email --to=maintainer@project.org *.patch</code></pre>
<p>Reviewers will receive your cover letter first and then each patch as a response to that thread. It keeps the conversation organized.</p>
<h3 id="blog-single-content__title--option-b-email-client" class="blog-single__content-title">Option B: Email client</h3>
<p>If for some reason you can't use <code>send-email</code>, you can do it manually:</p>
<ol>
<li>Generate the patch: <code>git format-patch -1 HEAD --stdout &gt; patch.txt</code></li>
<li>Copy the content into a new email</li>
<li>Send it in plain text, never in HTML</li>
</ol>
<blockquote>
<p>⚠️ Many clients modify whitespace and break the patch format.</p>
</blockquote>
<h1 id="blog-single-content__title--revised-versions" class="blog-single__content-title">Revised Versions</h1>
<p>There's a good chance the maintainer will ask you for changes. It's part of the process!</p>
<p>When you need to send a corrected version, follow these steps:</p>
<h2 id="blog-single-content__title--1-modify-your-code" class="blog-single__content-title">1. Modify your code</h2>
<p>Make the changes you need to make and add them to staging.</p>
<pre class="highlight"><code class="language-sh">git add file.lisp</code></pre>
<h2 id="blog-single-content__title--2-modify-the-previous-commit" class="blog-single__content-title">2. Modify the previous commit</h2>
<p>To modify the previous commit, run:</p>
<pre class="highlight"><code class="language-sh">git commit --amend</code></pre>
<p>It will open the editor to modify the message.</p>
<p>If you don't want to do that, preserving the current message:</p>
<pre class="highlight"><code class="language-sh">git commit --amend --no-edit</code></pre>
<h2 id="blog-single-content__title--3-create-a-new-version-of-the-patch" class="blog-single__content-title">3. Create a new version of the patch</h2>
<p>We'll create version 2 of the previous commit.</p>
<pre class="highlight"><code class="language-sh">git format-patch -v2 -1 HEAD</code></pre>
<h2 id="blog-single-content__title--4-send-the-modified-patch" class="blog-single__content-title">4. Send the modified patch</h2>
<p>Everything is ready to send it, although we'll add some modifications.</p>
<pre class="highlight"><code class="language-sh">git send-email \
  --to=maintainer@project.org \
  --in-reply-to="&lt;original-message-id&gt;" \
  v2-*.patch</code></pre>
<p>The <code>-v2</code> flag adds a <code>[PATCH v2]</code> prefix to the email subject, making it clear it's a new version. And the <code>--in-reply-to</code> parameter makes your email appear as a response to the original thread, keeping all the context together.</p>
<p>Now you just have to wait.</p>
<h1 id="blog-single-content__title--conclusions" class="blog-single__content-title">Conclusions</h1>
<p>Of course, it has a learning curve. Configuring SMTP, understanding <code>format-patch</code>, remembering to add <code>-s</code> in commits. But once you master it, it's as natural as using git locally. You don't depend on any platform or free tiers that dance to the whims of the wind. Email has been around since the 70s and will still be here when trendy platforms change. A workflow that allows thousands of developers to collaborate without saturating any centralized server. It's no coincidence that projects as important as the Linux kernel still use it.</p>
<p>I hope this small introduction helps you collaborate on Opensource projects that would otherwise seem unreachable.</p>