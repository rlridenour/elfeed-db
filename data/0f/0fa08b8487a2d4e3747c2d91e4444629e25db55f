<p>I&rsquo;ve noticed that my Emacs blog is now almost 2 years old!</p>
<figure><img src="https://emacs.dyerdwelling.family/ox-hugo/20240713203037-emacs--Local-ELPA-MELPA-ORG-Revisited-2yr-Anniversary.jpg" width="100%">
</figure>

<p>Is there something absurd about writing about a text editor in that very text editor for such a long period? - I think the answer to this is clearly&hellip;, no!</p>
<p>My first post was on 2022-07-15 and this will be blog number 97.</p>
<p>And yes before you ask, how do I know this to be true?, well I found out the Emacs way!</p>
<p>I recorded its inception date in org-agenda, so I saw this date creep up this week :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-org" data-lang="org"><span style="display:flex;"><span><span style="color:#75715e">**</span> blog anni<span style="font-style:italic"> :james:web:</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#e6db74">2022-07-15 .+1y</span>&gt;
</span></span></code></pre></div><p>The date of my first post is in an org drawer in my single Emacs blog org file:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-org" data-lang="org"><span style="display:flex;"><span>:EXPORT_HUGO_LASTMOD: 2022-07-15
</span></span></code></pre></div><p>and the blog number?, well, I org-copy-visible&rsquo;d my org blog file of all the top level org headers, pasted into the <strong>scratch</strong> buffer, flush-line&rsquo;d out all the TODO entries, then finally entered (display-line-numbers-mode) to get the number of lines (I suspect there might be an easier way to do this ðŸ˜€)</p>
<p>I also wrote this post ahead of time and to remind me when to post I created an org schedule entry as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-org" data-lang="org"><span style="display:flex;"><span><span style="color:#75715e">**</span><span style="color:#960050;background-color:#1e0010"> TODO</span> post 2 yr emacs blog post
</span></span><span style="display:flex;"><span><span style="color:#75715e">SCHEDULED: </span><span style="color:#75715e">&lt;2024-07-15 Mon&gt;</span>
</span></span></code></pre></div><p>and appeared in the agenda as :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-org" data-lang="org"><span style="display:flex;"><span>Monday     15 July 2024 W29
</span></span><span style="display:flex;"><span>  aab--calendar:Scheduled:  TODO post 2 yr emacs blog post
</span></span></code></pre></div><p>and in (cfw:open-org-calendar) as :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-org" data-lang="org"><span style="display:flex;"><span><span style="color:#f92672">+-------------------------+</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">| 15 (3)                  |</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">| TODO post 2 yr emacs    |</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">| blog anni               |</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">|                         |</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">|                         |</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">|                         |</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+-------------------------+</span>
</span></span></code></pre></div><p>Living an Emacs life and especially partially through org means that any and all information can be easily extracted let alone initially logged, the basic text format is so simple and uniform that all the data items above were pretty much extracted using the same mechanism through Emacs.</p>
<p>Anyway enough of all that, in celebration of being able to maintain some level of blogging discipline for 2 years, I decided to revisit my very first post, which was on how to create an offline version of the major Emacs repositories, namely:</p>
<ul>
<li>ELPA</li>
<li>MELPA</li>
<li>ORG</li>
</ul>
<p>As it turns out this post is still quite relevant as from time to time, I need an offline version for an Emacs setup without an internet connection.</p>
<p>So lets re-post!, just for fun!, including the bash script that I still use:</p>
<hr>
<blockquote>
<p>Steps to locally download emacs packages for offline installation.</p>
</blockquote>
<h2 id="local-elpa-melpa-org">Local ELPA MELPA ORG</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#! /bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>cd ~
</span></span><span style="display:flex;"><span>mkdir -p emacs-pkgs/melpa
</span></span><span style="display:flex;"><span>mkdir -p emacs-pkgs/elpa
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>echo
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;updating MELPA...&#34;</span>
</span></span><span style="display:flex;"><span>echo
</span></span><span style="display:flex;"><span>rsync -avz --delete --progress rsync://melpa.org/packages/ ~/emacs-pkgs/melpa/.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>echo
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;updating ELPA...&#34;</span>
</span></span><span style="display:flex;"><span>echo
</span></span><span style="display:flex;"><span>rsync -avz --delete --progress elpa.gnu.org::elpa/. ~/emacs-pkgs/elpa
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># org (currently no rsync support)</span>
</span></span><span style="display:flex;"><span>echo
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;updating ORG...&#34;</span>
</span></span><span style="display:flex;"><span>echo
</span></span><span style="display:flex;"><span>cd ~/emacs-pkgs
</span></span><span style="display:flex;"><span>git clone https://git.savannah.gnu.org/git/emacs/org-mode.git
</span></span><span style="display:flex;"><span><span style="color:#75715e"># wget -r -l1 -nc -np https://orgmode.org/elpa</span>
</span></span></code></pre></div><p>I then copy the emacs-pkgs directory to the offline target machine and change the default package manager archives to point to these packages.</p>
<p>Modify <strong>.emacs</strong> in the following manner commenting out the online package communication:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span><span style="color:#75715e">;; (setq package-archives &#39;((&#34;melpa&#34; . &#34;https://melpa.org/packages/&#34;)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;;                          (&#34;org&#34; . &#34;https://orgmode.org/elpa/&#34;)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;;                          (&#34;elpa&#34; . &#34;https://elpa.gnu.org/packages/&#34;)))</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(setq package-archives <span style="color:#f92672">&#39;</span>((<span style="color:#e6db74">&#34;melpa&#34;</span><span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;~/emacs-pkgs/melpa&#34;</span>)
</span></span><span style="display:flex;"><span>                          (<span style="color:#e6db74">&#34;org&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;~/emacs-pkgs/elpa&#34;</span>)
</span></span><span style="display:flex;"><span>                          (<span style="color:#e6db74">&#34;elpa&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;~/emacs-pkgs/org-mode/lisp&#34;</span>)))
</span></span></code></pre></div>