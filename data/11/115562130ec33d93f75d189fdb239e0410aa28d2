<p>Hi everyone.</p>
<p>Here is my notes about <code>restclient</code> that can help you to forget about <code>Postman</code> (which is cool as well).</p>
<h2 id="define-the-action">Define the action</h2>
<p>Here is the example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># get all people from star wars</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#</span>
</span></span><span style="display:flex;"><span>GET https://swapi.co/api/people
</span></span></code></pre></div><br/>
<br/>
<p>To define an action you need to start with a comment.
<img src="https://codelearn.me/assets/img/hm.webp"/></p>
<p>Then you need to set method (GET, POST, PUT and other) and the url of course.</p>
<p>Now you can execute the query. Press <code>C-c C-c</code> (CTRL+c twice) and new buffer (<code>*HTTP Response*</code>) with the result will be opened.</p>
<p><a target="_blank" href="https://codelearn.me/assets/img/restclient-output1.png"><img alt="restclient output" src="https://codelearn.me/assets/img/restclient-output1.png" width="550px"/></a></p>
<p>At the bottom of that buffer you can see response headers:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>// GET https://swapi.co/api/people
</span></span><span style="display:flex;"><span>// HTTP/1.1 <span style="color:#ae81ff">200</span> OK
</span></span><span style="display:flex;"><span>// Date: Sun, <span style="color:#ae81ff">22</span> Oct <span style="color:#ae81ff">2017</span> 19:03:17 GMT
</span></span><span style="display:flex;"><span>// Content-Type: application/json
</span></span><span style="display:flex;"><span>// Transfer-Encoding: chunked
</span></span><span style="display:flex;"><span>// Connection: keep-alive
</span></span><span style="display:flex;"><span>// Allow: GET, HEAD, OPTIONS
</span></span><span style="display:flex;"><span>// Vary: Accept, Cookie
</span></span><span style="display:flex;"><span>// X-Frame-Options: SAMEORIGIN
</span></span><span style="display:flex;"><span>// Etag: <span style="color:#e6db74">&#34;d080408a4d656729b0f52a6feb0783ca&#34;</span>
</span></span><span style="display:flex;"><span>// Via: 1.1 vegur
</span></span><span style="display:flex;"><span>// Server: cloudflare-nginx
</span></span><span style="display:flex;"><span>// CF-RAY: 3b1eb73cda7d63af-FRA
</span></span><span style="display:flex;"><span>// Request duration: 1.663359s
</span></span></code></pre></div><br/>
<p>Pretty simple, ha?</p>
<h2 id="set-headers">Set headers</h2>
<p>To define headers you need to write them just below the URL definition:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># get all people from star wars</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#</span>
</span></span><span style="display:flex;"><span>GET https://swapi.co/api/people
</span></span><span style="display:flex;"><span>User-Agent: Emacs Restclient
</span></span><span style="display:flex;"><span>Content-Type: application/json
</span></span></code></pre></div><br/>
By pressing `C-c C-c` the headers will be attached to the request.
<h2 id="post-payload">Post payload</h2>
<p>If you want to send data to the server you can define it right after empty line of the URL (or headers if exist) definition.</p>
<p>Here is an example from <code>restclient.el</code> repo.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Post works too, entity just goes after an empty line. Same is for PUT.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#</span>
</span></span><span style="display:flex;"><span>POST https://jira.atlassian.com/rest/api/2/search
</span></span><span style="display:flex;"><span>Content-Type: application/json
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span> <span style="color:#e6db74">&#34;jql&#34;</span>: <span style="color:#e6db74">&#34;project = HSP&#34;</span>,
</span></span><span style="display:flex;"><span> <span style="color:#e6db74">&#34;startAt&#34;</span>: 0,
</span></span><span style="display:flex;"><span> <span style="color:#e6db74">&#34;maxResults&#34;</span>: 15,
</span></span><span style="display:flex;"><span> <span style="color:#e6db74">&#34;fields&#34;</span>: <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span> <span style="color:#e6db74">&#34;summary&#34;</span>,
</span></span><span style="display:flex;"><span> <span style="color:#e6db74">&#34;status&#34;</span>,
</span></span><span style="display:flex;"><span> <span style="color:#e6db74">&#34;assignee&#34;</span>
</span></span><span style="display:flex;"><span> <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><br/>
<h2 id="what-if-i-want-to-post-a-file">What if I want to post a file?</h2>
<p>It&rsquo;s also possible and it&rsquo;s pretty easy</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># post a file</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#</span>
</span></span><span style="display:flex;"><span>POST http://httpbin.org/post
</span></span><span style="display:flex;"><span>Content-Type: text/plain
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt; /etc/hosts
</span></span></code></pre></div><br/>
<h2 id="you-can-even-define-variables">You can even define variables</h2>
<p>Variables are useful to define the host or test user credentials.</p>
<p>Here how you can define it.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>:myvar <span style="color:#f92672">=</span> https://google.com
</span></span></code></pre></div><br/>
<p>You can also use elisp to set a value</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>:myvar :<span style="color:#f92672">=</span> <span style="color:#f92672">(</span>some <span style="color:#f92672">(</span>artbitrary <span style="color:#960050;background-color:#1e0010">&#39;</span>elisp<span style="color:#f92672">)</span>
</span></span></code></pre></div><br/>
<p>use <code>:variable-name</code> syntax to get the value of variable:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># use a variable</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#</span>
</span></span><span style="display:flex;"><span>GET :myvar/imghp
</span></span></code></pre></div><br/>
<p><a target="_blank" href="https://github.com/pashky/restclient.el">Restclient.el</a> is a great package you definitely should try.
It allows you quickly explore or test the API without leaving the Emacs.</p>
<img src="https://codelearn.me/assets/img/thumb-up.gif"/>
<p>Try it &lt;3</p>