
<p>I&rsquo;ve been developing a Fish function called <code class="language-plaintext highlighter-rouge">tween</code>. It&rsquo;s a simple, flexible utility for extracting ranges of lines from files or STDIN input, and it&rsquo;s flexible enough to handle just about any scenario you can throw at it, from numeric ranges, array style position/length ranges, or even string matching with regex capabilities.</p>

<p>You can find the source code in my <a href="https://github.com/ttscoff/fish_files">Fish functions repository</a>, specifically at <a href="https://github.com/ttscoff/fish_files/blob/master/functions/tween.fish">tween.fish</a>.</p>

<h2 id="what-it-does">What it does</h2>

<p><code class="language-plaintext highlighter-rouge">tween</code> displays lines between a start and end point. The start and end can be line numbers, string matches, or regex patterns. It supports multiple ranges, relative offsets, and even works with piped input.</p>

<h2 id="basic-usage">Basic usage</h2>

<p>The simplest form is specifying line numbers:</p>

<pre><code class="language-fish">tween file.txt 10 20
</code></pre>

<p>This displays lines 10 through 20 (inclusive). You can also use a dashed range format:</p>

<pre><code class="language-fish">tween file.txt 10-20
</code></pre>

<p>And here&rsquo;s the nice part: arguments can be in any order. Both of these work the same way:</p>

<pre><code class="language-fish">tween file.txt 10 20
tween 10 20 file.txt
</code></pre>

<p>If you only specify a single line number, <code class="language-plaintext highlighter-rouge">tween</code> will display from that line to the end of the file:</p>

<pre><code class="language-fish">tween file.txt 50
</code></pre>

<p>This shows lines 50 through the end of the file.</p>

<h2 id="multiple-ranges">Multiple ranges</h2>

<p>Need to extract several sections? Just separate them with commas:</p>

<pre><code class="language-fish">tween file.txt 10-20,30-40
tween file.txt 10 20, 30 40
</code></pre>

<p>Both formats work, so use whichever feels more natural.</p>

<h2 id="relative-offsets">Relative offsets</h2>

<p>Sometimes you know where you want to start but need to go a certain number of lines forward. Use <code class="language-plaintext highlighter-rouge">+N</code> for relative offsets:</p>

<pre><code class="language-fish">tween file.txt 10 +20
</code></pre>

<p>This displays lines 10 through 30 (10 plus 20 lines). You can also count from the end using <code class="language-plaintext highlighter-rouge">-N</code>:</p>

<pre><code class="language-fish">tween file.txt 50 -10
</code></pre>

<p>This shows lines 50 to 10 lines from the end of the file. There&rsquo;s a special case: <code class="language-plaintext highlighter-rouge">-1</code> means the end of the file (the last line):</p>

<pre><code class="language-fish">tween file.txt 50 -1
</code></pre>

<p>This displays lines 50 through the end of the file. Other negative numbers like <code class="language-plaintext highlighter-rouge">-2</code>, <code class="language-plaintext highlighter-rouge">-3</code>, etc. still mean &ldquo;N lines from the end&rdquo; (second-to-last, third-to-last, etc.).</p>

<h2 id="string-matching">String matching</h2>

<p>Instead of line numbers, you can match on strings. This is super useful when you know the content but not the exact line:</p>

<pre><code class="language-fish">tween file.txt 'START' +20
</code></pre>

<p>This finds the line containing &ldquo;START&rdquo; and displays it plus the next 20 lines. You can also use string matching for both start and end:</p>

<pre><code class="language-fish">tween file.txt 50-'END'
</code></pre>

<p>This shows lines 50 through the line containing &ldquo;END&rdquo;.</p>

<h2 id="regex-patterns">Regex patterns</h2>

<p>For more complex matching, use regex patterns wrapped in slashes:</p>

<pre><code class="language-fish">tween file.txt /START/ +20
</code></pre>

<p>This matches the regex pattern &ldquo;START&rdquo; and displays that line plus 20 more. You can also use the <code class="language-plaintext highlighter-rouge">-r</code> or <code class="language-plaintext highlighter-rouge">--regex</code> flag to treat all string arguments as regex:</p>

<pre><code class="language-fish">tween -r file.txt 'foo' 'bar'
</code></pre>

<p>Both patterns are treated as regex when using the <code class="language-plaintext highlighter-rouge">-r</code> flag.</p>

<h2 id="exclusive-mode">Exclusive mode</h2>

<p>Sometimes you want the lines <em>between</em> two markers but not the markers themselves. Use <code class="language-plaintext highlighter-rouge">-e</code> or <code class="language-plaintext highlighter-rouge">--exclusive</code>:</p>

<pre><code class="language-fish">tween -e file.txt 'BEGIN' 'END'
</code></pre>

<p>This displays all lines between (but not including) the lines containing &ldquo;BEGIN&rdquo; and &ldquo;END&rdquo;.</p>

<h2 id="syntax-highlighting-with-bat">Syntax highlighting with bat</h2>

<p>If you have <code class="language-plaintext highlighter-rouge">bat</code> installed, you can use it for syntax highlighting with the <code class="language-plaintext highlighter-rouge">-b</code> or <code class="language-plaintext highlighter-rouge">--bat</code> flag:</p>

<pre><code class="language-fish">tween -b file.txt 10-20
</code></pre>

<p>This displays the range with syntax highlighting, which is especially nice when viewing code.</p>

<h2 id="piped-input">Piped input</h2>

<p><code class="language-plaintext highlighter-rouge">tween</code> works with piped input too. Just use <code class="language-plaintext highlighter-rouge">-</code> as the file argument:</p>

<pre><code class="language-fish">cat file.txt | tween 10-20,30-40 -
</code></pre>

<p>This is handy when you&rsquo;re already working with a pipeline.</p>

<h2 id="options-summary">Options summary</h2>

<ul>
  <li><code class="language-plaintext highlighter-rouge">-e, --exclusive</code> - Exclude the start and end lines from output</li>
  <li><code class="language-plaintext highlighter-rouge">-b, --bat</code> - Use bat instead of sed for syntax highlighting</li>
  <li><code class="language-plaintext highlighter-rouge">-r, --regex</code> - Treat all string arguments as regular expressions</li>
  <li><code class="language-plaintext highlighter-rouge">-h, --help</code> - Show help message</li>
</ul>

<p>The function is flexible enough to handle most text extraction tasks, and the ability to mix line numbers, strings, and regex makes it incredibly versatile. Give it a try and see how it fits into your workflow!</p>


<p>Like or share this post <a title="This post on Mastodon" target="_blank" href="https://hachyderm.io/users/ttscoff/statuses/115939853563229265">on Mastodon</a>, <a title="Share on Bluesky" target="_blank" href="https://bsky.app/intent/compose?text=Tween%3A+Fish+function+for+outputting+ranges+of+text%0A%0Ahttps%3A%2F%2Fbrettterpstra.com%2F2026%2F01%2F22%2Ftween-fish-function-for-outputting-ranges-of-text%2F">Bluesky</a>, or <a class="twitter" target="_blank" rel="nofollow" href="https://twitter.com/intent/tweet?original_referer=https%3A%2F%2Fbrettterpstra.com%2F2026%2F01%2F22%2Ftween-fish-function-for-outputting-ranges-of-text%2F&text=Tween%3A+Fish+function+for+outputting+ranges+of+text&url=https%3A%2F%2Fbrettterpstra.com%2F2026%2F01%2F22%2Ftween-fish-function-for-outputting-ranges-of-text%2F&via=ttscoff" title="Tweet this post">Twitter</a>.</p>
<hr style="margin:40px 0">

<p>BrettTerpstra.com is supported by readers like you. <a href="https://brettterpstra.com/support/">Click here if you'd
        like to help out.</a></p>
<p>Find Brett on <a rel="me" href="https://hachyderm.io/@ttscoff">Mastodon</a>, <a
        href="https://bsky.app/profile/ttscoff.bsky.social">Bluesky</a>, <a
        href="https://github.com/ttscoff">GitHub</a>, and <a href="https://brettterpstra.com/elsewhere">everywhere
        else</a>.</p><img src="https://brett.trpstra.net/link/535/17260953.gif" height="1" width="1"/>