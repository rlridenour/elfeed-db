 
          <p>What a nightmare. Yet another reason (previously the <a href="/post/2022/10/my-desktop-is-dull-thanks-to-macos">never-ending flow of bloat</a>) to switch back from MacOS to a proper *Nix environment. I thought installing an old editor would be as simple as issuing a single &ldquo;fetch me that package, will you&rdquo; command. But I was so very wrong.</p>
<p>Expect more of these &ldquo;Emacs Journey&rdquo; posts in-between the regular ones. Apologies if they&rsquo;re completely useless to you: I need to have this on record.</p>
<p>First: there are multiple Emacs-es out there, which one do you want? There&rsquo;s <a href="https://aquamacs.org/">Aquamacs</a>, the vanilla Emacs (<code>brew install emacs</code>) which you should avoid if you want Doom or Spacemacs, and a few more that are listed in the <a href="https://github.com/doomemacs/doomemacs/blob/master/docs/getting_started.org#with-homebrew">Doom Emacs Getting Started Guide</a>. <code>emacs-mac</code> refused to compile and the official package is not on v30 yet. Others do not provide <code>Emacs.app</code>&mdash;confusingly, there&rsquo;s two binaries: the <code>emacs</code> you run <em>inside</em> a terminal as a non-GUI editor, and the GUI one. Ultimately, this worked (and natively compiled):</p>
<pre tabindex="0"><code>brew tap d12frosted/emacs-plus
brew install emacs-plus
ln -s /opt/homebrew/opt/emacs-plus/Emacs.app /Applications/Emacs.app
</code></pre><p>But then you&rsquo;re stuck with a symlink as an app which Alfred refuses to recognize. On top of that, the Pro Way (TM) to start Emacs is to spawn clients and have a daemon running in the background. Since I want to experiment and make use of the <code>--init-directory</code> feature that enables me to load different configs, I created a custom launch agent for this called <code>com.brainbaking.bakemacs.plist</code> (my Emacs config collection is to be called <a href="https://codeberg.org/wouterg/bakemacs">bakemacs</a>):</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#5e81ac;font-style:italic">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#5e81ac;font-style:italic">&lt;!DOCTYPE plist PUBLIC &#34;-//Apple//DTD PLIST 1.0//EN&#34; &#34;http://www.apple.com/DTDs/PropertyList-1.0.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1">&lt;plist</span> <span style="color:#8fbcbb">version=</span><span style="color:#a3be8c">&#34;1.0&#34;</span><span style="color:#81a1c1">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1">&lt;dict&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#81a1c1">&lt;key&gt;</span>Label<span style="color:#81a1c1">&lt;/key&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#81a1c1">&lt;string&gt;</span>com.brainbaking.bakemacs<span style="color:#81a1c1">&lt;/string&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#81a1c1">&lt;key&gt;</span>ProgramArguments<span style="color:#81a1c1">&lt;/key&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#81a1c1">&lt;array&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#81a1c1">&lt;string&gt;</span>/opt/homebrew/Cellar/emacs-plus@30/30.2/Emacs.app/Contents/MacOS/Emacs<span style="color:#81a1c1">&lt;/string&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#81a1c1">&lt;string&gt;</span>--fg-daemon<span style="color:#81a1c1">&lt;/string&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#81a1c1">&lt;string&gt;</span>--init-directory=/Users/myuser/development/bakemacs<span style="color:#81a1c1">&lt;/string&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#81a1c1">&lt;/array&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#81a1c1">&lt;key&gt;</span>RunAtLoad<span style="color:#81a1c1">&lt;/key&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#81a1c1">&lt;true/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#81a1c1">&lt;key&gt;</span>KeepAlive<span style="color:#81a1c1">&lt;/key&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#81a1c1">&lt;true/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#81a1c1">&lt;key&gt;</span>StandardErrorPath<span style="color:#81a1c1">&lt;/key&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#81a1c1">&lt;string&gt;</span>/tmp/bakemacs.stderr.log<span style="color:#81a1c1">&lt;/string&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#81a1c1">&lt;key&gt;</span>StandardOutPath<span style="color:#81a1c1">&lt;/key&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#81a1c1">&lt;string&gt;</span>/tmp/bakemacs.stdout.log<span style="color:#81a1c1">&lt;/string&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1">&lt;/dict&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1">&lt;/plist&gt;</span>
</span></span></code></pre></div><p><code>launchctl load</code> that baby and off we go. The second part, starting a client, is a shell script that Automator wrapped into a &ldquo;native MacOS Application&rdquo; to fool Alfred et al.:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#81a1c1">export</span> ALTERNATE_EDITOR<span style="color:#81a1c1">=</span><span style="color:#a3be8c">&#34;/opt/homebrew/Cellar/emacs-plus@30/30.2/Emacs.app/Contents/MacOS/Emacs --daemon --init-directory=/Users/myuser/development/bakemacs&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>/opt/homebrew/bin/emacsclient -c -n -a <span style="color:#a3be8c">&#34;&#34;</span> <span style="color:#a3be8c">&#34;</span>$@<span style="color:#a3be8c">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>osascript -e <span style="color:#a3be8c">&#39;tell application &#34;Emacs&#34; to activate&#39;</span>
</span></span></code></pre></div><p>I learned the hard way that you can make use of <code>ALTERNATE_EDITOR</code> in case the client can&rsquo;t find the daemon in case something killed it. Or someone. Yes, you. Me? Stop pressing <code>⌘+Q</code>! This sends a terminate command from the client to the daemon who owns it and kills that one as well. Just delete the frame instead. Since I can&rsquo;t remember all that and the Q pressing is an old habit that Dies Hard (TM), just rewire the key:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lisp" data-lang="lisp"><span style="display:flex;"><span><span style="color:#eceff4">(</span>global-set-key <span style="color:#eceff4">(</span>kbd <span style="color:#a3be8c">&#34;s-q&#34;</span><span style="color:#eceff4">)</span> <span style="color:#88c0d0">#&#39;</span>delete-frame<span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span><span style="color:#eceff4">(</span>global-set-key <span style="color:#eceff4">(</span>kbd <span style="color:#a3be8c">&#34;s-w&#34;</span><span style="color:#eceff4">)</span> <span style="color:#88c0d0">#&#39;</span>kill-buffer-and-window<span style="color:#eceff4">)</span> <span style="color:#616e87;font-style:italic">;; while we&#39;re at it...</span>
</span></span></code></pre></div><p>And then your spell checker breaks: <code>ispell-call-process</code>: Searching for program: No such file or directory, <code>aspell</code>. Of course a path issue. There are several options here, I went with Yet Another Package that spawns a shell and steals its <code>$PATH</code> so I can mange it externally:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lisp" data-lang="lisp"><span style="display:flex;"><span><span style="color:#eceff4">(</span><span style="color:#88c0d0">use-package</span> exec-path-from-shell
</span></span><span style="display:flex;"><span>  <span style="color:#a3be8c">:if</span> <span style="color:#eceff4">(</span><span style="color:#88c0d0">eq</span> system-type <span style="color:#a3be8c">&#39;darwin</span><span style="color:#eceff4">)</span> <span style="color:#616e87;font-style:italic">;; only do this once for the daemon</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a3be8c">:ensure</span> <span style="color:#8fbcbb">t</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a3be8c">:config</span>
</span></span><span style="display:flex;"><span>  <span style="color:#eceff4">(</span>exec-path-from-shell-initialize<span style="color:#eceff4">))</span>
</span></span></code></pre></div><p>Are we there yet? No. The application icon is butt-ugly and slightly bigger than the others. Go to <a href="https://macosicons.com/">https://macosicons.com/</a>, search for &ldquo;emacs&rdquo;, get yourself a nice one, press &ldquo;Get Info&rdquo; on your Automator-generated app, replace that icon, replace the one from the Homebrew Cellar as well,  and finally kill more MacOS stuff with fire:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>sudo rm -rf /Library/Caches/com.apple.iconservices.store
</span></span><span style="display:flex;"><span>killall Dock
</span></span></code></pre></div><p>Some Emacs builds feature the icon with Homebrew build flags but this doesn&rsquo;t fix our requirement to use <code>emacsclient</code>, not <code>emacs</code>.</p>
<p>Are we there yet? No. Throw in a bunch of smooth sailing scroll commands that make Emacs a bit more trackpad-friendly:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lisp" data-lang="lisp"><span style="display:flex;"><span><span style="color:#eceff4">(</span>pixel-scroll-precision-mode <span style="color:#b48ead">1</span><span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span><span style="color:#eceff4">(</span><span style="color:#81a1c1;font-weight:bold">setq</span> scroll-margin <span style="color:#b48ead">0</span><span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span><span style="color:#eceff4">(</span><span style="color:#81a1c1;font-weight:bold">setq</span> mouse-wheel-progressive-speed <span style="color:#8fbcbb">nil</span><span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span><span style="color:#eceff4">(</span><span style="color:#81a1c1;font-weight:bold">setq</span> pixel-scroll-precision-interpolate-page <span style="color:#8fbcbb">t</span><span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span><span style="color:#eceff4">(</span><span style="color:#81a1c1;font-weight:bold">setq</span> pixel-scroll-precision-large-scroll-height <span style="color:#b48ead">1</span><span style="color:#eceff4">)</span>
</span></span></code></pre></div><p>Are we there yet? That depends. Would you like to keep the icon in the dock? In that case, we&rsquo;re still screwed as Mac thinks the client is another app and convincing it otherwise or using tricks like setting <code>LSUIElement</code> doesn&rsquo;t seem to work. At this point, I got tired of fighting and gave up. For me, <code>⌘+SPACE</code> (Alfred) + <code>b</code> (finding &ldquo;Bakemacs&rdquo;) and jamming enter is good enough. I guess I&rsquo;ll also create an alias called <code>bm</code> to quickly whip up a client from a terminal, although I&rsquo;ve heard you should be running terminals and browsers and Emacs inside Emacs.</p>
<p>Scrolling still is a bit annoying because the point keeps on chugging along, making it for a less than optimally smooth experience. At least I managed to get image zooming via pinch zoom on a trackpad working&mdash;take that, Sublime!</p>


          
          <p>
            Related topics: /
                  <a href="https://brainbaking.com/tags/emacs">emacs</a> /
                  <a href="https://brainbaking.com/tags/macos">macos</a> /</span>
          </p>
          
          <p>
            By <a href="/about">Wouter Groeneveld</a> on 20 December 2025.&nbsp;
            <a href="mailto:hifromrss@brainbaking.com?subject=Re: Getting%20Emacs%20And%20MacOS%20To%20Play%20Nice">Reply via email</a>.
          </p>
          
      