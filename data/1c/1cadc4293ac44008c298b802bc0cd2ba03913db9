<p>Another day, another tool brought to my Emacs fingertips. A while ago, I wrote about easily <a href="https://xenodium.com/copy-from-desktop-to-mobile-via-qr-code/">copying text from desktop to mobile via QR codes</a>. Later on, I brought it under <a href="https://github.com/xenodium/dwim-shell-command">dwim-shell-command</a> as <a href="https://github.com/xenodium/dwim-shell-command/blob/67da65f97d7f5477e19407d25887c23fab31517d/dwim-shell-commands.el#L593">dwim-shell-commands-clipboard-to-qr</a>.</p>
<p>This time around, I needed the opposite: to scan a code from an image file. This is where <a href="https://github.com/mchehab/zbar">zbar</a>'s <code>zbarimg</code> comes in. These days, I'm mostly on macOS, so I installed via <a href="https://brew.sh/">Homebrew</a>:</p>
<pre><code class="language-{.bash">$ brew install zbar
</code></pre>
<p>There's really nothing to the command. You feed it an image, and it outputs the scanned details. Perfect.</p>
<pre><code class="language-{.bash">$ zbarimg path/to/code-128.png
CODE-128:hello world
scanned 1 barcode symbols from 1 images in 0.02 seconds
</code></pre>
<p>The only challenge is my brain. I probably won't remember the name of this wonderful tool next time I need it, so I'll just add it to my <a href="https://github.com/xenodium/dwim-shell-command/blob/main/dwim-shell-commands.el">dwim-shell-commands.el arsenal</a> with a memorable name:</p>
<pre><code class="language-{.commonlisp">(defun dwim-shell-commands-image-scan-code ()
  &quot;Scan any code from image(s).&quot;
  (interactive)
  (dwim-shell-command-on-marked-files
   &quot;Scan code&quot;
   &quot;zbarimg '&lt;&lt;f&gt;&gt;'&quot;
   :utils &quot;zbarimg&quot;))
</code></pre>
<p>In the future, rather than reaching out to <code>zbarimg</code> directly, I'll use my trusty fuzzy search and… voilà!</p>
<p><img src="https://xenodium.github.io/images/emacs-scan-this-qrcode/scan-dired.gif" alt=""></p>
<p>Because <code>dwim-shell-command</code> operates on either <code>dired</code> files or current file, we can also apply our new function when viewing the QR code itself.</p>
<p><img src="https://xenodium.github.io/images/emacs-scan-this-qrcode/scan-image.gif" alt=""></p>
<p><code>dwim-shell-commands-image-scan-code</code> is now <a href="https://github.com/xenodium/dwim-shell-command/commit/85ebcb0a466ddfe48e543d585e16aff7aee8da5e">pushed to dwim-shell-commands.el</a>, the optional package in <a href="https://github.com/xenodium/dwim-shell-command/">dwim-shell-command</a>.</p>
