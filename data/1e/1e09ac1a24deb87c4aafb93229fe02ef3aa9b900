<p><img src="https://cdn3.brettterpstra.com/uploads/2026/01/howzit-conditionals-rb.7520.jpg" width="800" height="226" style="margin:0 auto;clear:both;" class="header" /></p>

<p>One of the things I love about <a href="https://brettterpstra.com//projects/howzit">Howzit</a> is how it bridges the gap between simple task lists and full automation. You can write quick (or complex) scripts right in your build notes and, with the latest updates, they can communicate back to Howzit in useful ways. The latest updates make this even easier with automatically-injected helper scripts and some powerful new directives.</p>

<p>The first thing I did was a major overhaul of the way Topics are
processed. It now &ldquo;streams&rdquo; the topics in a sequential order,
reevaluating conditions and variable substitutions after each
executable directive or block is run. That means that the variables you
pass from inside of run blocks can be used to control if/else logic in
the rest of the topic being run, and it makes variables immediately
available in the next task in the topic. Previously you would have had
to incorporate multiple topics to use the variables effectively. Now
they work the way you would expect in any scripting environment.
(Yes, I&rsquo;ll apply this idea to Bunch soon, too).</p>

<p>Here are couple of features made possible by this change:</p>

<h3 id="automatic-helper-script-injection">Automatic Helper Script Injection</h3>

<p>When you write a run block (those fenced code blocks with <code class="language-plaintext highlighter-rouge">run</code> as the language), Howzit automatically detects your script&rsquo;s interpreter from the hashbang and injects helper functions. No setup required &mdash; just start using them.</p>

<p>Here&rsquo;s what happens behind the scenes: Howzit sees your hashbang, figures out you&rsquo;re using bash (or Ruby, Python, Fish, etc.), and automatically loads the appropriate helper script. The helpers are installed in <code class="language-plaintext highlighter-rouge">~/.config/howzit/support/</code> and made available via the <code class="language-plaintext highlighter-rouge">HOWZIT_SUPPORT_DIR</code> environment variable.</p>

<blockquote class="warn">
  <p>By the way, Howzit now runs out of <code class="language-plaintext highlighter-rouge">~/.config</code> instead of <code class="language-plaintext highlighter-rouge">~/.local/share</code>. It will automatically migrate files as necessary, with confirmation. You can force a migration with <code class="language-plaintext highlighter-rouge">howzit --migrate</code>.</p>
</blockquote>

<p>For bash scripts, you get functions like <code class="language-plaintext highlighter-rouge">log</code> and <code class="language-plaintext highlighter-rouge">set_var</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight fixed"><code><span class="sb">```</span>run Build and Test
<span class="c">#!/bin/bash</span>
log info <span class="s2">"Starting build process..."</span>
set_var BUILD_STATUS <span class="s2">"in_progress"</span>

<span class="c"># Do your build stuff</span>
make build

<span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> <span class="nt">-eq</span> 0 <span class="o">]</span><span class="p">;</span> <span class="k">then
  </span>set_var BUILD_STATUS <span class="s2">"success"</span>
  log info <span class="s2">"Build completed successfully"</span>
<span class="k">else
  </span>set_var BUILD_STATUS <span class="s2">"failed"</span>
  log error <span class="s2">"Build failed"</span>
<span class="k">fi</span>
<span class="sb">```</span></code></pre></div></div>

<p>The same helpers work in Ruby, Python, Fish, and other languagesâ€”just with syntax that matches each language. In Ruby, it&rsquo;s <code class="language-plaintext highlighter-rouge">Howzit.logger.info()</code> and <code class="language-plaintext highlighter-rouge">Howzit.set_var()</code>. In Python, it&rsquo;s <code class="language-plaintext highlighter-rouge">howzit.Howzit.logger.info()</code> and <code class="language-plaintext highlighter-rouge">howzit.Howzit.set_var()</code>. You get the idea.</p>

<h3 id="controlling-log-output-with-log_level">Controlling Log Output with @log_level</h3>

<p>Sometimes you want verbose output during development, but quieter logs in production. The <code class="language-plaintext highlighter-rouge">@log_level</code> directive lets you control which messages from your scripts actually get displayed.</p>

<p>Log levels work like you&rsquo;d expect: <code class="language-plaintext highlighter-rouge">debug</code> shows everything, <code class="language-plaintext highlighter-rouge">info</code> shows informational messages and above, <code class="language-plaintext highlighter-rouge">warn</code> shows warnings and errors, and <code class="language-plaintext highlighter-rouge">error</code> only shows errors. You can change the log level multiple times throughout a topic:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight fixed"><code>@log_level(debug)
@run(./verbose-script.sh) Development build with all messages

@log_level(warn)
@run(./production-script.sh) Production build, warnings only</code></pre></div></div>

<p>This is especially useful when you have scripts that output a lot of debug information. Set the log level to <code class="language-plaintext highlighter-rouge">warn</code> or <code class="language-plaintext highlighter-rouge">error</code> and you&rsquo;ll only see what matters.</p>

<h3 id="setting-variables-with-set_var">Setting Variables with @set_var</h3>

<p>Variables are super useful for making your build notes dynamic. You can set them in scripts using <code class="language-plaintext highlighter-rouge">set_var</code>, but now you can also set them directly in your build notes with the <code class="language-plaintext highlighter-rouge">@set_var</code> directive.</p>

<p>The basic syntax is straightforward:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight fixed"><code>@set_var(VERSION, "1.2.3")
@set_var(STATUS, "success")</code></pre></div></div>

<p>Variables set this way work exactly like variables set in scripts &mdash; they&rsquo;re available as <code class="language-plaintext highlighter-rouge">${VAR}</code> in subsequent tasks and can be used in conditional blocks.</p>

<h3 id="command-substitution">Command Substitution</h3>

<p>Here&rsquo;s where it gets interesting: <code class="language-plaintext highlighter-rouge">@set_var</code> supports command substitution. You can execute a command and use its output as the variable value:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight fixed"><code>@set_var(VERSION, `rake vver`)
@set_var(BUILD_DATE, $(date +%Y-%m-%d))</code></pre></div></div>

<p>Both backticks and <code class="language-plaintext highlighter-rouge">$()</code> syntax work. The command output (with whitespace stripped) becomes your variable value.</p>

<p>Even better, you can reference other variables in your commands:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight fixed"><code>@set_var(PREV_VERSION, "1.2.2")
@set_var(NEXT_VERSION, `echo ${PREV_VERSION} | awk -F. '{print $1"."$2"."$3+1}'`)</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">${PREV_VERSION}</code> gets substituted before the command runs, so you can build up complex values from simpler ones.</p>

<h3 id="putting-it-all-together">Putting It All Together</h3>

<p>Here&rsquo;s a practical example that combines everything:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight fixed"><code>## Deploy

@set_var(VERSION, `git describe --tags`)
@set_var(BRANCH, `git rev-parse --abbrev-ref HEAD`)

@log_level(info)
@if ${BRANCH} == "main"
  @run(./deploy-prod.sh ${VERSION}) Deploy to production
@else
  @run(./deploy-staging.sh ${VERSION}) Deploy to staging
@end

@log_level(debug)
```run Verify Deployment
#!/bin/bash
log debug "Checking deployment status..."
# More verbose logging here
```</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">@set_var</code> directives set up your variables from git commands, <code class="language-plaintext highlighter-rouge">@log_level</code> controls verbosity, and the conditional uses those variables to decide what to deploy. The run block at the end uses the helper functions to send messages back to Howzit.</p>

<h3 id="why-this-matters">Why This Matters</h3>

<p>These features make Howzit build notes feel more like a real scripting environment while keeping the simplicity of markdown, and now scripts within a topic can communicate with each other, and topics can cascade variables between them. You can write complex automation without leaving your build notes file, and the helper scripts mean you don&rsquo;t have to remember communication file formats or write boilerplate code.</p>

<p>The automatic injection means less friction &mdash; just write your script and use the helpers. The <code class="language-plaintext highlighter-rouge">@log_level</code> directive gives you control over noise. And <code class="language-plaintext highlighter-rouge">@set_var</code> with command substitution lets you build dynamic workflows that adapt to your project&rsquo;s current state.</p>

<p>This latest release, along with the recent <a href="https://brettterpstra.com/2026/01/01/howzit-with-conditional-blocks/">conditional blocks features</a>, makes Howzit even more useful for me. Hopefully you&rsquo;ll find it useful, too. See the <a href="https://brettterpstra.com//projects/howzit">project page</a> for an overview, and check out <a href="https://github.com/ttscoff/howzit/wiki">the wiki</a> for full documentation.</p>

<p>Like or share this post <a title="This post on Mastodon" target="_blank" href="https://hachyderm.io/users/ttscoff/statuses/115848733143070420">on Mastodon</a>, <a title="Share on Bluesky" target="_blank" href="https://bsky.app/intent/compose?text=Howzit+Script+Helpers%0A%0Ahttps%3A%2F%2Fbrettterpstra.com%2F2026%2F01%2F06%2Fhowzit-script-helpers%2F">Bluesky</a>, or <a class="twitter" target="_blank" rel="nofollow" href="https://twitter.com/intent/tweet?original_referer=https%3A%2F%2Fbrettterpstra.com%2F2026%2F01%2F06%2Fhowzit-script-helpers%2F&text=Howzit+Script+Helpers&url=https%3A%2F%2Fbrettterpstra.com%2F2026%2F01%2F06%2Fhowzit-script-helpers%2F&via=ttscoff" title="Tweet this post">Twitter</a>.</p>
<hr style="margin:40px 0">

<p>BrettTerpstra.com is supported by readers like you. <a href="https://brettterpstra.com/support/">Click here if you'd
        like to help out.</a></p>
<p>Find Brett on <a rel="me" href="https://hachyderm.io/@ttscoff">Mastodon</a>, <a
        href="https://bsky.app/profile/ttscoff.bsky.social">Bluesky</a>, <a
        href="https://github.com/ttscoff">GitHub</a>, and <a href="https://brettterpstra.com/elsewhere">everywhere
        else</a>.</p><img src="https://brett.trpstra.net/link/535/17248028.gif" height="1" width="1"/>