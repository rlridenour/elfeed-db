<p>Comments are half of your code. They are so essential that without them, code can become incomprehensible and therefore make a project impossible to maintain. You can explain design decisions, complex algorithms, and highlight specific cases that are very important in development. Moreover, using docstrings, you can even auto-generate project documentation.</p>
<p>In this article, I would like to explain the best practices for writing comments and docstrings in Python, as well as the most basic conventions that would be highly recommended to follow.</p>
<h2 id="blog-single-content__title--best-practices" class="blog-single__content-title">Best Practices</h2>
<h3 id="blog-single-content__title--be-clear-and-concise-in-your-comments" class="blog-single__content-title">Be clear and concise in your comments</h3>
<p>Explain the purpose of the code, don't describe what is already obvious.</p>
<pre><code class="language-python"># üëç Good
# Calculate 21% tax
tax = price * 0.21

# üëé Bad
# Multiply price by 0.21
tax = price * 0.21
</code></pre>
<h3 id="blog-single-content__title--explain-the-why-not-the-what" class="blog-single__content-title">Explain the "why", not the "what"</h3>
<pre><code class="language-python"># üëç Good
# Use binary search to improve performance with large datasets
result = binary_search(data, target)

# üëé Bad
# Call the binary search function
result = binary_search(data, target)
</code></pre>
<h3 id="blog-single-content__title--update-comments-when-you-change-the-code" class="blog-single__content-title">Update comments when you change the code</h3>
<pre><code class="language-python"># üëé Bad
# Calculate discount (10%)
discount = price * 0.15
</code></pre>
<h3 id="blog-single-content__title--use-todo-comments-for-pending-tasks" class="blog-single__content-title">Use TODO comments for pending tasks</h3>
<pre><code class="language-python"># üëç Good
def update_password(input):
    # TODO: crbug.com/192795 - Check against common password dictionary
    # TODO: Add minimum length validation
</code></pre>
<h3 id="blog-single-content__title--include-links-to-external-documentation" class="blog-single__content-title">Include links to external documentation</h3>
<pre><code class="language-python"># üëç Good
def check_email(input):
    # Regular expression: https://stackoverflow.com/questions/46155/how-can-i-validate-an-email-address-in-javascript
    pattern = re.compile(r'^(([^&lt;&gt;()[\]\\.,;:\s@&quot;]+(...')
    return bool(pattern.match(input))
</code></pre>
<h3 id="blog-single-content__title--document-complex-code-and-algorithms" class="blog-single__content-title">Document complex code and algorithms</h3>
<pre><code class="language-python"># üëç Good
# We use a weighted binary search to find the position of i
# in the array. We extrapolate the position based on the largest number
# in the array and the array size, then do binary search to
# get the exact number.
if i &amp; (i-1) == 0:  # True if i is 0 or a power of 2
    binary_search_weighted(array, i)
</code></pre>
<h3 id="blog-single-content__title--avoid-obvious-or-redundant-comments" class="blog-single__content-title">Avoid obvious or redundant comments</h3>
<pre><code class="language-python"># üëé Bad - unnecessary comment
x = x + 1  # Increment x by 1

# üëç Good - no comment because it's obvious
x = x + 1
</code></pre>
<h3 id="blog-single-content__title--use-comments-to-explain-design-decisions" class="blog-single__content-title">Use comments to explain design decisions</h3>
<pre><code class="language-python"># üëç Good
# We use a dictionary instead of a list because
# we expect to expand the structure in the future
user_cache = {}
</code></pre>
<h3 id="blog-single-content__title--comment-exceptions-and-edge-cases" class="blog-single__content-title">Comment exceptions and edge cases</h3>
<pre><code class="language-python"># üëç Good
def divide(a, b):
    if b == 0:
        # Avoid division by zero by returning None instead of raising exception
        # to maintain backward compatibility
        return None
    return a / b
</code></pre>
<h3 id="blog-single-content__title--comment-spacing" class="blog-single__content-title">Comment spacing</h3>
<p>Comments should start at least 2 spaces from the code:</p>
<pre><code class="language-python"># üëç Good
if i &amp; (i-1) == 0:  # True if i is 0 or a power of 2

# üëé Bad
if i &amp; (i-1) == 0:# No spaces before comment
</code></pre>
<h2 id="blog-single-content__title--format" class="blog-single__content-title">Format</h2>
<h3 id="blog-single-content__title--single-line" class="blog-single__content-title">Single line</h3>
<pre><code class="language-python"># Can go above
x = 5  # Or at the end of the line
</code></pre>
<h3 id="blog-single-content__title--multi-line" class="blog-single__content-title">Multi-line</h3>
<pre><code class="language-python"># This is a comment
# with multiple lines
# to explain something complex

&quot;&quot;&quot;
You can also use triple quotes
but it's better to reserve them for
docstrings
&quot;&quot;&quot;
</code></pre>
<h2 id="blog-single-content__title--docstrings" class="blog-single__content-title">Docstrings</h2>
<p>To document functions, classes, and modules, use docstrings.</p>
<p>There are 3 docstring formats: Google, NumPy, and Sphinx/reStructuredText. The first is the easiest to read and understand, so it's recommended.</p>
<h3 id="blog-single-content__title--function-docstrings" class="blog-single__content-title">Function docstrings</h3>
<pre><code class="language-python">def create_account(username: str, email: str, age: int) -&gt; bool:
    &quot;&quot;&quot;Create account with username and email.

    Creates a new user account with the provided credentials and validates
    the user's age for compliance with service requirements.

    Args:
        username: Username for the account. Must be unique and contain
            only alphanumeric characters and underscores.
        email: Email address for the account. Must be a valid email format
            and will be used for account verification.
        age: Age of the user in years. Must be 13 or older to create
            an account.

    Returns:
        True if the account was created successfully, False otherwise.

    Raises:
        ValueError: If username contains invalid characters or if age
            is below the minimum required age.
        EmailError: If the email format is invalid or already exists
            in the system.

    Example:
        &gt;&gt;&gt; create_account(&quot;john_doe&quot;, &quot;john@example.com&quot;, 25)
        True
        &gt;&gt;&gt; create_account(&quot;jane_smith&quot;, &quot;jane@test.org&quot;, 30)
        True
    &quot;&quot;&quot;
    # Account creation logic would go here
    return True
</code></pre>
<h3 id="blog-single-content__title--generator-docstrings" class="blog-single__content-title">Generator docstrings</h3>
<p>Use <code>Yields</code> instead of <code>Returns</code> for generator functions:</p>
<pre><code class="language-python">def fibonacci_generator(n: int):
    &quot;&quot;&quot;Generate the first n Fibonacci numbers.

    Args:
        n: Number of Fibonacci numbers to generate.

    Yields:
        int: The next Fibonacci number in the sequence.

    Example:
        &gt;&gt;&gt; list(fibonacci_generator(5))
        [0, 1, 1, 2, 3]
    &quot;&quot;&quot;
    a, b = 0, 1
    for _ in range(n):
        yield a
        a, b = b, a + b
</code></pre>
<h3 id="blog-single-content__title--class-docstrings" class="blog-single__content-title">Class docstrings</h3>
<pre><code class="language-python">class DatabaseManager:
    &quot;&quot;&quot;Manages database connections and operations.

    This class handles all database interactions including connection
    pooling, query execution, and transaction management.

    Attributes:
        connection_string: Database connection string.
        max_connections: Maximum number of concurrent connections allowed.
        timeout: Connection timeout in seconds.

    Example:
        &gt;&gt;&gt; db = DatabaseManager(&quot;postgresql://localhost/mydb&quot;)
        &gt;&gt;&gt; db.connect()
        &gt;&gt;&gt; results = db.execute_query(&quot;SELECT * FROM users&quot;)
    &quot;&quot;&quot;

    def __init__(self, connection_string: str, max_connections: int = 10):
        &quot;&quot;&quot;Initialize the database manager.

        Args:
            connection_string: Database connection string.
            max_connections: Maximum number of concurrent connections.
        &quot;&quot;&quot;
        self.connection_string = connection_string
        self.max_connections = max_connections
</code></pre>
<h3 id="blog-single-content__title--module-docstrings" class="blog-single__content-title">Module docstrings</h3>
<pre><code class="language-python">&quot;&quot;&quot;Database utilities for user management.

This module provides utilities for managing user accounts in the database,
including creation, deletion, authentication, and profile management.

Example usage:
    from user_db import create_user, authenticate_user

    create_user(&quot;john_doe&quot;, &quot;john@example.com&quot;)
    is_valid = authenticate_user(&quot;john_doe&quot;, &quot;password123&quot;)
&quot;&quot;&quot;

import hashlib
import sqlite3
</code></pre>
<h3 id="blog-single-content__title--overridden-methods-with-override" class="blog-single__content-title">Overridden methods with @override</h3>
<pre><code class="language-python">from typing_extensions import override

class EmailService:
    def send_message(self, message: str) -&gt; bool:
        &quot;&quot;&quot;Send a message via email.&quot;&quot;&quot;
        # Base implementation
        pass

class SMSService(EmailService):
    @override
    def send_message(self, message: str) -&gt; bool:
        # Doesn't need full docstring if only changing internal behavior
        # but maintains the same contract
        pass

    @override
    def send_message(self, message: str) -&gt; bool:
        &quot;&quot;&quot;Send a message via SMS.

        Overrides the base email implementation to send via SMS instead.
        Message length is limited to 160 characters.

        Args:
            message: Message to send. Will be truncated if longer than 160 chars.

        Returns:
            True if message was sent successfully.

        Raises:
            ValueError: If message is empty.
        &quot;&quot;&quot;
        if not message:
            raise ValueError(&quot;Message cannot be empty&quot;)
        return self._send_sms(message[:160])
</code></pre>
<h3 id="blog-single-content__title--property-docstrings" class="blog-single__content-title">Property docstrings</h3>
<pre><code class="language-python">class Circle:
    def __init__(self, radius: float):
        self._radius = radius

    @property
    def radius(self) -&gt; float:
        &quot;&quot;&quot;The radius of the circle.&quot;&quot;&quot;
        return self._radius

    @property
    def area(self) -&gt; float:
        &quot;&quot;&quot;The area of the circle.&quot;&quot;&quot;
        return 3.14159 * self._radius ** 2
</code></pre>
<h2 id="blog-single-content__title--additional-rules-to-consider" class="blog-single__content-title">Additional rules to consider</h2>
<h3 id="blog-single-content__title--line-limit-in-docstrings" class="blog-single__content-title">Line limit in docstrings</h3>
<p>Docstring summary lines should stay within the 80-character limit.</p>
<h3 id="blog-single-content__title--dont-use-trivial-docstrings-in-tests" class="blog-single__content-title">Don't use trivial docstrings in tests</h3>
<pre><code class="language-python"># üëé Bad
def test_user_creation():
    &quot;&quot;&quot;Tests for user creation.&quot;&quot;&quot;
    pass

# üëç Good - only if it provides new information
def test_user_creation():
    &quot;&quot;&quot;Test user creation with edge cases for special characters in usernames.&quot;&quot;&quot;
    pass

# üëç Better - without unnecessary docstring
def test_user_creation():
    pass
</code></pre>
<h3 id="blog-single-content__title--consistency-in-style" class="blog-single__content-title">Consistency in style</h3>
<p>Maintain consistency between descriptive and imperative style within the same file:</p>
<pre><code class="language-python"># Imperative style (recommended)
def fetch_user_data():
    &quot;&quot;&quot;Fetch user data from the database.&quot;&quot;&quot;
    pass

def update_user_profile():
    &quot;&quot;&quot;Update user profile information.&quot;&quot;&quot;
    pass

# Or descriptive style (but be consistent)
def fetch_user_data():
    &quot;&quot;&quot;Fetches user data from the database.&quot;&quot;&quot;
    pass

def update_user_profile():
    &quot;&quot;&quot;Updates user profile information.&quot;&quot;&quot;
    pass
</code></pre>
<h2 id="blog-single-content__title--conclusions" class="blog-single__content-title">Conclusions</h2>
<p>Writing good comments speaks very well of a developer. You also create code that will be easy to pass on to other developers or to yourself in the future (memory is fragile). Include patterns, like docstrings, in your daily workflow and the project will benefit enormously.</p>
<p>And don't let laziness win: maintain constancy and consistency.</p>
<h2 id="blog-single-content__title--bibliography" class="blog-single__content-title">Bibliography</h2>
<ul>
<li><a href="https://google.github.io/styleguide/pyguide.html#38-comments-and-docstrings">Google Python Style Guide</a></li>
<li><a href="https://sphinx-rtd-tutorial.readthedocs.io/en/latest/docstrings.html">Sphinx Docstrings Tutorial</a></li>
<li><a href="https://www.python.org/dev/peps/pep-0257/">PEP 257 - Docstring Conventions</a></li>
</ul>