
         
         <p>I have helped several people set up a basic Emacs configuration. In the process, I have learnt about some of the problems they have with the out-of-the-box experience.</p>

<p>What follows is a rather simple, yet fully capable, setup to get started with Emacs. At the end of the file is the code block with the complete configuration (<a href="#h:8d8c57cc-04c9-408f-aca1-6493bc5d8f0d">The complete configuration</a>). The other sections explain the rationale for each component.</p>

<p>Use this as a starting point. If you are curious about my own setup, check this: <a href="https://protesilaos.com/emacs/dotemacs">https://protesilaos.com/emacs/dotemacs</a>.</p>

<h2>Table of Contents</h2>

<ol>
  <li><a href="#h:1e4fde73-a2a2-4dc5-82ad-02cf3884ece6">Where to store the configurations</a></li>
  <li><a href="#h:7db72beb-b8ac-4c6d-a6f4-a52661208e23">Put all auto-generated configurations in a separate file</a></li>
  <li><a href="#h:eafd6e24-e4eb-4963-92a5-c61b0c877b7f">Set up the package manager</a></li>
  <li><a href="#h:c12c3baa-49bc-4fc8-8eb5-cf3fb53903ef">Set up <code class="language-plaintext highlighter-rouge">use-package</code></a></li>
  <li><a href="#h:5a631dfa-a8db-43f4-bd7a-92ce49c54226">Do not show those confusing warnings when installing packages</a></li>
  <li><a href="#h:83c8afc4-2359-4ebe-8b5c-f2e5257bdda3">Delete the selected text upon text insertion</a></li>
  <li><a href="#h:1e468b2a-9bee-4571-8454-e3f5462d9321">Make <code class="language-plaintext highlighter-rouge">C-g</code> a bit more helpful</a></li>
  <li><a href="#h:287e0c77-5b7d-4b0e-954d-47bb5c0f933d">Decide what to do with the graphical bars</a></li>
  <li><a href="#h:c7528f3d-9fc8-49e5-9468-6868fb5c07b5">Use the preferred fonts</a></li>
  <li><a href="#h:ba68d1bb-eb07-402a-96b6-2ec612a12b3a">Choose a theme and tweak the looks of Emacs</a></li>
  <li><a href="#h:e5e7b781-4b04-4c53-bf23-5e81789549ce">Use icon fonts in various places</a></li>
  <li><a href="#h:126ab89f-a6a5-47af-b0ea-28375299183b">Configure the minibuffer and related</a></li>
  <li><a href="#h:8179afea-2830-4225-8dab-ddb2daf0f822">Tweak the <code class="language-plaintext highlighter-rouge">dired</code> Emacs file manager</a></li>
  <li><a href="#h:8d8c57cc-04c9-408f-aca1-6493bc5d8f0d">The complete configuration</a></li>
</ol>

<p><a id="h:1e4fde73-a2a2-4dc5-82ad-02cf3884ece6"></a></p>

<h2>Where to store the configurations</h2>

<p>Emacs provides lots of possibilities, starting with where to put the main configuration file. In the interest of not overwhelming the user, I am being opinionated with certain choices:</p>

<ul>
  <li>Use <code class="language-plaintext highlighter-rouge">~/.emacs.d/init.el</code> for your configurations.</li>
  <li>If there is an <code class="language-plaintext highlighter-rouge">~/.emacs</code> file on your system, make sure to delete it (or rename it if you care about its contents). Otherwise, Emacs will prioritise that over your <code class="language-plaintext highlighter-rouge">~/.emacs.d/init.el</code>.</li>
</ul>

<p><a id="h:7db72beb-b8ac-4c6d-a6f4-a52661208e23"></a></p>

<h2>Put all auto-generated configurations in a separate file</h2>

<p>Emacs has a graphical interface for modifying the variables that are intended for user configuration. Instead of writing Emacs Lisp code, the user clicks on buttons and fills in forms. This interface is accessed in a variety of ways, such as from the menu bar or with the command <code class="language-plaintext highlighter-rouge">M-x customize</code>.</p>

<p>When the user makes a modification in this way and requests to save it, Emacs will append a code block to the user’s configuration file. Putting this code in a separate file makes it easier to reason about what is written by the user and what is generated by the running session. We thus add the following to the configuration file (<a href="#h:8d8c57cc-04c9-408f-aca1-6493bc5d8f0d">The complete configuration</a>):</p>

<div class="language-elisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="k">setq</span> <span class="nv">custom-file</span> <span class="p">(</span><span class="nv">locate-user-emacs-file</span> <span class="s">"custom.el"</span><span class="p">))</span>
<span class="p">(</span><span class="nb">load</span> <span class="nv">custom-file</span> <span class="ss">:no-error-if-file-is-missing</span><span class="p">)</span>
</code></pre></div></div>

<p>Here we defined the value of the variable <code class="language-plaintext highlighter-rouge">custom-file</code> to be what the function call <code class="language-plaintext highlighter-rouge">(locate-user-emacs-file "custom.el")</code> returns. That function finds where the <code class="language-plaintext highlighter-rouge">init.el</code> is, gets the directory path, and then returns a new path consisting of that directory plus the name we give it. So it will return <code class="language-plaintext highlighter-rouge">~/.emacs.d/custom.el</code> because of <code class="language-plaintext highlighter-rouge">~/.emacs.d/init.el</code> (<a href="#h:1e4fde73-a2a2-4dc5-82ad-02cf3884ece6">Where to store the configurations</a>).</p>

<p><a id="h:eafd6e24-e4eb-4963-92a5-c61b0c877b7f"></a></p>

<h2>Set up the package manager</h2>

<p>Emacs has a basic, yet sufficiently capable, package manager. We use it to extend Emacs with functionality that is provided by the community. There are a lot of useful features built into Emacs, but without the external packages we would be worse off. Also, bear in mind that a package being built into Emacs does not necessarily make it better than third-party alternatives. I do prefer some of the latter even though Emacs has similar functionality built-in.</p>

<p>Start by adding the following to the configuration file (<a href="#h:8d8c57cc-04c9-408f-aca1-6493bc5d8f0d">The complete configuration</a>):</p>

<div class="language-elisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nb">require</span> <span class="ss">'package</span><span class="p">)</span>
<span class="p">(</span><span class="nv">package-initialize</span><span class="p">)</span>

<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">'package-archives</span> <span class="o">'</span><span class="p">(</span><span class="s">"melpa"</span> <span class="o">.</span> <span class="s">"https://melpa.org/packages/"</span><span class="p">))</span>
</code></pre></div></div>

<p>Those three lines do the following:</p>

<ul>
  <li>Load the package manager.</li>
  <li>Initialise the installed packages.</li>
  <li>Add the MELPA repository to list of known package archives. MELPA is a community-driven project that contains lots of useful packages that are not available elsewhere. The core Emacs maintainers do not want to talk about it for political reasons. I disagree with them: we are already understaffed and underfunded. I will not throw away the excellent work of hundreds of developers.</li>
</ul>

<p>The function call <code class="language-plaintext highlighter-rouge">(package-initialize)</code> is technically not necessary, as Emacs can handle this requirement in a different way. In the interest of simplicity, I am leaving it here.</p>

<p><a id="h:c12c3baa-49bc-4fc8-8eb5-cf3fb53903ef"></a></p>

<h2>Set up <code class="language-plaintext highlighter-rouge">use-package</code></h2>

<p>With <code class="language-plaintext highlighter-rouge">use-package</code>, users have a powerful tool for configuring packages in a streamlined way (<a href="#h:8d8c57cc-04c9-408f-aca1-6493bc5d8f0d">The complete configuration</a>). Concretely, the user does not need to write a lot of repetitive code, figure out how to load packages when they are needed, installed missing dependencies, and the like. Emacs version 29 has <code class="language-plaintext highlighter-rouge">use-package</code> built-in, but earlier versions need to install it manually.</p>

<div class="language-elisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nb">&lt;</span> <span class="nv">emacs-major-version</span> <span class="mi">29</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">unless</span> <span class="p">(</span><span class="nv">package-installed-p</span> <span class="ss">'use-package</span><span class="p">)</span>
    <span class="p">(</span><span class="nb">unless</span> <span class="nv">package-archive-contents</span>
      <span class="p">(</span><span class="nv">package-refresh-contents</span><span class="p">))</span>
    <span class="p">(</span><span class="nv">package-install</span> <span class="ss">'use-package</span><span class="p">)))</span>
</code></pre></div></div>

<p>I explain <code class="language-plaintext highlighter-rouge">use-package</code> at greater length in this video: <a href="https://protesilaos.com/codelog/2024-07-23-emacs-use-package-essentials/">https://protesilaos.com/codelog/2024-07-23-emacs-use-package-essentials/</a>.</p>

<p><a id="h:5a631dfa-a8db-43f4-bd7a-92ce49c54226"></a></p>

<h2>Do not show those confusing warnings when installing packages</h2>

<p>When installing a new package, Emacs will show a buffer that contains any warnings produced by the byte compiler (<a href="#h:eafd6e24-e4eb-4963-92a5-c61b0c877b7f">Set up the package manager</a>). While this information is useful for developers, it is highly confusing for users. Many times I have received messages along the lines of “my Emacs just broke”, when in truth the warnings are about issues that are of no concern to the user.</p>

<p>The following snippet will prevent those buffers from popping up (<a href="#h:8d8c57cc-04c9-408f-aca1-6493bc5d8f0d">The complete configuration</a>). They are still available in the buffer list, if they are needed.</p>

<div class="language-elisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">'display-buffer-alist</span>
             <span class="o">'</span><span class="p">(</span><span class="s">"\\`\\*\\(Warnings\\|Compile-Log\\)\\*\\'"</span>
               <span class="p">(</span><span class="nv">display-buffer-no-window</span><span class="p">)</span>
               <span class="p">(</span><span class="nv">allow-no-window</span> <span class="o">.</span> <span class="no">t</span><span class="p">)))</span>
</code></pre></div></div>

<p><a id="h:83c8afc4-2359-4ebe-8b5c-f2e5257bdda3"></a></p>

<h2>Delete the selected text upon text insertion</h2>

<p>Virtually every program out there will delete the selected/highlighted text as soon as the user types something. Emacs does not do this by default, even though it has the functionality available. Let us then enable it (<a href="#h:8d8c57cc-04c9-408f-aca1-6493bc5d8f0d">The complete configuration</a>):</p>

<div class="language-elisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nb">use-package</span> <span class="nv">delsel</span>
  <span class="ss">:ensure</span> <span class="no">nil</span> <span class="c1">; no need to install it as it is built-in</span>
  <span class="ss">:hook</span> <span class="p">(</span><span class="nv">after-init</span> <span class="o">.</span> <span class="nv">delete-selection-mode</span><span class="p">))</span>
</code></pre></div></div>

<p>Here we are activating the <code class="language-plaintext highlighter-rouge">delete-selection-mode</code> as soon as Emacs is initialised. In other words, it is available when Emacs starts.</p>

<p><a id="h:1e468b2a-9bee-4571-8454-e3f5462d9321"></a></p>

<h2>Make <code class="language-plaintext highlighter-rouge">C-g</code> a bit more helpful</h2>

<p>Having observed beginners struggle with <code class="language-plaintext highlighter-rouge">C-g</code> not closing the open minibuffer, I know that the following is a quality-of-life refinement:</p>

<div class="language-elisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nb">defun</span> <span class="nv">prot/keyboard-quit-dwim</span> <span class="p">()</span>
  <span class="s">"Do-What-I-Mean behaviour for a general `keyboard-quit'.

The generic `keyboard-quit' does not do the expected thing when
the minibuffer is open.  Whereas we want it to close the
minibuffer, even without explicitly focusing it.

The DWIM behaviour of this command is as follows:

- When the region is active, disable it.
- When a minibuffer is open, but not focused, close the minibuffer.
- When the Completions buffer is selected, close it.
- In every other case use the regular `keyboard-quit'."</span>
  <span class="p">(</span><span class="nv">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">cond</span>
   <span class="p">((</span><span class="nv">region-active-p</span><span class="p">)</span>
    <span class="p">(</span><span class="nv">keyboard-quit</span><span class="p">))</span>
   <span class="p">((</span><span class="nv">derived-mode-p</span> <span class="ss">'completion-list-mode</span><span class="p">)</span>
    <span class="p">(</span><span class="nv">delete-completion-window</span><span class="p">))</span>
   <span class="p">((</span><span class="nb">&gt;</span> <span class="p">(</span><span class="nv">minibuffer-depth</span><span class="p">)</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">(</span><span class="nv">abort-recursive-edit</span><span class="p">))</span>
   <span class="p">(</span><span class="no">t</span>
    <span class="p">(</span><span class="nv">keyboard-quit</span><span class="p">))))</span>

<span class="p">(</span><span class="nv">define-key</span> <span class="nv">global-map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">"C-g"</span><span class="p">)</span> <span class="nf">#'</span><span class="nv">prot/keyboard-quit-dwim</span><span class="p">)</span>
</code></pre></div></div>

<p>This defines a new command (i.e. an interactive function that we can call with <code class="language-plaintext highlighter-rouge">M-x</code> or a key binding). This command provides a superset of the functionality provided by the generic <code class="language-plaintext highlighter-rouge">keyboard-quit</code> command, which is bound to <code class="language-plaintext highlighter-rouge">C-g</code> by default.</p>

<p><a id="h:287e0c77-5b7d-4b0e-954d-47bb5c0f933d"></a></p>

<h2>Decide what to do with the graphical bars</h2>

<p>Emacs has a menu bar and tool bar by default. The menu bar is helpful to discover more functionality and access some commonly used commands. The tool bar is less useful, as it contains commands that are already in the menu bar. The following snippet contains the code for those two bars as well as the scroll bar. A value of <code class="language-plaintext highlighter-rouge">1</code> enables the functionality, while <code class="language-plaintext highlighter-rouge">-1</code> disables it. Tweak those accordingly (<a href="#h:8d8c57cc-04c9-408f-aca1-6493bc5d8f0d">The complete configuration</a>):</p>

<div class="language-elisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nv">menu-bar-mode</span> <span class="mi">1</span><span class="p">)</span>
<span class="p">(</span><span class="nv">scroll-bar-mode</span> <span class="mi">1</span><span class="p">)</span>
<span class="p">(</span><span class="nv">tool-bar-mode</span> <span class="mi">-1</span><span class="p">)</span>
</code></pre></div></div>

<p>I personally disable all three of them.</p>

<p>If you are interested in a technically more correct setup for those three, then know that Emacs will read an <code class="language-plaintext highlighter-rouge">~/.emacs.d/early-init.el</code> file (<a href="#h:1e4fde73-a2a2-4dc5-82ad-02cf3884ece6">Where to store the configurations</a>). This file is evaluated before the initial Emacs frame is drawn, so you might prefer to disable all those graphical elements at the outset. Still, in the interest of simplicity, I suggest you keep everything in the <code class="language-plaintext highlighter-rouge">init.el</code> until you are a bit more experienced.</p>

<p><a id="h:c7528f3d-9fc8-49e5-9468-6868fb5c07b5"></a></p>

<h2>Use the preferred fonts</h2>

<p>Fonts are an integral part of the text-centric Emacs experience (<a href="#h:8d8c57cc-04c9-408f-aca1-6493bc5d8f0d">The complete configuration</a>). With the following snippet, we configure the three “faces” that are used to specify font families. Emacs has the concept of a “face” for a bundle of text properties that include typographic properties (font family, font height, font weight, …) and colours (text/foreground colour, background colour).</p>

<div class="language-elisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nv">mono-spaced-font</span> <span class="s">"Monospace"</span><span class="p">)</span>
      <span class="p">(</span><span class="nv">proportionately-spaced-font</span> <span class="s">"Sans"</span><span class="p">))</span>
  <span class="p">(</span><span class="nv">set-face-attribute</span> <span class="ss">'default</span> <span class="no">nil</span> <span class="ss">:family</span> <span class="nv">mono-spaced-font</span> <span class="ss">:height</span> <span class="mi">100</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">set-face-attribute</span> <span class="ss">'fixed-pitch</span> <span class="no">nil</span> <span class="ss">:family</span> <span class="nv">mono-spaced-font</span> <span class="ss">:height</span> <span class="mf">1.0</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">set-face-attribute</span> <span class="ss">'variable-pitch</span> <span class="no">nil</span> <span class="ss">:family</span> <span class="nv">proportionately-spaced-font</span> <span class="ss">:height</span> <span class="mf">1.0</span><span class="p">))</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">default</code> face is the only one that must have an absolute <code class="language-plaintext highlighter-rouge">:height</code> value. Everything else uses a floating point, which is understood as a multiple of the <code class="language-plaintext highlighter-rouge">default</code>.</p>

<p>Change the above snippet to use the preferred font family names. Also adjust the <code class="language-plaintext highlighter-rouge">default</code> height to a larger/smaller number.</p>

<p><a id="h:ba68d1bb-eb07-402a-96b6-2ec612a12b3a"></a></p>

<h2>Choose a theme and tweak the looks of Emacs</h2>

<p>I am the author of tens of themes for Emacs. Among them is the <code class="language-plaintext highlighter-rouge">modus-themes</code> package, which is also available built-in to the core Emacs distribution. Themes are a personal choice, however, so please do not consider the following as a strong opinion (<a href="#h:8d8c57cc-04c9-408f-aca1-6493bc5d8f0d">The complete configuration</a>). I simply pick the theme that most people I have interacted with have chosen as their preferred one (a close second is the <code class="language-plaintext highlighter-rouge">ef-dream</code> theme from my <code class="language-plaintext highlighter-rouge">ef-themes</code> package). Use this as a template to eventually set up another theme.</p>

<div class="language-elisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nb">use-package</span> <span class="nv">modus-themes</span>
  <span class="ss">:ensure</span> <span class="no">t</span>
  <span class="ss">:config</span>
  <span class="p">(</span><span class="nv">load-theme</span> <span class="ss">'modus-vivendi-tinted</span> <span class="ss">:no-confirm-loading</span><span class="p">))</span>
</code></pre></div></div>

<p><a id="h:e5e7b781-4b04-4c53-bf23-5e81789549ce"></a></p>

<h2>Use icon fonts in various places</h2>

<p>Continuing with the stylistic refinements to Emacs, the following snippet will show complementary icons in the minibuffer (<a href="#h:126ab89f-a6a5-47af-b0ea-28375299183b">Configure the minibuffer and related</a>) and in Dired (<a href="#h:8179afea-2830-4225-8dab-ddb2daf0f822">Tweak the <code class="language-plaintext highlighter-rouge">dired</code> Emacs file manager</a>). To make this setup work, the user must type <code class="language-plaintext highlighter-rouge">M-x</code> and then call the command <code class="language-plaintext highlighter-rouge">nerd-icons-install-fonts</code>. This will store the icon font files in a local directory (on Linux this is <code class="language-plaintext highlighter-rouge">~/.local/share/fonts</code>). To be sure everything is working, a restart to Emacs will guarantee that the new font files are read.</p>

<div class="language-elisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nb">use-package</span> <span class="nv">nerd-icons</span>
  <span class="ss">:ensure</span> <span class="no">t</span><span class="p">)</span>

<span class="p">(</span><span class="nb">use-package</span> <span class="nv">nerd-icons-completion</span>
  <span class="ss">:ensure</span> <span class="no">t</span>
  <span class="ss">:after</span> <span class="nv">marginalia</span>
  <span class="ss">:config</span>
  <span class="p">(</span><span class="nv">add-hook</span> <span class="ss">'marginalia-mode-hook</span> <span class="nf">#'</span><span class="nv">nerd-icons-completion-marginalia-setup</span><span class="p">))</span>

<span class="p">(</span><span class="nb">use-package</span> <span class="nv">nerd-icons-corfu</span>
  <span class="ss">:ensure</span> <span class="no">t</span>
  <span class="ss">:after</span> <span class="nv">corfu</span>
  <span class="ss">:config</span>
  <span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">'corfu-margin-formatters</span> <span class="nf">#'</span><span class="nv">nerd-icons-corfu-formatter</span><span class="p">))</span>

<span class="p">(</span><span class="nb">use-package</span> <span class="nv">nerd-icons-dired</span>
  <span class="ss">:ensure</span> <span class="no">t</span>
  <span class="ss">:hook</span>
  <span class="p">(</span><span class="nv">dired-mode</span> <span class="o">.</span> <span class="nv">nerd-icons-dired-mode</span><span class="p">))</span>
</code></pre></div></div>

<p><a id="h:126ab89f-a6a5-47af-b0ea-28375299183b"></a></p>

<h2>Configure the minibuffer and related</h2>

<p>[ Also watch my video about the modern minibuffer packages, some of which I do not include here because they are a bit more advanced: <a href="https://protesilaos.com/codelog/2024-02-17-emacs-modern-minibuffer-packages/">https://protesilaos.com/codelog/2024-02-17-emacs-modern-minibuffer-packages/</a>. ]</p>

<p>The minibuffer is a central part of the Emacs experience. It is where the user interacts with Emacs to respond to prompts, switch to another buffer, open a new file, run a command by its full name, and so on. The default minibuffer is minimal, which might be good for experienced users, but does not help with discoverability. Instead of that, we use the <code class="language-plaintext highlighter-rouge">vertico</code> package to produce a vertical layout. This makes it easier to see what the available options are.</p>

<div class="language-elisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nb">use-package</span> <span class="nv">vertico</span>
  <span class="ss">:ensure</span> <span class="no">t</span>
  <span class="ss">:hook</span> <span class="p">(</span><span class="nv">after-init</span> <span class="o">.</span> <span class="nv">vertico-mode</span><span class="p">))</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">marginalia</code> package is a nice complement to the vertical layout, as it uses the free space to show helpful information about the options shown there. For example, when the user types <code class="language-plaintext highlighter-rouge">M-x</code> to see a list of command names, Marginalia will add a brief description of each command. Depending on the specifics of the minibuffer interaction (opening a file, selecting a buffer, …), there will be the relevant information on display.</p>

<div class="language-elisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nb">use-package</span> <span class="nv">marginalia</span>
  <span class="ss">:ensure</span> <span class="no">t</span>
  <span class="ss">:hook</span> <span class="p">(</span><span class="nv">after-init</span> <span class="o">.</span> <span class="nv">marginalia-mode</span><span class="p">))</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">orderless</code> package offers a life-saver for all those cases where we do not remember the exact order of words. For example, to toggle the display of line numbers in the current buffer, we use the command <code class="language-plaintext highlighter-rouge">M-x display-line-numbers-mode</code>. With <code class="language-plaintext highlighter-rouge">orderless</code> set up, we may type something like <code class="language-plaintext highlighter-rouge">li num dis</code> at the <code class="language-plaintext highlighter-rouge">M-x</code> prompt and still get the desired result. This is because Orderless matches the space-separated characters we provide in any order. Emacs has other pattern matching styles built-in, but <code class="language-plaintext highlighter-rouge">orderless</code> is a good place to start. We thus make sure the other relevant variables are set to a <code class="language-plaintext highlighter-rouge">nil</code> value, so that we get Orderless everywhere.</p>

<div class="language-elisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nb">use-package</span> <span class="nv">orderless</span>
  <span class="ss">:ensure</span> <span class="no">t</span>
  <span class="ss">:config</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">completion-styles</span> <span class="o">'</span><span class="p">(</span><span class="nv">orderless</span> <span class="nv">basic</span><span class="p">))</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">completion-category-defaults</span> <span class="no">nil</span><span class="p">)</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">completion-category-overrides</span> <span class="no">nil</span><span class="p">))</span>
</code></pre></div></div>

<p>The built-in <code class="language-plaintext highlighter-rouge">savehist</code> package keeps a record of user inputs and stores them across sessions. Thus, the user will always see their latest choices closer to the top (such as with <code class="language-plaintext highlighter-rouge">M-x</code>).</p>

<div class="language-elisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nb">use-package</span> <span class="nv">savehist</span>
  <span class="ss">:ensure</span> <span class="no">nil</span> <span class="c1">; it is built-in</span>
  <span class="ss">:hook</span> <span class="p">(</span><span class="nv">after-init</span> <span class="o">.</span> <span class="nv">savehist-mode</span><span class="p">))</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">corfu</code> package provides a popup interface for in-buffer completion. Conceptually, this is similar to what we do in the minibuffer, though it is meant for text expansion inside of a regular file. This is typically used for programming. There is more that can be done to make this useful for programming modes (namely, to set up the Language Server Protocol configuration), but because that will be too specific to each person’s requirements, I am providing only the core functionality here.</p>

<div class="language-elisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nb">use-package</span> <span class="nv">corfu</span>
  <span class="ss">:ensure</span> <span class="no">t</span>
  <span class="ss">:hook</span> <span class="p">(</span><span class="nv">after-init</span> <span class="o">.</span> <span class="nv">global-corfu-mode</span><span class="p">)</span>
  <span class="ss">:bind</span> <span class="p">(</span><span class="ss">:map</span> <span class="nv">corfu-map</span> <span class="p">(</span><span class="s">"&lt;tab&gt;"</span> <span class="o">.</span> <span class="nv">corfu-complete</span><span class="p">))</span>
  <span class="ss">:config</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">tab-always-indent</span> <span class="ss">'complete</span><span class="p">)</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">corfu-preview-current</span> <span class="no">nil</span><span class="p">)</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">corfu-min-width</span> <span class="mi">20</span><span class="p">)</span>

  <span class="p">(</span><span class="k">setq</span> <span class="nv">corfu-popupinfo-delay</span> <span class="o">'</span><span class="p">(</span><span class="mf">1.25</span> <span class="o">.</span> <span class="mf">0.5</span><span class="p">))</span>
  <span class="p">(</span><span class="nv">corfu-popupinfo-mode</span> <span class="mi">1</span><span class="p">)</span> <span class="c1">; shows documentation after `corfu-popupinfo-delay'</span>

  <span class="c1">;; Sort by input history (no need to modify `corfu-sort-function').</span>
  <span class="p">(</span><span class="nv">with-eval-after-load</span> <span class="ss">'savehist</span>
    <span class="p">(</span><span class="nv">corfu-history-mode</span> <span class="mi">1</span><span class="p">)</span>
    <span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">'savehist-additional-variables</span> <span class="ss">'corfu-history</span><span class="p">)))</span>
</code></pre></div></div>

<p>The minibuffer and the <code class="language-plaintext highlighter-rouge">corfu</code> popup will benefit from the font icons we set up (<a href="#h:e5e7b781-4b04-4c53-bf23-5e81789549ce">Use icon fonts in various places</a>).</p>

<p><a id="h:8179afea-2830-4225-8dab-ddb2daf0f822"></a></p>

<h2>Tweak the <code class="language-plaintext highlighter-rouge">dired</code> Emacs file manager</h2>

<p>Emacs comes with a powerful file manager built-in. I have talked about it at length in this video: <a href="https://protesilaos.com/codelog/2023-06-26-emacs-file-dired-basics/">https://protesilaos.com/codelog/2023-06-26-emacs-file-dired-basics/</a>. The following settings define some basic refinements to the behaviour of common operations for copying, renaming, and deleting files.</p>

<p>The default presentation of Dired contains lots of details (<a href="#h:8d8c57cc-04c9-408f-aca1-6493bc5d8f0d">The complete configuration</a>). We use <code class="language-plaintext highlighter-rouge">dired-hide-details-mode</code> to hide those. They can be toggled on/off at any time with <code class="language-plaintext highlighter-rouge">M-x dired-hide-details-mode</code>, which is bound to the <code class="language-plaintext highlighter-rouge">(</code> key in Dired buffers.</p>

<div class="language-elisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nb">use-package</span> <span class="nv">dired</span>
  <span class="ss">:ensure</span> <span class="no">nil</span>
  <span class="ss">:commands</span> <span class="p">(</span><span class="nv">dired</span><span class="p">)</span>
  <span class="ss">:hook</span>
  <span class="p">((</span><span class="nv">dired-mode</span> <span class="o">.</span> <span class="nv">dired-hide-details-mode</span><span class="p">)</span>
   <span class="p">(</span><span class="nv">dired-mode</span> <span class="o">.</span> <span class="nv">hl-line-mode</span><span class="p">))</span>
  <span class="ss">:config</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">dired-recursive-copies</span> <span class="ss">'always</span><span class="p">)</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">dired-recursive-deletes</span> <span class="ss">'always</span><span class="p">)</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">delete-by-moving-to-trash</span> <span class="no">t</span><span class="p">)</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">dired-dwim-target</span> <span class="no">t</span><span class="p">))</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">dired-subtree</code> package provides commands to quickly view the contents of a folder with the <code class="language-plaintext highlighter-rouge">TAB</code> key.</p>

<div class="language-elisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nb">use-package</span> <span class="nv">dired-subtree</span>
  <span class="ss">:ensure</span> <span class="no">t</span>
  <span class="ss">:after</span> <span class="nv">dired</span>
  <span class="ss">:bind</span>
  <span class="p">(</span> <span class="ss">:map</span> <span class="nv">dired-mode-map</span>
    <span class="p">(</span><span class="s">"&lt;tab&gt;"</span> <span class="o">.</span> <span class="nv">dired-subtree-toggle</span><span class="p">)</span>
    <span class="p">(</span><span class="s">"TAB"</span> <span class="o">.</span> <span class="nv">dired-subtree-toggle</span><span class="p">)</span>
    <span class="p">(</span><span class="s">"&lt;backtab&gt;"</span> <span class="o">.</span> <span class="nv">dired-subtree-remove</span><span class="p">)</span>
    <span class="p">(</span><span class="s">"S-TAB"</span> <span class="o">.</span> <span class="nv">dired-subtree-remove</span><span class="p">))</span>
  <span class="ss">:config</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">dired-subtree-use-backgrounds</span> <span class="no">nil</span><span class="p">))</span>
</code></pre></div></div>

<p>Earlier we set up Dired to move deleted files to the system trash. The <code class="language-plaintext highlighter-rouge">trashed</code> package is then useful to provide a Dired-like interface for that compartment (it works the same way as Dired, so check the video I share above).</p>

<div class="language-elisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nb">use-package</span> <span class="nv">trashed</span>
  <span class="ss">:ensure</span> <span class="no">t</span>
  <span class="ss">:commands</span> <span class="p">(</span><span class="nv">trashed</span><span class="p">)</span>
  <span class="ss">:config</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">trashed-action-confirmer</span> <span class="ss">'y-or-n-p</span><span class="p">)</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">trashed-use-header-line</span> <span class="no">t</span><span class="p">)</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">trashed-sort-key</span> <span class="o">'</span><span class="p">(</span><span class="s">"Date deleted"</span> <span class="o">.</span> <span class="no">t</span><span class="p">))</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">trashed-date-format</span> <span class="s">"%Y-%m-%d %H:%M:%S"</span><span class="p">))</span>
</code></pre></div></div>

<p><a id="h:8d8c57cc-04c9-408f-aca1-6493bc5d8f0d"></a></p>

<h2>The complete configuration</h2>

<p>Remember to put this in the right file (<a href="#h:1e4fde73-a2a2-4dc5-82ad-02cf3884ece6">Where to store the configurations</a>).</p>

<div class="language-elisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="k">setq</span> <span class="nv">custom-file</span> <span class="p">(</span><span class="nv">locate-user-emacs-file</span> <span class="s">"custom.el"</span><span class="p">))</span>
<span class="p">(</span><span class="nb">load</span> <span class="nv">custom-file</span> <span class="ss">:no-error-if-file-is-missing</span><span class="p">)</span>

<span class="c1">;;; Set up the package manager</span>

<span class="p">(</span><span class="nb">require</span> <span class="ss">'package</span><span class="p">)</span>
<span class="p">(</span><span class="nv">package-initialize</span><span class="p">)</span>

<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">'package-archives</span> <span class="o">'</span><span class="p">(</span><span class="s">"melpa"</span> <span class="o">.</span> <span class="s">"https://melpa.org/packages/"</span><span class="p">))</span>

<span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nb">&lt;</span> <span class="nv">emacs-major-version</span> <span class="mi">29</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">unless</span> <span class="p">(</span><span class="nv">package-installed-p</span> <span class="ss">'use-package</span><span class="p">)</span>
    <span class="p">(</span><span class="nb">unless</span> <span class="nv">package-archive-contents</span>
      <span class="p">(</span><span class="nv">package-refresh-contents</span><span class="p">))</span>
    <span class="p">(</span><span class="nv">package-install</span> <span class="ss">'use-package</span><span class="p">)))</span>

<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">'display-buffer-alist</span>
             <span class="o">'</span><span class="p">(</span><span class="s">"\\`\\*\\(Warnings\\|Compile-Log\\)\\*\\'"</span>
               <span class="p">(</span><span class="nv">display-buffer-no-window</span><span class="p">)</span>
               <span class="p">(</span><span class="nv">allow-no-window</span> <span class="o">.</span> <span class="no">t</span><span class="p">)))</span>

<span class="c1">;;; Basic behaviour</span>

<span class="p">(</span><span class="nb">use-package</span> <span class="nv">delsel</span>
  <span class="ss">:ensure</span> <span class="no">nil</span>
  <span class="ss">:hook</span> <span class="p">(</span><span class="nv">after-init</span> <span class="o">.</span> <span class="nv">delete-selection-mode</span><span class="p">))</span>

<span class="p">(</span><span class="nb">defun</span> <span class="nv">prot/keyboard-quit-dwim</span> <span class="p">()</span>
  <span class="s">"Do-What-I-Mean behaviour for a general `keyboard-quit'.

The generic `keyboard-quit' does not do the expected thing when
the minibuffer is open.  Whereas we want it to close the
minibuffer, even without explicitly focusing it.

The DWIM behaviour of this command is as follows:

- When the region is active, disable it.
- When a minibuffer is open, but not focused, close the minibuffer.
- When the Completions buffer is selected, close it.
- In every other case use the regular `keyboard-quit'."</span>
  <span class="p">(</span><span class="nv">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">cond</span>
   <span class="p">((</span><span class="nv">region-active-p</span><span class="p">)</span>
    <span class="p">(</span><span class="nv">keyboard-quit</span><span class="p">))</span>
   <span class="p">((</span><span class="nv">derived-mode-p</span> <span class="ss">'completion-list-mode</span><span class="p">)</span>
    <span class="p">(</span><span class="nv">delete-completion-window</span><span class="p">))</span>
   <span class="p">((</span><span class="nb">&gt;</span> <span class="p">(</span><span class="nv">minibuffer-depth</span><span class="p">)</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">(</span><span class="nv">abort-recursive-edit</span><span class="p">))</span>
   <span class="p">(</span><span class="no">t</span>
    <span class="p">(</span><span class="nv">keyboard-quit</span><span class="p">))))</span>

<span class="p">(</span><span class="nv">define-key</span> <span class="nv">global-map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">"C-g"</span><span class="p">)</span> <span class="nf">#'</span><span class="nv">prot/keyboard-quit-dwim</span><span class="p">)</span>

<span class="c1">;;; Tweak the looks of Emacs</span>

<span class="c1">;; Those three belong in the early-init.el, but I am putting them here</span>
<span class="c1">;; for convenience.  If the early-init.el exists in the same directory</span>
<span class="c1">;; as the init.el, then Emacs will read+evaluate it before moving to</span>
<span class="c1">;; the init.el.</span>
<span class="p">(</span><span class="nv">menu-bar-mode</span> <span class="mi">1</span><span class="p">)</span>
<span class="p">(</span><span class="nv">scroll-bar-mode</span> <span class="mi">1</span><span class="p">)</span>
<span class="p">(</span><span class="nv">tool-bar-mode</span> <span class="mi">-1</span><span class="p">)</span>

<span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nv">mono-spaced-font</span> <span class="s">"Monospace"</span><span class="p">)</span>
      <span class="p">(</span><span class="nv">proportionately-spaced-font</span> <span class="s">"Sans"</span><span class="p">))</span>
  <span class="p">(</span><span class="nv">set-face-attribute</span> <span class="ss">'default</span> <span class="no">nil</span> <span class="ss">:family</span> <span class="nv">mono-spaced-font</span> <span class="ss">:height</span> <span class="mi">100</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">set-face-attribute</span> <span class="ss">'fixed-pitch</span> <span class="no">nil</span> <span class="ss">:family</span> <span class="nv">mono-spaced-font</span> <span class="ss">:height</span> <span class="mf">1.0</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">set-face-attribute</span> <span class="ss">'variable-pitch</span> <span class="no">nil</span> <span class="ss">:family</span> <span class="nv">proportionately-spaced-font</span> <span class="ss">:height</span> <span class="mf">1.0</span><span class="p">))</span>

<span class="p">(</span><span class="nb">use-package</span> <span class="nv">modus-themes</span>
  <span class="ss">:ensure</span> <span class="no">t</span>
  <span class="ss">:config</span>
  <span class="p">(</span><span class="nv">load-theme</span> <span class="ss">'modus-vivendi-tinted</span> <span class="ss">:no-confirm-loading</span><span class="p">))</span>

<span class="c1">;; Remember to do M-x and run `nerd-icons-install-fonts' to get the</span>
<span class="c1">;; font files.  Then restart Emacs to see the effect.</span>
<span class="p">(</span><span class="nb">use-package</span> <span class="nv">nerd-icons</span>
  <span class="ss">:ensure</span> <span class="no">t</span><span class="p">)</span>

<span class="p">(</span><span class="nb">use-package</span> <span class="nv">nerd-icons-completion</span>
  <span class="ss">:ensure</span> <span class="no">t</span>
  <span class="ss">:after</span> <span class="nv">marginalia</span>
  <span class="ss">:config</span>
  <span class="p">(</span><span class="nv">add-hook</span> <span class="ss">'marginalia-mode-hook</span> <span class="nf">#'</span><span class="nv">nerd-icons-completion-marginalia-setup</span><span class="p">))</span>

<span class="p">(</span><span class="nb">use-package</span> <span class="nv">nerd-icons-corfu</span>
  <span class="ss">:ensure</span> <span class="no">t</span>
  <span class="ss">:after</span> <span class="nv">corfu</span>
  <span class="ss">:config</span>
  <span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">'corfu-margin-formatters</span> <span class="nf">#'</span><span class="nv">nerd-icons-corfu-formatter</span><span class="p">))</span>

<span class="p">(</span><span class="nb">use-package</span> <span class="nv">nerd-icons-dired</span>
  <span class="ss">:ensure</span> <span class="no">t</span>
  <span class="ss">:hook</span>
  <span class="p">(</span><span class="nv">dired-mode</span> <span class="o">.</span> <span class="nv">nerd-icons-dired-mode</span><span class="p">))</span>

<span class="c1">;;; Configure the minibuffer and completions</span>

<span class="p">(</span><span class="nb">use-package</span> <span class="nv">vertico</span>
  <span class="ss">:ensure</span> <span class="no">t</span>
  <span class="ss">:hook</span> <span class="p">(</span><span class="nv">after-init</span> <span class="o">.</span> <span class="nv">vertico-mode</span><span class="p">))</span>

<span class="p">(</span><span class="nb">use-package</span> <span class="nv">marginalia</span>
  <span class="ss">:ensure</span> <span class="no">t</span>
  <span class="ss">:hook</span> <span class="p">(</span><span class="nv">after-init</span> <span class="o">.</span> <span class="nv">marginalia-mode</span><span class="p">))</span>

<span class="p">(</span><span class="nb">use-package</span> <span class="nv">orderless</span>
  <span class="ss">:ensure</span> <span class="no">t</span>
  <span class="ss">:config</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">completion-styles</span> <span class="o">'</span><span class="p">(</span><span class="nv">orderless</span> <span class="nv">basic</span><span class="p">))</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">completion-category-defaults</span> <span class="no">nil</span><span class="p">)</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">completion-category-overrides</span> <span class="no">nil</span><span class="p">))</span>

<span class="p">(</span><span class="nb">use-package</span> <span class="nv">savehist</span>
  <span class="ss">:ensure</span> <span class="no">nil</span> <span class="c1">; it is built-in</span>
  <span class="ss">:hook</span> <span class="p">(</span><span class="nv">after-init</span> <span class="o">.</span> <span class="nv">savehist-mode</span><span class="p">))</span>

<span class="p">(</span><span class="nb">use-package</span> <span class="nv">corfu</span>
  <span class="ss">:ensure</span> <span class="no">t</span>
  <span class="ss">:hook</span> <span class="p">(</span><span class="nv">after-init</span> <span class="o">.</span> <span class="nv">global-corfu-mode</span><span class="p">)</span>
  <span class="ss">:bind</span> <span class="p">(</span><span class="ss">:map</span> <span class="nv">corfu-map</span> <span class="p">(</span><span class="s">"&lt;tab&gt;"</span> <span class="o">.</span> <span class="nv">corfu-complete</span><span class="p">))</span>
  <span class="ss">:config</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">tab-always-indent</span> <span class="ss">'complete</span><span class="p">)</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">corfu-preview-current</span> <span class="no">nil</span><span class="p">)</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">corfu-min-width</span> <span class="mi">20</span><span class="p">)</span>

  <span class="p">(</span><span class="k">setq</span> <span class="nv">corfu-popupinfo-delay</span> <span class="o">'</span><span class="p">(</span><span class="mf">1.25</span> <span class="o">.</span> <span class="mf">0.5</span><span class="p">))</span>
  <span class="p">(</span><span class="nv">corfu-popupinfo-mode</span> <span class="mi">1</span><span class="p">)</span> <span class="c1">; shows documentation after `corfu-popupinfo-delay'</span>

  <span class="c1">;; Sort by input history (no need to modify `corfu-sort-function').</span>
  <span class="p">(</span><span class="nv">with-eval-after-load</span> <span class="ss">'savehist</span>
    <span class="p">(</span><span class="nv">corfu-history-mode</span> <span class="mi">1</span><span class="p">)</span>
    <span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">'savehist-additional-variables</span> <span class="ss">'corfu-history</span><span class="p">)))</span>

<span class="c1">;;; The file manager (Dired)</span>

<span class="p">(</span><span class="nb">use-package</span> <span class="nv">dired</span>
  <span class="ss">:ensure</span> <span class="no">nil</span>
  <span class="ss">:commands</span> <span class="p">(</span><span class="nv">dired</span><span class="p">)</span>
  <span class="ss">:hook</span>
  <span class="p">((</span><span class="nv">dired-mode</span> <span class="o">.</span> <span class="nv">dired-hide-details-mode</span><span class="p">)</span>
   <span class="p">(</span><span class="nv">dired-mode</span> <span class="o">.</span> <span class="nv">hl-line-mode</span><span class="p">))</span>
  <span class="ss">:config</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">dired-recursive-copies</span> <span class="ss">'always</span><span class="p">)</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">dired-recursive-deletes</span> <span class="ss">'always</span><span class="p">)</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">delete-by-moving-to-trash</span> <span class="no">t</span><span class="p">)</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">dired-dwim-target</span> <span class="no">t</span><span class="p">))</span>

<span class="p">(</span><span class="nb">use-package</span> <span class="nv">dired-subtree</span>
  <span class="ss">:ensure</span> <span class="no">t</span>
  <span class="ss">:after</span> <span class="nv">dired</span>
  <span class="ss">:bind</span>
  <span class="p">(</span> <span class="ss">:map</span> <span class="nv">dired-mode-map</span>
    <span class="p">(</span><span class="s">"&lt;tab&gt;"</span> <span class="o">.</span> <span class="nv">dired-subtree-toggle</span><span class="p">)</span>
    <span class="p">(</span><span class="s">"TAB"</span> <span class="o">.</span> <span class="nv">dired-subtree-toggle</span><span class="p">)</span>
    <span class="p">(</span><span class="s">"&lt;backtab&gt;"</span> <span class="o">.</span> <span class="nv">dired-subtree-remove</span><span class="p">)</span>
    <span class="p">(</span><span class="s">"S-TAB"</span> <span class="o">.</span> <span class="nv">dired-subtree-remove</span><span class="p">))</span>
  <span class="ss">:config</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">dired-subtree-use-backgrounds</span> <span class="no">nil</span><span class="p">))</span>

<span class="p">(</span><span class="nb">use-package</span> <span class="nv">trashed</span>
  <span class="ss">:ensure</span> <span class="no">t</span>
  <span class="ss">:commands</span> <span class="p">(</span><span class="nv">trashed</span><span class="p">)</span>
  <span class="ss">:config</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">trashed-action-confirmer</span> <span class="ss">'y-or-n-p</span><span class="p">)</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">trashed-use-header-line</span> <span class="no">t</span><span class="p">)</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">trashed-sort-key</span> <span class="o">'</span><span class="p">(</span><span class="s">"Date deleted"</span> <span class="o">.</span> <span class="no">t</span><span class="p">))</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">trashed-date-format</span> <span class="s">"%Y-%m-%d %H:%M:%S"</span><span class="p">))</span>
</code></pre></div></div>
        
      