
	
<p>
Qualitative data science sounds like a contradiction in terms. Data scientists generally solve problems using numerical solutions. Even the analysis of a text is reduced to a numerical problem using Markov chains, topic analysis, <a href="https://lucidmanager.org/data-science/tap-water-sentiment-analysis/">sentiment analysis</a> and other mathematical tools.</p>
<p>
Scientists and professionals consider numerical methods to be the gold standard of analysis. There is, however, a price to pay when relying on numbers alone. Numerical analysis reduces the complexity of the social world. When analysing people, numbers present an illusion of precision and accuracy. Giving primacy to quantitative research in the social sciences comes at a high price. The dynamics of reality are reduced to statistics, losing the narrative of the people that the research aims to understand.</p>
<p>
Being both an engineer and a social scientist, I acknowledge the importance of both numerical and qualitative methods. My dissertation used a mixed-method approach to review the relationship between employee behaviour and customer perception in water utilities. This article introduces some aspects of qualitative data science with an example from my dissertation.</p>
<p>
In this article, I show how I analysed data from interviews using both quantitative and qualitative methods and demonstrate why qualitative data science is better to understand text than numerical methods. </p>
<div id="outline-container-headline-1" class="outline-2">
<h2 id="headline-1">
Qualitative Data Science
</h2>
<div id="outline-text-headline-1" class="outline-text-2">
<p>The often celebrated artificial intelligence of machine learning is impressive but does not come close to human intelligence and ability to understand the world. Many data scientists are working on automated text analysis to solve this issue (the <a href="https://cran.r-project.org/web/packages/topicmodels/">topicmodels</a> package is an example of such an attempt). These efforts are impressive, but even the smartest text analysis algorithm is not able to derive <em>meaning</em> from text. To fully embrace all aspects of data science we need to be able to methodically undertake <a href="https://en.wikipedia.org/wiki/Qualitative_research">qualitative data analysis</a>.</p>
<p>
The capabilities of R in numerical analysis are impressive, but it can also assist with Qualitative Data Analysis (QDA). Huang Ronggui from Hong Kong developed the <a href="http://rqda.r-forge.r-project.org/">RQDA package</a> to analyse texts in R. RQDA assists with qualitative data
analysis using a GUI front-end to analyse collections texts. </p>
<p>
For my dissertation about <a href="https://lucidmanager.org/tags/invisible-water-utility/">water utility marketing</a>, I interviewed seven people from various organisations. The purpose of these interviews was to learn about the value proposition for water utilities. The data consists of the transcripts of six interviews which I manually coded using RQDA. For reasons of agreed anonymity, I cannot provide the raw data file of the interviews through GitHub.</p>
<div id="outline-container-headline-2" class="outline-3">
<h3 id="headline-2">
Numerical Text Analysis
</h3>
<div id="outline-text-headline-2" class="outline-text-3">
<p>Word clouds are a popular method for exploratory analysis of texts. The wordcloud is created with the <a href="https://cran.r-project.org/web/packages/tm/index.html">text mining</a> and wordcloud packages. The transcribed interviews are converted to a text corpus (the native format for the tm package) and whitespace, punctuation etc is removed. This code snippet opens the RQDA file and extracts the texts from the database. RQDA stores all text in an SQLite database and the package provides a query command to extract data.</p>
<p>
<a href = "https://github.com/pprevos/digital-humanities/" target="_blank"
   title="Download digital-humanities from GitHub"
   alt="Download digital-humanities from GitHub">
  <button class="button is-medium is-primary">
    <span class="icon is-large">
      <i class="fab fa-github"></i>
    </span>
    <span style="font-family: monospace">digital-humanities</span>
  </button>
</a>

</p>
<div class="src src-r">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#06b;font-weight:bold">library</span>(tidyverse)
</span></span><span style="display:flex;"><span><span style="color:#06b;font-weight:bold">library</span>(RQDA)
</span></span><span style="display:flex;"><span><span style="color:#06b;font-weight:bold">library</span>(tm)
</span></span><span style="display:flex;"><span><span style="color:#06b;font-weight:bold">library</span>(wordcloud)
</span></span><span style="display:flex;"><span><span style="color:#06b;font-weight:bold">library</span>(igraph)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#06b;font-weight:bold">openProject</span>(<span style="background-color:#fff0f0">&#34;stakeholders.rqda&#34;</span>)
</span></span><span style="display:flex;"><span>interviews <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">data.frame</span>(name <span style="color:#333">=</span> <span style="color:#06b;font-weight:bold">RQDAQuery</span>(<span style="background-color:#fff0f0">&#34;SELECT name FROM source&#34;</span>),
</span></span><span style="display:flex;"><span>                         text <span style="color:#333">=</span> <span style="color:#06b;font-weight:bold">RQDAQuery</span>(<span style="background-color:#fff0f0">&#34;SELECT file FROM source&#34;</span>))
</span></span><span style="display:flex;"><span>interviews <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">Corpus</span>(<span style="color:#06b;font-weight:bold">VectorSource</span>(interviews<span style="color:#333">$</span>file))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>interviews <span style="color:#333">&lt;-</span>  <span style="color:#06b;font-weight:bold">tm_map</span>(interviews, stripWhitespace)
</span></span><span style="display:flex;"><span>interviews <span style="color:#333">&lt;-</span>  <span style="color:#06b;font-weight:bold">tm_map</span>(interviews, <span style="color:#06b;font-weight:bold">content_transformer</span>(tolower))
</span></span><span style="display:flex;"><span>interviews <span style="color:#333">&lt;-</span>  <span style="color:#06b;font-weight:bold">tm_map</span>(interviews, removeWords, <span style="color:#06b;font-weight:bold">stopwords</span>(<span style="background-color:#fff0f0">&#34;english&#34;</span>))
</span></span><span style="display:flex;"><span>interviews <span style="color:#333">&lt;-</span>  <span style="color:#06b;font-weight:bold">tm_map</span>(interviews, removePunctuation)
</span></span><span style="display:flex;"><span>interviews <span style="color:#333">&lt;-</span>  <span style="color:#06b;font-weight:bold">tm_map</span>(interviews, removeNumbers)
</span></span><span style="display:flex;"><span>interviews <span style="color:#333">&lt;-</span>  <span style="color:#06b;font-weight:bold">tm_map</span>(interviews, removeWords, <span style="color:#06b;font-weight:bold">c</span>(<span style="background-color:#fff0f0">&#34;interviewer&#34;</span>, <span style="background-color:#fff0f0">&#34;interviewee&#34;</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#888"># Word cloud</span>
</span></span><span style="display:flex;"><span><span style="color:#06b;font-weight:bold">set.seed</span>(<span style="color:#60e;font-weight:bold">1969</span>)
</span></span><span style="display:flex;"><span><span style="color:#06b;font-weight:bold">wordcloud</span>(interviews, min.freq <span style="color:#333">=</span> <span style="color:#60e;font-weight:bold">10</span>, max.words <span style="color:#333">=</span> <span style="color:#60e;font-weight:bold">50</span>, rot.per<span style="color:#333">=</span><span style="color:#60e;font-weight:bold">0.35</span>, 
</span></span><span style="display:flex;"><span>          colors <span style="color:#333">=</span> <span style="color:#06b;font-weight:bold">brewer.pal</span>(<span style="color:#60e;font-weight:bold">8</span>, <span style="background-color:#fff0f0">&#34;Blues&#34;</span>)[<span style="color:#60e;font-weight:bold">-1</span><span style="color:#333">:</span><span style="color:#60e;font-weight:bold">-5</span>])</span></span></code></pre></div>
</div>
<figure>
<img src="https://lucidmanager.org/images/digital-humanities/wordcloud.png" alt="Word cloud of interview transcripts" title="Word cloud of interview transcripts"/>
<figcaption>
Word cloud of interview transcripts.
</figcaption>
</figure>
<p>
This word cloud makes it clear that the interviews are about water businesses and customers, which is a pretty obvious statement. The interviews are also about the opinion of the interviewees (think). While the word cloud is aesthetically pleasing and provides a quick snapshot of the content of the texts, they cannot inform us about their meaning.</p>
<p>
Topic modelling is a more advanced method to extract information from the text by assessing the proximity of words to each other. The <a href="https://eight2late.wordpress.com/2015/09/29/a-gentle-introduction-to-topic-modeling-using-r/">topic modelling</a> package provides functions to perform this analysis. I am not an expert in this field and simply followed basic steps using default settings with four topics.</p>
<div class="src src-r">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>dtm <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">DocumentTermMatrix</span>(interviews)
</span></span><span style="display:flex;"><span>dtm <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">removeSparseTerms</span>(dtm, <span style="color:#60e;font-weight:bold">0.99</span>)
</span></span><span style="display:flex;"><span>ldaOut <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">LDA</span>(dtm, k <span style="color:#333">=</span> <span style="color:#60e;font-weight:bold">4</span>)
</span></span><span style="display:flex;"><span><span style="color:#06b;font-weight:bold">terms</span>(ldaOut,<span style="color:#60e;font-weight:bold">6</span>)</span></span></code></pre></div>
</div>
<p>
This code converts the corpus created earlier into a <a href="https://en.wikipedia.org/wiki/Document-term_matrix">Document-Term Matrix</a>, which is a matrix of words and documents (the interviews) and the frequency at which each of these words occurs. The LDA function applies a <a href="https://en.wikipedia.org/wiki/Latent_Dirichlet_allocation">Latent Dietrich Allocation</a> to the matrix to define the topics. The variable <code class="verbatim">k</code> defines the number of anticipated topics. An LDA is similar to clustering in multivariate data. The final output is a table with six words for each topic.</p>
<figure>
<table>
<thead>
<tr>
<th>Topic 1</th>
<th>Topic 2</th>
<th>Topic 3</th>
<th>Topic 4</th>
</tr>
</thead>
<tbody>
<tr>
<td>water</td>
<td>water</td>
<td>customers</td>
<td>water</td>
</tr>
<tr>
<td>think</td>
<td>think</td>
<td>water</td>
<td>think</td>
</tr>
<tr>
<td>actually</td>
<td>inaudible</td>
<td>customer</td>
<td>companies</td>
</tr>
<tr>
<td>customer</td>
<td>people</td>
<td>think</td>
<td>yeah</td>
</tr>
<tr>
<td>businesses</td>
<td>service</td>
<td>business</td>
<td>issues</td>
</tr>
<tr>
<td>customers</td>
<td>businesses</td>
<td>service</td>
<td>don&#39;t</td>
</tr>
</tbody>
</table>
<figcaption>
Topic modelling of interviews.
</figcaption>
</figure>
<p>
This table does not tell me much at all about what was discussed in the interviews. Perhaps it is the frequent use of the word &#34;water&#34; or &#34;think&#34;—I did ask people their opinion about water-related issues. To make this analysis more meaningful, I could perhaps manually remove the words water, yeah, and so on. This introduces a bias in the analysis and reduces the reliability of the topic analysis because I would be interfering with the text.</p>
<p>
Numerical text analysis sees a text as a bag of words instead of a set of meaningful words. It seems that any automated text mining needs a lot of manual cleaning to derive anything meaningful. This excursion shows that automated text analysis is not a sure-fire way to analyse the meaning of a collection of words. After a lot of trial and error to try to make this work, I decided to go back to my roots of qualitative analysis using RQDA as my tool.</p>
</div>
</div>
<div id="outline-container-headline-3" class="outline-3">
<h3 id="headline-3">
Qualitative Data Science Using RQDA
</h3>
<div id="outline-text-headline-3" class="outline-text-3">
<p>To use RQDA for qualitative data science, you first need to manually analyse each text and assign codes (topics) to parts of the text. The image below shows a question and answer and how it was coded. All marked text is blue, and the codes are shown between markers. Coding a text is an iterative process that aims to extract meaning from a text. The advantage of this method compared to numerical analysis is that the researcher injects meaning into the analysis. The disadvantage is that the analysis will always be biased, which in the social sciences is unavoidable. My list of topics was based on words that appear in a marketing dictionary so that I analysed the interviews from that perspective.</p>
<figure>
<img src="https://lucidmanager.org/images/digital-humanities/coding.png" alt="Example of text coded with RQDA" title="Example of text coded with RQDA"/>
<figcaption>
Example of text coded with RQDA.
</figcaption>
</figure>
<p>
My first step was to look at the occurrence of codes (themes) in each of the interviews.</p>
<div class="src src-r">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#888">## Load and transform data</span>
</span></span><span style="display:flex;"><span>codings <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">getCodingTable</span>()[,<span style="color:#60e;font-weight:bold">4</span><span style="color:#333">:</span><span style="color:#60e;font-weight:bold">5</span>]
</span></span><span style="display:flex;"><span>categories <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">RQDAQuery</span>(<span style="background-color:#fff0f0">&#34;SELECT filecat.name AS category, source.name AS filename 
</span></span></span><span style="display:flex;"><span><span style="background-color:#fff0f0">                         FROM treefile, filecat, source 
</span></span></span><span style="display:flex;"><span><span style="background-color:#fff0f0">                         WHERE treefile.catid=filecat.catid AND treefile.fid=source.id AND treefile.status=1&#34;</span>)
</span></span><span style="display:flex;"><span>codings <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">merge</span>(codings, categories, all.y <span style="color:#333">=</span> <span style="color:#080;font-weight:bold">TRUE</span>)
</span></span><span style="display:flex;"><span><span style="color:#06b;font-weight:bold">head</span>(codings)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#888">## Open coding</span>
</span></span><span style="display:flex;"><span>reorder_size <span style="color:#333">&lt;-</span> <span style="color:#080;font-weight:bold">function</span>(x) {
</span></span><span style="display:flex;"><span>    <span style="color:#06b;font-weight:bold">factor</span>(x, levels <span style="color:#333">=</span> <span style="color:#06b;font-weight:bold">names</span>(<span style="color:#06b;font-weight:bold">sort</span>(<span style="color:#06b;font-weight:bold">table</span>(x))))
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#06b;font-weight:bold">ggplot</span>(codings, <span style="color:#06b;font-weight:bold">aes</span>(<span style="color:#06b;font-weight:bold">reorder_size</span>(codename), fill<span style="color:#333">=</span>category)) <span style="color:#333">+</span> <span style="color:#06b;font-weight:bold">geom_bar</span>(stat<span style="color:#333">=</span><span style="background-color:#fff0f0">&#34;count&#34;</span>) <span style="color:#333">+</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#06b;font-weight:bold">facet_grid</span>(<span style="color:#333">~</span>filename) <span style="color:#333">+</span> <span style="color:#06b;font-weight:bold">coord_flip</span>() <span style="color:#333">+</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#06b;font-weight:bold">theme</span>(legend.position<span style="color:#333">=</span><span style="background-color:#fff0f0">&#34;bottom&#34;</span>, legend.title<span style="color:#333">=</span><span style="color:#06b;font-weight:bold">element_blank</span>()) <span style="color:#333">+</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#06b;font-weight:bold">ylab</span>(<span style="background-color:#fff0f0">&#34;Code frequency in interviews&#34;</span>) <span style="color:#333">+</span> <span style="color:#06b;font-weight:bold">xlab</span>(<span style="background-color:#fff0f0">&#34;Code&#34;</span>)</span></span></code></pre></div>
</div>
<p>
The code uses an internal RQDA function <em>getCodingTable</em> to obtain the primary data. The <em>RQDAQuery</em> function provides more flexibility and enables more complex queries of the data. You can view the structure of the RQDA database using the <em>RQDATables</em> function. </p>
<figure>
<img src="https://lucidmanager.org/images/digital-humanities/interviewcode.png" alt="Occurrence of themes from six interviews" title="Occurrence of themes from six interviews"/>
<figcaption>
The occurrence of themes from six interviews.
</figcaption>
</figure>
<p>
This bar chart helps to explore the topics that interviewees discussed, but it does not help to understand how these topic relate to each other. This method provides better insights into the text than the &#39;bag of words&#39; approach. Qualitative data analysis provides meaning to a text that no algorithm can discern. Although this meaning is ultimately subjective, proper methodology clarified any biases.</p>
<p>
RQDA provides a facility to assign each code to a code category. A network diagram is a good tool to visualise this structure. The igraph package provides extensive functionality to analyse graphs. </p>
<p>
Qualitative data analysis can create value from a text by interpreting it from a given perspective. This article is not even an introduction to the science and art of qualitative data science. I hope it invites you to explore RQDA and similar tools.</p>
<p>
If you are interested in finding out more about this method, then feel free to read chapter three of my dissertation on <a href="http://hdl.handle.net/1959.9/561679">customer service in water utilities</a>.</p>
<figure>
<img src="https://lucidmanager.org/images/digital-humanities/network.png" alt="Network of interview topics" title="Network of interview topics"/>
<figcaption>
The network of interview topics.
</figcaption>
</figure>
<div class="src src-r">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>  edges <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">RQDAQuery</span>(<span style="background-color:#fff0f0">&#34;SELECT codecat.name, freecode.name FROM codecat, freecode, treecode WHERE codecat.catid=treecode.catid AND freecode.id=treecode.cid&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  g <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">graph_from_edgelist</span>(<span style="color:#06b;font-weight:bold">as.matrix</span>(edges), directed <span style="color:#333">=</span> <span style="color:#080;font-weight:bold">FALSE</span>) <span style="color:#333">%&gt;%</span>
</span></span><span style="display:flex;"><span>    <span style="color:#06b;font-weight:bold">simplify</span>()
</span></span><span style="display:flex;"><span>  <span style="color:#06b;font-weight:bold">V</span>(g)<span style="color:#333">$</span>name <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">gsub</span>(<span style="background-color:#fff0f0">&#34; &#34;</span>, <span style="background-color:#fff0f0">&#34;\n&#34;</span>, <span style="color:#06b;font-weight:bold">V</span>(g)<span style="color:#333">$</span>name)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  c <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">spinglass.community</span>(g)
</span></span><span style="display:flex;"><span>  <span style="color:#06b;font-weight:bold">par</span>(mar<span style="color:#333">=</span><span style="color:#06b;font-weight:bold">rep</span>(<span style="color:#60e;font-weight:bold">0</span>,<span style="color:#60e;font-weight:bold">4</span>))
</span></span><span style="display:flex;"><span>  <span style="color:#06b;font-weight:bold">set.seed</span>(<span style="color:#60e;font-weight:bold">666</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#06b;font-weight:bold">plot</span>(c, g, 
</span></span><span style="display:flex;"><span>       vertex.size <span style="color:#333">=</span> <span style="color:#60e;font-weight:bold">10</span>,
</span></span><span style="display:flex;"><span>       vertex.color <span style="color:#333">=</span> <span style="color:#080;font-weight:bold">NA</span>,
</span></span><span style="display:flex;"><span>       vertex.frame.color <span style="color:#333">=</span> <span style="color:#080;font-weight:bold">NA</span>,
</span></span><span style="display:flex;"><span>       layout <span style="color:#333">=</span> layout.drl)</span></span></code></pre></div>
</div>
<p>
  <a href = "https://www.r-bloggers.com/" target="_blank" title="Proudly associated with R-Bloggers">
    <button class="button is-link is-medium">
      <span class="icon is-large">
        <i class="fab fa-r-project"></i>
      </span>
      <span>As seen on R Bloggers</span>
    </button>
  </a>
</p>
</div>
</div>
</div>
</div>

      