
	
<p>
Project Euler 18 and 67 are identical, other than that the data in the second version is more extensive than in the first one. In this post, I kill two Eulers with one code. These two problems are logically similar to <a href="https://lucidmanager.org/data-science/project-euler-15/">Project Euler 15</a>.</p>
<p>
These two problems concern binary trees, which is a data structure where each node has two children. A practical example of a binary tree is a pedigree chart, where each person or animal has two parents, four grandparents and so on. In this Project Euler problem, we need to navigate through such a tree.</p>
<div id="outline-container-headline-1" class="outline-2">
<h2 id="headline-1">
Project Euler 18 Definition
</h2>
<div id="outline-text-headline-1" class="outline-text-2">
<p>By starting at the top of the triangle below and moving to adjacent numbers on the row below, the maximum total from top to bottom is 23.</p>
<div class="src src-text">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>   3
</span></span><span style="display:flex;"><span>  7 4
</span></span><span style="display:flex;"><span> 2 4 6
</span></span><span style="display:flex;"><span>8 5 9 3</span></span></code></pre></div>
</div>
<p>
That is, 3 + 7 + 4 + 9 = 23.</p>
<p>
Find the <a href="https://projecteuler.net/problem=18">maximum total</a> from top to bottom of the triangle below:</p>
<div class="src src-text">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>                            75
</span></span><span style="display:flex;"><span>                          95  64
</span></span><span style="display:flex;"><span>                        17  47  82
</span></span><span style="display:flex;"><span>                      18  35  87  10
</span></span><span style="display:flex;"><span>                    20  04  82  47  65
</span></span><span style="display:flex;"><span>                  19  01  23  75  03  34
</span></span><span style="display:flex;"><span>                88  02  77  73  07  63  67
</span></span><span style="display:flex;"><span>              99  65  04  28  06  16  70  92
</span></span><span style="display:flex;"><span>            41  41  26  56  83  40  80  70  33
</span></span><span style="display:flex;"><span>          41  48  72  33  47  32  37  16  94  29
</span></span><span style="display:flex;"><span>        53  71  44  65  25  43  91  52  97  51  14
</span></span><span style="display:flex;"><span>      70  11  33  28  77  73  17  78  39  68  17  57
</span></span><span style="display:flex;"><span>    91  71  52  38  17  14  91  43  58  50  2 7 2 9 48
</span></span><span style="display:flex;"><span>  63  66  04  68  89  53  67  30  73  16  69  87  40  31
</span></span><span style="display:flex;"><span>04  62  98  27  23  09  70  98  73  93  38  53  60  04  23</span></span></code></pre></div>
</div>
</div>
</div>
<div id="outline-container-headline-2" class="outline-2">
<h2 id="headline-2">
Solution
</h2>
<div id="outline-text-headline-2" class="outline-text-2">
<p>This problem seeks a maximum path sum in a binary tree. The brute force method, as indicated in the problem definition, is a very inefficient way to solve this problem. </p>
<p>
A more efficient method is to define the maximum path layer by layer, starting at the bottom. The maximum sum of 2 + 8 or 2 + 5 is 10, the maximum sum of 4 + 5 or 4 + 9 is 13, and the last maximum sum is 15. These numbers are now placed in the next row. This process cycles until only one number is left. This algorithm solves the sample triangle into four steps:</p>
<p>
Step 1:</p>
<div class="center-block" style="text-align: center; margin-left: auto; margin-right: auto;">
<p>3</p>
<p>
7 4</p>
<p>
2 4 6</p>
<p>
8 5 9 3</p>
</div>
<p>
Step 2:</p>
<div class="center-block" style="text-align: center; margin-left: auto; margin-right: auto;">
<p>3</p>
<p>
7 4</p>
<p>
10 13 15</p>
</div>
<p>
Step 3:</p>
<div class="center-block" style="text-align: center; margin-left: auto; margin-right: auto;">
<p>3</p>
<p>
20 19</p>
</div>
<p>
Step 4:</p>
<div class="center-block" style="text-align: center; margin-left: auto; margin-right: auto;">
<p>23</p>
</div>
<p>
In the code below, the data is a triangle matrix. The variables <code class="verbatim">rij</code> (row) and <code class="verbatim">kol</code> (column) drive the search for the maximum path. The triangle for Euler Problem 18 is manually created, and the triangle for Euler Problem 67 is read from the website.</p>
<p>
<a href = "https://github.com/pprevos/ProjectEuler/" target="_blank"
   title="Download ProjectEuler from GitHub"
   alt="Download ProjectEuler from GitHub">
  <button class="button is-medium is-primary">
    <span class="icon is-large">
      <i class="fab fa-github"></i>
    </span>
    <span style="font-family: monospace">ProjectEuler</span>
  </button>
</a>

</p>
<div class="src src-r">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>  <span style="color:#888">## Project Euler 18: Maximum Path Sum</span>
</span></span><span style="display:flex;"><span>  path.sum <span style="color:#333">&lt;-</span> <span style="color:#080;font-weight:bold">function</span>(triangle) {
</span></span><span style="display:flex;"><span>      <span style="color:#080;font-weight:bold">for</span> (rij <span style="color:#080;font-weight:bold">in</span> <span style="color:#06b;font-weight:bold">nrow</span>(triangle)<span style="color:#333">:</span><span style="color:#60e;font-weight:bold">2</span>) {
</span></span><span style="display:flex;"><span>          <span style="color:#080;font-weight:bold">for</span> (kol <span style="color:#080;font-weight:bold">in</span> <span style="color:#60e;font-weight:bold">1</span><span style="color:#333">:</span>(<span style="color:#06b;font-weight:bold">ncol</span>(triangle)<span style="color:#60e;font-weight:bold">-1</span>)) {
</span></span><span style="display:flex;"><span>              triangle[rij <span style="color:#333">-</span> <span style="color:#60e;font-weight:bold">1</span>,kol] <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">max</span>(triangle[rij,kol<span style="color:#333">:</span>(kol <span style="color:#333">+</span> <span style="color:#60e;font-weight:bold">1</span>)]) <span style="color:#333">+</span> triangle[rij <span style="color:#333">-</span> <span style="color:#60e;font-weight:bold">1</span>, kol]
</span></span><span style="display:flex;"><span>          }
</span></span><span style="display:flex;"><span>          triangle[rij,] <span style="color:#333">&lt;-</span> <span style="color:#080;font-weight:bold">NA</span>
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>  <span style="color:#080;font-weight:bold">return</span>(<span style="color:#06b;font-weight:bold">max</span>(triangle, na.rm <span style="color:#333">=</span> <span style="color:#080;font-weight:bold">TRUE</span>))
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  triangle <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">matrix</span>(ncol <span style="color:#333">=</span> <span style="color:#60e;font-weight:bold">15</span>, nrow <span style="color:#333">=</span> <span style="color:#60e;font-weight:bold">15</span>)
</span></span><span style="display:flex;"><span>  triangle[1,<span style="color:#60e;font-weight:bold">1</span>] <span style="color:#333">&lt;-</span> <span style="color:#60e;font-weight:bold">75</span>
</span></span><span style="display:flex;"><span>  triangle[2,<span style="color:#60e;font-weight:bold">1</span><span style="color:#333">:</span><span style="color:#60e;font-weight:bold">2</span>] <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">c</span>(<span style="color:#60e;font-weight:bold">95</span>, <span style="color:#60e;font-weight:bold">64</span>)
</span></span><span style="display:flex;"><span>  triangle[3,<span style="color:#60e;font-weight:bold">1</span><span style="color:#333">:</span><span style="color:#60e;font-weight:bold">3</span>] <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">c</span>(<span style="color:#60e;font-weight:bold">17</span>, <span style="color:#60e;font-weight:bold">47</span>, <span style="color:#60e;font-weight:bold">82</span>)
</span></span><span style="display:flex;"><span>  triangle[4,<span style="color:#60e;font-weight:bold">1</span><span style="color:#333">:</span><span style="color:#60e;font-weight:bold">4</span>] <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">c</span>(<span style="color:#60e;font-weight:bold">18</span>, <span style="color:#60e;font-weight:bold">35</span>, <span style="color:#60e;font-weight:bold">87</span>, <span style="color:#60e;font-weight:bold">10</span>)
</span></span><span style="display:flex;"><span>  triangle[5,<span style="color:#60e;font-weight:bold">1</span><span style="color:#333">:</span><span style="color:#60e;font-weight:bold">5</span>] <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">c</span>(<span style="color:#60e;font-weight:bold">20</span>, <span style="color:#60e;font-weight:bold">04</span>, <span style="color:#60e;font-weight:bold">82</span>, <span style="color:#60e;font-weight:bold">47</span>, <span style="color:#60e;font-weight:bold">65</span>)
</span></span><span style="display:flex;"><span>  triangle[6,<span style="color:#60e;font-weight:bold">1</span><span style="color:#333">:</span><span style="color:#60e;font-weight:bold">6</span>] <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">c</span>(<span style="color:#60e;font-weight:bold">19</span>, <span style="color:#60e;font-weight:bold">01</span>, <span style="color:#60e;font-weight:bold">23</span>, <span style="color:#60e;font-weight:bold">75</span>, <span style="color:#60e;font-weight:bold">03</span>, <span style="color:#60e;font-weight:bold">34</span>)
</span></span><span style="display:flex;"><span>  triangle[7,<span style="color:#60e;font-weight:bold">1</span><span style="color:#333">:</span><span style="color:#60e;font-weight:bold">7</span>] <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">c</span>(<span style="color:#60e;font-weight:bold">88</span>, <span style="color:#60e;font-weight:bold">02</span>, <span style="color:#60e;font-weight:bold">77</span>, <span style="color:#60e;font-weight:bold">73</span>, <span style="color:#60e;font-weight:bold">07</span>, <span style="color:#60e;font-weight:bold">63</span>, <span style="color:#60e;font-weight:bold">67</span>)
</span></span><span style="display:flex;"><span>  triangle[8,<span style="color:#60e;font-weight:bold">1</span><span style="color:#333">:</span><span style="color:#60e;font-weight:bold">8</span>] <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">c</span>(<span style="color:#60e;font-weight:bold">99</span>, <span style="color:#60e;font-weight:bold">65</span>, <span style="color:#60e;font-weight:bold">04</span>, <span style="color:#60e;font-weight:bold">28</span>, <span style="color:#60e;font-weight:bold">06</span>, <span style="color:#60e;font-weight:bold">16</span>, <span style="color:#60e;font-weight:bold">70</span>, <span style="color:#60e;font-weight:bold">92</span>)
</span></span><span style="display:flex;"><span>  triangle[9,<span style="color:#60e;font-weight:bold">1</span><span style="color:#333">:</span><span style="color:#60e;font-weight:bold">9</span>] <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">c</span>(<span style="color:#60e;font-weight:bold">41</span>, <span style="color:#60e;font-weight:bold">41</span>, <span style="color:#60e;font-weight:bold">26</span>, <span style="color:#60e;font-weight:bold">56</span>, <span style="color:#60e;font-weight:bold">83</span>, <span style="color:#60e;font-weight:bold">40</span>, <span style="color:#60e;font-weight:bold">80</span>, <span style="color:#60e;font-weight:bold">70</span>, <span style="color:#60e;font-weight:bold">33</span>)
</span></span><span style="display:flex;"><span>  triangle[10,<span style="color:#60e;font-weight:bold">1</span><span style="color:#333">:</span><span style="color:#60e;font-weight:bold">10</span>] <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">c</span>(<span style="color:#60e;font-weight:bold">41</span>, <span style="color:#60e;font-weight:bold">48</span>, <span style="color:#60e;font-weight:bold">72</span>, <span style="color:#60e;font-weight:bold">33</span>, <span style="color:#60e;font-weight:bold">47</span>, <span style="color:#60e;font-weight:bold">32</span>, <span style="color:#60e;font-weight:bold">37</span>, <span style="color:#60e;font-weight:bold">16</span>, <span style="color:#60e;font-weight:bold">94</span>, <span style="color:#60e;font-weight:bold">29</span>)
</span></span><span style="display:flex;"><span>  triangle[11,<span style="color:#60e;font-weight:bold">1</span><span style="color:#333">:</span><span style="color:#60e;font-weight:bold">11</span>] <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">c</span>(<span style="color:#60e;font-weight:bold">53</span>, <span style="color:#60e;font-weight:bold">71</span>, <span style="color:#60e;font-weight:bold">44</span>, <span style="color:#60e;font-weight:bold">65</span>, <span style="color:#60e;font-weight:bold">25</span>, <span style="color:#60e;font-weight:bold">43</span>, <span style="color:#60e;font-weight:bold">91</span>, <span style="color:#60e;font-weight:bold">52</span>, <span style="color:#60e;font-weight:bold">97</span>, <span style="color:#60e;font-weight:bold">51</span>, <span style="color:#60e;font-weight:bold">14</span>)
</span></span><span style="display:flex;"><span>  triangle[12,<span style="color:#60e;font-weight:bold">1</span><span style="color:#333">:</span><span style="color:#60e;font-weight:bold">12</span>] <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">c</span>(<span style="color:#60e;font-weight:bold">70</span>, <span style="color:#60e;font-weight:bold">11</span>, <span style="color:#60e;font-weight:bold">33</span>, <span style="color:#60e;font-weight:bold">28</span>, <span style="color:#60e;font-weight:bold">77</span>, <span style="color:#60e;font-weight:bold">73</span>, <span style="color:#60e;font-weight:bold">17</span>, <span style="color:#60e;font-weight:bold">78</span>, <span style="color:#60e;font-weight:bold">39</span>, <span style="color:#60e;font-weight:bold">68</span>, <span style="color:#60e;font-weight:bold">17</span>, <span style="color:#60e;font-weight:bold">57</span>)
</span></span><span style="display:flex;"><span>  triangle[13,<span style="color:#60e;font-weight:bold">1</span><span style="color:#333">:</span><span style="color:#60e;font-weight:bold">13</span>] <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">c</span>(<span style="color:#60e;font-weight:bold">91</span>, <span style="color:#60e;font-weight:bold">71</span>, <span style="color:#60e;font-weight:bold">52</span>, <span style="color:#60e;font-weight:bold">38</span>, <span style="color:#60e;font-weight:bold">17</span>, <span style="color:#60e;font-weight:bold">14</span>, <span style="color:#60e;font-weight:bold">91</span>, <span style="color:#60e;font-weight:bold">43</span>, <span style="color:#60e;font-weight:bold">58</span>, <span style="color:#60e;font-weight:bold">50</span>, <span style="color:#60e;font-weight:bold">27</span>, <span style="color:#60e;font-weight:bold">29</span>, <span style="color:#60e;font-weight:bold">48</span>)
</span></span><span style="display:flex;"><span>  triangle[14,<span style="color:#60e;font-weight:bold">1</span><span style="color:#333">:</span><span style="color:#60e;font-weight:bold">14</span>] <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">c</span>(<span style="color:#60e;font-weight:bold">63</span>, <span style="color:#60e;font-weight:bold">66</span>, <span style="color:#60e;font-weight:bold">04</span>, <span style="color:#60e;font-weight:bold">68</span>, <span style="color:#60e;font-weight:bold">89</span>, <span style="color:#60e;font-weight:bold">53</span>, <span style="color:#60e;font-weight:bold">67</span>, <span style="color:#60e;font-weight:bold">30</span>, <span style="color:#60e;font-weight:bold">73</span>, <span style="color:#60e;font-weight:bold">16</span>, <span style="color:#60e;font-weight:bold">69</span>, <span style="color:#60e;font-weight:bold">87</span>, <span style="color:#60e;font-weight:bold">40</span>, <span style="color:#60e;font-weight:bold">31</span>)
</span></span><span style="display:flex;"><span>  triangle[15,<span style="color:#60e;font-weight:bold">1</span><span style="color:#333">:</span><span style="color:#60e;font-weight:bold">15</span>] <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">c</span>(<span style="color:#60e;font-weight:bold">04</span>, <span style="color:#60e;font-weight:bold">62</span>, <span style="color:#60e;font-weight:bold">98</span>, <span style="color:#60e;font-weight:bold">27</span>, <span style="color:#60e;font-weight:bold">23</span>, <span style="color:#60e;font-weight:bold">09</span>, <span style="color:#60e;font-weight:bold">70</span>, <span style="color:#60e;font-weight:bold">98</span>, <span style="color:#60e;font-weight:bold">73</span>, <span style="color:#60e;font-weight:bold">93</span>, <span style="color:#60e;font-weight:bold">38</span>, <span style="color:#60e;font-weight:bold">53</span>, <span style="color:#60e;font-weight:bold">60</span>, <span style="color:#60e;font-weight:bold">04</span>, <span style="color:#60e;font-weight:bold">23</span>)
</span></span><span style="display:flex;"><span>  answer <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">path.sum</span>(triangle)
</span></span><span style="display:flex;"><span>  <span style="color:#06b;font-weight:bold">print</span>(answer)</span></span></code></pre></div>
</div>
<div id="outline-container-headline-3" class="outline-3">
<h3 id="headline-3">
Project Euler 67
</h3>
<div id="outline-text-headline-3" class="outline-text-3">
<p>The solution for <a href="https://projecteuler.net/problem=67">problem number 67</a> is exactly the same. The data is read directly from the Project Euler website.</p>
<div class="src src-r">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>  triangle.file <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">read.delim</span>(<span style="background-color:#fff0f0">&#34;https://projecteuler.net/project/resources/p067_triangle.txt&#34;</span>,
</span></span><span style="display:flex;"><span>                              stringsAsFactors <span style="color:#333">=</span> <span style="color:#080;font-weight:bold">FALSE</span>, header <span style="color:#333">=</span> <span style="color:#080;font-weight:bold">FALSE</span>)
</span></span><span style="display:flex;"><span>  triangle.67 <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">matrix</span>(nrow <span style="color:#333">=</span> <span style="color:#60e;font-weight:bold">100</span>, ncol <span style="color:#333">=</span> <span style="color:#60e;font-weight:bold">100</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#080;font-weight:bold">for</span> (i <span style="color:#080;font-weight:bold">in</span> <span style="color:#60e;font-weight:bold">1</span><span style="color:#333">:</span><span style="color:#60e;font-weight:bold">100</span>) {
</span></span><span style="display:flex;"><span>      triangle.67[i,<span style="color:#60e;font-weight:bold">1</span><span style="color:#333">:</span>i] <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">as.numeric</span>(<span style="color:#06b;font-weight:bold">unlist</span>(<span style="color:#06b;font-weight:bold">strsplit</span>(triangle.file[i,], <span style="background-color:#fff0f0">&#34; &#34;</span>)))
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  answer <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">path.sum</span>(triangle.67)
</span></span><span style="display:flex;"><span>  <span style="color:#06b;font-weight:bold">print</span>(answer)</span></span></code></pre></div>
</div>
<p>
This video visualises the quest for the maximum path as a brute-force solution, which takes eleven minutes of hypnotic animation.</p>
<figure>
<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/z-AOWBztnpI?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"></iframe>
    </div>

<figcaption>
Maximum path sum.
</figcaption>
</figure>
<p>
<a href = "https://www.r-bloggers.com/" target="_blank" title="Proudly associated with R-Bloggers">
  <button class="button is-link is-medium">
    <span class="icon is-large">
      <i class="fab fa-r-project"></i>
    </span>
    <span>As seen on R Bloggers</span>
  </button>
</a>
</p>
</div>
</div>
</div>
</div>

      