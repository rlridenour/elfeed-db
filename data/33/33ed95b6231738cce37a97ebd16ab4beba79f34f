<p>I created a new package!, here are the details:</p>
<p>Bank Buddy is an Emacs package that provides financial analysis and reporting capabilities for your bank statements. It processes CSV bank statement data, categorizes transactions using customizable patterns, and generates detailed reports in Org-mode format.</p>
<figure><img src="https://emacs.dyerdwelling.family/ox-hugo/20250528081648-emacs--Your-Financial-Analysis-Companion-for-Emacs.jpg" width="100%">
</figure>

<p>It does not depend on any external account system, and the analysis is handled by <code>elisp</code>. The only external tool that may be required is <code>gnuplot</code> to visualize the generated data.</p>
<p>Here is an example of the type of report that is generated (obviously using test data :))</p>
<p><a href="https://github.com/captainflasmr/bank-buddy/blob/main/tests/bank-statement_report/bank-statement_report.org">https://github.com/captainflasmr/bank-buddy/blob/main/tests/bank-statement_report/bank-statement_report.org</a></p>
<p>See <a href="https://github.com/captainflasmr/bank-buddy/blob/main/docs/bank-buddy.org">https://github.com/captainflasmr/bank-buddy/blob/main/docs/bank-buddy.org</a> for the manual!</p>
<h2 id="key-features">Key Features</h2>
<ul>
<li><strong>Smart Transaction Categorization</strong>: Auto-categorizes transactions based on customizable regex patterns</li>
<li><strong>Financial Reports</strong>: Generates detailed reports in Org-mode with:
<ul>
<li>Transaction summaries and overviews</li>
<li>Spending category analysis</li>
<li>Top merchant identification</li>
<li>Monthly spending patterns with visual representation</li>
<li>Recurring subscription detection</li>
</ul>
</li>
<li><strong>Interactive Category Management</strong>: Edit and refine categorization patterns directly from reports</li>
<li><strong>Data Visualizations</strong>: Generates charts and graphs using external gnuplot scripts</li>
<li><strong>No Reliance on External Accounting System</strong> - Analysis is all Emacs built-in</li>
<li><strong>Asynchronous Processing</strong>: Efficiently handles large bank statements without blocking Emacs</li>
</ul>
<h2 id="screenshots">Screenshots</h2>
<h3 id="monthly-spending-categories">Monthly Spending categories</h3>
<figure><img src="https://emacs.dyerdwelling.family/ox-hugo/financial-report--monthly-spending-categories.png" width="100%">
</figure>

<h3 id="monthly-spending-categories--stacked">Monthly Spending categories (stacked)</h3>
<figure><img src="https://emacs.dyerdwelling.family/ox-hugo/financial-report--monthly-spending-stacked.png" width="100%">
</figure>

<h2 id="quick-start">Quick Start</h2>
<ol>
<li>Export your bank statement as a CSV file</li>
<li>Edit CSV using <code>csv-mode</code> for all lines to the format DATE,DESCRIPTION,AMOUNT</li>
<li>Open CSV file</li>
<li>Run: <code>M-x bank-buddy-generate</code></li>
<li>Open the generated report</li>
</ol>
<h2 id="generate-gnuplots">Generate gnuplots</h2>
<p>Since version 0.2.0, Bank Buddy generates external gnuplot scripts that are executed via <code>call-process</code>. You need to have gnuplot installed on your system.</p>
<p>To install gnuplot:</p>
<ul>
<li>Linux: <code>sudo apt install gnuplot</code> (or equivalent for your distribution)</li>
<li>macOS: <code>brew install gnuplot</code></li>
<li>Windows: Download from <a href="http://www.gnuplot.info/">http://www.gnuplot.info/</a></li>
</ul>
<p>The generated reports will include links to both the gnuplot script files (.gp) and data files (.dat) for each visualization. This allows for:</p>
<ul>
<li>Easy customization of plots by editing the gnuplot scripts</li>
<li>Regeneration of plots without reprocessing the CSV data</li>
<li>Better control over visualization settings</li>
</ul>
<h2 id="usage-guide">Usage Guide</h2>
<h3 id="understanding-csv-format">Understanding CSV Format</h3>
<p>Bank Buddy expects CSV files with at least the following columns:</p>
<ul>
<li>Transaction date</li>
<li>Transaction description</li>
<li>Debit amount</li>
</ul>
<p>Different banks format their CSV exports differently. You may need to preprocess your CSV to match this format, I would advise to use the package <code>csv-mode</code>, open up a csv file and <code>C-c C-k</code> you way to removed unwanted columns so all you have left are those described above.</p>
<h3 id="example-csv">Example CSV</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csv" data-lang="csv"><span style="display:flex;"><span><span style="color:#e6db74">Date</span>,<span style="color:#e6db74">Description</span>,<span style="color:#e6db74">Amount</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-06-30</span>,<span style="color:#e6db74">PAYPAL TRANSFER</span>,<span style="color:#e6db74">28.50</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-06-28</span>,<span style="color:#e6db74">JUST-EAT TAKEAWAY</span>,<span style="color:#e6db74">32.99</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-06-25</span>,<span style="color:#e6db74">ASDA GROCERIES</span>,<span style="color:#e6db74">78.50</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-06-22</span>,<span style="color:#e6db74">AUDIBLE SUBSCRIPTION</span>,<span style="color:#e6db74">7.99</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-06-20</span>,<span style="color:#e6db74">THREE MOBILE</span>,<span style="color:#e6db74">25.00</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-06-18</span>,<span style="color:#e6db74">RIVER-ISLAND CLOTHES</span>,<span style="color:#e6db74">85.99</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-06-15</span>,<span style="color:#e6db74">SPOTIFY PREMIUM</span>,<span style="color:#e6db74">9.99</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-06-12</span>,<span style="color:#e6db74">RAILWAY TICKET</span>,<span style="color:#e6db74">42.00</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-06-10</span>,<span style="color:#e6db74">AMAZON PURCHASE</span>,<span style="color:#e6db74">55.25</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-06-07</span>,<span style="color:#e6db74">NETFLIX SUBSCRIPTION</span>,<span style="color:#e6db74">13.99</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-06-05</span>,<span style="color:#e6db74">VIRGIN-MEDIA MONTHLY</span>,<span style="color:#e6db74">65.50</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-06-03</span>,<span style="color:#e6db74">NOTEMACHINE WITHDRAWAL</span>,<span style="color:#e6db74">100.00</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-06-01</span>,<span style="color:#e6db74">KATHERINE ALLOWANCE</span>,<span style="color:#e6db74">200.00</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-05-30</span>,<span style="color:#e6db74">DENTIST APPOINTMENT</span>,<span style="color:#e6db74">60.00</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-05-28</span>,<span style="color:#e6db74">SKY-BETTING RACES</span>,<span style="color:#e6db74">25.00</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-05-25</span>,<span style="color:#e6db74">WAITROSE GROCERIES</span>,<span style="color:#e6db74">115.45</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-05-22</span>,<span style="color:#e6db74">NOWTV SUBSCRIPTION</span>,<span style="color:#e6db74">9.99</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-05-20</span>,<span style="color:#e6db74">PAYPAL TRANSFER</span>,<span style="color:#e6db74">40.00</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-05-18</span>,<span style="color:#e6db74">THREE MOBILE</span>,<span style="color:#e6db74">25.00</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-05-15</span>,<span style="color:#e6db74">UBER RIDE</span>,<span style="color:#e6db74">18.25</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-05-12</span>,<span style="color:#e6db74">SAINSBURYS GROCERIES</span>,<span style="color:#e6db74">105.75</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-05-10</span>,<span style="color:#e6db74">AMAZON PURCHASE</span>,<span style="color:#e6db74">32.99</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-05-07</span>,<span style="color:#e6db74">NETFLIX SUBSCRIPTION</span>,<span style="color:#e6db74">13.99</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-05-05</span>,<span style="color:#e6db74">VIRGIN-MEDIA MONTHLY</span>,<span style="color:#e6db74">65.50</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-05-02</span>,<span style="color:#e6db74">KATHERINE ALLOWANCE</span>,<span style="color:#e6db74">200.00</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-04-30</span>,<span style="color:#e6db74">DELIVEROO FOOD</span>,<span style="color:#e6db74">25.50</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-04-28</span>,<span style="color:#e6db74">PRIME VIDEO RENTAL</span>,<span style="color:#e6db74">4.99</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-04-25</span>,<span style="color:#e6db74">PETS AT HOME</span>,<span style="color:#e6db74">45.00</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-04-23</span>,<span style="color:#e6db74">RAILWAY TICKET</span>,<span style="color:#e6db74">18.50</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-04-20</span>,<span style="color:#e6db74">YOUTUBE PREMIUM</span>,<span style="color:#e6db74">11.99</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-04-18</span>,<span style="color:#e6db74">IKEA FURNITURE</span>,<span style="color:#e6db74">245.99</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-04-15</span>,<span style="color:#e6db74">TESCO GROCERIES</span>,<span style="color:#e6db74">68.95</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-04-12</span>,<span style="color:#e6db74">STARBUCKS COFFEE</span>,<span style="color:#e6db74">9.85</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-04-10</span>,<span style="color:#e6db74">AMAZON PURCHASE</span>,<span style="color:#e6db74">78.50</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-04-07</span>,<span style="color:#e6db74">NETFLIX SUBSCRIPTION</span>,<span style="color:#e6db74">13.99</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-04-05</span>,<span style="color:#e6db74">CLAUDE SUBSCRIPTION</span>,<span style="color:#e6db74">20.00</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-04-03</span>,<span style="color:#e6db74">VIRGIN-MEDIA MONTHLY</span>,<span style="color:#e6db74">65.50</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-04-01</span>,<span style="color:#e6db74">KATHERINE ALLOWANCE</span>,<span style="color:#e6db74">200.00</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-03-30</span>,<span style="color:#e6db74">PAYPAL TRANSFER</span>,<span style="color:#e6db74">45.00</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-03-28</span>,<span style="color:#e6db74">BET365 RACES</span>,<span style="color:#e6db74">30.00</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-03-25</span>,<span style="color:#e6db74">UBER RIDE</span>,<span style="color:#e6db74">15.75</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-03-22</span>,<span style="color:#e6db74">WITHDRAWAL ATM</span>,<span style="color:#e6db74">50.00</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-03-20</span>,<span style="color:#e6db74">THREE MOBILE</span>,<span style="color:#e6db74">25.00</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-03-17</span>,<span style="color:#e6db74">SAINSBURYS GROCERIES</span>,<span style="color:#e6db74">95.25</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-03-15</span>,<span style="color:#e6db74">SPECSAVERS APPOINTMENT</span>,<span style="color:#e6db74">25.00</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-03-12</span>,<span style="color:#e6db74">RAILWAY TICKET</span>,<span style="color:#e6db74">22.50</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-03-10</span>,<span style="color:#e6db74">AMAZON PURCHASE</span>,<span style="color:#e6db74">28.99</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-03-07</span>,<span style="color:#e6db74">NETFLIX SUBSCRIPTION</span>,<span style="color:#e6db74">13.99</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-03-05</span>,<span style="color:#e6db74">NATWEST-BANK-REFERENCE RENT</span>,<span style="color:#e6db74">750.00</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-03-03</span>,<span style="color:#e6db74">NEXT RETAIL-LTD</span>,<span style="color:#e6db74">125.00</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-03-01</span>,<span style="color:#e6db74">VIRGIN-MEDIA MONTHLY</span>,<span style="color:#e6db74">65.50</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-02-28</span>,<span style="color:#e6db74">YOUTUBE PREMIUM</span>,<span style="color:#e6db74">11.99</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-02-25</span>,<span style="color:#e6db74">SKY SUBSCRIPTION</span>,<span style="color:#e6db74">45.99</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-02-23</span>,<span style="color:#e6db74">ASDA GROCERIES</span>,<span style="color:#e6db74">92.45</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-02-20</span>,<span style="color:#e6db74">DISNEY+ SUBSCRIPTION</span>,<span style="color:#e6db74">7.99</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-02-18</span>,<span style="color:#e6db74">PAYPAL TRANSFER</span>,<span style="color:#e6db74">35.99</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-02-15</span>,<span style="color:#e6db74">TESCO GROCERIES</span>,<span style="color:#e6db74">75.40</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-02-12</span>,<span style="color:#e6db74">WATERSTONES BOOK</span>,<span style="color:#e6db74">15.99</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-02-10</span>,<span style="color:#e6db74">AMAZON PURCHASE</span>,<span style="color:#e6db74">65.75</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-02-07</span>,<span style="color:#e6db74">NETFLIX SUBSCRIPTION</span>,<span style="color:#e6db74">13.99</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-02-05</span>,<span style="color:#e6db74">ROYAL-MAIL POSTAGE</span>,<span style="color:#e6db74">8.95</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-02-03</span>,<span style="color:#e6db74">RAILWAY TICKET</span>,<span style="color:#e6db74">35.45</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-02-01</span>,<span style="color:#e6db74">KATHERINE ALLOWANCE</span>,<span style="color:#e6db74">200.00</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-01-30</span>,<span style="color:#e6db74">UBER RIDE</span>,<span style="color:#e6db74">12.50</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-01-28</span>,<span style="color:#e6db74">STARBUCKS COFFEE</span>,<span style="color:#e6db74">4.95</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-01-25</span>,<span style="color:#e6db74">THREE MOBILE</span>,<span style="color:#e6db74">25.00</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-01-20</span>,<span style="color:#e6db74">AMAZON PURCHASE</span>,<span style="color:#e6db74">45.30</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-01-18</span>,<span style="color:#e6db74">SAINSBURYS GROCERIES</span>,<span style="color:#e6db74">88.75</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-01-15</span>,<span style="color:#e6db74">NETFLIX SUBSCRIPTION</span>,<span style="color:#e6db74">13.99</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-01-12</span>,<span style="color:#e6db74">PAYPAL TRANSFER</span>,<span style="color:#e6db74">22.45</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-01-10</span>,<span style="color:#e6db74">VIRGIN-MEDIA MONTHLY</span>,<span style="color:#e6db74">65.50</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-01-07</span>,<span style="color:#e6db74">SKY-BETTING RACES</span>,<span style="color:#e6db74">20.00</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">2024-01-05</span>,<span style="color:#e6db74">PAYPAL TRANSFER</span>,<span style="color:#e6db74">55.99</span>
</span></span></code></pre></div><h3 id="generating-a-report">Generating a Report</h3>
<p>To generate a financial report <code>M-x bank-buddy-generate-report</code></p>
<p>You&rsquo;ll be prompted to select an input CSV file and specify the output Org file.</p>
<p>The package processes the data asynchronously and a buffer will appear reporting on the analysis progress, so Emacs remains responsive even with large CSV files.</p>
<p>When processing is complete, you&rsquo;ll be asked if you want to open the generated report.</p>
<h3 id="understanding-the-report">Understanding the Report</h3>
<p>A typical Bank Buddy report includes:</p>
<h4 id="summary-overview">Summary Overview</h4>
<ul>
<li>Total transactions analyzed</li>
<li>Date range</li>
<li>Total, average daily, and weekly spending</li>
</ul>
<h4 id="top-spending-categories">Top Spending Categories</h4>
<ul>
<li>Ranked list of spending categories</li>
<li>Total amount, percentage, and monthly/yearly averages</li>
<li>Links to generated gnuplot scripts and data files</li>
</ul>
<h4 id="monthly-spending-patterns">Monthly Spending Patterns</h4>
<ul>
<li>Month-by-month spending visualization</li>
<li>Category breakdown for each month</li>
<li>Highest and lowest spending months</li>
<li>Links to visualization files (*.gp, *.dat)</li>
</ul>
<h4 id="monthly-category-breakdowns">Monthly Category Breakdowns</h4>
<ul>
<li>Detailed charts for each month showing spending by category</li>
<li>Consistent color coding across months for easy comparison</li>
<li>Links to individual gnuplot scripts for customization</li>
</ul>
<h4 id="top-merchants">Top Merchants</h4>
<ul>
<li>Your highest-spending merchants</li>
<li>Total amount, percentage, and monthly/yearly averages</li>
<li>Links to generated visualization files</li>
</ul>
<h4 id="recurring-subscriptions">Recurring Subscriptions</h4>
<ul>
<li>Detected recurring payments</li>
<li>Estimated monthly cost</li>
<li>Frequency analysis (weekly, bi-weekly, monthly, annual)</li>
</ul>
<h4 id="transaction-size-distribution">Transaction Size Distribution</h4>
<ul>
<li>Analysis of transaction sizes (under £10, £10-50, £50-100, over £100)</li>
</ul>
<h4 id="unmatched-transactions">Unmatched Transactions</h4>
<ul>
<li>List of transactions that didn&rsquo;t match specific categories</li>
<li>Suggested patterns to add to your customization</li>
</ul>
<h3 id="managing-transaction-categories">Managing Transaction Categories</h3>
<p>Bank Buddy comes with predefined category patterns, but you&rsquo;ll likely want to customize these for your personal transactions. The package includes an interactive mode for managing categories.</p>
<p>When viewing a report, you can:</p>
<ol>
<li>Navigate to an unmatched transaction (in the &ldquo;Unmatched Transactions&rdquo; section)</li>
<li>Press <code>C-c C-a</code> to add it to a category</li>
<li>Choose an existing category or create a new one</li>
<li>Optionally save the updated category definitions to your init file</li>
<li>Regenerate the report to see the changes</li>
</ol>
<p>To manage existing categories or add new ones manually, customize <code>bank-buddy-core-cat-list-defines</code>.</p>
<h3 id="category-format">Category Format</h3>
<p>Categories are defined as patterns in the form:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(REGEX-PATTERN CATEGORY-CODE)
</span></span></code></pre></div><p>Where:</p>
<ul>
<li><code>REGEX-PATTERN</code> is a regular expression that matches transaction descriptions</li>
<li><code>CATEGORY-CODE</code> is a short code representing the category (e.g., &ldquo;fod&rdquo; for food)</li>
</ul>
<p>For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(<span style="color:#e6db74">&#34;amazon\\|amz&#34;</span> <span style="color:#e6db74">&#34;amz&#34;</span>)  <span style="color:#75715e">; Amazon purchases</span>
</span></span><span style="display:flex;"><span>(<span style="color:#e6db74">&#34;netflix\\|spotify\\|youtube&#34;</span> <span style="color:#e6db74">&#34;str&#34;</span>)  <span style="color:#75715e">; Streaming services</span>
</span></span></code></pre></div><p>You can customize category codes and their display names by modifying <code>bank-buddy-core-category-names</code>.</p>
<h3 id="updating-and-regenerating-reports">Updating and Regenerating Reports</h3>
<p>If you add or modify category patterns after generating a report:</p>
<ol>
<li>With the report open, enable Bank Buddy Category mode if not already active: <code>M-x bank-buddy-cat-mode</code></li>
<li>Press <code>C-c C-r</code> to regenerate the report with the updated categories</li>
</ol>
<p>The report will be refreshed with the new categorization rules.</p>
<h2 id="example-workflow">Example Workflow</h2>
<ul>
<li>
<p><strong>Generate Initial Report</strong> <code>M-x bank-buddy-generate-report</code></p>
</li>
<li>
<p><strong>Review Unmatched Transactions</strong>
Navigate to the &ldquo;Unmatched Transactions&rdquo; section of the report.</p>
</li>
<li>
<p><strong>Categorize Transactions</strong></p>
<ul>
<li>Place cursor on an unmatched transaction</li>
<li><code>C-c C-a</code> to add it to a category</li>
<li>Choose an existing category or create a new one</li>
</ul>
</li>
<li>
<p><strong>Regenerate Report</strong></p>
<ul>
<li><code>C-c C-r</code> to see your changes</li>
</ul>
</li>
<li>
<p><strong>Save Category Definitions</strong>
When prompted, choose to save your category definitions to your init file.</p>
</li>
</ul>
<h2 id="customization">Customization</h2>
<h3 id="core-settings">Core Settings</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span><span style="color:#75715e">;; Exclude large transactions from analysis</span>
</span></span><span style="display:flex;"><span>(setq bank-buddy-core-exclude-large-txns <span style="color:#66d9ef">t</span>)
</span></span><span style="display:flex;"><span>(setq bank-buddy-core-large-txn-threshold <span style="color:#ae81ff">2000</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Number of occurrences to detect subscriptions</span>
</span></span><span style="display:flex;"><span>(setq bank-buddy-core-subscription-min-occurrences <span style="color:#ae81ff">3</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Number of top items to display</span>
</span></span><span style="display:flex;"><span>(setq bank-buddy-core-top-spending-categories <span style="color:#ae81ff">5</span>)
</span></span><span style="display:flex;"><span>(setq bank-buddy-core-top-merchants <span style="color:#ae81ff">5</span>)
</span></span></code></pre></div><h3 id="customizing-category-patterns">Customizing Category Patterns</h3>
<p>You can customize the category patterns by setting <code>bank-buddy-core-cat-list-defines</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(customize-set-variable <span style="color:#e6db74">&#39;bank-buddy-core-cat-list-defines</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#39;</span>((<span style="color:#e6db74">&#34;amazon\\|amz&#34;</span> <span style="color:#e6db74">&#34;amz&#34;</span>)
</span></span><span style="display:flex;"><span>    (<span style="color:#e6db74">&#34;netflix\\|spotify&#34;</span> <span style="color:#e6db74">&#34;str&#34;</span>)
</span></span><span style="display:flex;"><span>    (<span style="color:#e6db74">&#34;uber\\|lyft&#34;</span> <span style="color:#e6db74">&#34;txi&#34;</span>)
</span></span><span style="display:flex;"><span>    (<span style="color:#e6db74">&#34;sainsburys\\|tesco\\|asda&#34;</span> <span style="color:#e6db74">&#34;fod&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">;; Add your own patterns here</span>
</span></span><span style="display:flex;"><span>    (<span style="color:#e6db74">&#34;.*&#34;</span> <span style="color:#e6db74">&#34;o&#34;</span>)))  <span style="color:#75715e">; Catch-all pattern should be last</span>
</span></span></code></pre></div><h3 id="customizing-category-names">Customizing Category Names</h3>
<p>Category codes are mapped to human-readable names via <code>bank-buddy-core-category-names</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(customize-set-variable <span style="color:#e6db74">&#39;bank-buddy-core-category-names</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#39;</span>((<span style="color:#e6db74">&#34;amz&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;Amazon&#34;</span>)
</span></span><span style="display:flex;"><span>    (<span style="color:#e6db74">&#34;str&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;Streaming Services&#34;</span>)
</span></span><span style="display:flex;"><span>    (<span style="color:#e6db74">&#34;txi&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;Taxi &amp; Rideshare&#34;</span>)
</span></span><span style="display:flex;"><span>    (<span style="color:#e6db74">&#34;fod&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;Groceries&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">;; Add your own mappings here</span>
</span></span><span style="display:flex;"><span>    (<span style="color:#e6db74">&#34;o&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;Other&#34;</span>)))
</span></span></code></pre></div><h3 id="customizing-subscription-detection">Customizing Subscription Detection</h3>
<p>Define subscription patterns for better detection of recurring payments:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(customize-set-variable <span style="color:#e6db74">&#39;bank-buddy-core-subscription-patterns</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#39;</span>((<span style="color:#e6db74">&#34;NETFLIX&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;Netflix&#34;</span>)
</span></span><span style="display:flex;"><span>    (<span style="color:#e6db74">&#34;SPOTIFY&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;Spotify&#34;</span>)
</span></span><span style="display:flex;"><span>    (<span style="color:#e6db74">&#34;AMAZON PRIME&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;Amazon Prime&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">;; Add your own patterns here</span>
</span></span><span style="display:flex;"><span>    ))
</span></span></code></pre></div><h2 id="advanced-usage">Advanced Usage</h2>
<h3 id="integration-with-other-financial-tools">Integration with Other Financial Tools</h3>
<p>Bank Buddy reports are generated as Org-mode files, making them compatible with other Org-based tools:</p>
<ul>
<li>Export to HTML, PDF, or other formats with Org export functions</li>
<li>Use <code>org-capture</code> to add notes to specific transactions or categories</li>
</ul>
<h3 id="custom-visualization">Custom Visualization</h3>
<p>Bank Buddy generates visualizations using external gnuplot scripts. You can customize these by:</p>
<ol>
<li>Editing the generated .gp files in the report directory</li>
<li>Creating your own gnuplot scripts based on the generated .dat files</li>
<li>Running the scripts manually with <code>gnuplot filename.gp</code></li>
</ol>
<h3 id="keyboard-shortcuts">Keyboard Shortcuts</h3>
<p>When viewing a report with <code>bank-buddy-cat-mode</code> enabled:</p>
<ul>
<li><code>C-c C-a</code>: Add the transaction at point to a category</li>
<li><code>C-c C-r</code>: Regenerate the report with current category definitions</li>
</ul>
<h2 id="caveats-and-tips">Caveats and Tips</h2>
<ul>
<li><strong>CSV Format</strong>: Bank Buddy expects a CSV with date, description, and amount columns</li>
<li><strong>Performance</strong>: For very large CSV files (10K+ rows), the async processing helps but may still take time</li>
<li><strong>Categorization</strong>: Start with broad patterns and refine as needed</li>
<li><strong>Visualization</strong>: Ensure gnuplot is installed on your system for chart generation</li>
<li><strong>Saving Patterns</strong>: Always save your category patterns to persist between sessions</li>
</ul>
<h2 id="comparison-with-other-financial-packages">Comparison with Other Financial Packages</h2>
<p>Several Emacs packages exist for financial management, but they serve different purposes. Here&rsquo;s how Bank Buddy compares to other notable financial packages:</p>
<h3 id="ledger-mode">Ledger-mode</h3>
<p><a href="https://github.com/ledger/ledger-mode">Ledger-mode</a> is an Emacs interface to the command-line Ledger accounting system.</p>
<p><strong>Key differences:</strong></p>
<ul>
<li>Ledger is a complete double-entry accounting system; Bank Buddy is focused on bank statement analysis</li>
<li>Ledger requires manual transaction entry or carefully formatted imports; Bank Buddy automates categorization</li>
<li>Ledger offers more comprehensive accounting features (accounts, assets, liabilities); Bank Buddy focuses on spending insights</li>
<li>Bank Buddy provides visual spending breakdowns and charts; Ledger focuses on accurate accounting</li>
</ul>
<p><strong>When to use Ledger:</strong> For complete personal finance tracking, investments, budgeting, and double-entry accounting.
<strong>When to use Bank Buddy:</strong> For quick analysis of bank statements and visualizing spending patterns.</p>
<h3 id="hledger-mode">HLedger-mode</h3>
<p><a href="https://github.com/narendraj9/hledger-mode">HLedger-mode</a> is an Emacs major mode for working with hledger, a plain-text accounting system similar to Ledger.</p>
<p><strong>Key differences:</strong></p>
<ul>
<li>HLedger, like Ledger, is a full double-entry accounting system; Bank Buddy focuses on bank statement analysis</li>
<li>HLedger requires manual transaction entry or formatted imports; Bank Buddy automates categorization</li>
<li>HLedger offers comprehensive accounting features (multiple currencies, time reporting); Bank Buddy emphasizes spending insights</li>
<li>Bank Buddy provides visual spending breakdowns; HLedger focuses on textual reports and balances</li>
</ul>
<p><strong>When to use HLedger-mode:</strong> For detailed personal finance tracking, multi-currency support, and generating various financial reports.
<strong>When to use Bank Buddy:</strong> For quick analysis of bank statements and visualizing spending patterns without learning a full accounting system.</p>
<h3 id="elbank">Elbank</h3>
<p><a href="https://github.com/NicolasPetton/Elbank">Elbank</a> is a personal finance reporting tool for Emacs that uses Weboob to fetch data from bank websites.</p>
<p><strong>Key differences:</strong></p>
<ul>
<li>Elbank can automatically fetch transactions from supported banks; Bank Buddy works with CSV exports</li>
<li>Elbank focuses on reporting and visualization; Bank Buddy offers both analysis and reporting</li>
<li>Elbank requires Weboob setup and configuration; Bank Buddy works directly with CSV files</li>
<li>Bank Buddy provides customizable transaction categorization; Elbank may rely on bank-provided categories</li>
</ul>
<p><strong>When to use Elbank:</strong> For automated tracking of multiple bank accounts with direct data fetching and basic reporting.
<strong>When to use Bank Buddy:</strong> For detailed analysis and categorization of bank statements, especially when working with CSV exports or when bank integration isn&rsquo;t available or desired.</p>
<h3 id="beancount-mode">Beancount-mode</h3>
<p><a href="https://github.com/beancount/beancount-mode">Beancount-mode</a> is an Emacs mode for Beancount, another plain-text accounting system.</p>
<p><strong>Key differences:</strong></p>
<ul>
<li>Beancount, like Ledger, is a full double-entry accounting system</li>
<li>Beancount has stricter syntax requirements than Ledger</li>
<li>Bank Buddy offers automatic categorization and reporting, while Beancount requires manual entry</li>
<li>Beancount generates sophisticated reports, but requires more setup and knowledge</li>
</ul>
<p><strong>When to use Beancount:</strong> For precise, auditable personal accounting with strict validation.
<strong>When to use Bank Buddy:</strong> For simple spending analysis without learning accounting principles.</p>
<h3 id="csv-mode-and-orgtbl-mode">csv-mode and orgtbl-mode</h3>
<p>Some users analyze financial CSV data using built-in Emacs packages like csv-mode combined with org-table functionality.</p>
<p><strong>Key differences:</strong></p>
<ul>
<li>These are general-purpose tools that require manual customization for financial analysis</li>
<li>Bank Buddy provides specialized, financial-specific analysis and visualization</li>
<li>Bank Buddy automatically categorizes transactions based on patterns</li>
<li>Bank Buddy generates reports without manual processing</li>
</ul>
<p><strong>When to use csv/orgtbl-mode:</strong> For custom, one-off analysis of financial data.
<strong>When to use Bank Buddy:</strong> For consistent, repeatable analysis of bank statements.</p>
<h2 id="roadmap">Roadmap</h2>
<table>
  <thead>
      <tr>
          <th>TODO</th>
          <th>DOING</th>
          <th>DONE</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Add Paypal break down csv</td>
          <td>Highlight bank lines not matched for iterative tweaks</td>
          <td>Asynchronous operation</td>
      </tr>
      <tr>
          <td>Add large sum outlays</td>
          <td>Generate test data and unit test</td>
          <td></td>
      </tr>
      <tr>
          <td>Budget Tracking</td>
          <td>Data Visualization</td>
          <td></td>
      </tr>
      <tr>
          <td>AI-Powered Categorization</td>
          <td>Better gnuplot autogeneration of plots</td>
          <td></td>
      </tr>
      <tr>
          <td></td>
          <td>Custom Category Mapping</td>
          <td></td>
      </tr>
  </tbody>
</table>