<p>
This little instruction covers Slidgram<sup><a id="fnr.slidgram" class="footref" href="#fn.slidgram" role="doc-backlink">1</a></sup> installation in NetBSD OS.
</p>

<p>
Sadly, the <a href="https://slidge.im/">Slidge</a> project <a href="https://slidge.im/docs/slidgram/main/admin/install.html">recommends</a> to use Docker to install and use
their server and there are no detailed description how to install this
program to the server "as usual" — just a one <code>pip install</code> command. So,
I'll cover some pitfalls here.
</p>


<div class="figure">
<p><img src="/assets/static/d9e684430a4bda32.png" alt="A meme with suspiciously looking cat and the text &quot;«Sir, it is good-looking self-hosted software.» Look inside. Docker.&quot;" align="center" width="50%" />
</p>
</div>

<p>
All actions were performed inside separate sandbox to avoid host
system pollution with Slidgram dependencies. This sandbox has the
minimal system inside (with <code>pkg_add</code> and <code>pkgin</code> installed and
configured), so, I hope, my instructions will be detailed enough for
NetBSD system administrators.
</p>

<hr />

<p>
First, it is necessary to install some <code>python3</code> / <code>pip</code> dependencies,
necessary to download and install programs via <code>pip</code>:
</p>
<pre class="example">
pkgin install py313-pip py313-setuptools py313-setuptools-rust py313-wheel
</pre>

<p>
Second, there are Rust and GCC are necessary. Rust is used to build
some dependencies used by some Python library, used by Slidgram. And
the GCC is necessary to link results of compilation with <code>ld</code>.
</p>
<pre class="example">
pkgin install rust rust-bin gcc14
</pre>

<p>
Then, there are some Python dependencies for Slidgram are necessary.
After some experimenting I found that at least these libraries are
necessary:
</p>
<pre class="example">
pkgin install py313-uvloop py313-aiohttp py313-alembic py313-Pillow \
              py313-configargparse py313-defusedxml py313-qrcode \
              py313-sqlalchemy py313-aiohappyeyeballs py313-aiosignal \
              py313-attrs py313-frozenlist py313-multidict py313-propcache \
              py313-yarl py313-aiodns py313-brotli py313-mako py313-greenlet \
              py313-idna py313-cffi
</pre>

<p>
After this, the slidgram could be installed:
</p>
<pre class="example">
PATH="$PATH:/usr/pkg/gcc14/bin" pip3.13 install slidgram
</pre>

<p>
This command will run for a looooong time before it completes — because of Rust.
</p>


<div class="figure">
<p><img src="/assets/static/cpu-pinpoint-1757904663-1757911008.png" alt="Munin CPU usage graph showing high CPU load for near an 1 hour" align="center" width="80%" />
</p>
</div>

<p>
At the end, the <code>slidgram</code> binary finally could be called from command
line.
</p>

<p>
I will not cover the configuration of Slidgram here. The <a href="https://slidge.im/docs/slidgram/main/">official
documentation</a> describes configuration pretty well.
</p>

<hr />
<div id="footnotes">

<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.slidgram" class="footnum" href="#fnr.slidgram" role="doc-backlink">1</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
XMPP&lt;-&gt;Telegram transport, used to communicate with
Telegram users via XMPP.
</p></div></div>


</div>
</div>