<p>From my previous two posts regarding defining a Selected Window Accent some interesting posts from <a href="https://irreal.org/blog">irreal</a> arose, especially:</p>
<p><a href="https://irreal.org/blog/?p=11867#comment-6354017310">Marking The Active Window</a></p>
<p>Where it looks like the simple <code>mode-line-active</code> and <code>mode-line-inactive</code> was a good way to indicate the current focussed window, and I do agree.</p>
<p>However to practice my elisp and to create my first emacs package I thought I would bring together my preference which is to have a tiling window manager type of focus involving typically a border around the current window while leveraging the usual customization options that come with emacs.</p>
<p>I have put it on <a href="https://github.com/captainflasmr/selected-window-accent-mode">github/captainflasmr</a> for now and below is the <strong>README</strong> for a package called <strong><code>selected-window-accent-mode</code></strong></p>
<p>It&rsquo;s a bit rough around the edges (pardon the pun!) but I think it might be a good starting point for further improvements.</p>
<hr>
<h2 id="selected-window-accent-mode">selected-window-accent-mode</h2>
<h3 id="summary">Summary</h3>
<p>The Selected Window Accent Mode is an Emacs package designed to visually distinguish the currently selected window by applying a unique accent color to its fringes, mode line, header line, and margins.</p>
<figure><img src="https://emacs.dyerdwelling.family/ox-hugo/selected-window-accent-mode-00.jpg" width="100%">
</figure>

<hr>
<h3 id="quick-start--emacs-29">Quick Start (emacs 29)</h3>
<p>Add the following to the emacs init for a tiling window manager feel (see image above):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(use-package selected-window-accent-mode
</span></span><span style="display:flex;"><span>  :vc (:fetcher github :repo <span style="color:#e6db74">&#34;captainflasmr/selected-window-accent-mode&#34;</span>)
</span></span><span style="display:flex;"><span>  :custom
</span></span><span style="display:flex;"><span>  (selected-window-accent-fringe-thickness <span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>  (selected-window-accent-custom-color <span style="color:#e6db74">&#34;#916941&#34;</span>)
</span></span><span style="display:flex;"><span>  (selected-window-accent-mode-style <span style="color:#e6db74">&#39;tiling</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(selected-window-accent-mode <span style="color:#ae81ff">1</span>)
</span></span></code></pre></div><hr>
<h3 id="installation">Installation</h3>
<h4 id="use-package--emacs-29">use-package (emacs 29)</h4>
<p>Put the following into your emacs init file:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(use-package selected-window-accent-mode
</span></span><span style="display:flex;"><span>  :vc (:fetcher github :repo <span style="color:#e6db74">&#34;captainflasmr/selected-window-accent-mode&#34;</span>))
</span></span></code></pre></div><h4 id="use-package--melpa">use-package (MELPA)</h4>
<ul>
<li>TODO (see roadmap below)</li>
</ul>
<h4 id="from-source">from source</h4>
<p>Download the `.el` file and place it in your Emacs `load-path`.</p>
<p>Then either manually load it or add it to your configuration to be loaded at startup.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(require <span style="color:#e6db74">&#39;selected-window-accent-mode</span>)
</span></span></code></pre></div><hr>
<h3 id="usage">Usage</h3>
<p>Interactively Toggle the mode on and off <code>M-x selected-window-accent-mode</code></p>
<p>Interactively change the current style <code>M-x switch-selected-window-accent-style</code> which will present a <code>completing-read</code> selection in the minibuffer</p>
<p>The styles that are currently supported :</p>
<ul>
<li>default</li>
<li>tiling</li>
<li>subtle</li>
</ul>
<p>see <strong>roadmap</strong> below for a description.</p>
<p>Typically I have bound these two interactive functions to a new keymap where I keep all my emacs visual change functions.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(defvar my-win-keymap (<span style="color:#a6e22e">make-sparse-keymap</span>))
</span></span><span style="display:flex;"><span>(global-set-key (kbd <span style="color:#e6db74">&#34;M-o&#34;</span>) my-win-keymap)
</span></span><span style="display:flex;"><span>(<span style="color:#a6e22e">define-key</span> my-win-keymap (kbd <span style="color:#e6db74">&#34;a&#34;</span>) <span style="color:#e6db74">&#39;selected-window-accent-mode</span>)
</span></span><span style="display:flex;"><span>(<span style="color:#a6e22e">define-key</span> my-win-keymap (kbd <span style="color:#e6db74">&#34;y&#34;</span>) <span style="color:#e6db74">&#39;switch-selected-window-accent-style</span>)
</span></span></code></pre></div><hr>
<h3 id="examples">Examples</h3>
<h4 id="example-1-default-custom-color">Example 1 - Default / custom color</h4>
<figure><img src="https://emacs.dyerdwelling.family/ox-hugo/selected-window-accent-mode-01.jpg" width="100%">
</figure>

<p>To enable the accent mode automatically upon starting Emacs, add the following line to your `.emacs` or `init.el` file:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(use-package selected-window-accent-mode
</span></span><span style="display:flex;"><span>  :vc (:fetcher github :repo <span style="color:#e6db74">&#34;captainflasmr/selected-window-accent-mode&#34;</span>)
</span></span><span style="display:flex;"><span>  :custom
</span></span><span style="display:flex;"><span>  (selected-window-accent-custom-color <span style="color:#e6db74">&#34;goldenrod&#34;</span>)
</span></span><span style="display:flex;"><span>  (selected-window-accent-mode-style <span style="color:#e6db74">&#39;default</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(selected-window-accent-mode <span style="color:#ae81ff">1</span>)
</span></span></code></pre></div><p>This will accent the modeline only for the selected window with the <code>goldenrod</code> color.</p>
<hr>
<h4 id="example-2-tiling-custom-color-custom-fringe-thickness">Example 2 - Tiling / custom color / custom fringe thickness</h4>
<figure><img src="https://emacs.dyerdwelling.family/ox-hugo/selected-window-accent-mode-02.jpg" width="100%">
</figure>

<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(setq selected-window-accent-fringe-thickness <span style="color:#ae81ff">6</span>)
</span></span><span style="display:flex;"><span>(setq selected-window-accent-custom-color <span style="color:#e6db74">&#34;#4179b2&#34;</span>)
</span></span><span style="display:flex;"><span>(setq selected-window-accent-mode-style <span style="color:#e6db74">&#39;tiling</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(selected-window-accent-mode <span style="color:#ae81ff">1</span>)
</span></span></code></pre></div><p>This will accent the full outline of the window with the color #4175b2 more akin to a tiling window manager.</p>
<hr>
<h4 id="example-3-tiling-theme-highlight-color">Example 3 - Tiling / theme highlight color</h4>
<figure><img src="https://emacs.dyerdwelling.family/ox-hugo/selected-window-accent-mode-03.jpg" width="100%">
</figure>

<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(setq selected-window-accent-custom-color <span style="color:#66d9ef">nil</span>)
</span></span><span style="display:flex;"><span>(setq selected-window-accent-mode-style <span style="color:#e6db74">&#39;tiling</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(selected-window-accent-mode <span style="color:#ae81ff">1</span>)
</span></span></code></pre></div><p>This will accent the full outline of the window with the <code>highlight</code> color taken from the current theme.</p>
<hr>
<h4 id="example-4-subtle-custom-fringe-thickness--thick">Example 4 - Subtle / custom fringe thickness (thick)</h4>
<figure><img src="https://emacs.dyerdwelling.family/ox-hugo/selected-window-accent-mode-04.jpg" width="100%">
</figure>

<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(setq selected-window-accent-fringe-thickness <span style="color:#ae81ff">40</span>)
</span></span><span style="display:flex;"><span>(setq selected-window-accent-custom-color <span style="color:#66d9ef">nil</span>)
</span></span><span style="display:flex;"><span>(setq selected-window-accent-mode-style <span style="color:#e6db74">&#39;subtle</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(selected-window-accent-mode <span style="color:#ae81ff">1</span>)
</span></span></code></pre></div><p>This will accent the modeline and just the left fringe and in this case be quite a pronounced thick accent.</p>
<hr>
<h3 id="customization">Customization</h3>
<p>Can be done through the customization interface:</p>
<p><strong>Selected Window Accent Group group:</strong></p>
<p>Customization group for the selected-window-accent package.</p>
<p><strong>Selected Window Accent Custom Color</strong></p>
<p>Custom accent color for the selected window. Set this variable to change the accent color.</p>
<ul>
<li><code>None</code> - color will be using the current <code>highlight</code> face</li>
<li><code>Custom Color</code> - input color name or Hex</li>
</ul>
<p><strong>Selected Window Accent Fringe Thickness:</strong> Integer:</p>
<p>The thickness of the fringes in pixels.</p>
<p><strong>Selected Window Accent Mode</strong>:  <code>Boolean</code>: Toggle</p>
<p>Non-nil if Selected-Window-Accent mode is enabled</p>
<p><strong>Selected Window Accent Mode Style</strong></p>
<p>Current style for accenting the selected window.</p>
<ul>
<li><code>default</code> - just modeline accent</li>
<li><code>tiling</code> - window border accent</li>
<li><code>subtle</code> - left and modeline accent</li>
</ul>
<hr>
<h3 id="minor-mode">Minor Mode</h3>
<p>The <code>selected-window-accent-mode</code> is a global minor mode that you can toggle to enable or disable the accenting of the selected window.</p>
<p>When enabled, it distinguishes the selected window with a special accent color.</p>
<hr>
<h3 id="hooks">Hooks</h3>
<p>Two hooks are used to automatically update the window accents when the window configuration or state changes:</p>
<ul>
<li>window-configuration-change-hook</li>
<li>window-state-change-hook</li>
</ul>
<p>These are added when the <code>selected-window-accent-mode</code> is enabled and removed when disabled.</p>
<hr>
<h3 id="bugs">BUGS</h3>
<p>The current version is pretty rough and probably definitely pre-alpha.</p>
<p>Fix these to get to a tagged Version 0.1.</p>
<p>In order of priority</p>
<ul>
<li><strong>TODO</strong> header-line not shown on window split.</li>
<li><strong>TODO</strong> adjust the not selected-window margin to avoid little window navigation. disruption, hence translating a fringe pixel width to a number of margin characters, not quite sure how I am going to do this yet.</li>
<li><strong>TODO</strong> Incorporate <code>mode-line-active</code> and <code>mode-line-inactive</code> somehow as this would make more sense especially in the &lsquo;default mode.</li>
<li><strong>TODO</strong> excess selected-window disruption in header-line.</li>
<li><strong>WATCHING</strong> careful with removing header-line on all windows, for example magit commit window and probably some others may need to add some logic depending on mode.</li>
</ul>
<hr>
<h3 id="roadmap">ROADMAP</h3>
<h4 id="1-dot-add-to-melpa">1. add to MELPA</h4>
<h4 id="2-dot-define-more-custom-variables">2. define more custom variables:</h4>
<ul>
<li>accent color saturation adjustment</li>
<li>accent color darken adjustment</li>
<li>accent color hue adjustment</li>
</ul>
<h4 id="3-dot-define-which-theme-face-attribute-to-use-as-the-main-accent-color">3. define which theme face attribute to use as the main accent color</h4>
<p>Currently the default is to use the <code>highlight</code> face</p>
<h4 id="4-dot-doing-implement-accent-styles">4. <strong>DOING</strong> implement accent styles</h4>
<ul>
<li><strong>DONE</strong> <code>default</code> - <em>bottom</em> - full height modeline</li>
<li><strong>DOING</strong> <code>tiling</code> - <em>top/right/bottom/left</em> - typically a squished modeline and header line to a general accent thickness to provide a typical tiling window manager focussed outline experience</li>
<li><strong>DOING</strong> <code>subtle</code> - <em>left/bottom</em></li>
<li><strong>TODO</strong> <code>full</code> - <em>top/right/bottom/left</em> - full height modeline (currently implemented as <code>tiling</code> but will be moved when tiling is more &ldquo;tiling&rdquo;)</li>
</ul>