<p>Today I learned that you can tell Emacs to use fontsets (or just â€œfontsâ€) for specific character ranges. Thanks to <a href="http://idiocy.org/emacs-fonts-and-fontsets.html">Alan at idiocy.org for the explanation!</a></p>

<p>His example is this:</p>

<div class="language-elisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nv">set-fontset-font</span> <span class="no">t</span> <span class="o">'</span><span class="p">(</span><span class="nv">?</span><span class="err">ğŸ˜Š</span> <span class="o">.</span> <span class="nv">?</span><span class="err">ğŸ˜</span><span class="p">)</span> <span class="s">"Segoe UI Emoji"</span><span class="p">)</span>
</code></pre></div></div>

<p>Now instead of Emoji, which work fine in Emacs for me out of the box, I want SF Symbols. Yes, <a href="https://christiantietze.de/posts/2022/12/sf-symbols-emacs-tab-numbers/">again</a>.</p>

<p>SF Symbols are in the <a href="https://en.wikipedia.org/wiki/Private_Use_Areas">Unicode private use area-b</a>, at the very end of the Unicode table, <code>U+100000..U+10FFFD</code>.</p>

<p>I have no clue how to get the first and last of them; so I just map the whole private use area-b to the San Francisco font SF Pro Display, which shows SF Symbols just nicely.</p>

<p>To replace the Emoji characters from Alanâ€™s example with these un-typable unicode characters, rely on their hex code range:  <code>insert-char</code> accepts the hexadecimal codes directly even though the characters are not part of the preview. So use <code>M-x insert-char 100000</code> and  <code>M-x insert-char 10FFFD</code>.</p>

<p>The result (you can copy-paste, but wonâ€™t see the symbols here):</p>

<div class="language-elisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nv">set-fontset-font</span> <span class="no">t</span> <span class="o">'</span><span class="p">(</span><span class="nv">?</span><span class="err">ô€€€</span> <span class="o">.</span> <span class="nv">?</span><span class="err">ô¿½</span><span class="p">)</span> <span class="s">"SF Pro Display"</span><span class="p">)</span>
</code></pre></div></div>

<p>And thatâ€™s it!</p>

<p>I can now revert the font overrides in <a href="https://christiantietze.de/posts/2022/12/sf-symbols-emacs-tab-numbers/">my tab bar modifications</a>.</p>

<p>And as a bonus, I now actually see the symbols in the Elisp code (which was previously not possible at all):</p>

<figure><a href="https://christiantietze.de/posts/2023/01/use-sf-pro-for-sf-symbols-everywhere-in-emacs/preview.png"><img alt="" src="https://christiantietze.de/posts/2023/01/use-sf-pro-for-sf-symbols-everywhere-in-emacs/preview.png" /></a><figcaption>My tab bar numbers display SF Symbols now!</figcaption></figure>

<p>So wherever I paste a SF Symbol, I now <em>see</em> the symbol. Mode-line, tab-bar, code, text, it doesnâ€™t matter.</p>

<p><strong>Update 2023-01-08:</strong> <a href="https://xenodium.com/emacs-insert-and-render-sf-symbols/">Ãlvaro RamÃ­rez uses a fallback font</a> instead. So no need to specify the character range. This might suffice, too, if you donâ€™t mind other glyphs being taken from the fallback font in case your main font misses some arcane special character. Check out Ãlvaroâ€™s post for a GIF demo, too.</p>
<hr><p><small><a href="https://christiantietze.de/hire-me/">Hire me</a> for freelance macOS/iOS work and consulting.</small></p><p><small><a href="https://christiantietze.de/apps/">Buy</a> my apps.</small></p><p><small><a href="https://christiantietze.de/newsletter/">Receive</a> new posts via email.</small></p>