<p>I’m quite fond of <code class="language-plaintext highlighter-rouge">use-package</code> and I’ve organized my <a href="https://github.com/bbatsov/emacs.d">personal Emacs
setup</a> around it for a while now. One thing
that I don’t like very much is that by default almost I have to add
<code class="language-plaintext highlighter-rouge">:ensure t</code> to almost every <code class="language-plaintext highlighter-rouge">use-package</code> block, as I want all external packages to be
installed if they are not present.  That’s quite handy when I’m setting up Emacs
on a new computer.<sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">1</a></sup> Think something like:</p>

<div class="language-emacs-lisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nb">use-package</span> <span class="nv">zenburn-theme</span>
  <span class="ss">:ensure</span> <span class="no">t</span>
  <span class="ss">:config</span>
  <span class="p">(</span><span class="nv">load-theme</span> <span class="ss">'zenburn</span> <span class="no">t</span><span class="p">))</span>
</code></pre></div></div>

<p>Not a big deal for a few packages, but kind of annoying if you have 50+ packages in your <code class="language-plaintext highlighter-rouge">init.el</code>. There’s a
pretty simple solution to this problem, though. Just add the following bit of configuration to your Emacs setup:</p>

<div class="language-emacs-lisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="k">setq</span> <span class="nv">use-package-always-ensure</span> <span class="no">t</span><span class="p">)</span>
</code></pre></div></div>

<p>Now instead of specifying <code class="language-plaintext highlighter-rouge">:ensure t</code> you can specify <code class="language-plaintext highlighter-rouge">:ensure nil</code> for the packages you <strong>don’t</strong> want to
install automatically. Note that for built-packages (e.g. <code class="language-plaintext highlighter-rouge">dired</code>) it doesn’t really matter if a package
is using <code class="language-plaintext highlighter-rouge">:ensure t</code> or <code class="language-plaintext highlighter-rouge">:ensure nil</code>.<sup id="fnref:2" role="doc-noteref"><a href="#fn:2" class="footnote" rel="footnote">2</a></sup></p>

<p>Which approach do you prefer? Are you the type of person who ensures every package is installed when absent or not? Why do you prefer one approach over the other?</p>

<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:1" role="doc-endnote">
      <p>I know that a lot of people object to this approach, as you’re not sure
what versions of the packages you’d get as <code class="language-plaintext highlighter-rouge">package.el</code> is a bit primitive
compared to something like Ruby’s Bundler or Node’s <code class="language-plaintext highlighter-rouge">npm</code>, but in practice
I’ve rarely had issues with my approach and it has saved me a great deal of
time. <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:2" role="doc-endnote">
      <p><code class="language-plaintext highlighter-rouge">package-installed-p</code> will return <code class="language-plaintext highlighter-rouge">t</code> for those. <a href="#fnref:2" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>