<p>Update: Added macOS Trash integration.</p>
<p>While GNU/Linux had been my operating system of choice for many years, these days I'm primarily on macOS. Lucky for me, I spend most of my time in Emacs itself (or a web browser), making the switch between operating systems a relatively painless task.</p>
<p>I build <a href="https://apps.apple.com/us/developer/xenodium-ltd/id304568690">iOS and macOS apps</a> for a living, so naturally I've accumulated a handful of macOS-Emacs integrations and tweaks over time. Below are some of my favorites.</p>
<h2>Emacs Plus</h2>
<p>For starters, I should mention I run Emacs on macOS via the excellent <a href="https://github.com/d12frosted/homebrew-emacs-plus">Emacs Plus</a> <a href="https://brew.sh/">homebrew</a> recipe. These are the options I use:</p>
<pre><code class="language-{.bash">brew install emacs-plus@30 --with-no-frame-refocus --with-native-comp --with-savchenkovaleriy-big-sur-curvy-3d-icon
</code></pre>
<h2>Valeriy Savchenko's icons</h2>
<p><a href="https://github.com/SavchenkoValeriy">Valeriy Savchenko</a> has created some wonderful <a href="https://github.com/SavchenkoValeriy/emacs-icons">macOS Emacs icons</a>. These days, I use his <a href="https://github.com/SavchenkoValeriy/emacs-icons?tab=readme-ov-file#curvy-3d-rendered-icon">curvy 3D rendered icon</a>, which I get via Emacs Plus's <code>--with-savchenkovaleriy-big-sur-curvy-3d-icon</code> option.</p>
<p><img src="https://xenodium.github.io/images/awesome-emacs-on-macos/icon.png" alt=""></p>
<h2>Modifiers</h2>
<p>It's been a long while since I've settled on using macOS's Command (‚åò) as my Emacs Meta key. For that, you need:</p>
<pre><code class="language-{.commonlisp">(setq mac-command-modifier 'meta)
</code></pre>
<p>At the same time, I've disabled the ‚å• key to avoid inadvertent surprises.</p>
<pre><code class="language-{.commonlisp">(setq mac-option-modifier 'none)
</code></pre>
<h2>Enabling Control-Meta(‚åò)-D</h2>
<p>After setting ‚åò as Meta key, I discovered C-M-d is not available to Emacs for binding keys. There's a <a href="https://xenodium.com/enabling-control-meta-d-on-macos">little workaround</a>:</p>
<pre><code class="language-{.bash">defaults write com.apple.symbolichotkeys AppleSymbolicHotKeys -dict-add 70 '&lt;dict&gt;&lt;key&gt;enabled&lt;/key&gt;&lt;false/&gt;&lt;/dict&gt;'
</code></pre>
<h2>Frames</h2>
<p>You may have noticed the <code>--with-no-frame-refocus</code> Emacs Plus option. I didn't like Emacs refocusing other frames when closing one, so I <a href="https://xenodium.com/no-emacs-frame-refocus-on-macos">sent a tiny patch over to Emacs Plus</a>, which gave us that option.</p>
<p>I also prefer reusing existing frames whenever possible.</p>
<pre><code class="language-{.commonlisp">(setq ns-pop-up-frames nil)
</code></pre>
<h2>Visual tweaks</h2>
<p>Most of my visual tweaks have been documented in my <a href="https://xenodium.com/my-emacs-eye-candy">Emacs eye candy post</a>. For macOS-specific things, read on‚Ä¶</p>
<p>It's been a while since I've added this, though vaguely remember needing it to fix mode line rendering artifacts.</p>
<pre><code class="language-{.commonlisp">(setq ns-use-srgb-colorspace nil)
</code></pre>
<p>I like using a transparent title bar and these two settings gave me just that:</p>
<pre><code class="language-{.commonlisp">(add-to-list 'default-frame-alist '(ns-transparent-titlebar . t))
(add-to-list 'default-frame-alist '(ns-appearance . dark))
</code></pre>
<p>I want a menu bar like other macOS apps, so I enable with:</p>
<pre><code class="language-{.commonlisp">(use-package menu-bar
  :config
  (menu-bar-mode +1))
</code></pre>
<p><img src="https://xenodium.github.io/images/awesome-emacs-on-macos/menu-bar.webp" alt=""></p>
<h2>Emoji picker (a freebie!)</h2>
<p>If you got a more recent Apple keyboard, you can <a href="https://xenodium.com/emacs-freebie-macos-emoji-picker">press the üåê key to insert emojis</a> from anywhere, including Emacs. If you haven't got this key, you can always <code>M-x ns-do-show-character-palette</code>, which launches the very same dialog.</p>
<p>Also check out Charles Choi's <a href="http://yummymelon.com/devnull/macos-native-emoji-picking-in-emacs-from-the-edit-menu.html">macOS Native Emoji Picking in Emacs from the Edit Menu</a>.</p>
<h2>Longing long press for accents?</h2>
<p>If you prefer Apple's long-press approach to inserting accents or other special characters, I got <a href="https://xenodium.com/an-accentuated-emacs-experiment">an Emacs version of that</a>.</p>
<p><img src="https://xenodium.github.io/images/an-accentuated-emacs-experiment/accentuated.webp" alt=""></p>
<h2>Rotate macOS display</h2>
<p>I wanted to rotate my monitor from the comfort of M-x, so I <a href="https://lmno.lol/alvaro/emacs-rotate-my-macos-display">made Emacs do it</a>.</p>
<h2>Open with</h2>
<p>While there are different flavors of &quot;open with default macOS app&quot; commands out there (ie. crux-open-with as part of Bozhidar Batsov's <a href="https://github.com/bbatsov/crux">crux</a>), I wanted one that <a href="https://lmno.lol/alvaro/emacs-open-with-macos-app">let me choose a specific macOS app</a>.</p>
<p><img src="https://xenodium.github.io/images/emacs-open-with-macos-app/open-with_x2.webp" alt=""></p>
<h2>Open in Xcode (at line number)</h2>
<p>Shifting from Emacs to Xcode via &quot;Open with&quot; is simple enough, but don't you want to also <a href="https://xenodium.com/open-in-xcode-at-line-number">visit the very same line</a>?</p>
<h2>SF Symbols (for work)</h2>
<p>Apple offers <a href="https://developer.apple.com/sf-symbols/">SF Symbols</a> on all their platforms, so why not enable <a href="https://xenodium.com/emacs-insert-and-render-sf-symbols">Emacs to insert and render them?</a></p>
<p>This is particulary handy if you do any sort of iOS/macOS development, enabling you to insert SF Symbols using your favorite completion framework. I happen to remain a faithful <a href="https://github.com/abo-abo/swiper">ivy</a> user.</p>
<p><img src="https://xenodium.github.io/images/emacs-insert-and-render-sf-symbols/sf-insert-trimmed_x1.8.webp" alt=""></p>
<h2>SF Symbols (for fun)</h2>
<p>Speaking of enabling SF Symbol rendering, you can also use them to spiff your Emacs up. Check out Charles Choi's <a href="https://github.com/kickingvegas/calle24">Calle 24</a> for a great-looking Emacs toolbar. Also, Christian Tietze shows how to <a href="https://christiantietze.de/posts/2022/12/sf-symbols-emacs-tab-numbers/">use SF Symbols as Emacs tab numbers</a>.</p>
<h2>Quick kill</h2>
<p>While macOS's Activity Monitor does a fine job killing processes, I wanted something a little speedier, so I went with a <a href="https://lmno.lol/alvaro/emacs-quick-kill-process">killing solution leveraging Emacs completions</a>.</p>
<p><img src="https://xenodium.github.io/images/emacs-quick-kill-process/kill_x1.8.webp" alt=""></p>
<h2>SwiftUI a la org babel</h2>
<p>Having learned how simple it was to <a href="https://xenodium.com/org-babel-objective-c-support">enable Objective-C babel support</a>, I figured I could do something a little more creative with SwiftUI, so I published <a href="https://lmno.lol/alvaro/ob-swiftui-updates">ob-swiftui</a> on MELPA.</p>
<p><img src="https://xenodium.github.io/images/ob-swiftui-updates/file-render.gif" alt=""></p>
<h2>Changing macOS default apps</h2>
<p>I found the nifty <a href="https://github.com/moretension/duti">duti</a> command-line tool to change default macOS applications super handy, but could never remember its name when I needed it. And so I decided to bring it into <a href="https://github.com/xenodium/dwim-shell-command">dwim-shell-command</a> as part of my <a href="https://github.com/xenodium/dwim-shell-command/tree/main?tab=readme-ov-file#build-a-rich-toolbox-or-use-mine">toolbox</a>.</p>
<p><img src="https://xenodium.github.io/images/hey-emacs-change-the-default-macos-app-for/set-default_x1.3.webp" alt=""></p>
<p>I got a bunch of handy helpers in <a href="https://github.com/xenodium/dwim-shell-command/blob/main/dwim-shell-commands.el">dwim-shell-commands.el</a> (specially all the image/video helpers via ffmpeg and imagemagick). Go check <a href="https://github.com/xenodium/dwim-shell-command/blob/main/dwim-shell-commands.el">dwim-shell-commands.el</a>. There's loads in there, but here are my macOS-specific commands:</p>
<ul>
<li>dwim-shell-commands-macos-add-to-photos</li>
<li>dwim-shell-commands-macos-bin-plist-to-xml</li>
<li>dwim-shell-commands-macos-caffeinate</li>
<li>dwim-shell-commands-macos-convert-to-mp4</li>
<li>dwim-shell-commands-macos-empty-trash</li>
<li>dwim-shell-commands-macos-install-iphone-device-ipa</li>
<li>dwim-shell-commands-macos-make-finder-alias</li>
<li>dwim-shell-commands-macos-ocr-text-from-desktop-region</li>
<li>dwim-shell-commands-macos-ocr-text-from-image</li>
<li>dwim-shell-commands-macos-open-with</li>
<li>dwim-shell-commands-macos-open-with-firefox</li>
<li>dwim-shell-commands-macos-open-with-safari</li>
<li>dwim-shell-commands-macos-reveal-in-finder</li>
<li>dwim-shell-commands-macos-screenshot-window</li>
<li>dwim-shell-commands-macos-set-default-app</li>
<li>dwim-shell-commands-macos-share</li>
<li>dwim-shell-commands-macos-start-recording-window</li>
<li>dwim-shell-commands-macos-abort-recording-window</li>
<li>dwim-shell-commands-macos-end-recording-window</li>
<li>dwim-shell-commands-macos-toggle-bluetooth-device-connection</li>
<li>dwim-shell-commands-macos-toggle-dark-mode</li>
<li>dwim-shell-commands-macos-toggle-display-rotation</li>
<li>dwim-shell-commands-macos-toggle-menu-bar-autohide</li>
<li>dwim-shell-commands-macos-version-and-hardware-overview-info</li>
</ul>
<h2>Toggle dark mode</h2>
<p>Continuing on the <code>dwim-shell-commands</code> family, I should also mention <code>dwim-shell-commands-macos-toggle-dark-mode</code>.</p>
<p>While I hardly ever change my Emacs theme, I do toggle macOS dark mode from time to time to test macOS or web development.</p>
<p><img src="https://xenodium.github.io/images/awesome-emacs-on-macos/dark-toggle.gif" alt=""></p>
<h2>Menu bar auto hide</h2>
<p>One last <code>dwim-shell-command</code>‚Ä¶ One that showcases <a href="https://xenodium.com/toggle-macos-menu-bar-from-you-know-where">toggling the macOS menu bar (autohide)</a>.</p>
<p><img src="https://xenodium.github.io/images/toggle-macos-menu-bar-from-you-know-where/autohide.webp" alt=""></p>
<h2>Connect to your Bluetooth speaker</h2>
<p>While this didn't quite stick for me, it was a fun experiment to <a href="https://lmno.lol/alvaro/emacs-connect-my-bluetooth-speaker">add Emacs into the mix</a>.</p>
<p><img src="https://xenodium.github.io/images/emacs-connect-my-bluetooth-speaker/connect-disconnect.gif" alt=""></p>
<h2>Eshell</h2>
<p>This is just a little fun banner I see whenever I launch <a href="https://www.gnu.org/software/emacs/manual/html_mono/eshell.html">eshell</a>.</p>
<p><img src="https://xenodium.github.io/images/awesome-emacs-on-macos/eshell.png" alt=""></p>
<p>This is all you need:</p>
<pre><code class="language-{.commonlisp">(use-package em-banner
  :custom
  (eshell-banner-message &quot;
\x1b[32m                             'c.                    \x1b[0m
\x1b[32m                          ,xNMM.                    \x1b[0m
\x1b[32m                        .OMMMMo                     \x1b[0m
\x1b[32m                        OMMM0,                      \x1b[0m
\x1b[32m              .;loddo:' loolloddol;.                \x1b[0m
\x1b[32m            cKMMMMMMMMMMNWMMMMMMMMMM0:              \x1b[0m
\x1b[33m          .KMMMMMMMMMMMMMMMMMMMMMMMWd.              \x1b[0m
\x1b[33m          XMMMMMMMMMMMMMMMMMMMMMMMX.                \x1b[0m
\x1b[31m        ;MMMMMMMMMMMMMMMMMMMMMMMM:                  \x1b[0m
\x1b[31m        :MMMMMMMMMMMMMMMMMMMMMMMM:                  \x1b[0m
\x1b[31m        .MMMMMMMMMMMMMMMMMMMMMMMMX.                 \x1b[0m
\x1b[31m         kMMMMMMMMMMMMMMMMMMMMMMMMWd.               \x1b[0m
\x1b[35m          .XMMMMMMMMMMMMMMMMMMMMMMMMMMk             \x1b[0m
\x1b[35m           .XMMMMMMMMMMMMMMMMMMMMMMMMK.             \x1b[0m
\x1b[34m             kMMMMMMMMMMMMMMMMMMMMMMd               \x1b[0m
\x1b[34m              ;KMMMMMMMWXXWMMMMMMMk.                \x1b[0m
\x1b[34m                .cooc,.    .,coo:.                  \x1b[0m

\x1b[34m                        _/                  _/  _/  \x1b[0m
\x1b[34m     _/_/      _/_/_/  _/_/_/      _/_/    _/  _/   \x1b[0m
\x1b[34m  _/_/_/_/  _/_/      _/    _/  _/_/_/_/  _/  _/    \x1b[0m
\x1b[34m _/            _/_/  _/    _/  _/        _/  _/     \x1b[0m
\x1b[34m  _/_/_/  _/_/_/    _/    _/    _/_/_/  _/  _/      \x1b[0m


&quot;))
</code></pre>
<h2>Screencasts</h2>
<p>I wanted a quick way to record or take screenshots of macOS windows, so I now have <a href="https://xenodium.com/recordscreenshot-windows-the-lazy-way">my lazy way</a>, leveraging <a href="https://github.com/xenodium/macosrec">macosrec</a>, a recording command line utility I built. Invoked via <code>M-x</code> of course.</p>
<h2>Eglot (LSP) for iOS/macOS dev</h2>
<p>If you want any sort of code completion for your macOS projects, you'd be happy to know that eglot works out of the box.</p>
<pre><code class="language-{.commonlisp">(use-package eglot
  :ensure t
  :hook (swift-mode . eglot-ensure)
  :config
  (message &quot;warning: `jsonrpc--log-event' is ignored.&quot;)
  (fset #'jsonrpc--log-event #'ignore)
  (add-to-list 'eglot-server-programs '(swift-mode . (&quot;/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/sourcekit-lsp&quot;))))
</code></pre>
<h2>Search and play (Music app)</h2>
<p>This is another experiment that didn't quite stick, but I played with <a href="https://lmno.lol/alvaro/emacs-searchplay-music-macos">controlling the Music app's playback</a>.</p>
<p><img src="https://xenodium.github.io/images/emacs-searchplay-music-macos/music_search.gif" alt=""></p>
<p>While I still purchase music via Apple's Music app, I now play directly from Emacs via <a href="https://xenodium.com/a-tour-of-ready-player-mode">Ready Player Mode</a>. I'm fairly happy with this setup, having scratched that itch with my own package.</p>
<p><img src="https://xenodium.github.io/images/a-tour-of-ready-player-mode/open-file.gif" alt=""></p>
<p>By the way, those buttons also leverage SF Symbols on macOS.</p>
<h2>Reveal -&gt; all &lt;- in Finder</h2>
<p>While there are plenty of solutions out there leveraging the <code>open</code> command line tool to reveal files in macOS's Finder, I wanted one that revealed multiple files in one go. For that, I <a href="https://xenodium.com/native-emacsmacos-ux-integrations-via-swift-modules">leveraged</a> the awesome <a href="https://github.com/SavchenkoValeriy/emacs-swift-module">emacs-swift-module</a>, also by <a href="https://github.com/SavchenkoValeriy">Valeriy Savchenko</a>.</p>
<p><img src="https://xenodium.github.io/images/native-emacsmacos-ux-integrations-via-swift-modules/reveal.webp" alt=""></p>
<h2>Use the macOS Trash</h2>
<p>The macOS trash has saved my bacon in more than one occasion. <a href="https://xenodium.com/rm-important-txt-oh-sht/">Make Emacs aware of it</a>. Also check out <code>M-x dwim-shell-commands-macos-empty-trash</code>.</p>
<p><img src="https://xenodium.github.io/images/rm-important-txt-oh-sht/recovered_x1.6.webp" alt=""></p>
<h2>Build your own macOS utils</h2>
<p>While elisp wasn't in my top languages to learn back in the day, I sure am glad I finally bit the bullet and learned a thing or two. This opened many possibilities. I now see Emacs as a platform to build utilities and tools off of. A <a href="https://xenodium.com/its-all-up-for-grabs-and-it-compounds">canvas of sorts</a>, to be leveraged in and out of the editor.</p>
<p>For example, you could <a href="https://lmno.lol/alvaro/building-your-own-bookmark-launcher">build your own bookmark launcher</a> and invoke from anywhere on macOS.</p>
<p><img src="https://xenodium.github.io/images/building-your-own-bookmark-launcher/launcher.gif" alt=""></p>
<h2>Emacs as default email composer</h2>
<p>Turns out you can also <a href="https://xenodium.com/mu4e-as-macos-mail-composer">make Emacs your default email composer</a>.</p>
<h2>Emacs key bindings everywhere</h2>
<p>While not exactly an Emacs tweak itself, I wanted to extend Emacs bindings into other macOS apps. In particular, I wanted <a href="https://lmno.lol/alvaro/improved-ctrl-p-ctrl-n-macos-movement">more reliable Ctrl-n/p usage everywhere</a>, which I achieved via <a href="https://karabiner-elements.pqrs.org/">Karabiner-Elements</a>. I also mapped <code>C-g</code> to <code>Esc</code>, which really feels just great! I can now cancel things, dismiss menus, dialogs, etc. everywhere.</p>
<h2>Org as lingua franca</h2>
<p>With my Emacs usage growing over time, it was a matter of time until I discovered org mode. This blog is well over 11 years old now, yet still powered by the <a href="https://raw.githubusercontent.com/xenodium/xenodium.github.io/refs/heads/master/index.org">very same org file</a> (beware, this file is big).</p>
<p>With my org usage growing, I felt like I was missing org support outside of Emacs. And so I started building iOS apps revolving around my Emacs usage.</p>
<h3>Journelly (iOS)</h3>
<p><a href="https://xenodium.com/journelly-like-tweeting-but-for-your-eyes-only">Journelly</a> is my latest iOS app, centered around note-taking and journaling. The app feels like tweeting, but for your eyes only of course. It's powered by org markup, which can be synced with Emacs via iCloud.</p>
<p><img src="https://xenodium.github.io/images/journelly-like-tweeting-but-for-your-eyes-only/sideways.jpg" alt=""></p>
<p><img src="https://xenodium.github.io/images/journelly-like-tweeting-but-for-your-eyes-only/emacs.gif" alt=""></p>
<h3>Flat Habits (iOS)</h3>
<p><a href="https://orgmode.org/manual/Tracking-your-habits.html">Org habits</a> are handy for tracking daily habits. However, it wasn't super practical for me as I often wanted to check things off while on the go (away from Emacs). That led me to build <a href="https://xenodium.com/flat-habits-for-ios">Flat Habits</a>.</p>
<p><img src="https://xenodium.github.io/images/frictionless-org-habits-on-ios/flat_habits.gif" alt=""></p>
<p><img src="https://xenodium.github.io/images/flat-habits-meets-org-agenda/flat_agenda.gif" alt=""></p>
<h3>Scratch (iOS)</h3>
<p>While these days I'm using <a href="https://journelly.com/">Journelly</a> to jot down just about anything, before that, I built and used <a href="https://xenodium.com/scratch-a-minimal-scratch-area">Scratch</a> as scratch pad of sorts. No iCloud syncing, but needless to say, it's also powered by org markup.</p>
<p><img src="https://xenodium.github.io/images/scratch-a-minimal-scratch-area/scratch-download_no_audio_x2.6.webp" alt=""></p>
<h3>Plain Org (iOS)</h3>
<p>For more involved writing, nothing beats Emacs org mode. But what if I want quick access to my org files while on the go? <a href="https://plainorg.com/">Plain Org</a> is my iOS solution for that.</p>
<p><img src="https://xenodium.github.io/images/awesome-emacs-on-macos/plain-org.png" alt=""></p>
<h2>Found this post useful?</h2>
<p>I'll keep looking for other macOS-related tips and update this post in the future.</p>
<p>In the meantime, consider ‚ú®<a href="https://github.com/sponsors/xenodium">sponsoring</a>‚ú® this content, <a href="https://github.com/sponsors/xenodium">my Emacs packages</a>, <a href="https://apps.apple.com/us/developer/xenodium-ltd/id304568690">buying my apps</a>, or just <a href="https://apps.apple.com/us/app/fresh-eyes/id6480411697">taking care of your eyes</a> ;)</p>
