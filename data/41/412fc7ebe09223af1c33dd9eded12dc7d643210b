<p>I live mostly in Emacs. I say mostly 'cause well, I'm fairly pragmatic about it. If there's a workflow elsewhere that's more appropriate for my needs, I'll happily use that instead. While I'd love to do my web browsing from my beloved editor, Firefox ticks the right boxes for me.</p>
<p>I do most of my iOS coding in Emacs. It's a hybrid of sorts between Emacs and Xcode. If I need to use the debugger, Xcode is a clear winner for me. If I happen to be visiting a Swift file in an Emacs buffer, I typically used the handy <code>crux-open-with</code> from <a href="https://github.com/bbatsov/crux">crux</a> to open in Xcode, and continue from there. This worked OK, but I always wished opening in Xcode would also jump to the same line number as the Emacs point (cursor) location. This is particularly useful if I had just spotted where I'd like to set a breakpoint in an Emacs buffer and need to transition over to Xcode.</p>
<p>It turns out, there's a nifty command line utility for that. <a href="https://www.unix.com/man-page/osx/1/xed/">xed</a>, the Xcode text editor invocation tool. It enables telling Xcode what file to open and at what line number:</p>
<pre><code class="language-{.bash">xed -line 141 path/to/some/file.swift
</code></pre>
<p>With that in mind, I've added my own version of <code>crux-open-with</code>, using <a href="https://github.com/xenodium/dwim-shell-command">dwim-shell-command</a>.</p>
<p>When running on macOS, the function checks whether or not I'm visiting a buffer for a programming language, and opens the file in Xcode at the same line number.</p>
<pre><code class="language-{.commonlisp">(defun dwim-shell-commands-open-externally ()
  &quot;Open file(s) externally.&quot;
  (interactive)
  (dwim-shell-command-on-marked-files
   &quot;Open externally&quot;
   (if (eq system-type 'darwin)
       (if (derived-mode-p 'prog-mode)
           (format &quot;xed --line %d '&lt;&lt;f&gt;&gt;'&quot;
                   (line-number-at-pos (point)))
         &quot;open '&lt;&lt;f&gt;&gt;'&quot;)
     &quot;xdg-open '&lt;&lt;f&gt;&gt;'&quot;)
   :shell-args '(&quot;-x&quot; &quot;-c&quot;)
   :silent-success t
   :utils (if (eq system-type 'darwin)
              &quot;open&quot;
            &quot;xdg-open&quot;)))
</code></pre>
<p><img src="https://xenodium.github.io/images/open-in-xcode-at-line-number/xed_x0.8_x2.webp" alt=""></p>
<p><code>dwim-shell-commands-open-externally</code> is now <a href="https://github.com/xenodium/dwim-shell-command/commit/19be1c2f3792c95f04fd369cb931a52f7df9cfd5">added to dwim-shell-commands.el</a>.</p>
<p>ps. If you find opening the same file in a different context handy, you may also like the package <a href="https://github.com/rmuslimov/browse-at-remote">browse-at-remote</a> that opens the visited file at its corresponding remote location (for example, GitHub). I can never remember the name of the function (<a href="https://github.com/rmuslimov/browse-at-remote">browse-at-remote</a>), so I aliased it to something I'd remember and moved onâ€¦</p>
<pre><code class="language-{.commonlisp">(defalias 'ar/open-at-github #'browse-at-remote))
</code></pre>
