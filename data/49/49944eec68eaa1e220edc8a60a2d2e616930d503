
	
<p>
When I was much younger, growing-up in the Netherlands I was fascinated by the conundrum of what happens when you drill a hole straight through the centre of the earth. I always believed that I would turn up in Australia. Well, I did end up in Australia, but not by drilling a hole. But is this really the case? This article is about mapping antipodes using the <a href="https://github.com/dkahle/ggmap">ggmap package</a> of the R language.</p>
<p>
The antipodes of any place on earth is the place that is diametrically opposite to it. A pair of antipodes are connected by a straight line running through the centre of the Earth. These points are as far away from each other as is possible on this planet. Two people are antipodes when they live on opposite sides of the globe.</p>
<p>
The term antipodes was first coined by the ancient Greeks. Antipodes are people whose feet (πούς/pouch in Ancient Greek) are directly opposite each other. This concept was a direct consequence the <a href="https://lucidmanager.org/data-science/mapping-ptolemy-geography/">Hellenistic understanding of geography</a>, but the existence of such lands or peoples was often debated or outright denied.</p>
<p>
How can we use coding in R to solve this conundrum?</p>
<div id="outline-container-headline-1" class="outline-2">
<h2 id="headline-1">
Mapping antipodes with ggmap
</h2>
<div id="outline-text-headline-1" class="outline-text-2">
<p>We can roughly recreate the antipodean map on Wikipedia with the <a href="https://cran.r-project.org/web/packages/globe/">globe package</a>. This package, written by Adrian Baddeley, plots 2D and 3D views of the earth. The package contains a data file with major coastlines that can be used to create a flipped map of the world. The ggplot2 package uses the globe to visualise maps.</p>
<p>
The package contains a data file with major coastlines that can be used to create a flipped map of the world. To turn a spatial location into its antipode you subtract 180 degrees from the longitude and reverse the sign of the latitude, shown below.</p>
<figure>
<img src="https://lucidmanager.org/images/geography/antipodes.png" alt="Antipodean globe" title="Antipodean globe" width="500"/>
<figcaption>
Antipodean globe.
</figcaption>
</figure>
<p>
<a href = "https://github.com/pprevos/geography/" target="_blank"
   title="Download geography from GitHub"
   alt="Download geography from GitHub">
  <button class="button is-medium is-primary">
    <span class="icon is-large">
      <i class="fab fa-github"></i>
    </span>
    <span style="font-family: monospace">geography</span>
  </button>
</a>

</p>
<div class="src src-r">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>  <span style="color:#06b;font-weight:bold">library</span>(ggplot2)
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#888">## Antipodean globe</span>
</span></span><span style="display:flex;"><span>  world <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">map_data</span>(<span style="background-color:#fff0f0">&#34;world&#34;</span>)
</span></span><span style="display:flex;"><span>  anti_world <span style="color:#333">&lt;-</span> world <span style="color:#333">%&gt;%</span>
</span></span><span style="display:flex;"><span>      <span style="color:#06b;font-weight:bold">mutate</span>(long <span style="color:#333">=</span> long <span style="color:#333">-</span> <span style="color:#60e;font-weight:bold">180</span>,
</span></span><span style="display:flex;"><span>             lat <span style="color:#333">=</span> <span style="color:#333">-</span> lat)           
</span></span><span style="display:flex;"><span>  <span style="color:#06b;font-weight:bold">ggplot</span>() <span style="color:#333">+</span>
</span></span><span style="display:flex;"><span>      <span style="color:#06b;font-weight:bold">geom_polygon</span>(data <span style="color:#333">=</span> world,  <span style="color:#06b;font-weight:bold">aes</span>(long, lat, group <span style="color:#333">=</span> group), fill <span style="color:#333">=</span> <span style="background-color:#fff0f0">&#34;grey&#34;</span>) <span style="color:#333">+</span>
</span></span><span style="display:flex;"><span>      <span style="color:#06b;font-weight:bold">geom_polygon</span>(data <span style="color:#333">=</span> anti_world, <span style="color:#06b;font-weight:bold">aes</span>(long, lat, group <span style="color:#333">=</span> group),
</span></span><span style="display:flex;"><span>                   fill <span style="color:#333">=</span> <span style="background-color:#fff0f0">&#34;blue&#34;</span>, alpha <span style="color:#333">=</span> <span style="color:#60e;font-weight:bold">0.2</span>) <span style="color:#333">+</span> 
</span></span><span style="display:flex;"><span>      <span style="color:#06b;font-weight:bold">coord_map</span>(<span style="background-color:#fff0f0">&#34;ortho&#34;</span>, orientation <span style="color:#333">=</span> <span style="color:#06b;font-weight:bold">c</span>(<span style="color:#60e;font-weight:bold">0</span>, <span style="color:#60e;font-weight:bold">100</span>, <span style="color:#60e;font-weight:bold">00</span>)) <span style="color:#333">+</span>
</span></span><span style="display:flex;"><span>      <span style="color:#06b;font-weight:bold">theme_void</span>()</span></span></code></pre></div>
</div>
<p>
We can also use the <a href="https://cran.r-project.org/web/packages/ggmap/index.html">ggmap package</a> to visualise antipodes. This package, developed by David Kahle antipodean R-guru Hadley Wickham, has a neat geocoding function to obtain a spatial location. You will need a Google API to enable the <a href="https://lucidmanager.org/data-science/geocoding-with-ggmap/">geocoding function</a>.</p>
<p>
The antipode function takes the description of a location and a zoom level to plot a dot on the antipode location. The gridExtra package is used to create a faceted map, which is not otherwise possible in ggmap.</p>
<div class="src src-r">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>  <span style="color:#06b;font-weight:bold">library</span>(gridExtra)
</span></span><span style="display:flex;"><span>  <span style="color:#06b;font-weight:bold">library</span>(ggmap)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  api <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">readLines</span>(<span style="background-color:#fff0f0">&#34;google.api&#34;</span>) <span style="color:#888"># Text file with the API key</span>
</span></span><span style="display:flex;"><span>  <span style="color:#06b;font-weight:bold">register_google</span>(key <span style="color:#333">=</span> api)
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#888">## Antipode function</span>
</span></span><span style="display:flex;"><span>  antipode <span style="color:#333">&lt;-</span> <span style="color:#080;font-weight:bold">function</span>(location, zm <span style="color:#333">=</span> <span style="color:#60e;font-weight:bold">6</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#888"># Map location</span>
</span></span><span style="display:flex;"><span>      lonlat <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">geocode</span>(location)
</span></span><span style="display:flex;"><span>      loc1 <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">get_map</span>(lonlat, zoom <span style="color:#333">=</span> zm)
</span></span><span style="display:flex;"><span>      map1 <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">ggmap</span>(loc1) <span style="color:#333">+</span>
</span></span><span style="display:flex;"><span>          <span style="color:#06b;font-weight:bold">geom_point</span>(data <span style="color:#333">=</span> lonlat, <span style="color:#06b;font-weight:bold">aes</span>(lon, lat, col <span style="color:#333">=</span> <span style="background-color:#fff0f0">&#34;red&#34;</span>, size <span style="color:#333">=</span> <span style="color:#60e;font-weight:bold">10</span>)) <span style="color:#333">+</span> 
</span></span><span style="display:flex;"><span>          <span style="color:#06b;font-weight:bold">theme</span>(legend.position <span style="color:#333">=</span> <span style="background-color:#fff0f0">&#34;none&#34;</span>)
</span></span><span style="display:flex;"><span>      <span style="color:#888"># Define antipode</span>
</span></span><span style="display:flex;"><span>      lonlat<span style="color:#333">$</span>lon <span style="color:#333">&lt;-</span> lonlat<span style="color:#333">$</span>lon<span style="color:#60e;font-weight:bold">-180</span>
</span></span><span style="display:flex;"><span>      <span style="color:#080;font-weight:bold">if</span> (lonlat<span style="color:#333">$</span>lon <span style="color:#333">&lt;</span> <span style="color:#60e;font-weight:bold">-180</span>) 
</span></span><span style="display:flex;"><span>          lonlat<span style="color:#333">$</span>lon <span style="color:#333">&lt;-</span> <span style="color:#60e;font-weight:bold">360</span> <span style="color:#333">+</span> lonlat<span style="color:#333">$</span>lon
</span></span><span style="display:flex;"><span>      lonlat<span style="color:#333">$</span>lat <span style="color:#333">&lt;-</span> <span style="color:#333">-</span>lonlat<span style="color:#333">$</span>lat
</span></span><span style="display:flex;"><span>      loc2 <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">get_map</span>(lonlat, zoom <span style="color:#333">=</span> zm)
</span></span><span style="display:flex;"><span>      map2 <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">ggmap</span>(loc2) <span style="color:#333">+</span>
</span></span><span style="display:flex;"><span>          <span style="color:#06b;font-weight:bold">geom_point</span>(data <span style="color:#333">=</span> lonlat, <span style="color:#06b;font-weight:bold">aes</span>(lon, lat, col <span style="color:#333">=</span> <span style="background-color:#fff0f0">&#34;red&#34;</span>, size <span style="color:#333">=</span> <span style="color:#60e;font-weight:bold">10</span>)) <span style="color:#333">+</span> 
</span></span><span style="display:flex;"><span>          <span style="color:#06b;font-weight:bold">theme</span>(legend.position <span style="color:#333">=</span> <span style="background-color:#fff0f0">&#34;none&#34;</span>)
</span></span><span style="display:flex;"><span>      <span style="color:#06b;font-weight:bold">grid.arrange</span>(map1, map2, nrow <span style="color:#333">=</span> <span style="color:#60e;font-weight:bold">1</span>)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#06b;font-weight:bold">antipode</span>(<span style="background-color:#fff0f0">&#34;Rector Nelissenstraat 47 Hoensbroek&#34;</span>, <span style="color:#60e;font-weight:bold">4</span>)</span></span></code></pre></div>
</div>
<p>
This code solves the problem I was thinking about as a child. Running the code shows that the antipodes location of the home I grew up in is not in Australia, but quite a way south of New Australia. Although I did end-up living in Australia withouth having to dig a hole in the earth.</p>
<figure>
<img src="https://lucidmanager.org/images/geography/antipode-hoensbroek.jpg" alt="Antipode map of my birthplace, Hoensbroek, the Netherlands" title="Antipode map of my birthplace, Hoensbroek, the Netherlands"/>
<figcaption>
Antipode map of my birthplace, Hoensbroek, the Netherlands.
</figcaption>
</figure>
<p>
<a href = "https://www.r-bloggers.com/" target="_blank" title="Proudly associated with R-Bloggers">
  <button class="button is-link is-medium">
    <span class="icon is-large">
      <i class="fab fa-r-project"></i>
    </span>
    <span>As seen on R Bloggers</span>
  </button>
</a>
</p>
</div>
</div>

      