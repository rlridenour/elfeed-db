<p><strong>Summary: </strong>
A walk through of reseting a mangled #MacOS Spotlight setting, and rebuilding the index.
</p>
        <p>For awhile I’ve been living with a borked Spotlight configuration.  When I’d go
to the <code>System Settings &gt; Spotlight</code>, I’d see a blank settings panel.  No options.
At some point, I had garbled that up.</p>
<p>I had tried to find why, and there’s a pile partial help that didn’t work.  So I
set about figuring out how to:</p>
<ul>
<li>Clean up the indices (via <code>mdutil</code> command).</li>
<li>Reset the default UI settings (via <code>defaults</code> command).</li>
</ul>
<p>I figured the Spotlight index was derived data and the UI must’ve had some
conflicting configuration values.  So why not reset both.  These were the steps
that I took.</p>
<p><strong>First</strong>, I ran <code>mdutil -X</code> via the following commands:</p>
<pre><code class="language-bash">sudo mdutil -X /
sudo mdutil -X /System/Volumes/Data
sudo mdutil -X /System/Volumes/Preboot
sudo mdutil -X /Volumes/Macintosh\ HD/
</code></pre>
<p>The <code>-X</code> switch has the following help:</p>

<blockquote  class="h-cite">

Remove the Spotlight index directory on the specified volume.  This does not
disable indexing.  Spotlight will reevaluate volume when it is unmounted and
remounted,

</blockquote>

<p><strong>Second</strong>, I told Spotlight to pause on indexing via: <code>sudo mdutil -i off /</code>.</p>
<p><strong>Third</strong>, I found all of the defaults domains that had spotlight:</p>
<pre><code class="language-bash">defaults domains | rg &quot;com\.apple\.[^\.]*spotlight[^\,]*&quot; -i --only-matching
</code></pre>
<p><strong>Fourth</strong>, I ran <code>defaults delete</code> for each of those.  I could’ve used <code>xargs</code> but
figured I’d manually iterate through the 6 or so items.</p>
<p><strong>Last</strong>, I rebooted my machine.  And behold the <code>System Settings &gt; Spotlight</code> was no
longer a blank pane, but instead had options to toggle.</p>

	<p><a class="reply-by-email" href="mailto:reply-to@takeonrules.com?subject=RE:Remediating%20MacOS%20Spotlight%20Misbehavior">Reply by Email</a></p>

      