<p>So I’ve used <a href="https://github.com/pashky/restclient.el">restclient.el</a> in the past to embed HTTP requests in readmes and other kinds of documentation to test login flows and APIs as I’ve been writing the corresponding servers.</p>

<p>But chances are you can’t use that package since you don’t use Emacs.</p>

<p>I found a command-line replacement – no thanks to my web searches, but thanks to <a href="https://alternativeto.net/software/httpie/">alternativeto.net listings of <code>httpie</code></a> of all things.</p>

<p>My problem with cURL, Httpie, netcat, etc. for this is that you need to specify the host name as a command line argument. That makes sense to pipe HTTP responses into the next request from the terminal, but it doesn’t work well to tell a program to “please execute this self-contained HTTP request”.</p>

<p><a href="https://hurl.dev/">Hurl</a> to the rescue. Ignoring the <a href="https://www.urbandictionary.com/define.php?term=hurl">unfortunate name</a>, Hurl is, of course, written in Rust. It wraps <code>libcurl</code> and offers standard input and file-based processing of HTTP requests like so:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">echo</span> <span class="s2">"GET https://example.com"</span> | hurl 
</code></pre></div></div>

<p>Their <em>Hurl file</em> format does far more than I need for complex workflows. But it also does the simple things, i.e. single requests with payloads.</p>

<pre><code class="language-hurl"># Get home:
GET https://example.org
HTTP 200
[Captures]
csrf_token: xpath "string(//meta[@name='_csrf_token']/@content)"


# Do login!
POST https://example.org/login?user=toto&amp;password=1234
X-CSRF-TOKEN: {{csrf_token}}
HTTP 302
</code></pre>

<p>This example demonstrates how you can parse the response and capture parts of it – be it JSON, plain text, or in this case HTML to grep <a href="https://en.wikipedia.org/wiki/Cross-site_request_forgery">the CSRF token</a>. Check out <a href="https://hurl.dev/docs/samples.html">the samples page</a> for inspiration.</p>

<hr />

<p>Soooo …. if you happen to use <a href="https://md-babel.org">md-babel</a> (which I haven’t formally announced, yet!), and execute this <code>httpbin.org</code> request, say <a href="https://github.com/DivineDominion/christiantietze.de/blob/master/content//posts/2025/04/test-save-execute-http-requests-hurl-or-restclient.md">from the Markdown document of this very blog post</a>:</p>

<pre><code class="language-hurl">POST https://httpbin.org/post
Content-Type: application/json
{ "test":"foo","bar":"baz" }
</code></pre>

<p>… then you get this result inserted for you right below:</p>

<pre><code>{
  "args": {}, 
  "data": "{ \"test\":\"foo\",\"bar\":\"baz\" }", 
  "files": {}, 
  "form": {}, 
  "headers": {
    "Accept": "*/*", 
    "Content-Length": "28", 
    "Content-Type": "application/json", 
    "Host": "httpbin.org", 
    "User-Agent": "hurl/6.1.1", 
    "X-Amzn-Trace-Id": "Root=1-680093bf-142169f93e6208ec096d1024"
  }, 
  "json": {
    "bar": "baz", 
    "test": "foo"
  }, 
  "origin": "79.221.187.120", 
  "url": "https://httpbin.org/post"
}
</code></pre>

<p>That’s pretty cool and I’m going to be using that in the future to test my APIs in a way that non-Emacs-users can also enjoy, using <code>hurl</code>, Markdown, and <code>md-babel</code>.</p>

<hr><p><small><a href="https://christiantietze.de/hire-me/">Hire me</a> for freelance macOS/iOS work and consulting.</small></p><p><small><a href="https://christiantietze.de/apps/">Buy</a> my apps.</small></p><p><small><a href="https://christiantietze.de/newsletter/">Receive</a> new posts via email.</small></p>