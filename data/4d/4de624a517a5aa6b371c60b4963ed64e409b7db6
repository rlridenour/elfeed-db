
	
<p>
Pong is one of the earliest <a href="https://en.wikipedia.org/wiki/Arcade_game">arcade games</a> on the market, first released in 1972. From the day I first saw this miracle box, I wanted to know more about computers. There was something magical about being able to influence what happens on the television screen, even though the graphics left everything to t he imagintaion.</p>
<figure>
<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/fiShX2pTz9A?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"></iframe>
    </div>

<figcaption>
Original Atari PONG (1972) arcade machine gameplay video.
</figcaption>
</figure>
<p>
I learnt how to write code from the 1983 book <a href="https://archive.org/details/Dr_Wackos_Guide_to_Creating_Arcade_Games">Dr. C. Wacko&#39;s Miracle Guide to Designing and Programming your own Atari Computer Arcade Games</a>. This book explains in a very clear and humorous way how to write computer games in Atari basic. I devoured this book and spent many hours developing silly games. This article is an ode to Dr Wacko, a computer geek&#39;s midlife-crisis and an attempt to replicate the software I developed thirty years ago.</p>
<figure>
<img src="https://lucidmanager.org/images/rgames/dr-wacko.jpg" alt="Dr. C. Wacko&#39;s Miracle Guide to Designing and Programming your own Atari Computer Arcade Games" title="Dr. C. Wacko&#39;s Miracle Guide to Designing and Programming your own Atari Computer Arcade Games"/>
<figcaption>
Dr. C. Wacko&#39;s Miracle Guide to Designing and Programming your own Atari Computer Arcade Games
</figcaption>
</figure>
<p>
I showed in a other posts that R can be used for <a href="https://lucidmanager.org/data-science/tic-tac-toe-war-games/">board games</a> or to play a <a href="https://lucidmanager.org/data-science/text-adventure/">text adventure</a>. The question is whether we create arcade games in R. My challenge is to recreate the look and feel of 1980s arcade games, or <em>R-Cade</em> games, using R? The code shown below simulates the legendary game of pong.</p>
<div id="outline-container-headline-1" class="outline-2">
<h2 id="headline-1">
Playing Pong in R
</h2>
<div id="outline-text-headline-1" class="outline-text-2">
<p>The code is based on the Wacko&#39;s <em>Boing Program</em> in the above-mentioned book. The R code is fully commented and speaks for itself. Please note that the animation is very clunky when you run it in <a href="https://support.rstudio.com/hc/en-us/articles/200488548-Problem-with-Plots-or-Graphics-Device">RStudio</a>. Only the native R Terminal displays the animation correctly. </p>
<p>
This version plays automatically with a randomiser routine to render the gameplay imperfect. The skill parameter indicates how good the computer player is between 0 and 1.</p>
<p>
The <a href="https://cran.r-project.org/web/packages/beepr/index.html">beepr</a> library by Rasmus Bååth provides some much-needed sound.</p>
<p>
The main issue with this code is that I have not been able to ad a human Pong player. I am not aware of a way to use continuous input in the R language. Perhaps somebody can help me perfect this little ditty. I love to know how to read real-time USB input to control the game, so we get a step closer to the first R-Cade game.</p>
<figure>
<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/A6ytTe8KcZ0?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"></iframe>
    </div>

<figcaption>
R language Pong simulation.
</figcaption>
</figure>
<p>
<a href = "https://github.com/pprevos/RGames/" target="_blank"
   title="Download RGames from GitHub"
   alt="Download RGames from GitHub">
  <button class="button is-medium is-primary">
    <span class="icon is-large">
      <i class="fab fa-github"></i>
    </span>
    <span style="font-family: monospace">RGames</span>
  </button>
</a>

</p>
<div class="src src-r">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>  <span style="color:#888">## Simulating the Legendary Pong Game in R</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#888">## Sound library</span>
</span></span><span style="display:flex;"><span>  <span style="color:#06b;font-weight:bold">library</span>(beepr) 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#888">## Game parameters</span>
</span></span><span style="display:flex;"><span>  skill <span style="color:#333">&lt;-</span> <span style="color:#60e;font-weight:bold">0.87</span> <span style="color:#888"># Skill (0-1)</span>
</span></span><span style="display:flex;"><span>  score <span style="color:#333">&lt;-</span> <span style="color:#60e;font-weight:bold">0</span>
</span></span><span style="display:flex;"><span>  high.score <span style="color:#333">&lt;-</span> <span style="color:#60e;font-weight:bold">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#888">## Define playing field</span>
</span></span><span style="display:flex;"><span>  <span style="color:#06b;font-weight:bold">x11</span>()
</span></span><span style="display:flex;"><span>  <span style="color:#06b;font-weight:bold">par</span>(mar <span style="color:#333">=</span> <span style="color:#06b;font-weight:bold">rep</span>(<span style="color:#60e;font-weight:bold">1</span>,<span style="color:#60e;font-weight:bold">4</span>), bg <span style="color:#333">=</span> <span style="background-color:#fff0f0">&#34;black&#34;</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#06b;font-weight:bold">plot.new</span>()
</span></span><span style="display:flex;"><span>  <span style="color:#06b;font-weight:bold">plot.window</span>(xlim <span style="color:#333">=</span> <span style="color:#06b;font-weight:bold">c</span>(<span style="color:#60e;font-weight:bold">0</span>,<span style="color:#60e;font-weight:bold">30</span>), ylim <span style="color:#333">=</span> <span style="color:#06b;font-weight:bold">c</span>(<span style="color:#60e;font-weight:bold">0</span>,<span style="color:#60e;font-weight:bold">30</span>))
</span></span><span style="display:flex;"><span>  <span style="color:#06b;font-weight:bold">lines</span>(<span style="color:#06b;font-weight:bold">c</span>(<span style="color:#60e;font-weight:bold">1</span>, <span style="color:#60e;font-weight:bold">30</span>, <span style="color:#60e;font-weight:bold">30</span>, <span style="color:#60e;font-weight:bold">1</span>), <span style="color:#06b;font-weight:bold">c</span>(<span style="color:#60e;font-weight:bold">0</span>, <span style="color:#60e;font-weight:bold">0</span>, <span style="color:#60e;font-weight:bold">30</span>, <span style="color:#60e;font-weight:bold">30</span>), type <span style="color:#333">=</span> <span style="background-color:#fff0f0">&#34;l&#34;</span>, lwd <span style="color:#333">=</span> <span style="color:#60e;font-weight:bold">5</span>, col <span style="color:#333">=</span> <span style="background-color:#fff0f0">&#34;white&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#888">## Playing field boundaries (depends on cex)</span>
</span></span><span style="display:flex;"><span>  xmin <span style="color:#333">&lt;-</span> <span style="color:#60e;font-weight:bold">0.5</span>
</span></span><span style="display:flex;"><span>  xmax <span style="color:#333">&lt;-</span> <span style="color:#60e;font-weight:bold">29.4</span>
</span></span><span style="display:flex;"><span>  ymin <span style="color:#333">&lt;-</span> <span style="color:#60e;font-weight:bold">0.5</span>
</span></span><span style="display:flex;"><span>  ymax <span style="color:#333">&lt;-</span> <span style="color:#60e;font-weight:bold">29.4</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#888">## initial position</span>
</span></span><span style="display:flex;"><span>  x <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">sample</span>(<span style="color:#60e;font-weight:bold">5</span><span style="color:#333">:</span><span style="color:#60e;font-weight:bold">25</span>, <span style="color:#60e;font-weight:bold">1</span>)
</span></span><span style="display:flex;"><span>  y <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">sample</span>(<span style="color:#60e;font-weight:bold">5</span><span style="color:#333">:</span><span style="color:#60e;font-weight:bold">25</span>, <span style="color:#60e;font-weight:bold">1</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#06b;font-weight:bold">points</span>(x, y, pch <span style="color:#333">=</span> <span style="color:#60e;font-weight:bold">15</span>, col <span style="color:#333">=</span> <span style="background-color:#fff0f0">&#34;white&#34;</span>, cex <span style="color:#333">=</span> <span style="color:#60e;font-weight:bold">2</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#888">## Paddle control</span>
</span></span><span style="display:flex;"><span>  psize <span style="color:#333">&lt;-</span> <span style="color:#60e;font-weight:bold">4</span>
</span></span><span style="display:flex;"><span>  ypaddle <span style="color:#333">&lt;-</span> y
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#888">## Set direction</span>
</span></span><span style="display:flex;"><span>  dx <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">runif</span>(<span style="color:#60e;font-weight:bold">1</span>, <span style="color:#60e;font-weight:bold">.5</span>, <span style="color:#60e;font-weight:bold">1</span>)
</span></span><span style="display:flex;"><span>  dy <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">runif</span>(<span style="color:#60e;font-weight:bold">1</span>, <span style="color:#60e;font-weight:bold">.5</span>, <span style="color:#60e;font-weight:bold">1</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#888">## Game play</span>
</span></span><span style="display:flex;"><span>  <span style="color:#080;font-weight:bold">while</span> (x <span style="color:#333">&gt;</span> xmin <span style="color:#333">-</span> <span style="color:#60e;font-weight:bold">1</span>) {
</span></span><span style="display:flex;"><span>      sound <span style="color:#333">&lt;-</span> <span style="color:#60e;font-weight:bold">0</span> <span style="color:#888"># Silence</span>
</span></span><span style="display:flex;"><span>      <span style="color:#06b;font-weight:bold">Sys.sleep</span>(<span style="color:#60e;font-weight:bold">.05</span>) <span style="color:#888"># Pause screen</span>
</span></span><span style="display:flex;"><span>      <span style="color:#06b;font-weight:bold">points</span>(x, y, pch <span style="color:#333">=</span> <span style="color:#60e;font-weight:bold">15</span>, col <span style="color:#333">=</span> <span style="background-color:#fff0f0">&#34;black&#34;</span>, cex <span style="color:#333">=</span> <span style="color:#60e;font-weight:bold">2</span>) <span style="color:#888"># Erase ball</span>
</span></span><span style="display:flex;"><span>      <span style="color:#888"># Move ball</span>
</span></span><span style="display:flex;"><span>      x <span style="color:#333">&lt;-</span> x <span style="color:#333">+</span> dx
</span></span><span style="display:flex;"><span>      y <span style="color:#333">&lt;-</span> y <span style="color:#333">+</span> dy
</span></span><span style="display:flex;"><span>      <span style="color:#888"># Collision detection</span>
</span></span><span style="display:flex;"><span>      <span style="color:#080;font-weight:bold">if</span> (x <span style="color:#333">&gt;</span> xmax) {
</span></span><span style="display:flex;"><span>          dx <span style="color:#333">&lt;-</span> <span style="color:#333">-</span>dx <span style="color:#333">*</span> <span style="color:#06b;font-weight:bold">runif</span>(<span style="color:#60e;font-weight:bold">1</span>, <span style="color:#60e;font-weight:bold">.9</span>, <span style="color:#60e;font-weight:bold">1.1</span>) <span style="color:#888"># Bounce</span>
</span></span><span style="display:flex;"><span>          <span style="color:#080;font-weight:bold">if</span> (x <span style="color:#333">&gt;</span> xmin) x <span style="color:#333">&lt;-</span> xmax <span style="color:#888"># Boundary</span>
</span></span><span style="display:flex;"><span>          sound <span style="color:#333">&lt;-</span> <span style="color:#60e;font-weight:bold">10</span> <span style="color:#888"># Set sound</span>
</span></span><span style="display:flex;"><span>          }
</span></span><span style="display:flex;"><span>      <span style="color:#080;font-weight:bold">if</span> (y <span style="color:#333">&lt;</span> ymin <span style="color:#333">|</span> y <span style="color:#333">&gt;</span> ymax) {
</span></span><span style="display:flex;"><span>          <span style="color:#080;font-weight:bold">if</span> (y <span style="color:#333">&lt;</span> ymin) y <span style="color:#333">&lt;-</span> ymin
</span></span><span style="display:flex;"><span>          <span style="color:#080;font-weight:bold">if</span> (y <span style="color:#333">&gt;</span> ymax) y <span style="color:#333">&lt;-</span> ymax
</span></span><span style="display:flex;"><span>          dy <span style="color:#333">&lt;-</span> <span style="color:#333">-</span>dy <span style="color:#333">*</span> <span style="color:#06b;font-weight:bold">runif</span>(<span style="color:#60e;font-weight:bold">1</span>, <span style="color:#60e;font-weight:bold">.9</span>, <span style="color:#60e;font-weight:bold">1.1</span>)
</span></span><span style="display:flex;"><span>          sound <span style="color:#333">&lt;-</span> <span style="color:#60e;font-weight:bold">10</span>
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      <span style="color:#888"># Caught by paddle?</span>
</span></span><span style="display:flex;"><span>      <span style="color:#080;font-weight:bold">if</span> (x <span style="color:#333">&lt;</span> xmin <span style="color:#333">&amp;</span> (y <span style="color:#333">&gt;</span> ypaddle <span style="color:#333">-</span> (psize <span style="color:#333">/</span> <span style="color:#60e;font-weight:bold">2</span>)) <span style="color:#333">&amp;</span> y <span style="color:#333">&lt;</span> ypaddle <span style="color:#333">+</span> (psize <span style="color:#333">/</span> <span style="color:#60e;font-weight:bold">2</span>)) {
</span></span><span style="display:flex;"><span>          <span style="color:#080;font-weight:bold">if</span> (x <span style="color:#333">&lt;</span> xmin) x <span style="color:#333">&lt;-</span> xmin
</span></span><span style="display:flex;"><span>          dx <span style="color:#333">&lt;-</span> <span style="color:#333">-</span>dx <span style="color:#333">*</span> <span style="color:#06b;font-weight:bold">runif</span>(<span style="color:#60e;font-weight:bold">1</span>, <span style="color:#60e;font-weight:bold">.9</span>, <span style="color:#60e;font-weight:bold">1.1</span>)
</span></span><span style="display:flex;"><span>          sound <span style="color:#333">&lt;-</span> <span style="color:#60e;font-weight:bold">2</span>
</span></span><span style="display:flex;"><span>          score <span style="color:#333">&lt;-</span> score <span style="color:#333">+</span> <span style="color:#60e;font-weight:bold">1</span>
</span></span><span style="display:flex;"><span>          }
</span></span><span style="display:flex;"><span>      <span style="color:#888"># Draw ball</span>
</span></span><span style="display:flex;"><span>      <span style="color:#06b;font-weight:bold">points</span>(x, y, pch <span style="color:#333">=</span> <span style="color:#60e;font-weight:bold">15</span>, col <span style="color:#333">=</span> <span style="background-color:#fff0f0">&#34;white&#34;</span>, cex <span style="color:#333">=</span> <span style="color:#60e;font-weight:bold">2</span>)
</span></span><span style="display:flex;"><span>      <span style="color:#080;font-weight:bold">if</span> (sound <span style="color:#333">!=</span><span style="color:#60e;font-weight:bold">0</span>) <span style="color:#06b;font-weight:bold">beep</span>(sound)
</span></span><span style="display:flex;"><span>      <span style="color:#888"># Move paddle</span>
</span></span><span style="display:flex;"><span>      <span style="color:#080;font-weight:bold">if</span> (<span style="color:#06b;font-weight:bold">runif</span>(<span style="color:#60e;font-weight:bold">1</span>, <span style="color:#60e;font-weight:bold">0</span>, <span style="color:#60e;font-weight:bold">1</span>) <span style="color:#333">&lt;</span> skill) ypaddle <span style="color:#333">&lt;-</span> ypaddle <span style="color:#333">+</span> dy <span style="color:#888"># Imperfect follow</span>
</span></span><span style="display:flex;"><span>      <span style="color:#888"># Draw paddle</span>
</span></span><span style="display:flex;"><span>      <span style="color:#888"># Erase back line</span>
</span></span><span style="display:flex;"><span>      <span style="color:#06b;font-weight:bold">lines</span>(<span style="color:#06b;font-weight:bold">c</span>(<span style="color:#60e;font-weight:bold">0</span>, <span style="color:#60e;font-weight:bold">0</span>), <span style="color:#06b;font-weight:bold">c</span>(<span style="color:#60e;font-weight:bold">0</span>, <span style="color:#60e;font-weight:bold">30</span>), type <span style="color:#333">=</span> <span style="background-color:#fff0f0">&#34;l&#34;</span>, lwd <span style="color:#333">=</span> <span style="color:#60e;font-weight:bold">8</span>, col <span style="color:#333">=</span> <span style="background-color:#fff0f0">&#34;black&#34;</span>)
</span></span><span style="display:flex;"><span>      <span style="color:#888"># Keep paddle in window</span>
</span></span><span style="display:flex;"><span>      <span style="color:#080;font-weight:bold">if</span> (ypaddle <span style="color:#333">&lt;</span> (psize <span style="color:#333">/</span> <span style="color:#60e;font-weight:bold">2</span>)) ypaddle <span style="color:#333">&lt;-</span> (psize <span style="color:#333">/</span> <span style="color:#60e;font-weight:bold">2</span>)
</span></span><span style="display:flex;"><span>      <span style="color:#080;font-weight:bold">if</span> (ypaddle <span style="color:#333">&gt;</span> <span style="color:#60e;font-weight:bold">30</span> <span style="color:#333">-</span> (psize <span style="color:#333">/</span> <span style="color:#60e;font-weight:bold">2</span>)) ypaddle <span style="color:#333">&lt;-</span> <span style="color:#60e;font-weight:bold">30</span> <span style="color:#333">-</span> (psize <span style="color:#333">/</span> <span style="color:#60e;font-weight:bold">2</span>)
</span></span><span style="display:flex;"><span>      <span style="color:#888"># Draw paddle</span>
</span></span><span style="display:flex;"><span>      <span style="color:#06b;font-weight:bold">lines</span>(<span style="color:#06b;font-weight:bold">c</span>(<span style="color:#60e;font-weight:bold">0</span>, <span style="color:#60e;font-weight:bold">0</span>), <span style="color:#06b;font-weight:bold">c</span>(ypaddle <span style="color:#333">-</span> (psize <span style="color:#333">/</span> <span style="color:#60e;font-weight:bold">2</span>), ypaddle <span style="color:#333">+</span> (psize <span style="color:#333">/</span> <span style="color:#60e;font-weight:bold">2</span>)), type <span style="color:#333">=</span> <span style="background-color:#fff0f0">&#34;l&#34;</span>, lwd <span style="color:#333">=</span> <span style="color:#60e;font-weight:bold">8</span>, col <span style="color:#333">=</span> <span style="background-color:#fff0f0">&#34;white&#34;</span>)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#06b;font-weight:bold">beep</span>(<span style="color:#60e;font-weight:bold">8</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#06b;font-weight:bold">text</span>(<span style="color:#60e;font-weight:bold">15</span>,<span style="color:#60e;font-weight:bold">15</span>, <span style="background-color:#fff0f0">&#34;GAME OVER&#34;</span>, cex<span style="color:#333">=</span><span style="color:#60e;font-weight:bold">5</span>, col <span style="color:#333">=</span> <span style="background-color:#fff0f0">&#34;white&#34;</span>)
</span></span><span style="display:flex;"><span>  s <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">ifelse</span>(score <span style="color:#333">==</span> <span style="color:#60e;font-weight:bold">1</span>, <span style="background-color:#fff0f0">&#34;&#34;</span>, <span style="background-color:#fff0f0">&#34;s&#34;</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#06b;font-weight:bold">text</span>(<span style="color:#60e;font-weight:bold">15</span>,<span style="color:#60e;font-weight:bold">5</span>, <span style="color:#06b;font-weight:bold">paste0</span>(score, <span style="background-color:#fff0f0">&#34; Point&#34;</span>, s), cex<span style="color:#333">=</span><span style="color:#60e;font-weight:bold">3</span>, col <span style="color:#333">=</span> <span style="background-color:#fff0f0">&#34;white&#34;</span>)</span></span></code></pre></div>
</div>
<p>
<a href = "https://www.r-bloggers.com/" target="_blank" title="Proudly associated with R-Bloggers">
  <button class="button is-link is-medium">
    <span class="icon is-large">
      <i class="fab fa-r-project"></i>
    </span>
    <span>As seen on R Bloggers</span>
  </button>
</a>
</p>
</div>
</div>

      