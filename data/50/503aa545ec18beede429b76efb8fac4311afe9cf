<p>Some days I forget to run <a href="https://protesilaos.com/emacs/denote">Denote</a> to create a new journal file for the day, and then the appropriately named note file is missing when I want to write down things later. That’s not how you use a daily journal, I know, but I use Emacs and <code>denote.el</code> to write down things like exercise logs or when I get sick, and these are information I can backfill easily the day after.</p>

<p>A solution that works for me is to <code>(setq denote-prompts '(date))</code> – then I can run <kbd>M-x</kbd> <code>denote-create-note</code> and enter the date to backfill. It won’t insert the appropriately formatted title or tags of my journal notes, but that’s not a big deal.</p>

<h2 id="learn-how-to-find-this-in-a-foreign-code-base">Learn How to Find This in a Foreign Code Base</h2>

<p>My <code>denote-id-format</code> is <code>"%Y%m%d%H%M"</code> (a date-time string that produces <code>2024-06-27 07:14</code> but without any separators and punctuation), so I started looking from there:</p>

<ol>
  <li>From the <kbd>C-h v</kbd> variable overview, select the <code>denote-id-format</code> variable.</li>
  <li>In the help buffer, follow the link to <code>denote.el</code>’s source code at the top. This takes you to where the variable is defined.</li>
  <li>Run <kbd>M-x</kbd> <code>occur</code> on the variable name to find where it’s being used.</li>
  <li>One of the few occurrences is <code>denote-prompt-for-date-return-id</code>, which sounds exactly like what I want! But it’s not interactive, so:</li>
  <li>Run <kbd>M-x</kbd> <code>occur</code> on <code>denote-prompt-for-date-return-id</code> to find where this is being used.</li>
  <li>That took me to the middle of <code>denote-dired-rename-files</code>, a rather long function, and I found that the prompt is being run based on the <code>denote-prompts</code> variable.</li>
</ol>

<p>Setting <code>denote-prompts</code> to <code>'(date)</code> and running <code>denote-create-note</code> afterwards confirmed that this did the trick.</p>

<p>I admit I didn’t actually run <kbd>M-x</kbd> <code>occur</code> manually, but resorted to <code>embark-act</code> on the symbol-at-point for everything. I used <a href="https://protesilaos.com/emacs/denote">Embark</a> to run <code>occur</code>, to change <code>denote-prompts</code> from the variables list, even to insert the <code>denote-id-format</code> value above.</p>
<hr><p><small><a href="https://christiantietze.de/hire-me/">Hire me</a> for freelance macOS/iOS work and consulting.</small></p><p><small><a href="https://christiantietze.de/apps/">Buy</a> my apps.</small></p><p><small><a href="https://christiantietze.de/newsletter/">Receive</a> new posts via email.</small></p>