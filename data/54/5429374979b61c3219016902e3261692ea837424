<p>Whether it's Makefile, SConstruct, BUILD, or your favorite build file, chances are you have to tweak it from time to time. <code>ar/open-build-file</code> searches your current and parent directories to find a build file.</p>
<pre><code class="language-{.commonlisp">(defvar ar/project-file-names '(&quot;Makefile&quot; &quot;SConstruct&quot; &quot;BUILD&quot;))

(defun ar/parent-directory (path)
  &quot;Get parent directory for PATH.&quot;
  (unless (equal &quot;/&quot; path)
    (file-name-directory (directory-file-name path))))

(defun ar/find-upwards (path filename)
  &quot;Search upwards from PATH for a file named FILENAME.&quot;
  (let ((file (concat path filename))
        (parent (ar/parent-directory (expand-file-name path))))
    (if (file-exists-p file)
        file
      (when parent
        (ar/find-upwards parent filename)))))

(defun ar/open-closest (filename)
  &quot;Open the closest FILENAME in current or parent dirs (handy for finding Makefiles).&quot;
  (let ((closest-file-path (ar/find-upwards (buffer-file-name)
                                                 filename)))
    (when closest-file-path
      (message closest-file-path)
      (switch-to-buffer (find-file-noselect closest-file-path)))
    closest-file-path))

(defun ar/open-build-file ()
  &quot;Open the closest project file in current or parent directory.
For example: Makefile, SConstruct, BUILD, etc.
Append `ar/project-file-names' to search for other file names.&quot;
  (interactive)
  (catch 'found
    (mapc (lambda (filename)
            (when (ar/open-closest filename)
              (throw 'found t)))
          ar/project-file-names)
    (error &quot;No project file found&quot;)))
</code></pre>
