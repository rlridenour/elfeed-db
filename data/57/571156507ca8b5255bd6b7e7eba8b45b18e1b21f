<div class="update" id="orgebcac51">
<p>
<span class="timestamp-wrapper"><span class="timestamp">[2025-04-04 Fri]</span></span>: Fixed link to onThisPage.cjs. Thanks to John Rakestraw for pointing it out!
</p>

</div>

<div class="assumed_audience" id="org81e1a06">
<p>
Assumed audience:
</p>
<ul class="org-ul">
<li>My future self, when I'm trying to figure out where to change things if I want to implement something similar</li>
<li>People who like tweaking their blog's CSS, especially if they also use Org Mode or 11ty</li>
</ul>

</div>

<p>
Headings help us make sense of longer blog posts.
Heading links are like signposts letting you know
what's ahead and where you can take a shortcut to
get to what you're interested in.
</p>

<p>
Headings are useful for me too. Sometimes I browse
my blog and come across things I've completely
forgotten writing about, so the headings can help
me remember without having to reread long posts.
If I use headings more often, I might be able to
work with <a href="https://sachachua.com/blog/2025/03/playing-with-chunk-size-when-writing/">bigger chunks of thoughts</a>. If I can work
with bigger chunks of thoughts, then maybe I can
think about more things that are hard to fit
within the limits of my working memory. Making
headings more navigable also means I might not
have to worry about the tangents I go on and the
number of different thoughts I try to smoosh
together, if people can jump straight to the parts
that sound relevant to them.
</p>

<p>
I particularly like the way Karthik uses a sticky
table of contents for long blog posts like <a href="https://karthinks.com/software/emacs-window-management-almanac/">The
Emacs Window Management Almanac | Karthinks</a>. I
also like the way <a href="https://sphinx-rtd-theme.readthedocs.io/">the Read the Docs Sphinx Theme</a>
displays a nested table of contents on the left
side on wide screens. I use <a href="https://github.com/fniessen/org-html-themes">org-html-themes</a> to
export Org Mode files with that theme when I want
to be fancy, like <a href="https://sachachua.com/dotemacs">my Emacs configuration</a> (usually
works, although sometimes my config is broken).
</p>

<p>
The last time I <a href="https://sachachua.com/blog/2024/11/thinking-about-webpage-margins/">tinkered with my webpage margins</a>,
I put my "On this page" list on the left side and
the blog post headings (if any) on the right side,
mostly because it was easy to do. I just changed
the margin and float attributes of the element
with the subheadings. I'd like to clear up more
space for potential <a href="https://gwern.net/sidenote">sidenotes</a> or doodles, though.
This time, I experimented with nesting the blog
navigation inside the "On this page" navigation on
the left side.
</p>


<figure id="org4166041">
<img src="https://sachachua.com/blog/2025/04/adding-subheadings-and-sketches-to-my-blog-page-navigation/2025-04-02_14-04-30.png" alt="2025-04-02_14-04-30.png">

<figcaption><span class="figure-number">Figure 1: </span>A screenshot of my blog showing the nested links</figcaption>
</figure>

<p>
Here's how I did it:
</p>
<div id="outline-container-adding-subheadings-and-sketches-to-my-blog-page-navigation-org-mode-where-i-start-writing" class="outline-3">
<h3 id="adding-subheadings-and-sketches-to-my-blog-page-navigation-org-mode-where-i-start-writing">Org Mode: where I start writing</h3>
<div class="outline-text-3" id="text-adding-subheadings-and-sketches-to-my-blog-page-navigation-org-mode-where-i-start-writing">
<p>
I use Org Mode's table of contents directive to
include a table of contents in blog posts. I wrap
it inside a <code>sticky-toc</code> block to indicate when I
want it to be part of the sticky table of contents
on my blog. In Org Mode, the syntax looks like
this:
</p>


<div class="org-src-container">
<pre class="src src-org"><span class="org-org-block-begin-line">#+begin_sticky-toc</span>
#+TOC: headlines 2 local
<span class="org-org-block-end-line">#+end_sticky-toc</span>
</pre>
</div>


<p>
I put it in a <a href="https://joaotavora.github.io/yasnippet/">yasnippet</a> so that I don't have to
remember it. I just type <code>tocs</code> (for TOC, sticky)
and then press <code>TAB</code> to complete it.
</p>
</div>
</div>
<div id="outline-container-adding-subheadings-and-sketches-to-my-blog-page-navigation-11ty-static-site-generator-on-this-page" class="outline-3">
<h3 id="adding-subheadings-and-sketches-to-my-blog-page-navigation-11ty-static-site-generator-on-this-page">11ty static site generator: on this page</h3>
<div class="outline-text-3" id="text-adding-subheadings-and-sketches-to-my-blog-page-navigation-11ty-static-site-generator-on-this-page">
<p>
After exporting individual HTML files from Org
Mode, I turn them into my blog using the <a href="https://www.11ty.dev/">11ty</a>
static site generator. To simplify my archive
pages, I have an <a href="https://github.com/sachac/eleventy-blog-setup/blob/master/_includes/shortcodes/onThisPage.cjs"><code>onThisPage</code></a> shortcode which
lists the posts on that page. I changed it to
include the <code>sticky-toc</code> contents from the items'
<code>templateContent</code> attributes.
</p>


<div class="org-src-container">
<pre class="src src-js"><span class="org-keyword">const</span> { JSDOM } = require(<span class="org-string">'jsdom'</span>);

module.exports = <span class="org-keyword">function</span> (<span class="org-variable-name">eleventyConfig</span>) {
  <span class="org-keyword">function</span> <span class="org-function-name">formatPostLine</span>(<span class="org-variable-name">item</span>, <span class="org-variable-name">index</span>) {
    <span class="org-keyword">let</span> <span class="org-variable-name">subtoc</span> = <span class="org-string">''</span>;
    <span class="org-keyword">if</span> (item.templateContent?.match(<span class="org-string">/sticky-toc/</span>)) {
      <span class="org-keyword">const</span> <span class="org-variable-name">doc</span> = <span class="org-keyword">new</span> <span class="org-type">JSDOM</span>(item.templateContent).window.document;
      <span class="org-keyword">const</span> <span class="org-variable-name">sub</span> = doc.querySelector(<span class="org-string">'.sticky-toc ul, .sticky-toc div, .sticky-toc-after-scrolling div'</span>);
      <span class="org-keyword">if</span> (sub) {
        <span class="org-keyword">if</span> (sub.querySelector(<span class="org-string">'.panzoom'</span>)) {
          console.log(<span class="org-string">'remove panzoom'</span>);
          sub.querySelector(<span class="org-string">'.panzoom'</span>).classList.remove(<span class="org-string">'panzoom'</span>);  <span class="org-comment-delimiter">// </span><span class="org-comment">don't do panzoom for now</span>
        }
        sub.classList.remove(<span class="org-string">'panzoom'</span>);
        subtoc = sub.outerHTML;
      }
    }
    <span class="org-keyword">return</span> <span class="org-string">`&lt;li&gt;&lt;a class="toc-link" data-index="index${index}" href="${item.url}"&gt;${item.data.title}&lt;/a&gt;${subtoc}&lt;/li&gt;`</span>;
  }
  eleventyConfig.addShortcode(<span class="org-string">'onThisPage'</span>, <span class="org-keyword">function</span> (<span class="org-variable-name">list</span>) {
    <span class="org-keyword">return</span> <span class="org-string">`&lt;nav class="on-this-page"&gt;</span>
<span class="org-string">On this page:</span>
<span class="org-string">&lt;ul&gt;</span>
<span class="org-string">${list.map(formatPostLine).join("\n")}</span>
<span class="org-string">&lt;/ul&gt;</span>
<span class="org-string">&lt;/nav&gt;`</span>;
  });
};
</pre>
</div>


<p>
And then there's a bunch of CSS in <a href="https://github.com/sachac/eleventy-blog-setup/blob/master/assets/css/style.css">assets/css/style.css</a>:
</p>

<p>
</p><details class="code-details" style="padding: 1em;
                 border-radius: 15px;
                 font-size: 0.9em;
                 box-shadow: 0.05em 0.1em 5px 0.01em  #00000057;">
                  <summary><strong>CSS</strong></summary>

<div class="org-src-container">
<pre class="src src-css"><span class="org-comment-delimiter">/* </span><span class="org-comment">tables of contents</span><span class="org-comment-delimiter"> */</span>
<span class="org-css-selector">.on-this-page &gt; ul &gt; li &gt; ul, .on-this-page &gt; ul &gt; li &gt; div</span> { <span class="org-css-property">display</span>: none }

<span class="org-builtin">@media</span> only screen and (width &gt;= 95em) {
    <span class="org-css-selector">html, body</span> { <span class="org-css-property">overflow-x</span>: unset; }

    <span class="org-css-selector">.sticky-toc, .sticky-left, .sticky-right</span> {
        <span class="org-css-property">font-size</span>: var(<span class="org-variable-name">&#45;&#45;fs-sm</span>);
        <span class="org-css-property">width</span>: calc((100vw - var(<span class="org-variable-name">&#45;&#45;body-max-width</span>) - 5rem)/2);
        <span class="org-css-property">position</span>: sticky;
        <span class="org-css-property">max-height</span>: calc(100vh - 2rem);
        <span class="org-css-property">overflow-y</span>: auto;
        <span class="org-css-property">scroll-behavior</span>: smooth;
        <span class="org-css-property">background</span>: var(<span class="org-variable-name">&#45;&#45;modus-bg-main</span>);
        <span class="org-css-property">top</span>: 0;
        <span class="org-css-property">padding</span>: 1rem;
    }

    <span class="org-css-selector">article .sticky-toc</span> {
        <span class="org-css-property">display</span>: none
    }

    <span class="org-css-selector">.single-post article .sticky-toc</span> {
        <span class="org-css-property">display</span>: block;
    }

    <span class="org-css-selector">.sticky-toc, .sticky-left, .single-post article .sticky-toc</span> {
        <span class="org-css-property">margin-left</span>: calc((-100vw + var(<span class="org-variable-name">&#45;&#45;body-max-width</span>))/2);
        <span class="org-css-property">float</span>: left;
    }

    <span class="org-css-selector">.sticky-right</span> {
        <span class="org-css-property">margin-right</span>: calc((-100vw + var(<span class="org-variable-name">&#45;&#45;body-max-width</span>))/2);
        <span class="org-css-property">float</span>: right;
    }

    <span class="org-comment-delimiter">/* </span><span class="org-comment">Hide the TOCs for non-active posts, but only if JS is enabled</span><span class="org-comment-delimiter"> */</span>
    <span class="org-css-selector">.js .on-this-page &gt; ul &gt; li &gt; ul, .js .on-this-page &gt; ul &gt; li &gt; div</span> { <span class="org-css-property">display</span>: none }
    <span class="org-css-selector">.on-this-page &gt; ul &gt; li.post-active &gt; ul, .on-this-page &gt; ul &gt; li.post-active &gt; div</span> { <span class="org-css-property">display</span>: block }

    <span class="org-css-selector">.active</span> { <span class="org-css-property">background-color</span>: var(<span class="org-variable-name">&#45;&#45;modus-bg-tab-bar</span>) }

    <span class="org-css-selector">.sticky-toc svg .active rect</span> {
        <span class="org-css-property">fill</span>: var(<span class="org-variable-name">&#45;&#45;modus-bg-tab-bar</span>) <span class="org-builtin">!important</span>;
        <span class="org-css-property">fill-opacity</span>: 1 <span class="org-builtin">!important</span>;
        <span class="org-css-property">mix-blend-mode</span>: darken;
        <span class="org-css-property">stroke-dash-array</span>: unset <span class="org-builtin">!important</span>;
        <span class="org-css-property">stroke-width</span>: 4px;
    }

    <span class="org-css-selector">.link-to-nonsticky-toc</span> {
        <span class="org-css-property">display</span>: none
    }
}


</pre>
</div>




</details>

<p></p>

<p>
I also have some Javascript to highlight the active post and show the subheadings for it in <a href="https://github.com/sachac/eleventy-blog-setup/blob/master/assets/js/misc.js">assets/js/misc.js</a>.
</p>

<p>
</p><details class="code-details" style="padding: 1em;
                 border-radius: 15px;
                 font-size: 0.9em;
                 box-shadow: 0.05em 0.1em 5px 0.01em  #00000057;">
                  <summary><strong>Javascript</strong></summary>

<div class="org-src-container">
<pre class="src src-js"><span class="org-comment-delimiter">/* </span><span class="org-comment">Table of contents</span><span class="org-comment-delimiter"> */</span>

<span class="org-keyword">function</span> <span class="org-function-name">stickyTocAfterScrolling</span>() {
  <span class="org-keyword">const</span> <span class="org-variable-name">elements</span> = document.querySelectorAll(<span class="org-string">'.single-post .sticky-toc-after-scrolling'</span>);
  <span class="org-keyword">let</span> <span class="org-variable-name">lastScroll</span> = window.scrollY;

  elements.forEach(element =&gt; {
    <span class="org-keyword">const</span> <span class="org-variable-name">clone</span> = element.cloneNode(<span class="org-constant">true</span>);
    clone.setAttribute(<span class="org-string">'class'</span>, <span class="org-string">'sticky-toc'</span>);
    clone.querySelector(<span class="org-string">'.panzoom'</span>)?.classList.remove(<span class="org-string">'panzoom'</span>);
    element.parentNode.insertBefore(clone, element.nextSibling);
  });

  <span class="org-keyword">const</span> <span class="org-variable-name">observer</span> = <span class="org-keyword">new</span> <span class="org-type">IntersectionObserver</span>(
    (entries) =&gt; {
      <span class="org-keyword">const</span> <span class="org-variable-name">currentScroll</span> = window.scrollY;
      <span class="org-keyword">const</span> <span class="org-variable-name">scrollingDown</span> = currentScroll &gt; lastScroll;
      lastScroll = currentScroll;

      entries.forEach(entry =&gt; {
        <span class="org-keyword">const</span> <span class="org-variable-name">element</span> = entry.target;
        <span class="org-keyword">const</span> <span class="org-variable-name">clone</span> = cloneMap.get(element);

        <span class="org-keyword">if</span> (!entry.isIntersecting &amp;&amp; scrollingDown) {
          clone.setAttribute(<span class="org-string">'class'</span>, <span class="org-string">'sticky-toc'</span>);
          clone.style.display = <span class="org-string">'block'</span>;
        } <span class="org-keyword">else</span> <span class="org-keyword">if</span> (entry.isIntersecting &amp;&amp; !scrollingDown) {
          element.style.visibility = <span class="org-string">'visible'</span>;
          clone.style.display = <span class="org-string">'none'</span>;
        }
      });
    },
    {
      root: <span class="org-constant">null</span>,
      threshold: 0,
      rootMargin: <span class="org-string">'-10px 0px 0px 0px'</span>
    }
  );

  elements.forEach(element =&gt; {
    observer.observe(element);
  });

  window.addEventListener(<span class="org-string">'resize'</span>, () =&gt; {
    elements.forEach(element =&gt; {
      <span class="org-keyword">const</span> <span class="org-variable-name">clone</span> = cloneMap.get(element);
      <span class="org-keyword">if</span> (clone.style.display != <span class="org-string">'none'</span>) {
        <span class="org-comment-delimiter">// </span><span class="org-comment">reset didn't seem to work</span>
        svgPanZoom(clone.querySelector(<span class="org-string">'svg'</span>)).destroy();
        addPanZoomToElement(clone.querySelector(<span class="org-string">'svg'</span>));
      }
    });
  }, { passive: <span class="org-constant">true</span> });
}

stickyTocAfterScrolling();

<span class="org-keyword">function</span> <span class="org-function-name">scrollToActiveTocLink</span>() {
  <span class="org-keyword">const</span> <span class="org-variable-name">activeLink</span> = document.querySelector(<span class="org-string">'.sticky-toc .active'</span>);
  <span class="org-keyword">const</span> <span class="org-variable-name">tocContainer</span> = document.querySelector(<span class="org-string">'.sticky-toc'</span>);
  <span class="org-keyword">if</span> (!activeLink || !tocContainer) <span class="org-keyword">return</span>;
  <span class="org-keyword">const</span> <span class="org-variable-name">tocRect</span> = tocContainer.getBoundingClientRect();
  <span class="org-keyword">const</span> <span class="org-variable-name">linkRect</span> = activeLink.getBoundingClientRect();
  <span class="org-keyword">if</span> (linkRect.top &lt; tocRect.top || linkRect.bottom &gt; tocRect.bottom) {
    <span class="org-keyword">const</span> <span class="org-variable-name">scrollPosition</span> = linkRect.top + tocContainer.scrollTop -
                          (tocRect.height / 2) + (linkRect.height / 2);
    tocContainer.scrollTo({
      top: scrollPosition,
      behavior: <span class="org-string">'smooth'</span>
    });
  }
}
<span class="org-keyword">function</span> <span class="org-function-name">getVisibleArticle</span>() {
  <span class="org-keyword">const</span> <span class="org-variable-name">viewportHeight</span> = window.innerHeight || document.documentElement.clientHeight;
  <span class="org-keyword">return</span> [...document.querySelectorAll(<span class="org-string">'article'</span>)].find((article) =&gt; {
    <span class="org-keyword">const</span> <span class="org-variable-name">rect</span> = article.getBoundingClientRect();
    <span class="org-keyword">const</span> <span class="org-variable-name">visibleTop</span> = Math.max(0, rect.top);
    <span class="org-keyword">const</span> <span class="org-variable-name">visibleBottom</span> = Math.min(viewportHeight, rect.bottom);
    <span class="org-keyword">const</span> <span class="org-variable-name">visibleHeight</span> = Math.max(0, visibleBottom - visibleTop);
    <span class="org-keyword">return</span> visibleHeight &gt; 0; <span class="org-comment-delimiter">// </span><span class="org-comment">find the first visible one</span>
  });
}

<span class="org-keyword">function</span> <span class="org-function-name">handleActiveTOCLink</span>() {
  <span class="org-keyword">const</span> <span class="org-variable-name">updateActive</span> = <span class="org-keyword">function</span>(<span class="org-variable-name">links</span>, <span class="org-variable-name">active</span>) {
    <span class="org-keyword">const</span> <span class="org-variable-name">activeFragment</span> = active.includes(<span class="org-string">'#'</span>) ?
          active.substring(active.indexOf(<span class="org-string">'#'</span>)) : <span class="org-string">''</span>;
    links.forEach(link =&gt; {
      <span class="org-keyword">const</span> <span class="org-variable-name">href</span> = link.getAttribute(<span class="org-string">'href'</span>);
      <span class="org-keyword">if</span> (href.includes(window.location.origin)) {
        link.classList.toggle(<span class="org-string">'active'</span>, href == active)
      } <span class="org-keyword">else</span> <span class="org-keyword">if</span> (href.startsWith(<span class="org-string">'#'</span>)) {
        link.classList.toggle(<span class="org-string">'active'</span>, href == activeFragment);
      }
    });
  };
  <span class="org-keyword">const</span> <span class="org-variable-name">posts</span> = document.querySelectorAll(<span class="org-string">'.post'</span>);
  <span class="org-keyword">const</span> <span class="org-variable-name">tocLinks</span> = document.querySelectorAll(<span class="org-string">'.on-this-page .toc-link'</span>);
  <span class="org-keyword">const</span> <span class="org-variable-name">options</span> = {
    root: <span class="org-constant">null</span>,
    rootMargin: <span class="org-string">'-20% 0px -70% 0px'</span>,
    threshold: 0
  };
  <span class="org-keyword">const</span> <span class="org-variable-name">observer</span> = <span class="org-keyword">new</span> <span class="org-type">IntersectionObserver</span>((entries) =&gt; {
    entries.forEach(entry =&gt; {
      <span class="org-keyword">if</span> (entry.isIntersecting) {
        <span class="org-keyword">const</span> <span class="org-variable-name">id</span> = entry.target.id;
        <span class="org-keyword">const</span> <span class="org-variable-name">link</span> = document.querySelector(<span class="org-string">`.toc-link[data-index="${id}"]`</span>);
        document.querySelectorAll(<span class="org-string">'.sticky-toc .active'</span>).forEach((o) =&gt; o.classList.remove(<span class="org-string">'active'</span>));
        document.querySelectorAll(<span class="org-string">'.post-active'</span>).forEach((o) =&gt; o.classList.remove(<span class="org-string">'post-active'</span>));
        <span class="org-keyword">if</span> (link) {
          link.classList.add(<span class="org-string">'active'</span>);
          <span class="org-keyword">const</span> <span class="org-variable-name">item</span> = link.closest(<span class="org-string">'li'</span>);
          item.classList.add(<span class="org-string">'post-active'</span>);
        }
      }
    });
    scrollToActiveTocLink();
  }, options);
  posts.forEach((post) =&gt; { observer.observe(post); });

  <span class="org-keyword">const</span> <span class="org-variable-name">stickyTocLinks</span> = document.querySelectorAll(<span class="org-string">'article .sticky-toc a, .on-this-page a'</span>);
  <span class="org-keyword">const</span> <span class="org-variable-name">postTocObserver</span> = <span class="org-keyword">new</span> <span class="org-type">IntersectionObserver</span>((entries) =&gt; {
    entries.forEach(entry =&gt; {
      <span class="org-keyword">if</span> (entry.isIntersecting) {
        <span class="org-keyword">const</span> <span class="org-variable-name">id</span> = entry.target.id;
        <span class="org-keyword">const</span> <span class="org-variable-name">url</span> = window.location.origin + window.location.pathname + <span class="org-string">'#'</span> + id.replace(<span class="org-string">/^outline-container-/</span>, <span class="org-string">''</span>);
        updateActive(stickyTocLinks, url);
      }
    });
    scrollToActiveTocLink();
  }, options);

  document.querySelectorAll(<span class="org-string">'article .sticky-toc, article .sticky-toc-after-scrolling'</span>).forEach((toc) =&gt; {
    <span class="org-keyword">const</span> <span class="org-variable-name">post</span> = toc.closest(<span class="org-string">'article'</span>);
    <span class="org-keyword">if</span> (post) {
      post.querySelectorAll(<span class="org-string">'.outline-2, .outline-3'</span>).forEach((section) =&gt; { postTocObserver.observe(section) });
    }
  });
  <span class="org-keyword">const</span> <span class="org-variable-name">visible</span> = getVisibleArticle();
  <span class="org-keyword">const</span> <span class="org-variable-name">id</span> = visible?.id;
  <span class="org-keyword">if</span> (id) {
    <span class="org-keyword">const</span> <span class="org-variable-name">activeLink</span> = document.querySelector(<span class="org-string">`.toc-link[data-index="${id}"]`</span>);
    <span class="org-keyword">if</span> (activeLink) {
      activeLink.classList.add(<span class="org-string">'active'</span>);
      activeLink.closest(<span class="org-string">'li'</span>).classList.add(<span class="org-string">'post-active'</span>);
      scrollToActiveTocLink();
    }
  }
}
handleActiveTOCLink();

</pre>
</div>




</details>

<p></p>
</div>
</div>
<div id="outline-container-adding-subheadings-and-sketches-to-my-blog-page-navigation-i-can-use-a-sketch-as-a-map-too" class="outline-3">
<h3 id="adding-subheadings-and-sketches-to-my-blog-page-navigation-i-can-use-a-sketch-as-a-map-too">I can use a sketch as a map, too</h3>
<div class="outline-text-3" id="text-adding-subheadings-and-sketches-to-my-blog-page-navigation-i-can-use-a-sketch-as-a-map-too">
<p>
I sometimes want to use sketchnotes as overviews,
especially if I've added <a href="https://sachachua.com/blog/2025/01/hyperlinking-svgs/">hyperlinks to them</a>. I
used to make the images show up on the right side,
but now I want them to show up in the left-side
navigation instead. Also, I wanted any links to
headings to automatically get recoloured as I
scroll to that heading.
</p>


<figure id="orga78f37e">
<img src="https://sachachua.com/blog/2025/04/adding-subheadings-and-sketches-to-my-blog-page-navigation/2025-04-02-scrolling-svg.gif" alt="2025-04-02-scrolling-svg.gif">

<figcaption><span class="figure-number">Figure 2: </span>Animated GIF showing how the SVG highlights change as you scroll down</figcaption>
</figure>

<p>
I added a special case to the
<code>handleActiveTOCLink</code> function to handle anchor
hyperlinks (just <code>#anchor</code>) in the SVG. It
probably makes sense to make those absolute URLs,
which means slightly changing my workflows for
hyperlinking SVGs and writing about sketches.
</p>

<p>
So on both the category page (ex: the Hyperlinking
SVGs entry in <a href="https://sachachua.com/blog/category/drawing/">category - drawing</a>, which might have
moved off the first page of results if you're
reading this far in the future) and the
single-post page (ex: <a href="https://sachachua.com/blog/2025/01/hyperlinking-svgs/">Hyperlinking SVGs</a>), there's
a full-sized version of the image in the main blog
post, and then a small copy of it in the margin on
the left. The sidebar copy is probably too small
to read, but it might be enough to get a sense of
spatial relationships, and the links also have
<code>title</code> attributes that are displayed as tooltips
when you hover.
</p>


<figure id="orgc5263b9">
<img src="https://sachachua.com/blog/2025/04/adding-subheadings-and-sketches-to-my-blog-page-navigation/2025-04-03_14-28-48.png" alt="2025-04-03_14-28-48.png">

<figcaption><span class="figure-number">Figure 3: </span>Screenshot of small image in sidebar on the single post page</figcaption>
</figure>

<p>
I use Javascript to duplicate the image and make a
small, sticky version because I haven't quite
figured out how to properly make it sticky when
off-screen with just CSS. Even my JS feels a
little tangled. Maybe this would be a good excuse
to learn about web components; someone's probably
figured out something polished.
</p>

<p>
I'm curious about using more drawings to anchor my
thinking and structure my blog posts.
</p>
</div>
</div>
<div id="outline-container-adding-subheadings-and-sketches-to-my-blog-page-navigation-progressive-enhancement" class="outline-3">
<h3 id="adding-subheadings-and-sketches-to-my-blog-page-navigation-progressive-enhancement">Progressive enhancement</h3>
<div class="outline-text-3" id="text-adding-subheadings-and-sketches-to-my-blog-page-navigation-progressive-enhancement">
<p>
Some people read my blog using <a href="https://www.gnu.org/software/emacs/manual/html_mono/eww.html">EWW</a> (the Emacs Web
Wowser, of course), so I want my blog to be
reasonable even without CSS and JS.
</p>

<p>
A number of people read my blog without Javascript
enabled. I installed the <a href="https://addons.mozilla.org/en-US/firefox/addon/script-switch/">Firefox extension Script
Switch</a> so that I can test my blog with and without
Javascript whenever I remember.
</p>

<p>
I sometimes look up my blog posts on my phone and
there's no space for any of this fanciness there,
so it'll only kick in on large screens. My CSS
file is littered with various breakpoints I've
cargo-culted over the years and I should simplify
it at some point. At the moment, if it looks fine
on my Lenovo P52, I'm happy.
</p>
</div>
</div>
<div id="outline-container-adding-subheadings-and-sketches-to-my-blog-page-navigation-other-ideas-and-next-steps" class="outline-3">
<h3 id="adding-subheadings-and-sketches-to-my-blog-page-navigation-other-ideas-and-next-steps">Other ideas and next steps</h3>
<div class="outline-text-3" id="text-adding-subheadings-and-sketches-to-my-blog-page-navigation-other-ideas-and-next-steps">
<p>
Theoretically, the right margin is now available
for <a href="https://gwern.net/sidenote">sidenotes</a>, so I might be able to look at
<a href="https://github.com/ox-tufte/ox-tufte">ox-tufte</a> and <a href="https://eleventufte.netlify.app/features/">Eleventufte</a> and get something going.
Then I'll have a way to add small notes that are
shorter than a paragraph. Longer tangents can go
in a details/summary element instead, although I
have it on good authority that <a href="https://maggieappleton.com/narrative-essays/#:~:text=He%20taught%20me%20it%20is%20100%25%20okay%20to%20write%20an%20entire%20side%2Dnovel%20in%20your%20footnotes%20if%20you%20need%20to.">one can write at
length in footnotes</a>. I love the footnotes in the
Bartimaeus series, and apparently there are quite
a few books where the <a href="https://reactormag.com/for-the-love-of-footnotes-when-fantasy-gets-extra-nerdy/">footnotes are part of the
storytelling</a>.)
</p>

<p>
It might be nice to let tables extend into the
right sidebar when I know I won't have a doodle
nearby. Incidentally, <a href="https://gwern.net/sidenote">Sidenotes In Web Design Â·
Gwern.net</a> uses breadcrumbs in the left sidebar
instead of a table of contents, so there's more
space for tables and sidenotes.
</p>

<p>
I thought about using CSS breakpoints so that on a
medium-sized screen, we can have the left sidebar
even if there's no space for something on the
right. I haven't gotten around to experimenting
with it yet, though. Besides, I don't know yet if
I want to prioritize the stuff I want in the right
sidebar (side notes, doodles) over fairly-static
navigation.
</p>

<p>
As I mentioned, it might be handy to tweak my SVG
linking workflow to use absolute URLs.
</p>

<p>
Sometimes I look up my notes within Emacs, but
surprisingly often, I look them up on the Web.
Navigation isn't just cosmetic. I want to get
better at using my blog as a tool for thought, so
tinkering with layout isn't just window dressing.
It's (very slowly) experimenting with scaffolding
for my brain. Little things can help!</p>
</div>
</div>

<p>You can <a href="mailto:sacha@sachachua.com?subject=Comment%20on%20https%3A%2F%2Fsachachua.com%2Fblog%2F2025%2F04%2Fadding-subheadings-and-sketches-to-my-blog-page-navigation%2F&body=Name%20you%20want%20to%20be%20credited%20by%20(if%20any)%3A%20%0AMessage%3A%20%0ACan%20I%20share%20your%20comment%20so%20other%20people%20can%20learn%20from%20it%3F%20Yes%2FNo%0A">e-mail me at sacha@sachachua.com</a>.</p>