<p>Nearly a couple of weeks since the last <a href="https://www.youtube.com/@xenodium">Bending Emacs</a> episode, so here's a new episode:</p>
<p><a href="https://youtu.be/J_WxzZXuTLI">Bending Emacs Episode 8: completing-read</a></p>
<center>
  <a href="https://www.youtube.com/watch?v=J_WxzZXuTLI" class="overlayed">
    <!-- Using hqdefault.jpg as maxresdefault.jpg doesn't work for older videos. -->
    <img class="preview" src="https://img.youtube.com/vi/J_WxzZXuTLI/hqdefault.jpg" alt="">
    <svg class="center-absolute" version="1.1" viewBox="0 0 68 48" width="65px" alt="play button">
      <path d="M66.52,7.74c-0.78-2.93-2.49-5.41-5.42-6.19C55.79,.13,34,0,34,0S12.21,.13,6.9,1.55 C3.97,2.33,2.27,4.81,1.48,7.74C0.06,13.05,0,24,0,24s0.06,10.95,1.48,16.26c0.78,2.93,2.49,5.41,5.42,6.19 C12.21,47.87,34,48,34,48s21.79-0.13,27.1-1.55c2.93-0.78,4.64-3.26,5.42-6.19C67.94,34.95,68,24,68,24S67.94,13.05,66.52,7.74z" fill="#2d2b2f"></path>
      <path d="M 45,24 27,14 27,34" fill="#fff"></path>
    </svg>
  </a>
</center>
<p>In this video, we take a look at the humble but mighty <a href="https://www.gnu.org/software/emacs/manual/html_node/elisp/Completion.html">completing-read</a> function. We can use it to craft our purpose-built tools, whether in pure elisp or to interact with command-line utilities.</p>
<p>Of interest, I also highlighted the great <a href="https://github.com/xuchunyang/elisp-demos">elisp-demos</a> package, which extends your help buffers with sample snippets.</p>
<p>Here are some of the <code>completing-read</code> snippets we played with:</p>
<p>Pick a queen:</p>
<pre><code class="language-{.commonlisp">(completing-read &quot;Pick a Queen: &quot;
                 '(&quot;Queen of Hearts ♥&quot;
                   &quot;Queen of Spades ♠&quot;
                   &quot;Queen of Clubs ♣&quot;
                   &quot;Queen of Diamonds ♦&quot;)
                 ;; predicate
                 nil
                 ;; require match
                 t)
</code></pre>
<p>Our own hashing function with an algo picker:</p>
<pre><code class="language-{.commonlisp">(defun misc/hash-region ()
  (interactive)
  (message &quot;Hash: %s&quot; (secure-hash (intern (completing-read
                                            &quot;Hash type: &quot;
                                            '(md5 sha1 sha224 sha256 sha384 sha512)))
                                   (current-buffer)
                                   (when (use-region-p)
                                     (region-beginning))
                                   (when (use-region-p)
                                     (region-end)))))
</code></pre>
<p>A first look at integrating completing read with a CLI util:</p>
<pre><code class="language-{.commonlisp">(completing-read &quot;Select file: &quot;
                 (string-split (shell-command-to-string &quot;ls -1 ../&quot;) &quot;\n&quot;))
</code></pre>
<p>Also got creative with <a href="https://github.com/lapfelix/BluetoothConnector">BluetoothConnector</a> on macOS and <code>completing-read</code>.</p>
<pre><code class="language-{.commonlisp">(completing-read &quot;Toggle BT connection: &quot;
                 (mapcar (lambda (device)
                           ;; Extract device name
                           (nth 1 (split-string device &quot; - &quot;)))
                         (seq-filter
                          (lambda (line)
                            ;; Keep lines like: af-8c-3b-b1-99-af - Device name
                            (string-match-p &quot;^[0-9a-f]\\{2\\}&quot; line))
                          (split-string (shell-command-to-string &quot;BluetoothConnector&quot;) &quot;\n&quot;))))
</code></pre>
<p>Some of my completing-read uses:</p>
<ul>
<li>
<p><a href="https://xenodium.com/emacs-quick-kill-process">Emacs: quickly killing processes</a>.</p>
</li>
<li>
<p><a href="https://xenodium.com/emacs-insert-and-render-sf-symbols">Emacs: insert and render SF symbols</a>.</p>
</li>
<li>
<p><a href="https://github.com/xenodium/dwim-shell-command/blob/35ca64d529987578dbbdf3f07d34310ee727b4a5/dwim-shell-commands.el#L1357">macOS open with</a>.</p>
</li>
<li>
<p><a href="https://github.com/xenodium/dwim-shell-command/blob/35ca64d529987578dbbdf3f07d34310ee727b4a5/dwim-shell-commands.el#L1339">macOS set default app</a>.</p>
</li>
<li>
<p><a href="https://github.com/xenodium/dwim-shell-command/blob/35ca64d529987578dbbdf3f07d34310ee727b4a5/dwim-shell-commands.el#L1243">macOS share</a> (the unhinged way).</p>
</li>
<li>
<p><a href="https://github.com/xenodium/ready-player">ready-player</a> search.</p>
<p>Hope you enjoyed the video!</p>
</li>
</ul>
<h2>Want more videos?</h2>
<p>Liked the video? Please let me know. Got feedback? Leave <a href="https://youtu.be/J_WxzZXuTLI">me some comments</a>.</p>
<p>Please go <a href="https://youtu.be/J_WxzZXuTLI">like my video</a>, share with others, and <a href="https://www.youtube.com/@xenodium">subscribe to my channel</a>.</p>
<p>If there's enough interest, I'll continue making more videos!</p>
<h2>Make it all sustainable</h2>
<p>Enjoying this content or <a href="https://github.com/xenodium">my projects</a>? I am an indie dev. Help make it sustainable by ✨<a href="https://github.com/sponsors/xenodium">sponsoring</a>✨</p>
<p>Need a blog? <a href="https://lmno.lol">I can help with that</a>. Maybe buy my <a href="https://apps.apple.com/us/developer/xenodium-ltd/id304568690">iOS apps</a> too ;)</p>
