<p>
I like the way <a href="https://sachachua.com/topic/org/">Org Mode</a> lets me logically group
functions into headings. If I give the heading a
<a href="https://www.gnu.org/software/emacs/manual/html_node/org/Internal-Links.html"><code>CUSTOM_ID</code> property</a> (which is also handy for
exporting to HTML, as it turns into an link
anchor), I can use that property to find the
subtree. Then I can use
<code>org-babel-execute-subtree</code> to execute all source
blocks in that subtree, which means I can mix
scripting languages if I want to.
</p>

<p>
Here's the code:
</p>


<div class="org-src-container">
<pre class="src src-emacs-lisp"><code>(<span class="org-keyword">defun</span> <span class="org-function-name">my-org-execute-subtree-by-custom-id</span> (id <span class="org-type">&amp;optional</span> filename)
  <span class="org-doc">"Prompt for a CUSTOM_ID value and execute the subtree with that ID.</span>
<span class="org-doc">If called with \\[</span><span class="org-doc"><span class="org-constant">universal-argument</span></span><span class="org-doc">], prompt for a file, and then prompt for the ID."</span>
  (<span class="org-keyword">interactive</span> (<span class="org-keyword">if</span> current-prefix-arg
                   (<span class="org-keyword">let</span> ((file (read-file-name <span class="org-string">"Filename: "</span>)))
                     (list
                      (<span class="org-keyword">with-current-buffer</span> (find-file-noselect file)
                        (completing-read
                         <span class="org-string">"Custom ID: "</span>
                         (org-property-values <span class="org-string">"CUSTOM_ID"</span>)))
                      file))
                 (list
                  (completing-read <span class="org-string">"Custom ID: "</span> (org-property-values <span class="org-string">"CUSTOM_ID"</span>)))))
  (<span class="org-keyword">with-current-buffer</span> (<span class="org-keyword">if</span> filename (find-file-noselect filename) (current-buffer))
    (<span class="org-keyword">let</span> ((pos (org-find-property <span class="org-string">"CUSTOM_ID"</span> id)))
      (<span class="org-keyword">if</span> pos
          (org-babel-execute-subtree)
        (<span class="org-keyword">if</span> filename(<span class="org-warning">error</span> <span class="org-string">"Could not find %s in %s"</span> id filename)
          (<span class="org-warning">error</span> <span class="org-string">"Could not find %s"</span> id))))))
</code></pre>
</div>


<p>
For example, in <a href="https://emacslife.com/calendar/#crontab">Using Org Mode, Emacs Lisp, and
TRAMP to parse meetup calendar entries and
generate a crontab</a>, I have a Emacs Lisp source
block that generates a crontab on a different
computer, and a shell source block that installs
it on that computer.
</p>

<p>
Technical notes: <code>org-babel-execute-subtree</code>
narrows to the current subtree, so if I want
anything from the rest of the buffer, I need to
widen the focus again. Also, it's wrapped in a
<code>save-restriction</code> and a <code>save-excursion</code>, so
someday I might want to figure out how to handle
the cases where I want to change what I'm looking
at.
</p>

<p>
<a href="https://www.gnu.org/software/emacs/manual/html_node/org/External-Links.html"><code>elisp:</code> links</a> in Org Mode let me call functions
by clicking on them or following them with <code>C-c
C-o</code> (<code>org-open-at-point</code>). This means I can make
links that execute subtrees that might even be in
a different file. For example, I can define links
like these:
</p>
<ul class="org-ul">
<li><code>[[elisp:(my-org-execute-subtree-by-custom-id "update" "~/sync/emacs-calendar/README.org")][Update Emacs calendar]]</code></li>
<li><code>[[elisp:(my-org-execute-subtree-by-custom-id "crontab" "~/sync/emacs-calendar/README.org")][Update Emacs meetup crontab]]</code></li>
</ul>

<p>
That could be a good starting point for a
dashboard.
</p>

<p>
Related: <a href="https://sachachua.com/dotemacs#execute-named-babel-block">Execute a single named Org Babel source block</a>
</p>

<div class="note">This is part of my <a href="https://sachachua.com/dotemacs#execute-subtree-by-custom-id">Emacs configuration.</a></div><div><a href="https://sachachua.com/blog/2025/06/run-source-blocks-in-an-org-mode-subtree-by-custom-id/index.org">View org source for this post</a></div>
<p>You can <a href="https://social.sachachua.com/@sacha/statuses/01JY2D10DGKY5FZCSHWVWXXHK8" target="_blank" rel="noopener noreferrer">comment on Mastodon</a> or <a href="mailto:sacha@sachachua.com?subject=Comment%20on%20https%3A%2F%2Fsachachua.com%2Fblog%2F2025%2F06%2Frun-source-blocks-in-an-org-mode-subtree-by-custom-id%2F&body=Name%20you%20want%20to%20be%20credited%20by%20(if%20any)%3A%20%0AMessage%3A%20%0ACan%20I%20share%20your%20comment%20so%20other%20people%20can%20learn%20from%20it%3F%20Yes%2FNo%0A">e-mail me at sacha@sachachua.com</a>.</p>