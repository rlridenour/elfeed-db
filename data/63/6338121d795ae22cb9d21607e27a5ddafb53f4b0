<p><a href="https://fosstodon.org/@drdrang/114417272491411103">A few weeks ago</a>, I expressed some concern about staying on my current Mastodon instance, which is <a href="https://fosstodon.org">Fosstodon</a>:</p>
<blockquote>
<p>I guess it’s time to change instances once more. I’m going to spend a little time trying to decide on a new place because I really don’t want to have to do this again in another few years.</p>
</blockquote>
<p>The Fosstodon moderator whose comments (on other social media) had gotten people upset left his position, as did another administrator. Still, several people left for other instances, and there was talk of Fosstodon being defederated. All of this happened before I was aware of it—FOMO? what’s that?—and <a href="https://hub.fosstodon.org/update-from-gina">the new admin team</a> was already being built. But the defederation talk concerned me. Even if the wrongs were righted, that doesn’t help users if their posts aren’t being read elsewhere.</p>
<p>The simple thing would be to switch to <a href="https://mastodon.social/explore">mastodon.social</a>, the biggest Mastodon instance. If it goes down, that’s pretty much the end of Mastodon, so there wouldn’t be any need to switch again. Unfortunately, the “drdrang” username wasn’t available there. Apparently, someone had signed up for it and had their account <a href="https://mastodon.social/@drdrang@mastodon.social">suspended</a>, so the name wasn’t available to me.</p>
<p>With this path closed, I decided to be a little less reactive and look into whether Fosstodon was actually being defederated or not. I visited <a href="https://fedidb.com/servers">the server directory at FediDB</a> and explored its list of Mastodon servers ordered by monthly active users. Fosstodon was still in the top ten, which suggested that there hadn’t been a mass exodus. But this didn’t check for defederation directly.</p>
<p>Each Mastodon instance has an <a href="https://mastodon.social/about">About page</a>,<sup id="fnref:example"><a href="#fn:example" rel="footnote">1</a></sup> and most of those pages include a list of “Moderated servers,” instances that have been suspended or limited in some way by the host server’s administrators. Fosstodon didn’t appear in the Moderated list of any of the main instances I checked, although some didn’t publish a Moderated list.</p>
<p>Then I tried out the <a href="https://docs.joinmastodon.org/methods/instance/#peers"><code>peers</code> API call</a>, which returns a JSON array of all the servers the host communicates with:</p>
<pre><code>curl -s https://mastodon.social/api/v1/instance/peers |\
jq '.[]' | fgrep fosstodon.org
</code></pre>
<p>This returned</p>
<pre><code>"hub.fosstodon.org"
"fosstodon.org"
</code></pre>
<p>A little more clever use of <a href="https://jqlang.org/"><code>jq</code></a> was</p>
<pre><code>curl -s https://mastodon.social/api/v1/instance/peers |\
jq 'any(.[]; . == "fosstodon.org")'
</code></pre>
<p>which yielded just</p>
<pre><code>true
</code></pre>
<p>because one of the peers was just “fosstodon.org” with no other text. I tried this same call for several instances, and they all returned <code>true</code>.</p>
<p>Just to be sure that I understood what <code>peers</code> was returning, I tried it out with a few instances I saw on mastodon.social’s Moderated list. For example,</p>
<pre><code>curl -s https://mastodon.social/api/v1/instance/peers |\
jq 'any(.[]; . == "onion.social")'
</code></pre>
<p>returned <code>false</code>. As I thought, moderated servers aren’t in the peers list.</p>
<p>The upshot of all of this is that Fosstodon hasn’t been defederated, at least not by any of the large instances I checked. So unless another crisis comes up, I’ll stay.</p>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:example">
<p>The examples given from here on will be for mastodon.social. You can switch URLs to any instance to see similar information. <a href="#fnref:example" rev="footnote">↩</a></p>
</li>
</ol>
</div>
