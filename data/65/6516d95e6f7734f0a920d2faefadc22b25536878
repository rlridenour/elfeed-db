<p>Given my previous post regarding accenting the current window:</p>
<p><a href="https://emacs.dyerdwelling.family/emacs/20231221210441-emacs--selected-window-accent/">Selected Window Accent</a></p>
<blockquote>
<p>&ldquo;This routine provides a coloured left fringe accent on the selected window to emphasize the current working window.&rdquo;</p>
</blockquote>
<p>I had a little issue with <code>visual-fill-column-mode</code> in that :</p>
<blockquote>
<p>Note that I also had to set the margins to make the window traversal less visually disturbing and it seems to affect <code>visual-fill-column-mode</code> in the fact that it doesn&rsquo;t work, but maybe I can just try and not use it or eventually figure it out, but for now this is a starting point and I&rsquo;m sure I will refine it over time.</p>
</blockquote>
<p>With some trial and error the issue was that my new accent routine applied margins that overrode <code>visual-fill-column-mode</code>, causing display issues on window navigation.</p>
<p>So to fix I just re-activated <code>visual-fill-column-mode</code> if it was active.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(defun selected-window-accent ()
</span></span><span style="display:flex;"><span>  (interactive)
</span></span><span style="display:flex;"><span>  (set-face-background <span style="color:#e6db74">&#39;fringe</span> <span style="color:#e6db74">&#34;#77002e&#34;</span>)
</span></span><span style="display:flex;"><span>  (walk-windows
</span></span><span style="display:flex;"><span>    (lambda (window)
</span></span><span style="display:flex;"><span>      (if (<span style="color:#a6e22e">eq</span> window (<span style="color:#a6e22e">selected-window</span>))
</span></span><span style="display:flex;"><span>        (progn
</span></span><span style="display:flex;"><span>          (<span style="color:#a6e22e">set-window-margins</span> window <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>          (with-selected-window window
</span></span><span style="display:flex;"><span>            (if (<span style="color:#a6e22e">eq</span> visual-fill-column-mode <span style="color:#66d9ef">t</span>)
</span></span><span style="display:flex;"><span>              (visual-fill-column-mode <span style="color:#66d9ef">t</span>)))
</span></span><span style="display:flex;"><span>          (<span style="color:#a6e22e">set-window-fringes</span> window <span style="color:#ae81ff">10</span> <span style="color:#ae81ff">0</span> <span style="color:#66d9ef">t</span> <span style="color:#66d9ef">nil</span>))
</span></span><span style="display:flex;"><span>        (progn
</span></span><span style="display:flex;"><span>          (<span style="color:#a6e22e">set-window-margins</span> window <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>          (with-selected-window window
</span></span><span style="display:flex;"><span>            (if (<span style="color:#a6e22e">eq</span> visual-fill-column-mode <span style="color:#66d9ef">t</span>)
</span></span><span style="display:flex;"><span>              (visual-fill-column-mode <span style="color:#66d9ef">t</span>)))
</span></span><span style="display:flex;"><span>          (<span style="color:#a6e22e">set-window-fringes</span> window <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">0</span> <span style="color:#66d9ef">t</span> <span style="color:#66d9ef">nil</span>))
</span></span><span style="display:flex;"><span>        )
</span></span><span style="display:flex;"><span>      )
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">nil</span> <span style="color:#66d9ef">t</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(add-hook <span style="color:#e6db74">&#39;window-configuration-change-hook</span> <span style="color:#e6db74">&#39;selected-window-accent</span>)
</span></span><span style="display:flex;"><span>(add-hook <span style="color:#e6db74">&#39;window-state-change-hook</span> <span style="color:#e6db74">&#39;selected-window-accent</span>)
</span></span></code></pre></div><figure><img src="https://emacs.dyerdwelling.family/ox-hugo/20231221210441-emacs--Selected-Window-Accent-2.jpg" width="100%">
</figure>