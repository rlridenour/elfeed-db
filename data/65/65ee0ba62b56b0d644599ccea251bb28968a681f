<p>Writing involves organizing a lot of information, sometimes spread across multiple files. You want to be able to wrangle all that data with a delicate touch, <b>all the while keeping your flow state</b>.</p>
<p>It can be difficult to stay in a flow state if you accidentally, or intentionally, shift your focus and have to find your way back to what you were doing before your little excursion.</p>
<p>Emacs can help, but also hurt. With so many functions and key commands, it’s easy to accidentally tap the wrong combination of keys and find yourself in some other location of a long document, or maybe even in another file entirely.</p>
<p>Wouldn’t it be nice if you had a simple “back” button that could magically transport you to the exact line, sentence, and word you were working on?</p>
<p>Yes. <strong>We can do that.</strong></p>
<p>Emacs provides a basic functionality for this. But, like most things in Emacs, in can be <i>sweetened</i> to make it more user-friendly. Also, it’s not only that we want to go “back” but forward as well.</p>
<p>By the end of this article, you can have this optional functionality added to your config file. Here’s a breakdown of what we will cover:</p>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#movements">What kind of movements can I do with a backward and forward button?</a></li>
<li><a href="#push-mark">How marks get pushed and what that means</a></li>
<li><a href="#backward-forward-package">How to configure the backward-forward package</a></li>
</ul>
</div>
</div>
<div id="outline-container-movements" class="outline-2">
<h2 id="movements">Movements</h2>
<div id="text-movements" class="outline-text-2">
<p>This “back” button functionality is not only meant to catch you after a false key input. It’s meant to improve your overall Emacs functionality.</p>
<p>So what kind of <i>new moves</i> can you do with this, and why would you bother?</p>
<p>I can be editing a file and find myself overcome by a sudden urge to edit some other part of the document, go on that excursion, do my editing, and hit the back button to get back to where I was before my little side quest.</p>
<p>This happens a lot in the writing process. For example, you may be working on one particular scene in which an action or line a dialogue nullifies something that happens in another scene. You can make a note to fix that later, <b>or go and fix it now</b>.</p>
<p>If you’re a “fix it now” kind of writer, this is easy to do in Emacs and get right back to the initial scene you were working on using our new “back button” functionality.</p>
<p>That’s right. <strong>Emacs supports excursions.</strong></p>
</div>
</div>
<div id="outline-container-push-mark" class="outline-2">
<h2 id="push-mark">How this works (push-mark)</h2>
<div id="text-push-mark" class="outline-text-2">
<p>How does this all work?</p>
<p>Emacs uses and internal function called <code>push-mark</code> to save your current point in a “mark ring.” When this function is called a “mark” is made, saving your exact position (point value).</p>
<p>(Check out my <a href="https://chrismaiorana.com/whats-the-point-of-point/">full article and video about “point”</a> and what it means in Emacs.)</p>
<p>As you can imagine, with those values saved in the mark ring, you can cycle through them quite easily. You just need some functions to do so.</p>
<p>The <code>push-mark</code> function is already nested within other common functions you may use all the time, such as:</p>
<ul class="org-ul">
<li style="list-style-type: none;">
<ul class="org-ul">
<li>The <code>save-buffer</code> function. (Yet another good reason to save frequently.)</li>
<li>The <code>beginning-of-buffer</code> and <code>end-of-buffer</code> functions.</li>
<li>You can also write a custom command to push your mark whenever you want. But it’s easier to rely on the automatic functionality called within other functions.</li>
</ul>
</li>
</ul>
<p>You can move your current point back to the previous saved position in your mark ring using <code>C-u C-SPC</code>. But this only goes backward.</p>
</div>
</div>
<div id="outline-container-backward-forward-package" class="outline-2">
<h2 id="backward-forward-package">Using the <code>backward-forward</code> package</h2>
<div id="text-backward-forward-package" class="outline-text-2">
<p>I used a package called <code>backward-forward</code> to get the functionality necessary to move back and forward between marked positions.</p>
<div class="org-src-container">
<pre class="src src-elisp">(<span style="color: #a45a22; font-weight: bold;">use-package</span> <span style="color: #ce3f00;">backward-forward</span>
  <span style="color: #cf2f4f; font-weight: bold;">:ensure</span> t
  <span style="color: #cf2f4f; font-weight: bold;">:demand</span> t
  <span style="color: #cf2f4f; font-weight: bold;">:config</span>
  (backward-forward-mode t)
  <span style="color: #cf2f4f; font-weight: bold;">:bind</span>
  (<span style="color: #cf2f4f; font-weight: bold;">:map</span> backward-forward-mode-map
        (<span style="color: #5a7400;">"&lt;left&gt;"</span> . backward-forward-previous-location)
        (<span style="color: #5a7400;">"&lt;right&gt;"</span> . backward-forward-next-location)))
</pre>
</div>
<p>I have mapped the backward and forward movement functions to the left and right arrow keys because I didn’t need those for basic left/right character movement. This has taken some getting-used-to, but I think it’s best to ween yourself off of using the arrow keys for basic character movements anyway.</p>
<p>So now, if I need to go backward I can arrow left and forward with arrow right. Easy.</p>
<hr />
<p>Thanks for reading. You now know at least one way of setting up back and forward buttons for jumping around your Emacs documents with ease.</p>
<p>Reminders:</p>
<ul class="org-ul">
<li><a href="https://chris-maiorana.kit.com/products/emacs-for-writers">My Emacs For Writer handbook is available here</a></li>
<li>You can also subscribe to <a href="https://chris-maiorana.kit.com/f9e94a7435">my newsletter here</a></li>
</ul>
</div>
</div>
<p>The post <a href="https://chrismaiorana.com/emacs-back-button/">Keep your flow with a &#8220;back&#8221; button for Emacs</a> appeared first on <a href="https://chrismaiorana.com">Chris Maiorana</a>.</p>
