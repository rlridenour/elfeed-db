<p><strong>Summary: </strong>
Working through my guiding principles on migrating to Linux; then addressing a key consideration: Caps Lock should act as Control.
</p>
        <p>This is my first “substantive” post in 
.</p>
<h2 id="guiding-principles">Guiding Principles</h2>
<p>I have chosen to adopt <span><a href="https://linux.org/">Linux</a></span> <small><a class="ref" rel="tag opener" aria-label="Other site-wide references of “Linux”" title="Other site-wide references of “Linux”" href="https://takeonrules.com/site-map/glossary/#abbr-dfn-LINUX">&#128214;</a></small>
 in an effort to step out of a walled garden; namely
<span><a href="https://en.wikipedia.org/wiki/MacOS">Macintosh Operating System</a></span> (<abbr title="Macintosh Operating System">MacOS</abbr> <small><a class="ref" rel="tag opener" aria-label="Other site-wide references of “Macintosh Operating System”" title="Other site-wide references of “Macintosh Operating System”" href="https://takeonrules.com/site-map/glossary/#abbr-dfn-OSX">&#128214;</a></small>)
.  I have been using <abbr title="Macintosh Operating System">MacOS</abbr>
 as my personal and work operating system
since 2005.  In that time, I’ve watched as Apple has become more hostile to
folks using their computer outside the bounds of “Applications made by folks
that have paid Apple for the privilege of making Applications in <abbr title="Macintosh Operating System">MacOS</abbr>
.”</p>
<p>Some of this includes:</p>
<ul>
<li>Requiring XCode to build software</li>
<li>Marking installed packages as “damaged” when they weren’t signed by Apple.</li>
</ul>
<p>Further, Apple is rolling out “Artificial Intelligence” which means my
computering may well be used for training a <span>Large Language Model</span> (<abbr title="Large Language Model">LLM</abbr> <small><a class="ref" rel="tag opener" aria-label="Other site-wide references of “Large Language Model”" title="Other site-wide references of “Large Language Model”" href="https://takeonrules.com/site-map/glossary/#abbr-dfn-LLM">&#128214;</a></small>)
.  As such, I’m looking to step
out of the walled garden.</p>
<p>I’m also looking at how I might use this experience to guide others.  This
“guide others” is in tension with my exploration of a a tiling window manager;
in that the managers I’m considering are a bit more obtuse compared to current
desktop interactions.</p>
<p>Running contrary to this, is that for the foreseeable future I’ll be using <abbr title="Macintosh Operating System">MacOS</abbr>

for my work environment.  Which means I’m looking to maintain degrees of
similarity.</p>
<h2 id="keyboard-bindings">Keyboard Bindings</h2>
<p>Given that my work computer is a Mac and I&rsquo;m shifting to <span>Linux</span>
, I know that I
will bump up against keybinding differences.</p>
<p>I consider the most important key change to be mapping my <code>caps lock</code> key to <code>ctrl</code>.
All other things are negotiable.  I’m also considering whether I will remap even
more keys.</p>
<p>I do know that for my window manager, I want to explore mapping an under-used
key.</p>
<p>The computer I&rsquo;m using has a firmware package for modifying keybindings; however
I&rsquo;m opting for a more general approach.  That is one that doesn&rsquo;t need a
firmware package.  Which should be generally more applicable.</p>
<p>One significant difference, shifting from a Macbook keyboard and my new machine
is that I now have a number pad along with several “good ol’ stand-by keys” such
as <code>Print Screen</code>, <code>Insert</code>, <code>Page Up</code>, <code>Page Down</code>, <code>Home</code>, and <code>End</code>.</p>
<h3 id="editing-etc-default-keyboard">Editing <code>/etc/default/keyboard</code></h3>
<p>As part of my initial effort to map <code>caps lock</code> to <code>ctrl</code>, I used the following:</p>
<ul>
<li>Open a Shell</li>
<li>Switch to root (e.g. <code>su</code>)</li>
<li>Edit <code>/etc/default/keyboard</code></li>
<li>Set <code>XKBOPTIONS=&quot;ctrl:swapcaps&quot;</code></li>
<li>Run <code>sudo dpkg-reconfigure keyboard-configuration</code></li>
<li>Restart the computer</li>
</ul>
<p>This worked, but was more invasive than I wanted.  So I explored XModmap as an
alternative.</p>
<h3 id="xmodmap">XModmap</h3>
<p>I am unclear about the interaction of XModmap and <code>/etc/default/keyboard</code>; as such
I removed the changes I made to the keyboard file and proceeded with these
steps.  An advantage of the XModmap modifications, as implemented, are that they
apply on a per-user basis.</p>
<p>I found <a href="https://gist.github.com/yemM/9f232e2483b67965e9a0d55158e02ab2">Xmodmap to get keyboard act as on Mac OS · GitHub</a>, which altered the
keyboard layout to similar expectations as <abbr title="Macintosh Operating System">MacOS</abbr>
.  However I&rsquo;m going with a
slightly different configuration</p>
<pre><code class="language-text">!!! NOTE: This file was generated by org-tangle from
!!!       ~/git/dotzshrc/runbooks/linux.org

! As a matter of hygiene and cleanliness, clear the modifiers.  We will remap
! later.
clear lock
clear control
clear mod1
clear mod2
clear mod3
clear mod4
clear mod5

! Bind left control as Hyper
keycode 37 = Hyper_L

!Bind caps lock as Control
keycode 66 = Control_L

!Bind insert as Hyper_R
!keycode 118 = Hyper_R

add control = Control_L Control_R
add mod1 = Alt_L Alt_R Meta_L
add mod2 = Num_Lock
add mod3 = Hyper_L
add mod4 = Super_L Super_R
! Treat re-bound insert as mod5 in Terminal
! add mod5 = Hyper_R
</code></pre>
<p>On my present machine the bottom key labels are (from left to right) and with
the above configuration these bind accordingly:</p>
<dl>
<dt><code>ctrl</code></dt>
<dd><code>C-</code></dd>
<dt><code>fn</code></dt>
<dd>OS Function key toggle (e.g. <code>F1</code>)</dd>
<dt><code>super</code></dt>
<dd><code>s-</code></dd>
<dt><code>alt</code></dt>
<dd><code>M-</code></dd>
<dt><code>space</code></dt>
<dd><code>SPC</code></dd>
<dt><code>alt</code></dt>
<dd><code>M-</code></dd>
<dt><code>menu</code></dt>
<dd><code>M-x</code> (kind of nice having a dedicated <code>M-x</code> key)</dd>
<dt><code>ctrl</code></dt>
<dd><code>C-</code></dd>
</dl>
<p>In my initial foray, I bound <code>Insert/Screen Lock</code> key to <code>H-</code> (hyper).  A major
change that I&rsquo;m evaluating is whether the keys to the immediate right and left
of <code>SPC</code> should be <code>M-</code> or <code>s-</code>.  There is also the left-most <code>ctrl</code> that I might remap.</p>
<p>However, this binding conflicted with later developments, so I preserved <code>Insert</code>
as its original behavior.</p>
<p>Regardless of my considerations, I use the following command to apply the above
changes:</p>
<pre><code class="language-bash">xmodmap ~/.Xmodmap
</code></pre>
<p>I’ve attempted to add this keyboard configuration to my windowed session login;
however it is not yet working.  As such, whenever I boot my computer and login,
it behooves me to launch a terminal.</p>
<h3 id="investigating-the-boot">Investigating the Boot</h3>
<p>I found <a href="https://unix.stackexchange.com/questions/42611/how-can-i-run-a-script-that-starts-before-my-login-screen">How can I run a script that starts before my login screen?</a> on Stack
Exchange.  This looked promising.</p>
<p>I looked into my <code>/etc/gdm3/Init/</code> and there was one file: <code>Default</code>.  This was a
bash script.  Reading the code it was looking for an Xmodmap file in some system
directories.  One was <code>/usr/etc/X11/Xmodmap</code>.</p>
<p>I tried using both a symlink and a copy of my personal <code>~/.Xmodmap</code> to the <code>/usr/etc/X11/Xmodmap</code> file, but it did not run this before the window manager, so I’ve set it aside.</p>
<p>Until I learn more, I’ll launch Terminal when I first login.</p>
<h2 id="coping-with-pop-os-keybindings">Coping with Pop OS Keybindings</h2>
<p>This was a bit of a side-quest, but one that relates to <span><a href="https://en.wikipedia.org/wiki/Emacs">Emacs</a></span> <small><a class="ref" rel="tag opener" aria-label="Other site-wide references of “Emacs”" title="Other site-wide references of “Emacs”" href="https://takeonrules.com/site-map/glossary/#abbr-dfn-EMACS">&#128214;</a></small>
.  Namely <span><a href="https://system76.com/pop/">Pop!_OS</a></span> <small><a class="ref" rel="tag opener" aria-label="Other site-wide references of “Pop!_OS”" title="Other site-wide references of “Pop!_OS”" href="https://takeonrules.com/site-map/glossary/#abbr-dfn-POP-OS">&#128214;</a></small>

uses a lot of <code>s-</code> keys for window operations.  My <span>Emacs</span>
 also uses <code>s-</code> keys, and I
wanted to avoid collision.</p>
<p>Out of the box, I’m using <span>Pop!_OS</span>
.  I had considered <span><a href="http://debian.org/">Debian</a></span> <small><a class="ref" rel="tag opener" aria-label="Other site-wide references of “Debian”" title="Other site-wide references of “Debian”" href="https://takeonrules.com/site-map/glossary/#abbr-dfn-DEBIAN">&#128214;</a></small>
, but when I use a
live boot image, the trackpad does not work.  I’m not prepared to mess with
this.  So I’m sticking with the quite nice <span>Pop!_OS</span>
 (a derivative of <span><a href="https://ubuntu.com">Ubuntu</a></span> <small><a class="ref" rel="tag opener" aria-label="Other site-wide references of “Ubuntu”" title="Other site-wide references of “Ubuntu”" href="https://takeonrules.com/site-map/glossary/#abbr-dfn-UBUNTU">&#128214;</a></small>
, which
is a derivative of <span>Debian</span>
).</p>
<p>There are a lot of OS-level keys bound to <code>s-</code> prefix.  I went through the menu to
disable most of those.</p>
<p>One non-<span>Pop!_OS</span>
 key was monitor switching.  It was bound to <code>s-p</code>, something I use
extensively in <span>Emacs</span>
.  I ran <code>gsettings set org.gnome.mutter.keybindings switch-monitor &quot;[]&quot;</code> to unbind <code>s-p</code> from the <code>switch-monitor</code> gnome command.</p>
<p>I&rsquo;m also using <code>dconf dump / &gt; ~/git/dotzshrc/pop_os_settings.conf</code> which I can
then use to load, via the following:</p>
<pre><code class="language-shell">dconf load / &lt; ~/git/dotzshrc/pop_os_settings.conf
</code></pre>
<p>What I noticed is that the <code>dconf dump</code> does not include the default keybindings,
but instead the changes.  To find those, I needed to dig just a bit further.</p>
<p>I forget where I originally learned of <code>dconf</code> but I found the following helpful: <a href="https://linuxconfig.org/introduction-to-the-dconf-configuration-system">Introduction to the dconf configuration system</a>.</p>
<p>One at present unsolvable “issue” is that typing <code>s-</code> (e.g., <code>super</code>) and releasing
invokes <span>Pop!_OS</span>
’s launcher.  Given that I’d often used <code>s-Space</code> for <abbr title="Macintosh Operating System">MacOS</abbr>
 to
launch apps, I’m okay enough with this behavior.</p>
<p>And as I’ve been working on <span>Linux</span>
, to build this document, I opted to switch the
bindings on my Macbook.  Now I have mapped the key to the left of the space bar
on my Macbook maps to Option/Alt.  I figure, if I’m going to leave the wall
garden perhaps I can also leave the muscle memory and rebuild anew.</p>
<p>A couple of days into this, I can say I’m remapping the memories.  But the
higher the “stress” moment (e.g., pairing) the deeper ingrained memory takes
hold.  But I look to this remapping as an exercise of mental nimbleness.</p>
<h2 id="conclusion">Conclusion</h2>
<p>My next article in this series will be about building <span>Emacs</span>
 from source so I can
really start working on my machine.</p>

	<p><a class="reply-by-email" href="mailto:reply-to@takeonrules.com?subject=RE:Migrating%20to%20Linux%3a%20On%20Guiding%20Principles%20and%20Keyboard%20Bindings">Reply by Email</a></p>

      