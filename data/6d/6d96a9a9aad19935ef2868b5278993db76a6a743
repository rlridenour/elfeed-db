<p><a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Imenu.html">imenu</a> navigation is one of those Emacs gems I didn't discover until much later on. It does what you'd expect in all types of modes. In rare instances, I've found specific modes missing imenu support. Fortunately, this is Emacs and you can fix that.</p>
<p><a href="https://www.gnu.org/software/emacs/manual/html_mono/eshell.html">Eshell</a> has a handy feature to jump back and forth over previous prompts using <em>M-x eshell-previous-prompt (C-c C-p)</em> and <em>M-x eshell-next-prompt (C-c C-n)</em>. Upon learning about these two functions, my immediate reaction was to try imenu. Surprisingly, it didn't &quot;just work&quot;, but a tiny bit of elisp brought balance back to the Emacs universe.</p>
<p>In an eshell mode hook function, one can set the <a href="https://www.gnu.org/software/emacs/manual/html_node/elisp/Imenu.html#index-imenu_002dgeneric_002dexpression-2058">imenu-generic-expression</a> to help it find your favorite prompt:</p>
<pre><code class="language-{.commonlisp">(setq-local imenu-generic-expression
                  '((&quot;Prompt&quot; &quot; $ \\(.*\\)&quot; 1)))
</code></pre>
<p>Ah it's the little thingsâ€¦</p>
<p><img src="https://xenodium.github.io/images/imenu-on-emacs-eshell/eshell-imenu.gif" alt=""></p>
<p>ps. If wondering why my imenu experience looks a little different, that's because I'm using Abo Abo's wonderful <a href="https://github.com/abo-abo/swiper">counsel</a> and <em>M-x counsel-semantic-or-imenu</em>.</p>
