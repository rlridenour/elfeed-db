<p>Because the Internet, it is a blessing of our time that interacting with people in different time zones is commonplace. In this, the question is often raised: “what time is it there?” This is routinely answered using a clock app or a <a href="https://www.timeanddate.com/worldclock/">website</a>.</p>
<p>While Emacs has long had the ability to make time zone calculations, it seemed overdue to have tooling that takes advantage of it.</p>
<p>Announcing <a href="https://github.com/kickingvegas/casual/blob/main/docs/timezone.org">Casual Timezone</a>, now available as part of the <a href="https://github.com/kickingvegas/casual/releases/tag/2.5.0">Casual v2.5.0 update</a> on <a href="https://melpa.org/#/casual">MELPA</a>.</p>
<p>The following screencast shows Casual Timezone in action, in this case a meeting planner (command: <code>casual-timezone-planner</code>) that compares the hours with your local time zone with that of another.</p>
<p><img src="http://yummymelon.com/devnull/images/announcing-casual-timezone/casual-timezone-demo.gif"/></p>
<p>Casual Timezone also lets you directly ask:</p>
<ul>
<li>“What time is it over there?” (command: <code>casual-timezone-local-time-to-remote</code>)</li>
<li>“That time over there, what is it here?” (command: <code>casual-timezone-remote-time-to-local</code>)</li>
</ul>
<p>Note that at current, Casual Timezone only supports Unix-variant systems as it relies on the <a href="https://en.wikipedia.org/wiki/Tz_database">tz database</a>. It has been tested on macOS 15.5 and Ubuntu Linux 22.04. Sorry Windows users, but I’m open for a PR for Windows support if a workaround for zoneinfo is available.</p>
<h1>Closing Thoughts</h1>
<p>With experience, I’ve learned to be humble about working with time APIs. While I’ve done much to ensure the results are accurate, I would not be surprised if there are bugs, especially for a first release. Let me know <a href="https://github.com/kickingvegas/casual/issues">if you find any</a>.</p>
<p>On reflection, putting Casual Timezone together was relatively easy as it was largely an exercise in integrating different Elisp packages:</p>
<ul>
<li>From Org, the command <code>org-read-date</code> provided the date picker UI.</li>
<li>Built-in completion provided the UI for selecting a time zone.</li>
<li><code>vtable</code> provided the table interface for <code>casual-timezone-planner</code>.</li>
<li>The table interface was configured as a derived mode to provide mode-specific behavior.</li>
<li>The built-in time functions were used for time zone calculations and formatting.</li>
<li>Transient provided support for menus.</li>
</ul>
<p>Gonna call this an Elisp code-reuse success story.</p>
<h1>References</h1>
<ul>
<li><a href="https://www.gnu.org/software/emacs/manual/html_node/elisp/Time-Zone-Rules.html">Time Zone Rules (GNU Emacs Lisp Reference Manual)</a></li>
<li><a href="https://www.gnu.org/software/emacs/manual/html_node/vtable/">vtable (Variable Pitch Tables)</a></li>
<li><a href="https://www.gnu.org/software/emacs/manual/html_node/elisp/Derived-Modes.html">Derived Modes (GNU Emacs Lisp Reference Manual)</a></li>
</ul>