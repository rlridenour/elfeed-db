<p>My older son and I have been playing a daily basketball trivia game. Here’s the question from yesterday with my answers handwritten on the sheet.</p>
<p><img alt="Trivia question" class="ss" src="https://leancrew.com/all-this/images2025/20251008-Trivia%20question.jpg" title="Trivia question" width="80%"/></p>
<p>Here’s the text of the question. This is easier than trying to put it in the image’s alt text.</p>
<blockquote style="font-family: Helvetica, Sans-Serif">
<p>Match the Suns great with his retired uniform number.</p>
<table style="background: #efe; border: 0px solid #efe;" width="80%">
<p></p><tbody style="border: 0px solid #efe;">
<tr>
<td style="border: 0px solid #efe;" width="60%"><strong>1.</strong> Tom Chambers</td>
<td style="border: 0px solid #efe;"><strong>A.</strong> 42</td>
</tr>
<tr>
<td style="border: 0px solid #efe;"><strong>2.</strong> Steve Nash</td>
<td style="border: 0px solid #efe;"><strong>B.</strong> 24</td>
</tr>
<tr>
<td style="border: 0px solid #efe;"><strong>3.</strong> Dan Majerle</td>
<td style="border: 0px solid #efe;"><strong>C.</strong> 13</td>
</tr>
<tr>
<td style="border: 0px solid #efe;"><strong>4.</strong> Connie Hawkins</td>
<td style="border: 0px solid #efe;"><strong>D.</strong> 9</td>
</tr>
</tbody>
</table>
</blockquote>
<p>The correct answer, in player order, is <code>BCDA</code>, not my answer of <code>ADCB</code>. I won’t blame anyone who scoffs at my failure to get Nash’s number right. My excuse is that I thought it was so obvious for a smart playmaking guard to wear #13 that it had to be wrong. So I chose Majerle for #13 instead. This sort of mistake is often called “outsmarting” oneself, but I think it’s more “outstupiding.”</p>
<p>Anyway, I got every number wrong, but I noticed that two switches, Majerle/Nash and Chambers/Hawkins, would’ve made my answer correct. I knew there were various methods for measuring <a href="https://en.wikipedia.org/wiki/Edit_distance">edit distances</a> of text strings and wondered if any of them would provide guidance on how “close” my answer was.</p>
<p>The simplest is the <a href="https://en.wikipedia.org/wiki/Hamming_distance">Hamming distance</a>, which is just a count of how many characters are wrong. It’s limited to comparing strings of equal length, which is fine for this situation. Since every character in my answer is wrong, its Hamming distance from the correct answer is 4.</p>
<p>I’ve seen lots of references to the <a href="https://en.wikipedia.org/wiki/Levenshtein_distance">Levenshtein distance</a> but have never used it or read up on it before now. It’s a count of the number of single-character insertions, deletions, and substitutions necessary to go from one string to another. The Levenshtein distance from my answer to the correct one is also 4. Since switching letters isn’t a valid edit in a Levenshtein calculation, you can’t go from <code>ADCB</code> to <code>BCDA</code> in fewer steps than 4 substitutions.</p>
<p>There’s also a <a href="https://en.wikipedia.org/wiki/Damerau%E2%80%93Levenshtein_distance">Damerau-Levenshtein distance</a>, which extends the Levenshtein idea by allowing the transposition of adjacent characters as one of the editing steps. The Damerau-Levenshtein distance from my answer to the correct one is 3: substitution of the first character, substitution of the last character, and transposition of the two interior characters.</p>
<p>After doing these calculations, I started thinking about how these last two distances are better for evaluating actual words than strings like the trivia answer. For example, in the Damerau-Levenshtein calculation, we’re allowed to switch only adjacent characters, not characters that are two or more positions apart. This makes sense when dealing with words. We’ve all typed <em>teh</em> or <em>hte</em>, and some of us have text substitutions set up to transform them automatically into <em>the</em>. Also, there are words that don’t follow the “I before E” rule—<em>Levenshtein</em>, to pick a random example—which makes them easy to misspell by switching adjacent letters.</p>
<p>But the answer to this trivia question isn’t like a word. The question would be effectively the same if it were worded this way:</p>
<blockquote style="font-family: Helvetica, Sans-Serif">
<p>Match the Suns great with his retired uniform number.</p>
<table style="background: #efe; border: 0px solid red:" width="80%">
<p></p><tbody style="border: 0px solid #efe;">
<tr>
<td style="border: 0px solid #efe;" width="60%"><strong>1.</strong> Connie Hawkins</td>
<td style="border: 0px solid #efe;"><strong>A.</strong> 42</td>
</tr>
<tr>
<td style="border: 0px solid #efe;"><strong>2.</strong> Tom Chambers</td>
<td style="border: 0px solid #efe;"><strong>B.</strong> 24</td>
</tr>
<tr>
<td style="border: 0px solid #efe;"><strong>3.</strong> Steve Nash</td>
<td style="border: 0px solid #efe;"><strong>C.</strong> 13</td>
</tr>
<tr>
<td style="border: 0px solid #efe;"><strong>4.</strong> Dan Majerle</td>
<td style="border: 0px solid #efe;"><strong>D.</strong> 9</td>
</tr>
</tbody>
</table>
</blockquote>
<p>I’ve kept the uniform numbers in the same order but rotated Connie Hawkins up to the top of the list. This is the same question as before, but now the correct answer is <code>ABCD</code> and my incorrect answer would be <code>BADC</code>. The Damerau-Levenshtein distance between these strings is just 2: transpose the first two characters, then the last two characters. Also, the Levenshtein distance would be 3:</p>
<pre><code>BADC→ADC→ABC→ABCD
</code></pre>
<p>We’ve reduced both of these edit distances without really changing the question. So these measures aren’t a good way to see how bad my answer was.</p>
<p>Both Mathematica and Python have functions for calculating these distances. Mathematica has the built-in functions <a href="http://reference.wolfram.com/language/ref/HammingDistance.html"><code>HammingDistance</code></a>, <a href="http://reference.wolfram.com/language/ref/EditDistance.html"><code>EditDistance</code></a> (for Levenshtein), and <a href="http://reference.wolfram.com/language/ref/DamerauLevenshteinDistance.html"><code>DamerauLevenshteinDistance</code></a>. There are a few ways to import similar functions for Python. I used the <a href="https://pypi.org/project/textdistance/"><code>textdistance</code></a> module, but <a href="https://github.com/jamesturk/jellyfish"><code>jellyfish</code></a> is apparently quite a bit faster.</p>
<p>There are 24 (4!) different ways to answer the trivia question:</p>
<pre><code>ABCD   BACD   CABD   DABC
ABDC   BADC   CADB   DACB
ACBD   BCAD   CBAD   DBAC
ACDB   BCDA   CBDA   DBCA
ADBC   BDAC   CDAB   DCAB
ADCB   BDCA   CDBA   DCBA
</code></pre>
<p>These are the permutations of the correct answer <code>BCDA</code>.<sup id="fnref:perms"><a href="#fn:perms" rel="footnote">1</a></sup> Of these, 9 get every player wrong:</p>
<pre><code>CBAD   DBAC   ABCD
CDAB   DABC   ADBC
CABD   DACB   ADCB
</code></pre>
<p>My wrong answer is the one in the lower left corner. These are known as the <em>derangements</em> of the correct answer, so called because they’re the permutations of <code>BCDA</code> with none of the letters in their original (correct) position. I wrote <a href="https://leancrew.com/all-this/2020/05/arrangements-and-derangements/">a post</a> on calculating the number of derangements back in 2020.</p>
<p>Since my answer can be made correct by flipping two pairs of letters, I wondered which of the other derangements can be similarly transformed. It’s not hard to go through the 9 strings above and work it out by hand, but I wanted to write a little script to do it. Here it is:</p>
<pre><code>python:
 1:  #!/usr/bin/env python3
 2:  
 3:  from itertools import permutations
 4:  
 5:  def hasmatches(s1, s2):
 6:    return sum(x == y for x, y in zip(s1, s2)) &gt; 0
 7:  
 8:  def twoflips(s1, s2):
 9:    if hasmatches(s1, s2):
10:      return False
11:    else:
12:      count = 0
13:      for i1, c1 in enumerate(s1):
14:        for i2, c2 in enumerate(s2):
15:          if c1 == c2 and s1[i2] == s2[i1]:
16:            count += 1
17:      return count == 4
18:  
19:  correct = 'BCDA'
20:  perms = [ ''.join(x) for x in permutations(correct) ]
21:  allbad = [ x for x in perms if not hasmatches(correct, x) ]
22:  flippers = [ x for x in allbad if twoflips(x, correct) ]
23:  
24:  print(flippers)
</code></pre>
<p>The <code>hasmatches</code> function uses a generator to loop through a pair of strings, summing up how many of their characters match by position. If the sum is greater than zero, it returns <code>True</code>.</p>
<p>The <code>twoflips</code> function is more complicated, but it does a similar thing. It loops through both strings and checks whether the ith character of one string matches the jth character of the other and vice versa. As it proceeds, it counts all of these occurrences. Because I didn’t try to be clever in setting up the nested loops, the <code>count</code> variable is incremented twice for every pair of characters that can be flipped. That’s why <code>twoflips</code> returns True when <code>count</code> equals 4.</p>
<p>The rest of the program is more obvious. <code>perms</code> gets the list of all 24 permutations; <code>allbad</code> filters them down to just the 9 that have no matches; and finally, <code>flippers</code> filters <code>allbad</code> down to the 3 permutations that can be turned into the correct answer by performing two letter exchanges. The result is</p>
<pre><code>CBAD   DABC   ADCB
</code></pre>
<p>which includes my answer.</p>
<p>Looking through the remaining derangements, we see</p>
<ul>
<li><code>CDAB</code> and <code>ABCD</code>, which are one-character rotations of the correct answer; and</li>
<li><code>DBAC</code>, <code>ADBC</code>, and <code>CABD</code>, whose connection to the correct answer isn’t clear to me.</li>
</ul>
<p>I’m glad this question had only four players. There’d be 44 derangements in a 5-player question.</p>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:perms">
<p>Or of <code>ABCD</code>. Or <code>ADCB</code>. Permutations cover all the ways of arranging the four characters. I think it’s easiest to understand the arrangements when they’re laid out like this. <a href="#fnref:perms" rev="footnote">↩</a></p>
</li>
</ol>
</div>
