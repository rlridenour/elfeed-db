<p>Based on my recent forays into ergonomic key-mapping in Emacs for SwayWM, and effectively for any Wayland compositor or X11-based system using the X Keyboard Extension (XKB) standard, I realized that there doesn&rsquo;t seem to be an Emacs mode to edit these keyboard configuration files (*.xkb). This is surprising, considering they have been around for more than 30 years!</p>
<p>So I wrote one, and its on MELPA.</p>
<hr>
<div class="ox-hugo-toc toc local">
<ul>
<li><a href="https://emacs.dyerdwelling.family/emacs/20240524160249-emacs--new-package-xkb-mode/#summary">Summary</a></li>
<li><a href="https://emacs.dyerdwelling.family/emacs/20240524160249-emacs--new-package-xkb-mode/#features">Features</a></li>
<li><a href="https://emacs.dyerdwelling.family/emacs/20240524160249-emacs--new-package-xkb-mode/#installation">Installation</a></li>
<li><a href="https://emacs.dyerdwelling.family/emacs/20240524160249-emacs--new-package-xkb-mode/#usage">Usage</a></li>
<li><a href="https://emacs.dyerdwelling.family/emacs/20240524160249-emacs--new-package-xkb-mode/#customization">Customization</a></li>
<li><a href="https://emacs.dyerdwelling.family/emacs/20240524160249-emacs--new-package-xkb-mode/#contributing">Contributing</a></li>
<li><a href="https://emacs.dyerdwelling.family/emacs/20240524160249-emacs--new-package-xkb-mode/#license">License</a></li>
<li><a href="https://emacs.dyerdwelling.family/emacs/20240524160249-emacs--new-package-xkb-mode/#contact">Contact</a></li>
<li><a href="https://emacs.dyerdwelling.family/emacs/20240524160249-emacs--new-package-xkb-mode/#issues">ISSUES</a></li>
<li><a href="https://emacs.dyerdwelling.family/emacs/20240524160249-emacs--new-package-xkb-mode/#todos-roadmap">TODOs / ROADMAP</a></li>
<li><a href="https://emacs.dyerdwelling.family/emacs/20240524160249-emacs--new-package-xkb-mode/#testing">Testing</a></li>
</ul>
</div>
<!--endtoc-->
<hr>
<h2 id="summary">Summary</h2>
<p>A Major mode for editing X Keyboard Extension (XKB) files</p>
<p>xkb-mode is an Emacs major mode designed to facilitate the editing of XKB files, providing syntax highlighting and other useful editing features tailored specifically for XKB file format. Whether you&rsquo;re customizing keyboard layouts or diving into the details of X Keyboard Extension configurations, xkb-mode aims to make the task more efficient and enjoyable.</p>
<h3 id="whats-new">Whats New</h3>
<p>Version 0.2.0</p>
<ul>
<li>Correct version from 0.6.0 to 0.2.0 to reflect the actual stage of
development.</li>
<li>Remove the &lsquo;Alternatives&rsquo; section, streamlining the introduction.</li>
<li>Improve code formatting for better readability and maintenance. This
includes more consistent use of newlines and arrangement of font lock
faces.</li>
<li>Use `#&rsquo;` prefix for function symbols as a best practice, explicitly
marking `xkb-indent-line` as a function, enhancing code clarity.</li>
</ul>
<h3 id="screenshot">Screenshot</h3>
<figure><img src="https://emacs.dyerdwelling.family/ox-hugo/20240524160249-emacs--New-Package-xkb-mode.jpg" width="100%">
</figure>

<h2 id="features">Features</h2>
<ul>
<li>Syntax highlighting for XKB-specific keywords, modifiers, and structures.</li>
<li>Custom indentation logic for XKB code blocks.</li>
<li>Auto-detection of .xkb files to automatically enable the mode.</li>
</ul>
<h2 id="installation">Installation</h2>
<p>To install xkb-mode, you can use the following methods:</p>
<h3 id="use-package--melpa">use-package (MELPA)</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(use-package xkb-mode)
</span></span></code></pre></div><h3 id="use-package--emacs-29">use-package (emacs 29)</h3>
<p>Put the following into your emacs init file:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(use-package xkb-mode
</span></span><span style="display:flex;"><span>  :vc (:fetcher github :repo <span style="color:#e6db74">&#34;captainflasmr/xkb-mode&#34;</span>))
</span></span></code></pre></div><h3 id="from-source">from source</h3>
<p>Download the `.el` file and place it in your Emacs `load-path`.</p>
<p>Then either manually load it or add it to your configuration to be loaded at startup.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(require <span style="color:#e6db74">&#39;xkb-mode</span>)
</span></span></code></pre></div><h2 id="usage">Usage</h2>
<p>Opening any .xkb file with Emacs should automatically enable xkb-mode, providing you with syntax highlighting and indentation support for editing XKB files.</p>
<h2 id="customization">Customization</h2>
<p>Currently, xkb-mode provides a basic set of features optimized for general usage. Future versions may include customizable options based on user feedback.</p>
<h2 id="contributing">Contributing</h2>
<p>Contributions to xkb-mode are welcome! Whether it&rsquo;s bug reports, feature suggestions, or code contributions, feel free to reach out or submit pull requests on GitHub.</p>
<h2 id="license">License</h2>
<p>xkb-mode is available under the terms of the GNU General Public License v3.0. See the included LICENSE file for more details.</p>
<h2 id="contact">Contact</h2>
<p>For any questions or suggestions, please contact James Dyer at <a href="mailto:captainflasmr@gmail.com">captainflasmr@gmail.com</a>.</p>
<p>Visit our GitHub repository: <a href="https://github.com/captainflasmr/xkb-mode">https://github.com/captainflasmr/xkb-mode</a> for more information and updates.</p>
<p>This README provides a concise but comprehensive overview of what the `xkb-mode` package is, how to get it installed, and how to use it, alongside encouraging community contributions and providing licensing info.</p>
<h2 id="issues">ISSUES</h2>
<p>NONE</p>
<h2 id="todos-roadmap">TODOs / ROADMAP</h2>
<p>TODO function to set xkb file to latched sticky keys</p>
<p>TODO function to set xkb file locked sticky keys</p>
<p>TODO function to map RAlt to Ctrl</p>
<h2 id="testing">Testing</h2>
<p>See CHANGELOG.org</p>