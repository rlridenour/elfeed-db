<p><img src="https://cdn3.brettterpstra.com/uploads/2026/01/mdtosendy-rb.7520.jpg" width="800" height="226" style="margin:0 auto;clear:both;" class="header" /></p>

<p>I&rsquo;ve updated my Markdown to Sendy script with the ability to use &ldquo;sliced&rdquo; images with separate links, the ability to upload assets to a CDN automatically, and a &ldquo;test email&rdquo; mode that will actually send a test email to you without going through Sendy.</p>

<p>If you haven&rsquo;t heard of <a href="https://github.com/ttscoff/mdtosendy">mdtosendy</a> before, it&rsquo;s a Ruby script that converts Markdown files into email-ready HTML with automatic inline styling for maximum email client compatibility. While it can generate emails for any newsletter or email platform, it integrates best with Sendy, automatically creating and scheduling campaigns. You write your emails in Markdown, maintain your styles in CSS files, and mdtosendy handles all the messy email HTML details. And it can handle multiple templates, so you can have different styles for the same newsletter, and/or configure multiple instances with different styles/settings.</p>

<p>The latest version adds some powerful new features that make it even more useful for email workflows.</p>

<h3 id="test-email-sending">Test Email Sending</h3>

<p>The HTML preview mode is useful, but nothing beats being able to actually view the email in an email app so you can see exactly how it will render. Now you can send test emails directly without going through Sendy. The new <code class="language-plaintext highlighter-rouge">--test-send</code> option does exactly that:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight fixed"><code>mdtosendy <span class="nt">--test-send</span> your-email@example.com your-email.md</code></pre></div></div>

<p>This sends a test email directly via SMTP, bypassing Sendy entirely. Perfect for quick previews or testing your email design before creating a campaign. You&rsquo;ll need to configure SMTP settings in your <code class="language-plaintext highlighter-rouge">config.yml</code>:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight fixed"><code><span class="na">smtp</span><span class="pi">:</span>
  <span class="na">host</span><span class="pi">:</span> <span class="s2">"</span><span class="s">smtp.gmail.com"</span>
  <span class="na">port</span><span class="pi">:</span> <span class="m">587</span>
  <span class="na">domain</span><span class="pi">:</span> <span class="s2">"</span><span class="s">gmail.com"</span>
  <span class="na">user</span><span class="pi">:</span> <span class="s2">"</span><span class="s">me@example.com"</span>
  <span class="na">password</span><span class="pi">:</span> <span class="s2">"</span><span class="s">your-app-password-here"</span>
  <span class="na">auth</span><span class="pi">:</span> <span class="s2">"</span><span class="s">plain"</span>
  <span class="na">starttls</span><span class="pi">:</span> <span class="no">true</span></code></pre></div></div>

<p>For Gmail, you&rsquo;ll need to generate an App Password (not your regular password) at https://myaccount.google.com/apppasswords. Most other SMTP providers follow a similar pattern.</p>

<h3 id="cdn-image-upload-with-overwrite-control">CDN Image Upload with Overwrite Control</h3>

<p>The CDN image upload feature is a significant enhancement. You can add a <code class="language-plaintext highlighter-rouge">cdn</code> section to config (which can be inherited from the main config, or set per template), and when <code class="language-plaintext highlighter-rouge">mdtosendy</code> detects a local file path, it will be uploaded to the CDN and the url in the output HTML will be updated accordingly.</p>

<p>CDN uploads work with S3, SCP, or SFTP. See the example config in the repo for details.</p>

<p>You can configure how <code class="language-plaintext highlighter-rouge">mdtosendy</code> handles existing files on your CDN with the <code class="language-plaintext highlighter-rouge">overwrite</code> option:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight fixed"><code><span class="na">cdn</span><span class="pi">:</span>
  <span class="na">url</span><span class="pi">:</span> <span class="s2">"</span><span class="s">https://cdn.example.com"</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">s3"</span>
  <span class="na">username</span><span class="pi">:</span> <span class="s2">"</span><span class="s">your-access-key-id"</span>
  <span class="na">password</span><span class="pi">:</span> <span class="s2">"</span><span class="s">your-secret-access-key"</span>
  <span class="na">path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">your-bucket-name"</span>
  <span class="na">overwrite</span><span class="pi">:</span> <span class="s">ask</span>  <span class="c1"># Options: true, false, or ask/prompt</span></code></pre></div></div>

<p>By default, mdtosendy uses original filenames (no timestamps) and prompts you when a file already exists. The prompt defaults to &ldquo;Yes&rdquo;, so you can just press Enter or type <code class="language-plaintext highlighter-rouge">y</code> to overwrite, or <code class="language-plaintext highlighter-rouge">n</code> to skip. If you choose not to overwrite, a timestamp will be added to the filename to avoid conflicts.</p>

<p>The <code class="language-plaintext highlighter-rouge">overwrite</code> setting supports three modes:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">true</code> - Always overwrite without prompting</li>
  <li><code class="language-plaintext highlighter-rouge">false</code> - Never overwrite, automatically add timestamps when files exist</li>
  <li><code class="language-plaintext highlighter-rouge">ask</code> or <code class="language-plaintext highlighter-rouge">prompt</code> - Prompt for confirmation (default behavior)</li>
</ul>

<p>This works with all three CDN types: S3, SCP, and SFTP. The file existence checking is smart enough to detect existing files before uploading.</p>

<h3 id="image-stack-tag">Image Stack Tag</h3>

<p>The new <code class="language-plaintext highlighter-rouge">{% stack %}</code> tag is perfect for creating multi-part images that need to be displayed as a seamless vertical stack. This is especially useful for sliced images or creating visual sections in your emails.</p>

<p>You can use it with markdown image syntax:</p>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight fixed"><code>{% stack %}
<span class="p">[</span><span class="nv">![</span><span class="p">](</span><span class="sx">/images/image1.png</span><span class="p">)</span>](https://example.com/link1)
<span class="p">[</span><span class="nv">![</span><span class="p">](</span><span class="sx">/images/image2.png</span><span class="p">)</span>](https://example.com/link2)
<span class="p">[</span><span class="nv">![</span><span class="p">](</span><span class="sx">/images/image3.png</span><span class="p">)</span>](https://example.com/link3)
{% endstack %}</code></pre></div></div>

<p>Or with YAML for more structured definitions:</p>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight fixed"><code>{% stack type="yaml" %}
images:
<span class="p">  -</span> path: /images/image1.png
    url: https://example.com/link1
<span class="p">  -</span> path: /images/image2.png
    url: https://example.com/link2
<span class="p">  -</span> path: /images/image3.png
{% endstack %}</code></pre></div></div>

<p>The stack tag creates a vertical stack of images with zero spacing between them, all full width of the content area. Each image can optionally have a link. Local images in stacks are automatically uploaded to your CDN if you have it configured, and the tag uses a table-based layout for maximum email client compatibility.</p>

<h3 id="demo-please">Demo Please!</h3>

<p>Here&rsquo;s an email generated from the <code class="language-plaintext highlighter-rouge">demo.md</code> file in the repository,
using my own <code class="language-plaintext highlighter-rouge">marked</code> template, which uploads to my cdn.marked2app.com
bucket on S3. The demo shows a single image uploaded to the CDN from a
local file path, as well as 3 separate images combined into one stack,
with 3 separate links.</p>

<p><a href="https://stuff.brettterpstra.com/demo-2.html" class="btn--big" target="_blank">Demo email</a></p>

<h3 id="getting-started">Getting Started</h3>

<p>If you&rsquo;re new to <code class="language-plaintext highlighter-rouge">mdtosendy</code>, installation is a one-liner:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight fixed"><code>curl <span class="nt">-s</span> https://github.com/ttscoff/mdtosendy/raw/main/bootstrap.sh | bash</code></pre></div></div>

<p>For more details on all the features, configuration options, and examples, check out the <a href="https://github.com/ttscoff/mdtosendy">mdtosendy repository on GitHub</a>.</p>

<p>Like or share this post <a title="This post on Mastodon" target="_blank" href="https://hachyderm.io/users/ttscoff/statuses/115910698917028512">on Mastodon</a>, <a title="Share on Bluesky" target="_blank" href="https://bsky.app/intent/compose?text=Markdown+to+Sendy+with+Image+Stacks+and+File+Uploads%0A%0Ahttps%3A%2F%2Fbrettterpstra.com%2F2026%2F01%2F17%2Fmarkdown-to-sendy-with-image-stacks-and-file-uploads%2F">Bluesky</a>, or <a class="twitter" target="_blank" rel="nofollow" href="https://twitter.com/intent/tweet?original_referer=https%3A%2F%2Fbrettterpstra.com%2F2026%2F01%2F17%2Fmarkdown-to-sendy-with-image-stacks-and-file-uploads%2F&text=Markdown+to+Sendy+with+Image+Stacks+and+File+Uploads&url=https%3A%2F%2Fbrettterpstra.com%2F2026%2F01%2F17%2Fmarkdown-to-sendy-with-image-stacks-and-file-uploads%2F&via=ttscoff" title="Tweet this post">Twitter</a>.</p>
<hr style="margin:40px 0">

<p>BrettTerpstra.com is supported by readers like you. <a href="https://brettterpstra.com/support/">Click here if you'd
        like to help out.</a></p>
<p>Find Brett on <a rel="me" href="https://hachyderm.io/@ttscoff">Mastodon</a>, <a
        href="https://bsky.app/profile/ttscoff.bsky.social">Bluesky</a>, <a
        href="https://github.com/ttscoff">GitHub</a>, and <a href="https://brettterpstra.com/elsewhere">everywhere
        else</a>.</p><img src="https://brett.trpstra.net/link/535/17255313.gif" height="1" width="1"/>