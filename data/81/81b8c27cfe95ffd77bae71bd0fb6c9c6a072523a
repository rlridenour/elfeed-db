
	
<p>
Visualisation is essential for data scientists who want to explore and understand data and communicate their results. Scientists have studied how the mind perceives graphics in great depth and devised a comprehensive body of knowledge that helps us create sound, useful and aesthetic visualisations. The first part of <a href="https://dx.doi.org/10.1201/9781003326977-5">this chapter</a> of <em>Data Science for Water Utilities</em> introduces some principles of best practices in data visualisation. The second part presents the ggplot2 library and the principles of the Grammar of Graphics to create basic visualisations. The learning objectives for this chapter are:</p>
<ul>
<li>Evaluate data visualisations using basic principles.</li>
<li>Apply the principles of the Grammar of Graphics.</li>
<li>Visualise water quality data with the ggplot2 package.</li>
</ul>
<p>

  <div class="box">
    <div class="media">
      <figure class="media-left">
        <p class="image is-128x128">
          <img src="https://lucidmanager.org/images/books/2023_ds4wu.jpg" alt = "Data Science for Water Utilities" title = "Data Science for Water Utilities">
        </p>
      </figure>
      <div class="media-content">
        <div class="content">
          <p class="is-size-5 has-text-weight-bold">Data Science for Water Utilities</p>
          <p class="mb-2">Data Science for Water Utilities published by CRC Press is an applied, practical guide that shows water professionals how to use data science to solve urban water management problems using the R language for statistical computing.</p>
          <div class="buttons">
            <a class="button is-info" href="https://routledge.com/9781032354545" target="_blank">
              <span class="icon">
                <i class="fas fa-shopping-cart"></i>
              </span>
              <span>Routledge</span>
            </a>
            <a class="button is-info" href="https://www.amazon.com/Data-Science-Water-Utilities-Chapman/dp/1032354550" target="_blank">
              <span class="icon">
                <i class="fas fa-shopping-cart"></i>
              </span>
              <span>Amazon</span>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</p>
<p>
The data and code used in this chapter are available on GitHub:</p>
<p>
<a href = "https://github.com/pprevos/r4h2o/" target="_blank"
   title="Download r4h2o from GitHub"
   alt="Download r4h2o from GitHub">
  <button class="button is-medium is-primary">
    <span class="icon is-large">
      <i class="fab fa-github"></i>
    </span>
    <span style="font-family: monospace">r4h2o</span>
  </button>
</a>

</p>
<div id="outline-container-headline-1" class="outline-2">
<h2 id="headline-1">
Principles of Visualisation
</h2>
<div id="outline-text-headline-1" class="outline-text-2">
<p>Data visualisation needs to tell a story, which means that when somebody looks at the image, they need to draw a conclusion. A visualisation should not be a case of &#34;create your own adventure&#34;. Achieving this objective requires simplicity and graphic austerity.</p>
<p>
The data-to-pixel ratio is a rule of thumb that helps to focus your visualisation on the story. This ratio expresses the number of pixels in the image (excluding the neutral background) versus those representing data.</p>
<p>
The example below illustrates the idea. The image on the left might be interesting, but the background is distracting, and the colours don&#39;t express data. The version on the right is a lot clearer on the story. We can immediately see which imaginary suburb has the best taste scores for tap water.</p>
<figure>
<img src="https://lucidmanager.org/images/r4h2o/data-pixel-ratio.png" alt="Data to Pixel Ratio low and high" title="Data to Pixel Ratio low and high" width="500"/>
<figcaption>
Data to Pixel Ratio.
</figcaption>
</figure>
</div>
</div>
<div id="outline-container-headline-2" class="outline-2">
<h2 id="headline-2">
Grammar of Graphics and ggplot2
</h2>
<div id="outline-text-headline-2" class="outline-text-2">
<p>The <a href="https://ggplot2.tidyverse.org/">ggplot2 package</a> is part of the Tidyverse. It implements the <em>Grammar of Graphics</em>, a systematic approach to visualising data using layers. The various functions in ggplot2 are chained with a <code class="verbatim">+</code> sign, forming the individual layers, as shown below. You can combine as many layers as you like.</p>
<figure>
<img src="https://lucidmanager.org/images/r4h2o/grammar-of-graphics.png" alt="Grammar of Graphics and ggplot2 layers" title="Grammar of Graphics and ggplot2 layers" width="500"/>
<figcaption>
Grammar of Graphics and ggplot2 layers.
</figcaption>
</figure>
</div>
</div>
<div id="outline-container-headline-3" class="outline-2">
<h2 id="headline-3">
Using Colour in Visualisations
</h2>
<div id="outline-text-headline-3" class="outline-text-2">
<p>Most graphs overuse colour to visualise data. Colours should only be used to comply with a style guide or to visualise data.</p>
<p>
The <a href="https://colorbrewer2.org">Color Brewer website</a> provides a great interface to explore various colour palates.</p>
<p>
Since writing this book, the latest R version has received an upgraded colour palette. <a href="https://arxiv.org/abs/2303.04918">This article</a> explains the new built-in colour palettes.</p>
<p>
Emil Hvitfeld has gathered a large collection of <a href="https://github.com/EmilHvitfeldt/r-color-palettes">colour palettes in R</a>. </p>
</div>
</div>
<div id="outline-container-headline-4" class="outline-2">
<h2 id="headline-4">
Visualising Data with ggplot2 Screencast
</h2>
<div id="outline-text-headline-4" class="outline-text-2">
<p>Chapter five of <em>Data Science for Water Utilities</em> explains visualising data with ggplot2 in more detail. This screencast below reviews the code for this chapter.</p>
<p>
To help you remember the various functions discussed in the first five chapters of the book, a <a href="https://lucidmanager.org/pdf/r4h2o-cheat-sheet.pdf">cheat sheet</a> is available.</p>
<figure>
<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/rzsh2uLtBTU?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"></iframe>
    </div>

<figcaption>
Visualising Water Quality Data with ggplot2.
</figcaption>
</figure>
<p>
The data and code used in this chapter are available on GitHub:</p>
<p>
<a href = "https://github.com/pprevos/r4h2o/" target="_blank"
   title="Download r4h2o from GitHub"
   alt="Download r4h2o from GitHub">
  <button class="button is-medium is-primary">
    <span class="icon is-large">
      <i class="fab fa-github"></i>
    </span>
    <span style="font-family: monospace">r4h2o</span>
  </button>
</a>

</p>
</div>
</div>
<div id="outline-container-headline-5" class="outline-2">
<h2 id="headline-5">
Additional Resources
</h2>
<div id="outline-text-headline-5" class="outline-text-2">
<p>To help you remember the various functions discussed in the first five chapters of the book, a <a href="https://lucidmanager.org/pdf/r4h2o-cheat-sheet.pdf">cheat sheet</a> is available.</p>
<div id="outline-container-headline-6" class="outline-3">
<h3 id="headline-6">
Addendum
</h3>
<div id="outline-text-headline-6" class="outline-text-3">
<p>The <code>width</code> parameter in ggplot2 geometries that use lines has been deprecated and is replaced with <code>linewidth</code>.</p>
&nbsp;
</div>
</div>
<div id="outline-container-headline-7" class="outline-3">
<h3 id="headline-7">
Other Sources
</h3>
<div id="outline-text-headline-7" class="outline-text-3">
<ul>
<li><a href="https://www.slideserve.com/lenore-holder/designing-great-visualizations">PPT - Designing Great Visualizations PowerPoint Presentation, free download - ID:6574423</a></li>
<li><a href="https://guides.lib.berkeley.edu/data-visualization/about">About - Data Visualization - Library Guides at UC Berkeley</a></li>
<li><a href="https://r-graph-gallery.com/">The R Graph Gallery â€“ Help and inspiration for R charts</a></li>
<li><a href="https://flowingdata.com/category/tutorials/">Tutorials | FlowingData</a></li>
</ul>
&nbsp;
</div>
</div>
<div id="outline-container-headline-8" class="outline-3">
<h3 id="headline-8">
Other Chapters
</h3>
<div id="outline-text-headline-8" class="outline-text-3">
<p><a href="https://lucidmanager.org/data-science/descriptive-statistics-in-water-quality/">Previous Chapter</a>: <em>Descriptive Statistics</em></p>
<p>
<a href="https://lucidmanager.org/data-science/sharing-the-results-of-data-analysis/">Next Chapter</a>: <em>Sharing the Results</em></p>
<p>
Feel free to <a href="https://lucidmanager.org/contact/">contact me</a> if you have any comments, suggestions or questions about this book.</p>
</div>
</div>
</div>
</div>

      