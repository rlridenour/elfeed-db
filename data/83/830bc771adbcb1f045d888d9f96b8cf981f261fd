
	
<p>
Project Euler 13 asks to add one hundred numbers with fifty digits. This seems like a simple problem where it not that most computers are not designed to deal with numbers with a lot of integers. For example: 2<sup>64</sup> = 18446744073709551616. When asking R to compute this value, we get 1.844674e+19, losing most of the digits and limiting the accuracy of the results. Computers solve this problem using <a href="https://en.wikipedia.org/wiki/Arbitrary-precision_arithmetic">Arbitrary-Precision Arithmetic</a>. Many software libraries can process long integers without losing accuracy. Euler Problem 13 requires this type of approach.</p>
<div id="outline-container-headline-1" class="outline-2">
<h2 id="headline-1">
Project Euler 13 Definition
</h2>
<div id="outline-text-headline-1" class="outline-text-2">
<p>Work out the first ten digits of the sum of the following one-hundred <a href="https://projecteuler.net/problem=13">50-digit numbers</a>.</p>
</div>
</div>
<div id="outline-container-headline-2" class="outline-2">
<h2 id="headline-2">
Solution
</h2>
<div id="outline-text-headline-2" class="outline-text-2">
<p>The easy way to solve this problem is to use the <a href="https://cran.r-project.org/web/packages/gmp/index.html">GMP package</a> for working with huge integers. This package uses a special number types such as Big Rational and Big Integer. The number of digits in these number types is only limited by the size of your computer&#39;s memory.</p>
<p>
<a href = "https://github.com/pprevos/ProjectEuler/" target="_blank"
   title="Download ProjectEuler from GitHub"
   alt="Download ProjectEuler from GitHub">
  <button class="button is-medium is-primary">
    <span class="icon is-large">
      <i class="fab fa-github"></i>
    </span>
    <span style="font-family: monospace">ProjectEuler</span>
  </button>
</a>

</p>
<div class="src src-r">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>  <span style="color:#888">## Project Euler 13: Adding Very Large Numbers</span>
</span></span><span style="display:flex;"><span>  <span style="color:#888">## GMP Library</span>
</span></span><span style="display:flex;"><span>  <span style="color:#06b;font-weight:bold">library</span>(gmp)
</span></span><span style="display:flex;"><span>  numbers <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">readLines</span>(<span style="background-color:#fff0f0">&#34;data/p013_numbers.txt&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  gmp_method <span style="color:#333">&lt;-</span> <span style="color:#080;font-weight:bold">function</span>() {
</span></span><span style="display:flex;"><span>      digits <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">sum</span>(<span style="color:#06b;font-weight:bold">as.bigz</span>(numbers))
</span></span><span style="display:flex;"><span>      answer <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">substr</span>(<span style="color:#06b;font-weight:bold">as.character</span>(digits),<span style="color:#60e;font-weight:bold">1</span>,<span style="color:#60e;font-weight:bold">10</span>)
</span></span><span style="display:flex;"><span>      <span style="color:#080;font-weight:bold">return</span>(answer)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#06b;font-weight:bold">gmp_method</span>()</span></span></code></pre></div>
</div>
<div id="outline-container-headline-3" class="outline-3">
<h3 id="headline-3">
Using Base-R
</h3>
<div id="outline-text-headline-3" class="outline-text-3">
<p>To find the solution to this problem using only base R, I wrote a function to add numbers using strings instead of integers. The function adds leading zeros to the smallest number to make them both the same length. The function then proceeds to add numbers in the same way we were taught in primary school.</p>
<div class="src src-r">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>  <span style="color:#888">## Base-R Solution</span>
</span></span><span style="display:flex;"><span>  big.add <span style="color:#333">&lt;-</span> <span style="color:#080;font-weight:bold">function</span>(a, b) {
</span></span><span style="display:flex;"><span>    <span style="color:#888">## Add leading zeros to smallest number</span>
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-weight:bold">if</span> (<span style="color:#06b;font-weight:bold">nchar</span>(a)<span style="color:#333">&lt;</span><span style="color:#06b;font-weight:bold">nchar</span>(b)) 
</span></span><span style="display:flex;"><span>      a <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">paste0</span>(<span style="color:#06b;font-weight:bold">paste</span>(<span style="color:#06b;font-weight:bold">rep</span>(<span style="color:#60e;font-weight:bold">0</span>, <span style="color:#06b;font-weight:bold">nchar</span>(b) <span style="color:#333">-</span> <span style="color:#06b;font-weight:bold">nchar</span>(a)), collapse <span style="color:#333">=</span> <span style="background-color:#fff0f0">&#34;&#34;</span>), a)
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-weight:bold">if</span> (<span style="color:#06b;font-weight:bold">nchar</span>(a)<span style="color:#333">&gt;</span><span style="color:#06b;font-weight:bold">nchar</span>(b)) 
</span></span><span style="display:flex;"><span>      b <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">paste0</span>(<span style="color:#06b;font-weight:bold">paste</span>(<span style="color:#06b;font-weight:bold">rep</span>(<span style="color:#60e;font-weight:bold">0</span>, <span style="color:#06b;font-weight:bold">nchar</span>(a) <span style="color:#333">-</span> <span style="color:#06b;font-weight:bold">nchar</span>(b)), collapse <span style="color:#333">=</span> <span style="background-color:#fff0f0">&#34;&#34;</span>), b)
</span></span><span style="display:flex;"><span>    solution <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">vector</span>()
</span></span><span style="display:flex;"><span>    remainder <span style="color:#333">&lt;-</span> <span style="color:#60e;font-weight:bold">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-weight:bold">for</span> (i <span style="color:#080;font-weight:bold">in</span> <span style="color:#06b;font-weight:bold">nchar</span>(b)<span style="color:#333">:</span><span style="color:#60e;font-weight:bold">1</span>) {
</span></span><span style="display:flex;"><span>      p <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">as.numeric</span>(<span style="color:#06b;font-weight:bold">substr</span>(a, i, i))
</span></span><span style="display:flex;"><span>      q <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">as.numeric</span>(<span style="color:#06b;font-weight:bold">substr</span>(b, i, i))
</span></span><span style="display:flex;"><span>      r <span style="color:#333">&lt;-</span> p <span style="color:#333">+</span> q <span style="color:#333">+</span> remainder
</span></span><span style="display:flex;"><span>      <span style="color:#080;font-weight:bold">if</span> (r <span style="color:#333">&gt;=</span> <span style="color:#60e;font-weight:bold">10</span> <span style="color:#333">&amp;</span> i <span style="color:#333">!=</span> <span style="color:#60e;font-weight:bold">1</span>) {
</span></span><span style="display:flex;"><span>        solution <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">c</span>(solution, r <span style="color:#333">%%</span> <span style="color:#60e;font-weight:bold">10</span>)
</span></span><span style="display:flex;"><span>        remainder <span style="color:#333">&lt;-</span> (r <span style="color:#333">-</span> (r <span style="color:#333">%%</span> <span style="color:#60e;font-weight:bold">10</span>)) <span style="color:#333">/</span> <span style="color:#60e;font-weight:bold">10</span>
</span></span><span style="display:flex;"><span>      } <span style="color:#080;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>        solution <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">c</span>(solution, r)
</span></span><span style="display:flex;"><span>        remainder <span style="color:#333">&lt;-</span> <span style="color:#60e;font-weight:bold">0</span>
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-weight:bold">return</span>(<span style="color:#06b;font-weight:bold">paste</span>(<span style="color:#06b;font-weight:bold">rev</span>(solution), collapse <span style="color:#333">=</span> <span style="background-color:#fff0f0">&#34;&#34;</span>))
</span></span><span style="display:flex;"><span>  }</span></span></code></pre></div>
</div>
<p>With this function, the problem is easy to solve. The second part of the code runs this function over the one hundred numbers provided on the Euler Problem page and calculates the answer.</p>
<div class="src src-r">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>    base_method <span style="color:#333">&lt;-</span> <span style="color:#080;font-weight:bold">function</span>() {
</span></span><span style="display:flex;"><span>        answer <span style="color:#333">&lt;-</span> <span style="color:#60e;font-weight:bold">0</span>
</span></span><span style="display:flex;"><span>        <span style="color:#080;font-weight:bold">for</span> (i <span style="color:#080;font-weight:bold">in</span> numbers)
</span></span><span style="display:flex;"><span>            answer <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">big.add</span>(answer, i)
</span></span><span style="display:flex;"><span>        answer <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">substr</span>(answer, <span style="color:#60e;font-weight:bold">1</span>, <span style="color:#60e;font-weight:bold">10</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#080;font-weight:bold">return</span>(answer)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#06b;font-weight:bold">base_method</span>()</span></span></code></pre></div>
</div>
<p>
This solution for managing very large numbers is reused in <a href="https://lucidmanager.org/data-science/project-euler-25/">Project Euler 25</a> which asks for a Fibonacci number with 1000 decimals.
<a href = "https://www.r-bloggers.com/" target="_blank" title="Proudly associated with R-Bloggers">
  <button class="button is-link is-medium">
    <span class="icon is-large">
      <i class="fab fa-r-project"></i>
    </span>
    <span>As seen on R Bloggers</span>
  </button>
</a>
</p>
</div>
</div>
</div>
</div>

      