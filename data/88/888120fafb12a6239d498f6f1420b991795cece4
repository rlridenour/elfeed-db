 
          <p>Hey wow I&rsquo;m typing this from Emacs! For the first time in more than a decade I decided to see if my beloved Sublime Text could be superseded with software that&rsquo;s more than twice as old. It&rsquo;s day four so far, and I&rsquo;ve been nothing but confused in trying to get it up and running to my tastes, but the journey has kept me on my toes. I&rsquo;ve disabled Evil mode for now, I don&rsquo;t think I&rsquo;m ready for that yet.</p>
<p>But I digress. Tea. Right. Wait, the compilation window is acting weird, but I think I just killed that buffer and replaced its contents with this one so now I see two Markdown files in two separate windows while I should have <code>close-buffer-and-window</code>ed instead. I have no idea what I&rsquo;m doing! Wait, press <code>OPT-X</code>&mdash;no, <code>C-x p c</code>&mdash;and make it serve files instead.</p>
<p>But I digress. Tea. Right. It&rsquo;s actually not that difficult to properly prepare a cup, except that it is. Most people I know are coffee drinkers, and most coffee drinkers I know&mdash;which is most people I know, mostly&mdash;completely <em>hate</em> drinking green tea. That&rsquo;s because of two things: one; its caffeine kick does nothing compared to the brown beans, and two; it&rsquo;s bitter!</p>
<p>To make matters worse, most of the teas I order in cafe&mdash;caf, wait <code>End of buffer</code> what? Oh. Evaluate <code>(setq mac-right-option-modifier nil)</code>. é. é. Ok, let&rsquo;s continue&mdash;cafés are atrocious. Not just because of the cheap tea bags sold for a ridiculous amount of money, but because cooking water is poured on it, regardless of the kind of tea.</p>
<p>Why are these words so weirdly wrapped? Give me a minute, that&rsquo;s not right. Nothing <code>toggle-word-wrap</code> can&rsquo;t fix, right? But that completely breaks my treemacs package so I&rsquo;ll have to resort to visual line mode but not in that package&hellip; Won&rsquo;t be a minute, stay with me!</p>
<p>Okay, that&rsquo;s better. Where was I? How many words we&rsquo;re at? Unknown? What kind of a powerline are you supposed to be if you don&rsquo;t show me that? Won&rsquo;t be a minute, stay with me! Is that <code>(doom-modeline-enable-word-count t)</code>? Looks like it?</p>
<p>But I digress. Tea. Right. I listed  lots of green teas in my <code>[green tea review](</code> &mdash;wait, wouldn&rsquo;t it be cool if I could get an auto-completed list of potential links within this Hugo blog post project, only while in Markdown mode? I think I&rsquo;ll need <a href="https://github.com/minad/corfu">Corfu</a> for that, and possibly also <a href="https://github.com/minad/cape">Cape.el</a>? After hours of fruitlessly shaving that yak, my friend Gemini spewed out something that I understood but was in no position to replicate given my pitiful knowledge of Elisp:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lisp" data-lang="lisp"><span style="display:flex;"><span><span style="color:#eceff4">(</span><span style="color:#81a1c1">defun</span> bb/hugo-post-only-complete <span style="color:#eceff4">()</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a3be8c">&#34;List every .md file specifically inside &#39;content/post/&#39;, triggered after typing /post/.&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#eceff4">(</span>interactive<span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#eceff4">(</span>when-let <span style="color:#eceff4">((</span>root <span style="color:#eceff4">(</span>projectile-project-root<span style="color:#eceff4">)))</span>
</span></span><span style="display:flex;"><span>    <span style="color:#eceff4">(</span><span style="color:#81a1c1;font-weight:bold">let*</span> <span style="color:#eceff4">((</span>post-dir <span style="color:#eceff4">(</span>expand-file-name <span style="color:#a3be8c">&#34;content/post/&#34;</span> root<span style="color:#eceff4">))</span>
</span></span><span style="display:flex;"><span>           <span style="color:#eceff4">(</span>end <span style="color:#eceff4">(</span>point<span style="color:#eceff4">))</span>
</span></span><span style="display:flex;"><span>           <span style="color:#eceff4">(</span>start <span style="color:#eceff4">(</span>save-excursion 
</span></span><span style="display:flex;"><span>                    <span style="color:#eceff4">(</span><span style="color:#81a1c1">when</span> <span style="color:#eceff4">(</span>re-search-backward <span style="color:#a3be8c">&#34;/post/&#34;</span> <span style="color:#eceff4">(</span>line-beginning-position<span style="color:#eceff4">)</span> <span style="color:#8fbcbb">t</span><span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span>                      <span style="color:#eceff4">(</span>match-end <span style="color:#b48ead">0</span><span style="color:#eceff4">)))))</span>
</span></span><span style="display:flex;"><span>      <span style="color:#eceff4">(</span><span style="color:#81a1c1">when</span> <span style="color:#eceff4">(</span><span style="color:#81a1c1">and</span> start <span style="color:#eceff4">(</span>file-directory-p post-dir<span style="color:#eceff4">))</span>
</span></span><span style="display:flex;"><span>        <span style="color:#eceff4">(</span><span style="color:#81a1c1;font-weight:bold">let*</span> <span style="color:#eceff4">((</span>all-files <span style="color:#eceff4">(</span>directory-files-recursively post-dir <span style="color:#a3be8c">&#34;\\.md$&#34;</span><span style="color:#eceff4">))</span>
</span></span><span style="display:flex;"><span>               <span style="color:#616e87;font-style:italic">;; Make candidates relative to &#39;post/&#39; to clean up the list</span>
</span></span><span style="display:flex;"><span>               <span style="color:#eceff4">(</span>candidates <span style="color:#eceff4">(</span><span style="color:#88c0d0">mapcar</span> <span style="color:#eceff4">(</span><span style="color:#81a1c1">lambda</span> <span style="color:#eceff4">(</span>file<span style="color:#eceff4">)</span> 
</span></span><span style="display:flex;"><span>                                     <span style="color:#eceff4">(</span>file-name-sans-extension<span style="color:#eceff4">(</span>
</span></span><span style="display:flex;"><span>										 <span style="color:#eceff4">(</span>file-relative-name file post-dir<span style="color:#eceff4">)))</span>
</span></span><span style="display:flex;"><span>                                   all-files<span style="color:#eceff4">)))</span>
</span></span><span style="display:flex;"><span>          <span style="color:#eceff4">(</span><span style="color:#8fbcbb">list</span> start end candidates
</span></span><span style="display:flex;"><span>                <span style="color:#a3be8c">:exclusive</span> <span style="color:#a3be8c">&#39;no</span>
</span></span><span style="display:flex;"><span>                <span style="color:#a3be8c">:company-kind</span> <span style="color:#eceff4">(</span><span style="color:#81a1c1">lambda</span> <span style="color:#eceff4">(</span>_<span style="color:#eceff4">)</span> <span style="color:#a3be8c">&#39;file</span><span style="color:#eceff4">)))))))</span>
</span></span></code></pre></div><p>But boy that&rsquo;s handy after binding it to <code>completion-at-point-functions</code>! Look at this: <a href="/post/2025/12/mariage-freres-tea-reviews">my previous tea reviews</a>. Ka-boom and it&rsquo;s there! The hardcore tinkering is already paying off, this already proves to be a more productive writing environment than Sublime. Don&rsquo;t tell HQ.</p>
<p>Looks like I do have to re-type the Projectile run/compile command every time I close Emacs though. Is adding a <code>.dir-local.el</code> the Emacs way to store these settings? I guess? But why does it take at least three seconds to load the Brain Baking project? Because it&rsquo;s using Lisp to find all files instead of using something like <code>find</code> or <code>fd</code>, of course. There, <code>(projectile-indexing-method 'alien)</code>, fixed.</p>
<p>Where were we? Tea? Green? I don&rsquo;t remember. Don&rsquo;t pour boiling hot water on top of these leaves! Instead, use eighty degrees Celsius at most, preferably even a bit cooler. Another tip: don&rsquo;t steep for too long. Count a few Mississippi&rsquo;s, but don&rsquo;t do it the Ross way.</p>
<p>Hang on a minute, I think I&rsquo;m confused again: <code>C-x p</code> isn&rsquo;t the <em>projectile</em> command map shortcut, it&rsquo;s the built-in <em>project</em> one! That means that local <code>.el</code> file isn&rsquo;t needed anyway. <code>(projectile-cache-project-commands t)</code> won&rsquo;t be enough across restarts though, so I guess we&rsquo;ll be bringing in yet another package: <code>savehist</code>.</p>
<p>Two hours later, my humble idea of saving compile command history still doesn&rsquo;t work: projectile saves it as a hashset, not list, that savehist can&rsquo;t serialize. Adding custom hooks to convert data types fails as the trigger order of events gets me confused even more. This yak suddenly got much, much bigger. At least I managed to implement pinch zooming on images. Which, now that I try it again, is broken? Oh.</p>
<p>I think I need another cup of tea.</p>


          
          <p>
            Related topics: /
                  <a href="https://brainbaking.com/tags/tea">tea</a> /
                  <a href="https://brainbaking.com/tags/emacs">emacs</a> /</span>
          </p>
          
          <p>
            By <a href="/about">Wouter Groeneveld</a> on 17 December 2025.&nbsp;
            <a href="mailto:hifromrss@brainbaking.com?subject=Re: Properly%20Preparing%20Tea%20While%20Shaving%20An%20Emacs%20Yak">Reply via email</a>.
          </p>
          
      