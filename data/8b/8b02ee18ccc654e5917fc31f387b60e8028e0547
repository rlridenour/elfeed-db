<p>A crucial aspect of maintaining organized and up-to-date notes is the use of Org Capture templates.</p>
<p>I have currently always hard-coded/set the current year in my org capture templates for use when exporting/constructing my web pages and as a tag for some filtering / web index generation.  Of course the main disadvantage of this is that I have to remember to update the year each year, of which I often fail miserably. ☹️</p>
<figure><img src="https://emacs.dyerdwelling.family/ox-hugo/20241007121110-emacs--Org-Capture-Dynamically-Setting-Year.jpg" width="100%">
</figure>

<p>Can I get an org capture template to auto generate just the year as a tag like other capture template attributes?</p>
<p>Well yes, yes you can, and there a couple of ways to achieve this.</p>
<p>Firstly there is the org capture family of format strings which inserts a date when the capture is triggered.  This is a bit much for me and instead of generating just a string for the year, each specifier will generate a full timestamp:</p>
<ul>
<li><strong>%U</strong> — Inactive Timestamp (Full Date and Time)</li>
<li><strong>%T</strong> — Active Timestamp (Full Date and Time)</li>
<li><strong>%t</strong> — Active Timestamp (Current Date Only)</li>
<li><strong>%u</strong> — Inactive Timestamp (Current Date Only)</li>
</ul>
<p>However there is another format specifier, which can just insert the year, simply use <strong><code>%&lt;%Y&gt;</code></strong> which is part of a pretty standard common date or time string format options, for example, here are some useful format specifiers that can be used:</p>
<ul>
<li>`%Y`: Year (e.g., `2023`)</li>
<li>`%m`: Month (e.g., `10` for October)</li>
<li>`%d`: Day (e.g., `05`)</li>
<li>`%H`: Hour (24-hour clock)</li>
<li>`%M`: Minute</li>
<li>`%S`: Seconds</li>
<li>`%A`: Full weekday name (e.g., `Monday`)</li>
<li>`%B`: Full month name (e.g., `October`)</li>
</ul>
<p>Well that was easy, so to insert a year tag I can just wrap colons around %&lt;%Y&gt;</p>
<p>Just for fun, lets try something a little more advanced to achieve the same goal but this time allowing much more flexibility.</p>
<p>A particularly useful functional aspect of an org template is that the dynamic generation of the current year can be achieved using some elisp.  Lets use the <code>(format-time-string)</code> function.</p>
<h2 id="understanding--format-time-string-y">Understanding <code>(format-time-string &quot;%Y&quot;)</code></h2>
<p>Before diving into the implementation, let&rsquo;s break down what <code>(format-time-string &quot;%Y&quot;)</code> does:</p>
<ul>
<li>
<p><strong><code>format-time-string</code></strong>: This is an Emacs Lisp function that formats the current time and date into a string based on a specified format.</p>
</li>
<li>
<p><strong><code>&quot;%Y&quot;</code></strong>: This format code specifically fetches the four-digit representation of the current year. For example, in 2023, it would insert &ldquo;2023&rdquo;, and conforms to the date specifiers defined above for the more simple capture template format definition.</p>
</li>
</ul>
<p>By embedding this function into my Org Capture templates, the inclusion of the current year is neatly automated, this not only reduces manual updates but also ensures consistency across my entries.</p>
<h2 id="implementing-dynamic-year-in-capture-templates">Implementing Dynamic Year in Capture Templates</h2>
<p>Here&rsquo;s an example Org Capture template that uses <code>(format-time-string &quot;%Y&quot;)</code> to dynamically manage the year for Emacs-related entries:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(<span style="color:#e6db74">&#34;e&#34;</span> <span style="color:#e6db74">&#34;Emacs&#34;</span> plain
</span></span><span style="display:flex;"><span>  (file+function
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;~/DCIM/content/emacs--all.org&#34;</span>
</span></span><span style="display:flex;"><span>    my-capture-top-level)
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;* TODO %^{title} :emacs:%(format-time-string \&#34;%Y\&#34;):&#34;</span>
</span></span><span style="display:flex;"><span>:PROPERTIES:
</span></span><span style="display:flex;"><span>:EXPORT_FILE_NAME: %&lt;%Y%m%d%H%M%S&gt;-emacs--%\\1
</span></span><span style="display:flex;"><span>:EXPORT_HUGO_SECTION: emacs
</span></span><span style="display:flex;"><span>:EXPORT_HUGO_LASTMOD: &lt;%&lt;%Y-%m-%d %H:%M&gt;&gt;
</span></span><span style="display:flex;"><span>:EXPORT_HUGO_CUSTOM_FRONT_MATTER+: :thumbnail /emacs/%&lt;%Y%m%d%H%M%S&gt;-emacs--%\\1.jpg
</span></span><span style="display:flex;"><span>:END:
</span></span><span style="display:flex;"><span>%?
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34; :prepend t :jump-to-captured t)
</span></span></span></code></pre></div><h3 id="key-features-of-this-template">Key Features of this Template</h3>
<ul>
<li><strong>Automatic Year Insertion</strong>:
<ul>
<li>The directive <code>:%(format-time-string \&quot;%Y\&quot;):</code>, within the headline, ensures that the current year is automatically included as a tag whenever you create a new entry. This functionality is particularly useful for organizing tasks by year, making it easier to retrieve and filter information based on time.</li>
</ul>
</li>
<li><strong>Enhanced Organization</strong>:
<ul>
<li>By integrating the current year automatically, you maintain a systematic arrangement of notes and tasks, minimizing the need for manual adjustments every new year.</li>
</ul>
</li>
<li><strong>Ease of Use</strong>:
<ul>
<li>This template is set up for simplicity and re-usability. Once implemented, it requires no further changes for year-specific adjustments, allowing you to focus on content generation rather than template management.</li>
</ul>
</li>
</ul>
<h2 id="benefits-of-dynamic-year-management">Benefits of Dynamic Year Management</h2>
<ul>
<li><strong>Time-Saving</strong>: No need to modify the template annually, thus saving valuable time.</li>
<li><strong>Consistent Records</strong>: Automatic year tagging provides a consistent way of tracking entries over time.</li>
<li><strong>Improved Searchability</strong>: Facilitates year-based searches and statistics generation, enhancing the utility of your Org files.</li>
</ul>