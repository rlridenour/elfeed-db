
	
<p>
Project Euler 12 takes us to the realm of triangular numbers and proper divisors. The image below shows a hands-on method to visualise the number of divisors of ten. Cuisenaire rods are learning aids to explore mathematics. Each of the coloured rods has a different integer length, which allows students to explore basic arithmetic. In this article, I discuss a method to generate triangular numbers using the R language.</p>
<figure>
<img src="https://upload.wikimedia.org/wikipedia/commons/6/67/Cuisenaire-Rods.jpg" alt="Cuisenaire-rods (Source: Wikimedia user Celcom / CC BY)." title="Cuisenaire-rods (Source: Wikimedia user Celcom / CC BY)." width="400"/>
<figcaption>
Cuisenaire-rods (Source: Wikimedia user Celcom / CC BY).
</figcaption>
</figure>
<div id="outline-container-headline-1" class="outline-2">
<h2 id="headline-1">
Project Euler 12 Definition
</h2>
<div id="outline-text-headline-1" class="outline-text-2">
<p>The sequence of triangle numbers is generated by adding the natural numbers. So the 7th triangle number would be \(1 + 2 + 3 + 4 + 5 + 6 + 7 = 28\). The first ten terms would be: \(1, 3, 6, 10, 15, 21, 28, 36, 45, 55, \ldots\)</p>
<p>
Let us list the factors of the first seven triangle numbers:</p>
<div class="src src-text">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span> 1: 1
</span></span><span style="display:flex;"><span> 3: 1, 3
</span></span><span style="display:flex;"><span> 6: 1, 2, 3,  6
</span></span><span style="display:flex;"><span>10: 1, 2, 5, 10
</span></span><span style="display:flex;"><span>15: 1, 3, 5, 15
</span></span><span style="display:flex;"><span>21: 1, 3, 7, 21
</span></span><span style="display:flex;"><span>28: 1, 2, 4,  7, 14, 28</span></span></code></pre></div>
</div>
<p>
We can see that 28 is the first triangle number to have over five divisors.</p>
<p>
What is the value of the first triangle number to have over <a href="https://projecteuler.net/problem=12">five hundred divisors</a>?</p>
</div>
</div>
<div id="outline-container-headline-2" class="outline-2">
<h2 id="headline-2">
Solution
</h2>
<div id="outline-text-headline-2" class="outline-text-2">
<p>In the video below, Vishal Kataria explains a simple method to determine the number of divisors using prime factorization. The prime factorization of \(n\) is given by:</p>
<p>
$$n = p^{\alpha_1}_1 \times p^{\alpha_2}_2 \times \ldots \times p^{\alpha_k}_k$$</p>
<p>
Where \(p\) is a prime factor, and \(\alpha\) is the number of times the factor is repeated.</p>
<p>
The number of proper divisors is for \(n\) is:</p>
<p>
$$d = (\alpha_1 + 1) (\alpha_2 + 1) \times \ldots \times (\alpha_k + 1)$$</p>
<p>
The code reuses the prime factorisation function developed for <a href="https://lucidmanager.org/data-science/project-euler-3/">Euler Problem 3</a>. This function results in a vector of all prime factors, e.g. the prime factors of 28 are 2, 2 and 7.</p>
<p>
The code to solve this problem determines the values for alpha using the run-length <code class="verbatim">rle()</code> function. This function counts the number of times each element in a sequence is repeated. The outcome of this function is a vector of the values and the number of times each is repeated. The prime factors of 28 are 2, 2 and 7, and their run lengths are 2 and 1. The number of divisors can now be determined.</p>
<p>
$$ 28 = 2^2 \times 7^1$$</p>
<p>
$$ d = (2+1)(1+1) = 6$$</p>
<p>
The six divisors of 28 are 1, 2, 4, 7, 14 and 28.</p>
<p>
The code to solve Project Euler 12 is shown below. The loop continues until it finds a triangular number with 500 divisors. The first two lines increment the index and create the next triangular number. The third line in the loop determines the number of times each factor is repeated (the run lengths). The last line calculates the number of divisors using the above formula.</p>
<p>
<a href = "https://github.com/pprevos/ProjectEuler/" target="_blank"
   title="Download ProjectEuler from GitHub"
   alt="Download ProjectEuler from GitHub">
  <button class="button is-medium is-primary">
    <span class="icon is-large">
      <i class="fab fa-github"></i>
    </span>
    <span style="font-family: monospace">ProjectEuler</span>
  </button>
</a>

</p>
<div class="src src-r">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>  <span style="color:#888">## Project Euler 12: Highly Divisible Triangular Number</span>
</span></span><span style="display:flex;"><span>  i <span style="color:#333">&lt;-</span> <span style="color:#60e;font-weight:bold">0</span>
</span></span><span style="display:flex;"><span>  divisors <span style="color:#333">&lt;-</span> <span style="color:#60e;font-weight:bold">0</span>
</span></span><span style="display:flex;"><span>  <span style="color:#080;font-weight:bold">while</span> (divisors <span style="color:#333">&lt;</span> <span style="color:#60e;font-weight:bold">500</span>) {
</span></span><span style="display:flex;"><span>      i <span style="color:#333">&lt;-</span> i <span style="color:#333">+</span> <span style="color:#60e;font-weight:bold">1</span>
</span></span><span style="display:flex;"><span>      triangle <span style="color:#333">&lt;-</span> (i <span style="color:#333">*</span> (i <span style="color:#333">+</span> <span style="color:#60e;font-weight:bold">1</span>)) <span style="color:#333">/</span> <span style="color:#60e;font-weight:bold">2</span>
</span></span><span style="display:flex;"><span>      pf <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">prime.factors</span>(triangle)
</span></span><span style="display:flex;"><span>      alpha <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">rle</span>(pf)
</span></span><span style="display:flex;"><span>      divisors <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">prod</span>(alpha<span style="color:#333">$</span>lengths <span style="color:#333">+</span> <span style="color:#60e;font-weight:bold">1</span>)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  answer <span style="color:#333">&lt;-</span> triangle
</span></span><span style="display:flex;"><span>  <span style="color:#06b;font-weight:bold">print</span>(answer)</span></span></code></pre></div>
</div>
<figure>
<p><div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/_QIx_zmh9nU?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"></iframe>
    </div>

<a href = "https://www.r-bloggers.com/" target="_blank" title="Proudly associated with R-Bloggers">
  <button class="button is-link is-medium">
    <span class="icon is-large">
      <i class="fab fa-r-project"></i>
    </span>
    <span>As seen on R Bloggers</span>
  </button>
</a>
</p>
<figcaption>
Vishal Kataria. Number Theory - Number of Divisors.
</figcaption>
</figure>
</div>
</div>

      