<p>
Bozhidar Batsov has posted another in his long list of informative Emacs posts. This time, it&rsquo;s about <a href="https://emacsredux.com/blog/2025/03/28/speed-up-emacs-startup-by-tweaking-the-gc-settings/">configuring Emacs garbage collection</a>. The principal way of doing that is to set <code>gc-cons-threshold</code> to a higher value than its default of 80000. Batsov has his set to 50000000 and is wondering if he should increase it.
</p>
<p>
On the other hand, picking a correct value is far from trivial. Batsov includes some text from Eli Zaretskii, the current Emacs maintainer, that says setting the value too high will adversely affect performance.
</p>
<p>
Garbage collection is notoriously difficult to configure correctly in any application and I have no special insight into what the correct value should be in any particular situation. What I can do, though, is tell you what I do, which works very well for me. I virtually never see a pause for garbage collection. On the other hand, I don&rsquo;t invoke a lot of memory hungry functions so my results may differ from yours.
</p>
<p>
I long ago gave up tweaking <code>gc-cons-threshold</code> and installed <a href="https://elpa.gnu.org/packages/gcmh.html">gcmh</a> to handle garbage collection for me. Gcmh is based on the observation that if Emacs has been idle for 15 seconds, it will probably be idle  longer so it&rsquo;s a good time kick off garbage collection. It does this by setting the normal threshold very high but when it sees that Emacs is idle, it sets it to a low value to kick off garbage collection. The explanation of how it works is <a href="https://akrl.sdf.org/">here</a>.
</p>
<p>
Gcmh tells you every time it kicks off garbage collection and I frequently see this when I stop typing for a bit. The system works really well for me. As I say, I never see a delay for garbage collection. If you&rsquo;re seeing problems in that area, give gcmh a try and see how it works for you.</p>
