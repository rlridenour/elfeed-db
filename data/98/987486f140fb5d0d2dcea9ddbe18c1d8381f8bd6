<p>I&rsquo;m happy to be back after one year away and it feels great.</p>
<p>Below are some chaotic mini/micro &ndash; or even nano &ndash; excerpts from my
<code>~/.emacs</code> file I have been tuning in for 12 years. These days, I&rsquo;m
running Emacs 29.4 on Ubuntu (Pop!_OS) 22.04 and, rarely, on macOS.</p>
<p>These tweaks have been collected from various sources; I provide a
reference to the source if available.</p>
<h2 id="checking-the-operating-system-emacs-is-running-on">Checking the operating system Emacs is running on</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(defvar my/os-linux (<span style="color:#a6e22e">string-equal</span> system-type <span style="color:#e6db74">&#34;gnu/linux&#34;</span>) <span style="color:#e6db74">&#34;I&#39;m on Linux&#34;</span>)
</span></span><span style="display:flex;"><span>(defvar my/os-macos (<span style="color:#a6e22e">string-equal</span> system-type <span style="color:#e6db74">&#34;darwin&#34;</span>) <span style="color:#e6db74">&#34;Oh, I&#39;m on macOS&#34;</span>)
</span></span><span style="display:flex;"><span>(defvar my/os-windows (<span style="color:#a6e22e">string-equal</span> system-type <span style="color:#e6db74">&#34;windows-nt&#34;</span>) <span style="color:#e6db74">&#34;OMG, that&#39;s Windows!&#34;</span>)
</span></span></code></pre></div><h2 id="macos-keyboard">macOS keyboard</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span><span style="color:#75715e">;; Disable Command key and enable Options as Meta.</span>
</span></span><span style="display:flex;"><span>(if my/os-macos
</span></span><span style="display:flex;"><span>    (setq mac-command-key-is-meta <span style="color:#66d9ef">nil</span>
</span></span><span style="display:flex;"><span>          mac-command-modifier <span style="color:#e6db74">&#39;super</span>
</span></span><span style="display:flex;"><span>          mac-option-key-is-meta <span style="color:#66d9ef">t</span>
</span></span><span style="display:flex;"><span>          mac-option-modifier <span style="color:#e6db74">&#39;meta</span>))
</span></span></code></pre></div><h2 id="everything-is-utf-8">Everything is UTF-8</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(set-language-environment <span style="color:#e6db74">&#39;utf-8</span>)
</span></span><span style="display:flex;"><span>(setq locale-coding-system <span style="color:#e6db74">&#39;utf-8</span>)
</span></span><span style="display:flex;"><span>(setq buffer-file-coding-system <span style="color:#e6db74">&#39;utf-8-unix</span>)
</span></span><span style="display:flex;"><span>(set-terminal-coding-system <span style="color:#e6db74">&#39;utf-8</span>)
</span></span><span style="display:flex;"><span>(set-keyboard-coding-system <span style="color:#e6db74">&#39;utf-8</span>)
</span></span><span style="display:flex;"><span>(set-selection-coding-system <span style="color:#e6db74">&#39;utf-8</span>)
</span></span><span style="display:flex;"><span>(prefer-coding-system <span style="color:#e6db74">&#39;utf-8</span>)
</span></span></code></pre></div><h2 id="smooth-scrolling">Smooth scrolling</h2>
<p>Borrowed from <a href="http://home.thep.lu.se/~karlf/emacs.html">http://home.thep.lu.se/~karlf/emacs.html</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(setq scroll-step <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Marker distance from center (don&#39;t jump to center).</span>
</span></span><span style="display:flex;"><span>(setq scroll-conservatively <span style="color:#ae81ff">100000</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Try to keep screen position when PgDn/PgUp.</span>
</span></span><span style="display:flex;"><span>(setq scroll-preserve-screen-position <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Start scrolling when marker at top/bottom.</span>
</span></span><span style="display:flex;"><span>(setq scroll-margin <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Mouse scroll moves 1 line at a time, instead of 5 lines.</span>
</span></span><span style="display:flex;"><span>(setq mouse-wheel-scroll-amount <span style="color:#f92672">&#39;</span>(<span style="color:#ae81ff">1</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; On a long mouse scroll keep scrolling by 1 line.</span>
</span></span><span style="display:flex;"><span>(setq mouse-wheel-progressive-speed <span style="color:#66d9ef">nil</span>)
</span></span></code></pre></div><h2 id="some-helpful-tips-for-emacsing-in-comfort">Some helpful tips for emacsing in comfort</h2>
<h3 id="clipboard">Clipboard</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span><span style="color:#75715e">;; Non-nil means cutting and pasting uses the clipboard.</span>
</span></span><span style="display:flex;"><span>(setq x-select-enable-clipboard <span style="color:#66d9ef">t</span>)
</span></span></code></pre></div><h3 id="turning-off-some-annoying-features">Turning off some annoying features</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span><span style="color:#75715e">;; No ToolBar, please.</span>
</span></span><span style="display:flex;"><span>(tool-bar-mode <span style="color:#ae81ff">-1</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; No alarms, please.</span>
</span></span><span style="display:flex;"><span>(setq ring-bell-function <span style="color:#e6db74">&#39;ignore</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; No lock files, please.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; https://emacs.stackexchange.com/questions/78800/how-to-disable-automatic-appearance-of-warnings-buffer-in-emacs</span>
</span></span><span style="display:flex;"><span>(setq create-lockfiles <span style="color:#66d9ef">nil</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Sentences do not need double spaces to end. Period.</span>
</span></span><span style="display:flex;"><span>(<span style="color:#a6e22e">set-default</span> <span style="color:#e6db74">&#39;sentence-end-double-space</span> <span style="color:#66d9ef">nil</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Replace &#34;yes&#34; by &#34;y&#34;.</span>
</span></span><span style="display:flex;"><span>(<span style="color:#a6e22e">fset</span> <span style="color:#e6db74">&#39;yes-or-no-p</span> <span style="color:#e6db74">&#39;y-or-n-p</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Don’t use dialog boxes.</span>
</span></span><span style="display:flex;"><span>(setq use-dialog-box <span style="color:#66d9ef">nil</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; For gpg (works on Ubuntu and macOS) to disable custom prompt.</span>
</span></span><span style="display:flex;"><span>(setenv <span style="color:#e6db74">&#34;GPG_AGENT_INFO&#34;</span> <span style="color:#66d9ef">nil</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Speedup cursor movement.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; https://emacs.stackexchange.com/questions/28736/emacs-pointcursor-movement-lag/28746</span>
</span></span><span style="display:flex;"><span>(setq auto-window-vscroll <span style="color:#66d9ef">nil</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Spaces instead of tabs when indenting.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Some people may not agree with this though.</span>
</span></span><span style="display:flex;"><span>(setq-default indent-tabs-mode <span style="color:#66d9ef">nil</span>)
</span></span></code></pre></div><h3 id="turning-on-some-helpful-features">Turning on some helpful features</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span><span style="color:#75715e">;; Nonzero means echo unfinished commands after this many seconds of</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; pause. The value may be integer or floating point. If the value is</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; zero, don’t echo at all.</span>
</span></span><span style="display:flex;"><span>(setq echo-keystrokes <span style="color:#ae81ff">0.01</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Winner mode is a global minor mode that records the changes in the</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; window configuration.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; https://www.gnu.org/software/emacs/manual/html_node/emacs/Window-Convenience.html</span>
</span></span><span style="display:flex;"><span>(winner-mode <span style="color:#66d9ef">t</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Turn on highlighting current line.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; http://ergoemacs.org/emacs/emacs_make_modern.html</span>
</span></span><span style="display:flex;"><span>(global-hl-line-mode <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Replace highlighted text with what I type rather than just</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; inserting at point.</span>
</span></span><span style="display:flex;"><span>(delete-selection-mode <span style="color:#66d9ef">t</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Restore opened files.</span>
</span></span><span style="display:flex;"><span>(desktop-save-mode <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Save minibuffer history.</span>
</span></span><span style="display:flex;"><span>(savehist-mode <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; When on a tab, make the cursor the tab length.</span>
</span></span><span style="display:flex;"><span>(setq-default x-stretch-cursor <span style="color:#66d9ef">t</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Auto refresh dired when file changes.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; http://pragmaticemacs.com/emacs/automatically-revert-buffers/</span>
</span></span><span style="display:flex;"><span>(add-hook <span style="color:#e6db74">&#39;dired-mode-hook</span> <span style="color:#e6db74">&#39;auto-revert-mode</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Auto refresh dired, but be quiet about it.</span>
</span></span><span style="display:flex;"><span>(setq global-auto-revert-non-file-buffers <span style="color:#66d9ef">t</span>)
</span></span><span style="display:flex;"><span>(setq auto-revert-verbose <span style="color:#66d9ef">nil</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Automatically reload files was modified by external program.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; https://www.emacswiki.org/emacs/AutoRevertMode</span>
</span></span><span style="display:flex;"><span>(global-auto-revert-mode <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Make URLs in comments/strings clickable, (Emacs &gt; v22).</span>
</span></span><span style="display:flex;"><span>(add-hook <span style="color:#e6db74">&#39;find-file-hooks</span> <span style="color:#e6db74">&#39;goto-address-prog-mode</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Display fringe indicators in `visual-line-mode`.</span>
</span></span><span style="display:flex;"><span>(setq visual-line-fringe-indicators <span style="color:#f92672">&#39;</span>(left-curly-arrow right-curly-arrow))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Switching the focus to the help window when it&#39;s opened.</span>
</span></span><span style="display:flex;"><span>(setq help-window-select <span style="color:#66d9ef">t</span>)
</span></span></code></pre></div><h3 id="frame-title">Frame title</h3>
<p>Template for displaying the title bar of visible frames.
(Assuming the window manager supports this feature.)</p>
<p>This variable has the same structure as <code>mode-line-format</code>, except that
the %c, %C, and %l constructs are ignored.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span><span style="color:#75715e">;; Frame title.</span>
</span></span><span style="display:flex;"><span>(setq frame-title-format <span style="color:#e6db74">&#34;%F--%b-[%f]--%Z&#34;</span>)
</span></span></code></pre></div><h3 id="electric-pair-mode">Electric Pair mode</h3>
<p>Electric Pair mode is a global minor mode. When enabled, typing an
open parenthesis automatically inserts the corresponding closing
parenthesis, and vice versa. (Likewise for brackets, etc.). If the
region is active, the parentheses (brackets, etc.) are inserted around
the region instead.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span><span style="color:#75715e">;; Global.</span>
</span></span><span style="display:flex;"><span>(electric-pair-mode <span style="color:#ae81ff">1</span>)
</span></span></code></pre></div><h2 id="calendar-tweaks">Calendar tweaks</h2>
<p>If you want to be informed about the times of sunrise and sunset for
any date at your location, Emacs is always ready to lend a hand &ndash; you
just need to provide your coordinates to Emacs. Use one decimal place
in the values of <code>calendar-latitude</code> and <code>calendar-longitude</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(defvar calendar-latitude NN.N)
</span></span><span style="display:flex;"><span>(defvar calendar-longitude NN.N)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Number of minutes difference between local standard time and UTC.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; For example, -300 for New York City, -480 for Los Angeles.</span>
</span></span><span style="display:flex;"><span>(defvar calendar-time-zone NNN)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Optional, the default value is just the variable `calendar-latitude`</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; paired with the variable `calendar-longitude`.</span>
</span></span><span style="display:flex;"><span>(defvar calendar-location-name <span style="color:#e6db74">&#34;Your City, Your Country&#34;</span>)
</span></span></code></pre></div><p>Within the calendar, the following commands are available:</p>
<dl>
<dt><code>S</code></dt>
<dd>Display times of sunrise and sunset for the selected date (<code>calendar-sunrise-sunset</code>).</dd>
<dt><code>M-x sunrise-sunset</code></dt>
<dd>Display times of sunrise and sunset for today&rsquo;s date.</dd>
<dt><code>C-u M-x sunrise-sunset</code></dt>
<dd>Display times of sunrise and sunset for a specified date.</dd>
<dt><code>M-x calendar-sunrise-sunset-month</code></dt>
<dd>Display times of sunrise and sunset for the selected month.</dd>
</dl>
<p>The command <code>M-x sunrise-sunset</code> is also available outside the
calendar to display the sunrise and sunset information for today&rsquo;s
date in the echo area.</p>
<h3 id="some-other-calendar-tweaks">Some other Calendar tweaks</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span><span style="color:#75715e">;; First day of the week: 0:Sunday, 1:Monday.</span>
</span></span><span style="display:flex;"><span>(defvar calendar-week-start-day <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Use European date format (DD/MM/YYYY or 9 October 2024).</span>
</span></span><span style="display:flex;"><span>(defvar calendar-date-style <span style="color:#e6db74">&#39;european</span>)
</span></span></code></pre></div><p>To be continued. Happy emacsing!</p>