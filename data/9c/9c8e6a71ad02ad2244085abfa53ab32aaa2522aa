

<p>I often need to strip emoji from strings to prevent them from messing up other handling. I&rsquo;ve been compiling regular expressions and I think I finally have all the bases covered.</p>

<p>This example is in Ruby, but the regular expressions are easy to adapt to any language:</p>

<figure class="code">
<figcaption><span>strip_emoji.rb</span><a href="https://gist.githubusercontent.com/ttscoff/bf121c6a199bc20c7f3085c50cd6d175/raw/b2b70e9d6903812423a93821373e171e0bfb51e1/strip_emoji.rb">raw</a></figcaption>"
<div class="highlight"><pre><code class="ruby"><span class="line"><span></span><span class="ch">#!/usr/bin/env ruby</span>
</span><span class="line"><span class="c1"># Remove all emoji from a string, including Apple&#39;s new overqualified emoji.</span>
</span><span class="line"><span class="c1">#</span>
</span><span class="line"><span class="c1"># Hat tip to mathiasbynens</span>
</span><span class="line"><span class="c1"># &lt;https://github.com/mathiasbynens/emoji-test-regex-pattern/blob/main/script/get-sequences.js&gt;</span>
</span><span class="line">
</span><span class="line"><span class="c1"># String extension for emoji stripping</span>
</span><span class="line"><span class="k">class</span><span class="w"> </span><span class="o">::</span><span class="nb">String</span>
</span><span class="line"><span class="w">  </span><span class="no">EMOJI_RX</span><span class="w"> </span><span class="o">=</span> <span class="sr">/[\u{fe0f}\u{00A9}\u{00AE}\u{203C}\u{200d}\u{2049}\u{2122}\u{2139}\u{2194}-\u{2199}\u{21A9}-\u{21AA}\u{231A}-\u{231B}\u{2328}\u{23CF}\u{23E9}-\u{23F3}\u{23F8}-\u{23FA}\u{24C2}\u{25AA}-\u{25AB}\u{25B6}\u{25C0}\u{25FB}-\u{25FE}\u{2600}-\u{2604}\u{260E}\u{2611}\u{2614}-\u{2615}\u{2618}\u{261D}\u{2620}\u{2622}-\u{2623}\u{2626}\u{262A}\u{262E}-\u{262F}\u{2638}-\u{263A}\u{2642}-\u{2653}\u{2660}\u{2663}\u{2665}-\u{2666}\u{2668}\u{267B}\u{267F}\u{2692}-\u{2694}\u{2696}-\u{2697}\u{2699}\u{269B}-\u{269C}\u{26A0}-\u{26A1}\u{26AA}-\u{26AB}\u{26B0}-\u{26B1}\u{26BD}-\u{26BE}\u{26C4}-\u{26C5}\u{26C8}\u{26CE}-\u{26CF}\u{26D1}\u{26D3}-\u{26D4}\u{26E9}-\u{26EA}\u{26F0}-\u{26F5}\u{26F7}-\u{26FA}\u{26FD}\u{2702}\u{2705}\u{2708}-\u{270D}\u{270F}\u{2712}\u{2714}\u{2716}\u{271D}\u{2721}\u{2728}\u{2733}-\u{2734}\u{2742}\u{2744}\u{2747}\u{274C}\u{274E}\u{2753}-\u{2755}\u{2757}\u{2763}-\u{2764}\u{2795}-\u{2797}\u{27A1}\u{27B0}\u{27BF}\u{2934}-\u{2935}\u{2B05}-\u{2B07}\u{2B1B}-\u{2B1C}\u{2B50}\u{2B55}\u{3030}\u{303D}\u{3297}\u{3299}\u{1F004}\u{1F0CF}\u{1F170}-\u{1F171}\u{1F17E}-\u{1F17F}\u{1F18E}\u{1F191}-\u{1F19A}\u{1F201}-\u{1F202}\u{1F21A}\u{1F22F}\u{1F232}-\u{1F23A}\u{1F250}-\u{1F251}\u{1F300}-\u{1F321}\u{1F324}-\u{1F393}\u{1F396}-\u{1F397}\u{1F399}-\u{1F39B}\u{1F39E}-\u{1F3F0}\u{1F3F3}-\u{1F3F5}\u{1F3F7}-\u{1F4FD}\u{1F4FF}-\u{1F53D}\u{1F549}-\u{1F54E}\u{1F550}-\u{1F567}\u{1F56F}-\u{1F570}\u{1F573}-\u{1F579}\u{1F587}\u{1F58A}-\u{1F58D}\u{1F590}\u{1F595}-\u{1F596}\u{1F5A5}\u{1F5A8}\u{1F5B1}-\u{1F5B2}\u{1F5BC}\u{1F5C2}-\u{1F5C4}\u{1F5D1}-\u{1F5D3}\u{1F5DC}-\u{1F5DE}\u{1F5E1}\u{1F5E3}\u{1F5EF}\u{1F5F3}\u{1F5FA}-\u{1F64F}\u{1F680}-\u{1F6C5}\u{1F6CB}-\u{1F6D0}\u{1F6E0}-\u{1F6E5}\u{1F6E9}\u{1F6EB}-\u{1F6EC}\u{1F6F0}\u{1F6F3}\u{1F910}-\u{1F918}\u{1f937}\u{1F980}-\u{1F984}\u{1F9C0}]+/</span><span class="o">.</span><span class="n">freeze</span>
</span><span class="line"><span class="w">  </span><span class="no">OVERQUALIFIED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span>
</span><span class="line"><span class="w">    </span><span class="s2">&quot;\u{1F91D}\u{1F3FB}&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># handshake: light skin</span>
</span><span class="line"><span class="w">    </span><span class="s2">&quot;\u{1F91D}\u{1F3FC}&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># handshake: medium-light skin</span>
</span><span class="line"><span class="w">    </span><span class="s2">&quot;\u{1F91D}\u{1F3FD}&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># handshake: medium skin</span>
</span><span class="line"><span class="w">    </span><span class="s2">&quot;\u{1F91D}\u{1F3FE}&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># handshake: medium-dark skin</span>
</span><span class="line"><span class="w">    </span><span class="s2">&quot;\u{1F91D}\u{1F3FF}&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># handshake: dark skin</span>
</span><span class="line">
</span><span class="line"><span class="w">    </span><span class="s2">&quot;\u{1F93C}\u{1F3FB}&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># wrestlers: light skin</span>
</span><span class="line"><span class="w">    </span><span class="s2">&quot;\u{1F93C}\u{1F3FC}&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># wrestlers: medium-light skin</span>
</span><span class="line"><span class="w">    </span><span class="s2">&quot;\u{1F93C}\u{1F3FD}&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># wrestlers: medium skin</span>
</span><span class="line"><span class="w">    </span><span class="s2">&quot;\u{1F93C}\u{1F3FE}&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># wrestlers: medium-dark skin</span>
</span><span class="line"><span class="w">    </span><span class="s2">&quot;\u{1F93C}\u{1F3FF}&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># wrestlers: dark skin</span>
</span><span class="line">
</span><span class="line"><span class="w">    </span><span class="c1"># Overqualified emoji sequences as entered via the iOS emoji picker.</span>
</span><span class="line"><span class="w">    </span><span class="s2">&quot;\u231A\uFE0F&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># watch</span>
</span><span class="line"><span class="w">    </span><span class="s2">&quot;\u231B\uFE0F&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># hourglass</span>
</span><span class="line"><span class="w">    </span><span class="s2">&quot;\u25FE\uFE0F&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># black medium small square</span>
</span><span class="line"><span class="w">    </span><span class="s2">&quot;\u2614\uFE0F&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># umbrella with rain drops</span>
</span><span class="line"><span class="w">    </span><span class="s2">&quot;\u2615\uFE0F&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># hot beverage</span>
</span><span class="line"><span class="w">    </span><span class="s2">&quot;\u2648\uFE0F&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># Aries</span>
</span><span class="line"><span class="w">    </span><span class="s2">&quot;\u2649\uFE0F&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># Taurus</span>
</span><span class="line"><span class="w">    </span><span class="s2">&quot;\u264A\uFE0F&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># Gemini</span>
</span><span class="line"><span class="w">    </span><span class="s2">&quot;\u264B\uFE0F&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># Cancer</span>
</span><span class="line"><span class="w">    </span><span class="s2">&quot;\u264C\uFE0F&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># Leo</span>
</span><span class="line"><span class="w">    </span><span class="s2">&quot;\u264D\uFE0F&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># Virgo</span>
</span><span class="line"><span class="w">    </span><span class="s2">&quot;\u264E\uFE0F&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># Libra</span>
</span><span class="line"><span class="w">    </span><span class="s2">&quot;\u264F\uFE0F&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># Scorpius</span>
</span><span class="line"><span class="w">    </span><span class="s2">&quot;\u2650\uFE0F&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># Sagittarius</span>
</span><span class="line"><span class="w">    </span><span class="s2">&quot;\u2651\uFE0F&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># Capricorn</span>
</span><span class="line"><span class="w">    </span><span class="s2">&quot;\u2652\uFE0F&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># Aquarius</span>
</span><span class="line"><span class="w">    </span><span class="s2">&quot;\u2653\uFE0F&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># Pisces</span>
</span><span class="line"><span class="w">    </span><span class="s2">&quot;\u267F\uFE0F&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># wheelchair symbol</span>
</span><span class="line"><span class="w">    </span><span class="s2">&quot;\u26AA\uFE0F&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># medium white circle</span>
</span><span class="line"><span class="w">    </span><span class="s2">&quot;\u26BD\uFE0F&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># soccer ball</span>
</span><span class="line"><span class="w">    </span><span class="s2">&quot;\u26BE\uFE0F&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># baseball</span>
</span><span class="line"><span class="w">    </span><span class="s2">&quot;\u26C4\uFE0F&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># snowman without snow</span>
</span><span class="line"><span class="w">    </span><span class="s2">&quot;\u26F2\uFE0F&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># fountain</span>
</span><span class="line"><span class="w">    </span><span class="s2">&quot;\u26F3\uFE0F&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># flag in hole</span>
</span><span class="line"><span class="w">    </span><span class="s2">&quot;\u26F5\uFE0F&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># sailboat</span>
</span><span class="line"><span class="w">    </span><span class="s2">&quot;\u26FA\uFE0F&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># tent</span>
</span><span class="line"><span class="w">    </span><span class="s2">&quot;\u2757\uFE0F&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># heavy exclamation mark symbol</span>
</span><span class="line"><span class="w">    </span><span class="s2">&quot;\u2B1B\uFE0F&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># black large square</span>
</span><span class="line"><span class="w">    </span><span class="s2">&quot;\u2B1C\uFE0F&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># white large square</span>
</span><span class="line"><span class="w">    </span><span class="s2">&quot;\u2B55\uFE0F&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># heavy large circle</span>
</span><span class="line"><span class="w">    </span><span class="s2">&quot;\u{1F004}\uFE0F&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># mahjong tile red dragon</span>
</span><span class="line"><span class="w">  </span><span class="o">].</span><span class="n">freeze</span>
</span><span class="line">
</span><span class="line"><span class="w">  </span><span class="k">def</span><span class="w"> </span><span class="nf">strip_emoji</span>
</span><span class="line"><span class="w">    </span><span class="n">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">strip</span><span class="o">.</span><span class="n">force_encoding</span><span class="p">(</span><span class="s2">&quot;UTF-8&quot;</span><span class="p">)</span>
</span><span class="line"><span class="w">    </span><span class="no">OVERQUALIFIED</span><span class="o">.</span><span class="n">each</span><span class="w"> </span><span class="k">do</span><span class="w"> </span><span class="o">|</span><span class="n">emoji</span><span class="o">|</span>
</span><span class="line"><span class="w">      </span><span class="n">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">str</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="sr">/</span><span class="si">#{</span><span class="n">emoji</span><span class="si">}</span><span class="sr">/</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span class="line"><span class="w">    </span><span class="k">end</span>
</span><span class="line"><span class="w">    </span><span class="n">str</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="no">EMOJI_RX</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span class="line"><span class="w">  </span><span class="k">end</span>
</span><span class="line"><span class="k">end</span>
</span><span class="line">
</span><span class="line"><span class="c1"># Example usage:</span>
</span><span class="line"><span class="c1">#   &quot;üë©‚Äçüë©‚Äçüëß‚Äçüë¶ funü§ùüèΩ&quot;.strip_emoji.strip</span>
</span><span class="line"><span class="c1">#   # =&gt; &quot;fun&quot;</span>
</span><span class="line"><span class="c1">#   &quot;üë©‚Äçüë©‚Äçüëß‚Äçüë¶‚õ≤Ô∏èüÄÑÔ∏è&quot;.strip_emoji.length</span>
</span><span class="line"><span class="c1">#   # =&gt; 0</span>
</span></code></pre></div>
</figure>

<p>I&rsquo;ve already ported this to Swift and Python, and <a href="https://github.com/ttscoff/strip_emoji">put together a
repo</a> intended to keep these as living documents that are
updated to keep up with new emoji. If you&rsquo;re into this kind of thing,
please make pull requests as you discover new edge cases. You can
create PRs against the <a href="https://github.com/ttscoff/strip_emoji/blob/main/README.md">README.md</a>, which contains the main regular
expression, or against any of the languages you use. And if you port
this to any other language, please add a routine to <a href="https://github.com/ttscoff/strip_emoji">the repo</a>!</p>

<p>Like or share this post <a class="twitter" target="_blank" rel="nofollow" href="https://twitter.com/intent/tweet?original_referer=https%3A%2F%2Fbrettterpstra.com%2F2025%2F01%2F04%2Fstripping-emoji-from-a-string%2F&text=Stripping+Emoji+from+a+string&url=https%3A%2F%2Fbrettterpstra.com%2F2025%2F01%2F04%2Fstripping-emoji-from-a-string%2F&via=ttscoff" title="Tweet this post">Twitter</a>.</p>
<hr style="margin:40px 0">

<p>BrettTerpstra.com is supported by readers like you. <a href="https://brettterpstra.com/support/">Click here if you'd
        like to help out.</a></p>
<p>Find Brett on <a rel="me" href="https://hachyderm.io/@ttscoff">Mastodon</a>, <a
        href="https://bsky.app/profile/ttscoff.bsky.social">Bluesky</a>, <a
        href="https://github.com/ttscoff">GitHub</a>, and <a href="https://brettterpstra.com/elsewhere">everywhere
        else</a>.</p><img src="https://brett.trpstra.net/link/535/16933504.gif" height="1" width="1"/>