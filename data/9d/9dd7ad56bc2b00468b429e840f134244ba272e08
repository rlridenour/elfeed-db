<h2 id="what-i-want-to-fix">What I want to &ldquo;fix&rdquo;</h2>
<p>I recently switched from <code>helm</code> to <code>ivy</code> as my completion framework.</p>
<p>I am quite frankly pretty happy and now understand, why a bunch of people take this step as well. The switch was reasonably painless and since the Emacs community seams to favor ivy, one gets more help in most forums and help sites. At least that was my experience.</p>
<p>That is not to say, that I did find the solution to all of my issues though. I had to figure out the problem at hand by myself and I am happy with my solution as a non(-lisp)-developer.</p>
<p>Enough of the ramble. Now to the issue. I use <a href="https://github.com/tumashu/ivy-posframe">ivy-posframe</a> to be able to position the minibuffer with ivy where I want. Therein lies the problem.
By default using the variable <code>ivy-posframe-display-functions-alist</code>, the ivy-posframe buffer can be positioned at <em>top-center</em>, <em>center</em> and <em>bottom-left</em> of the frame, <strong>but not at the <em>bottom-center</em></strong>. Why the hell not!</p>
<p>Well some of you guys would be saying that ivy is at the bottom of the frame anyways, so why bother. I ll tell you why. I like the way it looks, and part of the reason why I am using Emacs is because of its ability to be changed to everyone&rsquo;s liking – even if it is a seemingly minute detail like this.</p>
<p>Now that this has been cleared up. To the solution&hellip;</p>
<h2 id="how-i-fixed-it">How I &ldquo;fixed&rdquo; it</h2>
<p>Ivy-posframe is build &ldquo;on top&rdquo; of the package <a href="https://github.com/tumashu/posframe">posframe</a> and uses its &ldquo;position handler&rdquo; functions. Example:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="c1">;; value, that positions the `ivy-posframe&#39; buffer at the top center of the frame.</span>
</span></span><span class="line"><span class="cl"><span class="c1">;; this is a default definition in the package.</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defun</span> <span class="nv">ivy-posframe-display-at-frame-top-center</span> <span class="p">(</span><span class="nv">str</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">ivy-posframe--display</span> <span class="nv">str</span> <span class="nf">#&#39;</span><span class="nv">posframe-poshandler-frame-top-center</span><span class="p">))</span>
</span></span></code></pre></div><p><strong>Note:</strong> <code>posframe-poshandler-frame-top-center</code> is defined in the parent package <em>posframe</em>.</p>
<p>&hellip; and with that:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="c1">;; with the above I can set the value.</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">ivy-posframe-display-functions-alist</span>
</span></span><span class="line"><span class="cl">      <span class="o">&#39;</span><span class="p">((</span><span class="no">t</span> <span class="o">.</span> <span class="nv">ivy-posframe-display-at-frame-top-center</span><span class="p">)))</span>
</span></span></code></pre></div><p>Now knowing all that I checked for a position handler in <em>posframe</em> for bottom-center. And luckily found it.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="c1">;; from the `posframe&#39; package</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defun</span> <span class="nv">posframe-poshandler-frame-bottom-center</span> <span class="p">(</span><span class="nv">info</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;Posframe&#39;s position handler.
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">Get a position which let posframe stay onto its parent-frame&#39;s
</span></span></span><span class="line"><span class="cl"><span class="s">bottom center.  The structure of INFO can be found in docstring of
</span></span></span><span class="line"><span class="cl"><span class="s"></span><span class="ss">`posframe-show&#39;</span><span class="s">.&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nf">cons</span> <span class="p">(</span><span class="nf">/</span> <span class="p">(</span><span class="nf">-</span> <span class="p">(</span><span class="nf">plist-get</span> <span class="nv">info</span> <span class="nb">:parent-frame-width</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">              <span class="p">(</span><span class="nf">plist-get</span> <span class="nv">info</span> <span class="nb">:posframe-width</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">           <span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nf">-</span> <span class="p">(</span><span class="nf">plist-get</span> <span class="nv">info</span> <span class="nb">:parent-frame-height</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nf">plist-get</span> <span class="nv">info</span> <span class="nb">:posframe-height</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nf">plist-get</span> <span class="nv">info</span> <span class="nb">:mode-line-height</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nf">plist-get</span> <span class="nv">info</span> <span class="nb">:minibuffer-height</span><span class="p">))))</span>
</span></span></code></pre></div><p>From here, all I really need to do is define my own ivy-posframe display-function and then set it as the value for the <code>ivy-posframe-display-functions-alist</code> variable in my Emacs config.</p>
<p><strong>Display function:</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defun</span> <span class="nv">my/ivy-posframe-display-at-frame-bottom-center</span> <span class="p">(</span><span class="nv">str</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">ivy-posframe--display</span> <span class="nv">str</span> <span class="nf">#&#39;</span><span class="nv">posframe-poshandler-frame-bottom-center</span><span class="p">))</span>
</span></span></code></pre></div><p><strong>Set the value in the alist variable:</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">ivy-posframe-display-functions-alist</span>
</span></span><span class="line"><span class="cl">      <span class="o">&#39;</span><span class="p">((</span><span class="no">t</span> <span class="o">.</span> <span class="nv">my/ivy-posframe-display-at-frame-bottom-center</span><span class="p">)))</span>
</span></span></code></pre></div><p>Et voilà!</p>
