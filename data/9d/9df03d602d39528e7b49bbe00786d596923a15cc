<p>Had been a while since I looked into generating Xcode projects from a Swift package. On my latest use of the <em>generate-xcodeproj</em> subcommand, I was greeted by a nice <s>warning</s> surprise…</p>
<pre><code class="language-{.bash">swift package generate-xcodeproj
</code></pre>
<p>Xcode can handle Swift packages directly. Similarly, xcodebuild can handle them too. This isn't new. It's likely been available since Xcode 11. I just totally missed it.</p>
<p><em>Note: I've yet to dig into Xcode 13 beta, as Swift packages may already support the build/test features I was after in xcodebuild (like <a href="https://developer.apple.com/documentation/swift_packages/supportedplatform/3788290-maccatalyst">build/test on Catalyst</a>).</em></p>
<p>In any case, on to xcodebuild… but let's first create a brand new Swift package.</p>
<h2>Creating a Swift package library</h2>
<pre><code class="language-{.bash">mkdir FooBar &amp;&amp; cd FooBar
swift package init --type library
</code></pre>
<h2>List package schemes</h2>
<p>We can use xcodebuild to list the available schemes.</p>
<pre><code class="language-{.bash">xcodebuild -list
</code></pre>
<h2>Show supported platform, architecture, etc</h2>
<p>Similarly, we can list destinations supported for the schemes.</p>
<pre><code class="language-{.bash">xcodebuild -showdestinations -scheme FooBar
</code></pre>
<h2>macOS builds</h2>
<p>Let's build for macOS, though let's first import UIKit into FooBar.swift. This ensures we get an expected failure when building for macOS.</p>
<pre><code class="language-swift">import UIKit

struct FooBar {
  var text = &quot;Hello, World!&quot;
}
</code></pre>
<p>Now let's attempt to build it…</p>
<pre><code class="language-{.bash">xcodebuild build -quiet -scheme FooBar -destination 'platform=macOS'
</code></pre>
<p>The failure expected as UIKit isn't available on your typical macOS builds.</p>
<h2>macOS Catalyst builds</h2>
<p>We do, however, have Catalyst available, so we can use its variant to build for macOS with UIKit support, and.. voilà!</p>
<pre><code class="language-{.bash">xcodebuild build -quiet -scheme FooBar -destination 'platform=macOS,variant=Mac Catalyst' &amp;&amp; echo \\o/
</code></pre>
