<p>If you ever find yourself wanting to sort strings in the same line in Emacs, <code>sort-regexp-fields</code> is your friend.</p>
<p>For example if you had the text:</p>
<div class="highlight"><pre><span></span><code>[&quot;dog&quot;, &quot;cat&quot;, &quot;apple&quot;, &quot;baseball&quot;]
</code></pre></div>

<p>You can mark (select) that line as a region and invoke <code>sort-regexp-fields</code>. When called interactively, this command will ask twice in the mini-buffer for two regexps. The first regexp describes the record (or string pattern) that matches the region of text you want considered for sorting. Note this regexp is not used to actually sort the text.</p>
<p>For the example above, we’ll use a record regexp using the <a href="https://www.gnu.org/software/emacs/manual/html_node/elisp/Char-Classes.html">character class</a> <code>[:graph:]</code> to specify the content within double quotes. We’ll also group that content using <code>\(</code> … <code>\)</code>.</p>
<div class="highlight"><pre><span></span><code>Regexp specifying records to sort: &quot;\([[:graph:]]*\)&quot;
</code></pre></div>

<p>The second prompt will ask for a key regexp that <code>sort-regexp-fields</code> will use to actually sort the text. Since we used a grouping construct in the first regexp, we can use a number reference.</p>
<div class="highlight"><pre><span></span><code>Regexp specifying key within record: \1
</code></pre></div>

<p>The end result is:</p>
<div class="highlight"><pre><span></span><code>[&quot;apple&quot;, &quot;baseball&quot;, &quot;cat&quot;, &quot;dog&quot;]
</code></pre></div>

<p>Using <code>[:graph:]</code> presumes there are no spaces in the content between the double quotes. Let’s try a different example with record regexp that is less filtering. We will keep the key regexp at <code>\1</code>.</p>
<div class="highlight"><pre><span></span><code><span class="k">[&quot;hi there&quot;, &quot;good to go&quot;, &quot;a bottle&quot;, &quot;can&#39;t go there&quot;]</span>

<span class="na">Regexp specifying records to sort</span><span class="o">:</span><span class="w"> </span><span class="s">&quot;\([^&quot;]*\)&quot;</span>
</code></pre></div>

<p>The result is:</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="n">&quot;a bottle&quot;, &quot;can&#39;t go there&quot;, &quot;good to go&quot;, &quot;hi there&quot;</span><span class="o">]</span>
</code></pre></div>

<h1>Closing Thoughts</h1>
<p><code>sort-regexp-fields</code> is a really great tool to have in your back pocket. That said, knowing what kind of regexp to use is a bit more challenging to remember. For motivated readers, I'd offer that knowing how character classes work is worth the time invested as other GNU tools like <strong>grep</strong> also support them. I wrote this post for future-me, but perhaps you might find this tip useful too.</p>
<h1>References</h1>
<ul>
<li><a href="https://www.gnu.org/software/emacs/manual/html_node/elisp/Char-Classes.html">Char Classes (GNU Emacs Lisp Reference Manual)</a></li>
<li><a href="https://www.gnu.org/software/emacs/manual/html_node/elisp/Sorting.html">Sorting (GNU Emacs Lisp Reference Manual)</a></li>
<li><a href="https://tech.toryanderson.com/2020/12/12/emacs-sorting-with-sort-regexp-fields/">Emacs sorting with sort-regexp-fields | Tech.ToryAnderson.com</a></li>
</ul>