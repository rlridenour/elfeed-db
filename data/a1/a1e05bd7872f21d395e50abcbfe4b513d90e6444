<h2>My ledger file</h2>
<p>Save path to <a href="plotting-ledger-reports-in-org/my.ledger">my.ledger</a> in <em>ledger-file</em> block.</p>
<pre><code class="language-org">#+name: ledger-file
#+begin_src emacs-lisp
&quot;my.ledger&quot;
#+end_src
</code></pre>
<h2>gnuplot terminal (png or qt)</h2>
<p>Select gnuplot terminal. Using png to output images, but qt is handy too for interactive chart inspection.</p>
<pre><code class="language-org">Use png for inline or qt for interactive
#+name: gnuplot-term
#+begin_src emacs-lisp
&quot;png&quot;
#+end_src
</code></pre>
<h2>Monthly Income and Expenses</h2>
<p>Generate income report.</p>
<pre><code class="language-org">#+name: income-data
#+begin_src bash :results table :noweb yes
  ledger -f &lt;&lt;&lt;ledger-file&gt;&gt;&gt; -j reg ^Income -M --collapse --plot-amount-format=&quot;%(format_date(date, \&quot;%Y-%m-%d\&quot;)) %(abs(quantity(scrub(display_amount))))\n&quot;
#+end_src
</code></pre>
<p>Generate expenses report.</p>
<pre><code class="language-org">#+name: expenses-data
#+begin_src sh :results table :noweb yes
  ledger -f &lt;&lt;&lt;ledger-file&gt;&gt;&gt; -j reg ^Expenses -M --collapse
#+end_src
</code></pre>
<p>Plot income vs expenses.</p>
<pre><code class="language-{.gnuplot">set terminal myterm size 3500,1500
set style data histogram
set style histogram clustered gap 1
set style fill transparent solid 0.4 noborder
set xtics nomirror scale 0 center
set ytics add ('' 0) scale 0
set border 1
set grid ytics
set title &quot;Monthly Income and Expenses&quot;
set ylabel &quot;Amount&quot;
plot income using 2:xticlabels(strftime('%b', strptime('%Y-%m-%d', strcol(1)))) title &quot;Income&quot; linecolor rgb &quot;light-salmon&quot;, '' using 0:2:2 with labels left font &quot;Courier,8&quot; rotate by 15 offset -4,0.5 textcolor linestyle 0 notitle, expenses using 2 title &quot;Expenses&quot; linecolor rgb &quot;light-green&quot;, '' using 0:2:2 with labels left font &quot;Courier,8&quot; rotate by 15 offset 0,0.5 textcolor linestyle 0 notitle
</code></pre>
