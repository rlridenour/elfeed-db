<p>Something I&rsquo;ve wondered about for a little while: why don&rsquo;t more languages have a <a href="https://en.wikipedia.org/wiki/Call-with-current-continuation"><code>call/cc</code></a> operator? Having <a href="https://lambdaland.org/posts/2022-11-17_continutations/">first-class continuations</a> in your programming language gives your programmers a powerful construct. So why do only a handful of languages have it?</p>
<p>The short answer is: it&rsquo;s tricky to implement efficiently. One way to get <code>call/cc</code> is to convert your code into continuation-passing style. Then, <code>call/cc</code> simply takes the continuation in that representation and binds it to a variable. Most languages don&rsquo;t seem to go through a continuation-passing style conversion pass though, so there&rsquo;s no continuation to grab.</p>
<p>I asked <a href="https://users.cs.utah.edu/~mflatt/">Matthew Flatt</a> about this today, and his answer was that most languages use the C model of functions: when you call a function, you push the arguments to the function onto a stack along with the return address. Then, when you return, you pop those element back off the stack. To get <code>call/cc</code>, you&rsquo;ve have to copy the entire stack and pass that around.</p>
