<p>
Before, I wrote a lot of rumblings about my problems with FreeBSD
Stage 3 <code>loader</code> with removed graphics support (because of Netflix) and
with Libreboot (<code>corebootfb</code> version): <a href="https://eugene-andrienko.com/en/it/2024/07/07/thinkpad-x220-second-life.html#fn.freebsd_coreboot_fix">here</a>, <a href="https://eugene-andrienko.com/it/2025/03/10/freebsd14-2-thinkpad-x220.html#bootloader">here</a> and <a href="https://eugene-andrienko.com/it/2025/07/06/freebsd-zfs-boot-environment-boot2.html">here</a>. But at one
good night I was searching in the Internet for information about how
well the Libreboot supports *BSD OSesÂ â€” and suddenly found that there
is a separate page on the libreboot.org about this topic: <a href="https://libreboot.org/docs/bsd/">Install a
BSD operating system on Libreboot</a>. With this section, important for
meÂ â€” <a href="https://libreboot.org/docs/bsd/#freebsd-and-corebootfb">FreeBSD and corebootfb</a>:
</p>

<blockquote>
<p>
FreeBSD and corebootfb
</p>

<p>
Assumed broken, so please ensure that you boot with SeaBIOS payload in
text mode (lbmk ROM images with txtmode in the file name, not
corebootfb).
</p>

<p>
Please boot in text mode. FreeBSD can be configured to use KMS, if you
need Xorg or wayland.
</p>
</blockquote>

<p>
Whoops! I'm using the <code>corebootfb</code> version of Libreboot because I
thought that only it will work with laptop's 2K display
</p>

<p>
So, it's time to update Libreboot from <code>20241206</code> version to the <code>25.06</code>
version and to install a right versionÂ â€” not <code>corebootfb</code> but <code>txtmode</code>
(and check how it will work with my 2K display).
</p>
<div class="outline-2">
<h2>Preparations</h2>
<div class="outline-text-2">
<p>
Since the end of 2024 year the steps, described <a href="https://eugene-andrienko.com/en/it/2024/12/21/thinkpad-x220-libreboot.html#prepare-libreboot-binary">here</a>, are slightly
changed:
</p>

<ul class="org-ul">
<li>The target release (25.06 Luminous Lemon) for <code>x220_8mb</code> board should
be downloaded from Libreboot mirror as usual.</li>
<li>Same for the <code>lbmk</code> build system which is still on the Codeberg.</li>
<li><p>
Then, the commands for some proprietary blobs injectjion (Intel MEðŸ¤®)
now looks like this:
</p>
<pre class="example">
$ cp libreboot-25.06_x220_8mb.tar.xz lbmk/
$ cd lbmk
$ ./mk inject libreboot-25.06_x220_8mb.tar.xz setmac â–ˆâ–ˆ:â–ˆâ–ˆ:â–ˆâ–ˆ:â–ˆâ–ˆ:â–ˆâ–ˆ:â–ˆâ–ˆ
</pre>
<p>
The resulting roms, which can be flashed to the my laptop, now lies
directly in the <code>./libreboot-25.06_x220_8mb.tar.xz</code> archive.
</p>

<p>
So I unpack it and take the <code>seabios_x220_8mb_libgfxinit_txtmode.rom</code>
file for further modifications.
</p></li>
<li><p>
The last stepÂ â€” I swap the <code>Fn</code> and <code>Ctrl</code> keys as usual:
</p>
<pre class="example">
$ ../../coreboot/build/util/nvramtool/nvramtool -C seabios_x220_8mb_libgfxinit_txtmode.rom -w fn_ctrl_swap=Enable
</pre></li>
</ul>
</div>
</div>
<div class="outline-2">
<h2>Installation</h2>
<div class="outline-text-2">

<div class="figure">
<p><img src="/assets/static/IMG_2932.jpg" alt="CH341 programmer connected to the laptop and with 8 Mb flash memory chip soldered into it." align="center" width="90%" />
</p>
</div>

<p>
As usual. After one burnt CH341 programmer and some solderingâ€¦
</p>


<div class="figure">
<p><img src="/assets/static/IMG_2934.jpg" alt="The disassembled Thinkpad X200 on the workbench. There are also the magnifier, soldering dryer and some soldering staff." align="center" width="90%" />
</p>
</div>


<div class="figure">
<p><img src="/assets/static/IMG_2933.jpg" alt="The Macronix 8 Mb flash memory chip on the Thinkpad X220 motherboard. Photo shot through the magnifier." align="center" width="90%" />
</p>
</div>

<p>
I successfully flashed beforementioned rom to the laptop's SPI flash
memory chip.
</p>

<p>
Some notes:
</p>
<ul class="org-ul">
<li>Chinese test clips are piece of shit. The best way to connect Flash
memory chip to the programmerÂ â€” is desolder it from the motherboard
and solder to the PCB with proper footprint, which will be connected
to the programmer.</li>
<li>CH341 programmer is a piece of shit. DC/DC voltage regulator burns
very easy.</li>
</ul>
</div>
</div>
<div class="outline-2">
<h2>Results</h2>
<div class="outline-text-2">
<p>
It simply works.
</p>


<div class="figure">
<p><img src="/assets/static/IMG_2937.jpg" alt="The disassembled Thinkpad X220 running the Libreboot 25.06." align="center" width="90%" />
</p>
</div>

<p>
Now, the FreeBSD Stage 3 <code>loader</code> works out of the box and I can simply
use it, without Netflix changes removal and recompilation.
</p>
</div>
</div>