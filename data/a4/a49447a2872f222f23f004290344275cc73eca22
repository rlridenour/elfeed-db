<p>The odd title gives it away – I don’t have a good use-case for this :)</p>

<p><a href="https://leancrew.com/all-this/2022/10/good-fortune/">Dr. Drang shared</a> how he displayed one random line of “Oblique Strategies” in his email signatures many years ago.</p>

<p>The “Oblique Strategies” can be found here: <a href="http://www.rtqe.net/ObliqueStrategies/Edition1-3.html">http://www.rtqe.net/ObliqueStrategies/Edition1-3.html</a></p>

<p>They look like this:</p>

<blockquote>
  <pre><code>Abandon normal instruments
Accept advice
Accretion
A line has two sides
Allow an easement (an easement is the abandonment of a stricture)
Always first steps
</code></pre>
</blockquote>

<p>“Fortunes” or inspirational “quotes for thought” can work as journaling prompts. It’s also possible to start a new shell session with this “fortune cookie” format as a greeting or <i>Message of the Day</i>.</p>

<p>I’ve formatted the file thus:</p>

<ul>
  <li>Treat <code>#</code> at the beginning of a line to be a comment (referencing the source(s))</li>
  <li>Assuming <code>~/fortunes.txt</code> as the location</li>
</ul>

<h2 id="bash-script-eg-for-motd-updates">Bash script, e.g. for MotD updates</h2>

<p>Bash is simple. Filter out comments, then use <code>shuf</code> to get 1 random line:</p>

<pre><code>$ grep -e "^[^#]" ~/fortunes.txt | shuf -n 1
</code></pre>

<p>That prints any line from the file. Easy. Use <code>cron</code> to replace the Message of the Day in <code>/etc/motd</code> and then you have an inspirational greeting in the shell.</p>

<h2 id="elisp-random-fortune-function-for-journaling">Elisp random fortune function for journaling</h2>

<p>To get a random prompt in my Emacs org-mode journaling templates was a bit more involved. Instead of piping in the shell, I’m using “the Emacs way”, i.e. applying modifications to invisible, temporary buffers with the file contents:</p>

<div class="language-elisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nb">defun</span> <span class="nv">ct/random-fortune</span> <span class="p">(</span><span class="k">&amp;optional</span> <span class="nv">file</span><span class="p">)</span>
  <span class="s">"From a fortunes file, produce a random line.
Prints the line to the minibuffer when called interactively,
returns the line otherwise.

When FILE is not nil, read that file. Otherwise, defaults to '~/fortunes.txt'.
Ignores lines that start with a hash \"#\"."</span>
  <span class="p">(</span><span class="nv">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nv">$random-line</span> <span class="p">(</span><span class="nv">with-temp-buffer</span>
                        <span class="p">(</span><span class="nv">insert-file-contents</span> <span class="s">"~/fortunes.txt"</span><span class="p">)</span>
                        <span class="p">(</span><span class="nv">keep-lines</span> <span class="s">"^[^#]"</span><span class="p">)</span>
                        <span class="p">(</span><span class="nv">goto-line</span> <span class="p">(</span><span class="nb">1+</span> <span class="p">(</span><span class="nb">random</span> <span class="p">(</span><span class="nv">count-lines</span> <span class="p">(</span><span class="nv">point-min</span><span class="p">)</span> <span class="p">(</span><span class="nv">point-max</span><span class="p">)))))</span>
                        <span class="p">(</span><span class="nv">buffer-substring-no-properties</span> <span class="p">(</span><span class="nv">line-beginning-position</span><span class="p">)</span> <span class="p">(</span><span class="nv">line-end-position</span><span class="p">)))))</span>
    <span class="c1">;; 22.4 Distinguish Interactive Calls &lt;https://www.gnu.org/software/emacs/manual/html_node/elisp/Distinguish-Interactive.html&gt;</span>
    <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nv">called-interactively-p</span> <span class="ss">'any</span><span class="p">)</span>
        <span class="p">(</span><span class="nv">message</span> <span class="s">"%s"</span> <span class="nv">$random-line</span><span class="p">)</span>
      <span class="nv">$random-line</span><span class="p">)))</span>
</code></pre></div></div>

<p>This either “"”inspires””” me interactively, by showing the line at the bottom of the window, or when called programmatically, it returns the string for insertion into the meditative journaling template.</p>

<p>That all presupposes I actually have such a template or perform a practice like this, but in reality, this was just a short and fun thing to do between holidays, really.</p>

<p>Maybe your journaling practice benefits from this, though!</p>
<hr><p><small><a href="https://christiantietze.de/hire-me/">Hire me</a> for freelance macOS/iOS work and consulting.</small></p><p><small><a href="https://christiantietze.de/apps/">Buy</a> my apps.</small></p><p><small><a href="https://christiantietze.de/newsletter/">Receive</a> new posts via email.</small></p>