
         
         <p>This is a simple package to automatically preview in a window the file
at point in Dired buffers. Preview windows are closed when they are no
longer relevant, while preview buffers are killed if they have not
been used for other purposes beside previewing. The package provides
several customisation options to control its behaviour.</p>

<ul>
  <li>Package name (GNU ELPA): <code class="language-plaintext highlighter-rouge">dired-preview</code></li>
  <li>Official manual: <a href="https://protesilaos.com/emacs/dired-preview">https://protesilaos.com/emacs/dired-preview</a></li>
  <li>Git repositories:
    <ul>
      <li>GitHub: <a href="https://github.com/protesilaos/dired-preview">https://github.com/protesilaos/dired-preview</a></li>
      <li>GitLab: <a href="https://gitlab.com/protesilaos/dired-preview">https://gitlab.com/protesilaos/dired-preview</a></li>
    </ul>
  </li>
  <li>Backronym: Directories Invariably Render Everything Decently …
preview; dired … PDFs Require Extra Viewing Instructions for Emacs
to Work.</li>
</ul>

<p>Below are the release notes</p>

<hr />

<h2>Version 0.4.0 on 2025-02-18</h2>

<p>This version contains several refinements and bug fixes.</p>

<h3>Preview buffers have a mode line indicator</h3>

<p>Preview buffers have a prefix to their name to make them stand out.
This is controlled by the user option <code class="language-plaintext highlighter-rouge">dired-preview-buffer-name-indicator</code>,
which is a string that defaults to <code class="language-plaintext highlighter-rouge">[P]</code>.</p>

<h3>Control how preview buffers are cleaned up</h3>

<p>The way <code class="language-plaintext highlighter-rouge">dired-preview</code> works is to display a buffer and then keep a
list of preview buffers to economise on redisplaying it again. This
list of buffers is relevant for as long as we are in the Dired buffer,
otherwise all buffers therein are killed (buffers that were alive
before being previewed are not touched).</p>

<p>By default we delete from oldest to newest the accumulated buffers
when they exceed <code class="language-plaintext highlighter-rouge">10</code> in total. Though users can modify this behaviour
by editing the value of the new user option <code class="language-plaintext highlighter-rouge">dired-preview-kill-buffers-method</code>
(its doc string explains the technicalities).</p>

<p>Thanks to artelse for discussing this with me in issue 20:
<a href="https://github.com/protesilaos/dired-preview/issues/20">https://github.com/protesilaos/dired-preview/issues/20</a>.</p>

<h3>The <code class="language-plaintext highlighter-rouge">dired-preview-display-action-alist</code> has a new optional function</h3>

<p>The <code class="language-plaintext highlighter-rouge">dired-preview-display-action-alist</code> is the user option which
controls where the preview window is displayed. Its value can either
be the symbol of a function or a <code class="language-plaintext highlighter-rouge">display-buffer-alist</code> entry.</p>

<p>By default, we have a “do-what-I-mean” function that tries to find a
good placement for the window. The new <code class="language-plaintext highlighter-rouge">dired-preview-display-action-alist-below</code>
function has a straightforward behaviour: it always shows the preview
below the current window and it always makes the preview window 0.3
times the height of the Emacs frame.</p>

<h3>Encypted files are no longer previewed</h3>

<p>This is to ensure that potentially sensitive contents are not
displayed by accident, such as during a video call.</p>

<h3>We no longer preview the “self” directory</h3>

<p>We should not trigger a preview when the cursor is over the implicit
<code class="language-plaintext highlighter-rouge">.</code> directory, as that causes a recursion that breaks things. Thanks
to Inkbottle007 for reporting the bug in issue 23:
<a href="https://github.com/protesilaos/dired-preview/issues/23">https://github.com/protesilaos/dired-preview/issues/23</a>.</p>

<h3>Miscellaneous</h3>

<ul>
  <li>
    <p>Fixed a scenario where we would try to delete the last available
window on the current frame. This should never happen. Thanks to
artelse for reporting a relevant bug in the discussion of issue 22:
<a href="https://github.com/protesilaos/dired-preview/issues/22">https://github.com/protesilaos/dired-preview/issues/22</a>.</p>
  </li>
  <li>
    <p>Fixed a case when <code class="language-plaintext highlighter-rouge">hexl-follow-ascii</code> could fail to find an overlay
under certain conditions. This did not create any noticeable
problems, though having an error there would interfere with any
workflow that would rely on <code class="language-plaintext highlighter-rouge">toggle-debug-on-error</code>.</p>
  </li>
  <li>
    <p>The preview window will automatically be closed if the user switches
outside the given Dired buffer. We now do not consider a change to
the minibuffer as being “outside” this context. This way, a quick
<code class="language-plaintext highlighter-rouge">M-x</code> to, say, enable a minor mode does not have any effect on the
window layout.</p>
  </li>
  <li>
    <p>Suppressed the messaging facility of the underlying tracking of
preview buffers. Otherwise, Dired would notify us that the directory
has changed whenever we would preview a new one, which is
superfluous.</p>
  </li>
  <li>
    <p>The body of the <code class="language-plaintext highlighter-rouge">dired-preview-trigger</code> function, which determines
whether a preview will be displayed, is encapsulated in a <code class="language-plaintext highlighter-rouge">condition-case</code>.
This helps capture errors and thus have a more predictable behaviour.</p>
  </li>
  <li>
    <p>The <code class="language-plaintext highlighter-rouge">dired-preview-display-action-alist</code> has a more accurate
declaration which allows for its correct customisation inside the
Custom UI interface. In particular, it will behave the same way as
the <code class="language-plaintext highlighter-rouge">display-buffer-alist</code>, where relevant.</p>
  </li>
</ul>
        
      