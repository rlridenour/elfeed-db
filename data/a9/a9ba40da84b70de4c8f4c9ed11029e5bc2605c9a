<p>Needed a VPN to test an API from a different location. Gave <a href="https://mullvad.net/en">Mullvad</a> a try.</p>
<p>Pretty neat, you can generate an account number without providing an email address. You can also pre-pay with a ton of options, including cash, crypto, credit cards, PayPal, wire transfers…</p>
<p>After seeing your account credited, one can download a <a href="https://mullvad.net/en/account/wireguard-config">generated WireGuard configuration</a>. Also a WireGuard noob, so took this opportunity to give it a try.</p>
<p>The <a href="https://apps.apple.com/us/app/wireguard/id1451685025?mt=12">WireGuard macOS app</a> has an &quot;Import Tunnel(s) from File…&quot; option where you can import the .conf file downloaded from <a href="https://mullvad.net/en/account/wireguard-config">Mullvad's generated config</a>. After that, all I had to do was click the &quot;Activate&quot; button and <a href="https://en.wikipedia.org/wiki/Bob%27s_your_uncle">Bob's your uncle</a>.</p>
<p><img src="https://xenodium.github.io/images/a-quick-mullvad-macos-setup/wg-redact.png" alt=""></p>
<p>You can test your connection via:</p>
<pre><code class="language-bash">curl https://am.i.mullvad.net/connected
</code></pre>
<p>I had a brief stint at using the command-line alternative via homebrew <code>brew install wireguard-go wireguard-tools</code>, but that seems to fail silently:</p>
<pre><code class="language-{.bash">wg-quick up xxxxx
[#] wireguard-go utun
[+] Interface for xxxxx is utun7
[#] wg setconf utun7 /dev/fd/63
[#] ifconfig utun7 inet xxx.xxx.xxx.xxx/xx xxx.xxx.xxx.xxx alias
[#] ifconfig utun7 inet6 xxxx:xxxx:xxxx:xxxx::x:xxxx/xxx alias
[#] ifconfig utun7 up
[#] route -q -n add -inet6 ::/1 -interface utun7
[#] route -q -n add -inet6 8000::/1 -interface utun7
[#] route -q -n add -inet xxx.xxx.xxx.xxx/x -interface utun7
[#] route -q -n add -inet xxx.xxx.xxx.xxx/x -interface utun7
[#] route -q -n add -inet xxx.xxx.xxx.xxx -gateway xxx.xxx.xxx.xxx
[#] networksetup -getdnsservers Wi-Fi
[#] networksetup -getsearchdomains Wi-Fi
[#] networksetup -getdnsservers iPhone USB
[#] networksetup -getsearchdomains iPhone USB
[#] networksetup -getdnsservers Thunderbolt Bridge
[#] networksetup -getsearchdomains Thunderbolt Bridge
[#] networksetup -getdnsservers xxxxx
[#] networksetup -getsearchdomains xxxxx
[#] networksetup -setdnsservers iPhone USB xxx.xxx.xxx.xxx
[#] networksetup -setsearchdomains iPhone USB Empty
[#] networksetup -setdnsservers xxxxx xxx.xxx.xxx.xxx
[#] networksetup -setsearchdomains xxxxx Empty
[#] networksetup -setdnsservers Wi-Fi xxx.xxx.xxx.xxx
[#] networksetup -setsearchdomains Wi-Fi Empty
[#] networksetup -setdnsservers Thunderbolt Bridge xxx.xxx.xxx.xxx
[#] networksetup -setsearchdomains Thunderbolt Bridge Empty
[+] Backgrounding route monitor
</code></pre>
<pre><code class="language-bash">curl https://am.i.mullvad.net/connected
</code></pre>
<p>I'm on a Macbook M1 Pro, running macOS Sonoma. If you got <code>wg-quick</code> working on Sonoma, I'd love to hear from ya (<a href="https://indieweb.social/@xenodium">Mastodon</a> / <a href="https://twitter.com/xenodium">Twitter</a> / <a href="https://www.reddit.com/user/xenodium">Reddit</a> / <a href="mailto:me__AT__xenodium.com">Email</a>).</p>
