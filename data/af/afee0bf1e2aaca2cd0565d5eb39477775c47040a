<p>I recently <a href="https://xenodium.com/emacs-29s-sqlite-mode/">wrote about Emacs 29's new sqlite-mode</a>, which enables you to browse sqlite databases from your beloved editor.</p>
<p>Out of the box, it supports the following browsing features:</p>
<ul>
<li><code>sqlite-mode-list-data</code>: List the data from the table under point.</li>
<li><code>sqlite-mode-list-column</code>: List the columns of the table under point.</li>
<li><code>sqlite-mode-list-tables</code>: Re-list the tables from the currently selected database.</li>
</ul>
<p>On the editing side of things it supports row deletion:</p>
<ul>
<li><code>sqlite-mode-delete</code>: Delete the row under point.</li>
</ul>
<p>While fairly spartan, it lays foundations for additional tools and features.</p>
<p>Two features I would like to have:</p>
<ol>
<li>TAB navigation across table rows and columns.</li>
<li>Updating the row's field at point.</li>
</ol>
<p>This would give me the familiar behaviour I'm used to in my org tables as well as other common spreadsheet tools.</p>
<p>Luckily, this is Emacs, so we can bend it our wayâ€¦ and I sure did!</p>
<p>Here's tab navigating forward:</p>
<p><img src="https://xenodium.github.io/images/sqlite-mode-goodies/sqlite-forward.gif" alt=""></p>
<p>Here's tab navigating backward:</p>
<p><img src="https://xenodium.github.io/images/sqlite-mode-goodies/sqlite-previous.gif" alt=""></p>
<p>And updating row fields:</p>
<p><img src="https://xenodium.github.io/images/sqlite-mode-goodies/sqlite-edits.gif" alt=""></p>
<p>Most of the navigation is achieved by querying the current buffer to figure out column positions. Editing was in some ways easier, as I looked at <code>sqlite-mode-delete</code> to figure out how it handled the query.</p>
<p>To get the more familiar navigation behaviour, I've adjusted my key bindings as follows:</p>
<pre><code class="language-{.commonlisp">(use-package sqlite-mode-extras
  :bind (:map
         sqlite-mode-map
         (&quot;n&quot; . next-line)
         (&quot;p&quot; . previous-line)
         (&quot;&lt;backtab&gt;&quot; . sqlite-mode-extras-backtab-dwim)
         (&quot;&lt;tab&gt;&quot; . sqlite-mode-extras-tab-dwim)
         (&quot;RET&quot; . sqlite-mode-extras-ret-dwim)))
</code></pre>
<p>The code for <code>sqlite-mode-extras-tab-dwim</code>, <code>sqlite-mode-extras-backtab-dwim</code>, and <code>sqlite-mode-extras-ret-dwim</code> is little rough still (hacky even), but hey still fun.</p>
<p>For now, the code lives in <a href="https://github.com/xenodium/dotsies/blob/main/emacs/ar/sqlite-mode-extras.el">sqlite-mode-extras.el</a> under my <a href="https://github.com/xenodium/dotsies/tree/main">Emacs config repo</a>. Improvements/fixes totally welcome!</p>
