
	
<p>
Project Euler 26 delves into a topic many kids in primary school dread: fractions. A few years ago, a fraction broke the internet. What happens when you divide 1 by 998001?</p>
<p>
$$\frac{1}{998001} = 0.000001002003004005006007008009010011012013014015 \ldots$$</p>
<p>
What is unique about this fraction is that it lists every three-decimal number except for 998. Look carefully at the sequence to see that is 000, 001, 0002, 003, 004, 005 and so on. After it has reached 999, the sequence continues from the start. This fraction thus has 2997 recurring decimals. James Grime from Numberphile explains this mathematical oddity with his usual enthusiasm.</p>
<figure>
<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/daro6K6mym8?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"></iframe>
    </div>

<figcaption>
998,001 and its Mysterious Recurring Decimals - Numberphile.
</figcaption>
</figure>
<p>
The decimal fraction of 1/998001 is a recurring decimal. These are decimal numbers with periodic digits (repeating its values at regular intervals). </p>
<p>
<a href="https://lucidmanager.org/data-science/project-euler-033/">Project Euler 33</a> is also about fractions and asks us to analyse recurring decimals (reciprocal cycles) and Ford Circles.</p>
<div id="outline-container-headline-1" class="outline-2">
<h2 id="headline-1">
Project Euler 26 Definition
</h2>
<div id="outline-text-headline-1" class="outline-text-2">
<p>A unit fraction contains 1 in the numerator. The decimal representation of the unit fractions with denominators 2 to 10 are given:</p>
<p>
1/2 = 0.5</p>
<p>
1/3 = 0.(3) </p>
<p>
1/4 = 0.25 </p>
<p>
1/5 = 0.2 </p>
<p>
1/6 = 0.1(6) </p>
<p>
1/7 = 0.(142857) </p>
<p>
1/8 = 0.125 </p>
<p>
1/9 = 0.(1) </p>
<p>
1/10 = 0.1 </p>
<p>
Where 0.1(6) means 0.166666… and has a 1-digit recurring cycle. It can be seen that 1/7 has a 6-digit recurring cycle. Find the value of d &lt; 1000 for which 1/d contains the <a href="https://projecteuler.net/problem=26">longest recurring cycle</a> in its decimal fraction part.</p>
</div>
</div>
<div id="outline-container-headline-2" class="outline-2">
<h2 id="headline-2">
Proposed Solution
</h2>
<div id="outline-text-headline-2" class="outline-text-2">
<p><a href="https://oeis.org/A051626">Sequence A051626</a> in the On-Line Encyclopaedia of Integer Sequences describes the length of the recurring numbers in 1/n. To solve Euler Problem 26, we need to generate the first 1000 numbers of this sequence and find out which number has the longest recurring cycle.</p>
<p>
R can only display up to 22 decimals by using <code class="verbatim">options(digits=22)</code>. The base R capability is unsuitable for solving this problem, so I wrote some code to perform long division the old-fashioned way.</p>
<p>
The <code class="verbatim">recur()</code> function divides 1 by any arbitrary integer. The code continues until the decimal terminates, for example 1/4 = 0.25, or when a recurring pattern emerges, e.g. 1/7 = 0.(142857).</p>
<p>
The function has two arguments: <code class="verbatim">n</code> is the input number. The output argument determines the outcome of the function: “=len=” for the length of the recurring decimals. Any other value shows the result of the calculation. The output of the function is a string. Using the European notation, the recurring part of the decimals is shown between brackets, e.g. 1/14 = 0.0(714285).</p>
<p>
<a href = "https://github.com/pprevos/ProjectEuler/" target="_blank"
   title="Download ProjectEuler from GitHub"
   alt="Download ProjectEuler from GitHub">
  <button class="button is-medium is-primary">
    <span class="icon is-large">
      <i class="fab fa-github"></i>
    </span>
    <span style="font-family: monospace">ProjectEuler</span>
  </button>
</a>

</p>
<div class="src src-r">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>  <span style="color:#888">## Project Euler 26: Reciprocal Cycles</span>
</span></span><span style="display:flex;"><span>  recur <span style="color:#333">&lt;-</span> <span style="color:#080;font-weight:bold">function</span>(x, output <span style="color:#333">=</span> <span style="background-color:#fff0f0">&#34;&#34;</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#888"># Prepare variable</span>
</span></span><span style="display:flex;"><span>      <span style="color:#080;font-weight:bold">if</span> (x <span style="color:#333">==</span> <span style="color:#60e;font-weight:bold">0</span>) <span style="color:#080;font-weight:bold">return</span>(<span style="color:#080;font-weight:bold">NaN</span>)
</span></span><span style="display:flex;"><span>      <span style="color:#080;font-weight:bold">if</span> (x <span style="color:#333">==</span> <span style="color:#60e;font-weight:bold">1</span>) <span style="color:#080;font-weight:bold">return</span>(<span style="color:#60e;font-weight:bold">0</span>)
</span></span><span style="display:flex;"><span>      x <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">floor</span>(<span style="color:#06b;font-weight:bold">abs</span>(x))
</span></span><span style="display:flex;"><span>      <span style="color:#888"># Initiate vectors to store decimals and remainders</span>
</span></span><span style="display:flex;"><span>      dec <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">vector</span>()
</span></span><span style="display:flex;"><span>      rem <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">vector</span>()
</span></span><span style="display:flex;"><span>      <span style="color:#888"># Initiate values</span>
</span></span><span style="display:flex;"><span>      i <span style="color:#333">&lt;-</span> <span style="color:#60e;font-weight:bold">1</span>
</span></span><span style="display:flex;"><span>      r <span style="color:#333">&lt;-</span> <span style="color:#60e;font-weight:bold">10</span>
</span></span><span style="display:flex;"><span>      rem <span style="color:#333">&lt;-</span> r
</span></span><span style="display:flex;"><span>      <span style="color:#888"># Long division</span>
</span></span><span style="display:flex;"><span>      <span style="color:#080;font-weight:bold">repeat</span> {
</span></span><span style="display:flex;"><span>          dec[i] <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">floor</span>(r <span style="color:#333">/</span> x)
</span></span><span style="display:flex;"><span>          r <span style="color:#333">&lt;-</span> <span style="color:#60e;font-weight:bold">10</span> <span style="color:#333">*</span> (r <span style="color:#333">%%</span> x)
</span></span><span style="display:flex;"><span>          <span style="color:#888"># Test wether the number is terminating or repeating</span>
</span></span><span style="display:flex;"><span>          <span style="color:#080;font-weight:bold">if</span> (r <span style="color:#333">==</span> <span style="color:#60e;font-weight:bold">0</span> <span style="color:#333">|</span> r <span style="color:#333">%in%</span> rem) <span style="color:#080;font-weight:bold">break</span>
</span></span><span style="display:flex;"><span>          rem[i <span style="color:#333">+</span> <span style="color:#60e;font-weight:bold">1</span>] <span style="color:#333">&lt;-</span> r
</span></span><span style="display:flex;"><span>          i <span style="color:#333">&lt;-</span> i <span style="color:#333">+</span> <span style="color:#60e;font-weight:bold">1</span> 
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      <span style="color:#888"># Determine number of recurring digits</span>
</span></span><span style="display:flex;"><span>      rep <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">ifelse</span>(r <span style="color:#333">!=</span> <span style="color:#60e;font-weight:bold">0</span>, <span style="color:#06b;font-weight:bold">length</span>(rem) <span style="color:#333">-</span> <span style="color:#06b;font-weight:bold">which</span>(r <span style="color:#333">==</span> rem) <span style="color:#333">+</span> <span style="color:#60e;font-weight:bold">1</span>, <span style="color:#60e;font-weight:bold">0</span>)
</span></span><span style="display:flex;"><span>      <span style="color:#888"># Output</span>
</span></span><span style="display:flex;"><span>      <span style="color:#080;font-weight:bold">if</span> (output <span style="color:#333">==</span> <span style="background-color:#fff0f0">&#34;len&#34;</span>)
</span></span><span style="display:flex;"><span>          <span style="color:#080;font-weight:bold">return</span>(rep)
</span></span><span style="display:flex;"><span>      <span style="color:#080;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>          <span style="color:#080;font-weight:bold">if</span> (rep <span style="color:#333">!=</span> <span style="color:#60e;font-weight:bold">0</span>) {
</span></span><span style="display:flex;"><span>              <span style="color:#080;font-weight:bold">if</span> (rep <span style="color:#333">==</span> <span style="color:#06b;font-weight:bold">length</span>(dec)) 
</span></span><span style="display:flex;"><span>                  l <span style="color:#333">&lt;-</span> <span style="background-color:#fff0f0">&#34;(&#34;</span>
</span></span><span style="display:flex;"><span>              <span style="color:#080;font-weight:bold">else</span>
</span></span><span style="display:flex;"><span>                  l <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">c</span>(dec[1<span style="color:#333">:</span>(<span style="color:#06b;font-weight:bold">length</span>(dec) <span style="color:#333">-</span> rep)], <span style="background-color:#fff0f0">&#34;(&#34;</span>)
</span></span><span style="display:flex;"><span>              dec <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">c</span>(l, dec<span style="color:#06b;font-weight:bold">[</span>(<span style="color:#06b;font-weight:bold">length</span>(dec) <span style="color:#333">-</span> rep <span style="color:#333">+</span> <span style="color:#60e;font-weight:bold">1</span>)<span style="color:#333">:</span><span style="color:#06b;font-weight:bold">length</span>(dec)], <span style="background-color:#fff0f0">&#34;)&#34;</span>)
</span></span><span style="display:flex;"><span>          }
</span></span><span style="display:flex;"><span>          <span style="color:#080;font-weight:bold">return</span>(<span style="color:#06b;font-weight:bold">paste0</span>(<span style="background-color:#fff0f0">&#34;0.&#34;</span>, <span style="color:#06b;font-weight:bold">paste0</span>(dec, collapse <span style="color:#333">=</span> <span style="background-color:#fff0f0">&#34;&#34;</span>, sep <span style="color:#333">=</span> <span style="background-color:#fff0f0">&#34;&#34;</span>)))
</span></span><span style="display:flex;"><span>          }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  A051626 <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">sapply</span>(<span style="color:#60e;font-weight:bold">1</span><span style="color:#333">:</span><span style="color:#60e;font-weight:bold">1000</span>, recur, <span style="background-color:#fff0f0">&#34;len&#34;</span>)
</span></span><span style="display:flex;"><span>  answer <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">which.max</span>(A051626)
</span></span><span style="display:flex;"><span>  <span style="color:#06b;font-weight:bold">print</span>(answer)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#06b;font-weight:bold">recur</span>(<span style="color:#60e;font-weight:bold">998001</span>, <span style="background-color:#fff0f0">&#34;len&#34;</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#06b;font-weight:bold">recur</span>(<span style="color:#60e;font-weight:bold">998001</span>)</span></span></code></pre></div>
</div>
<a href = "https://www.r-bloggers.com/" target="_blank" title="Proudly associated with R-Bloggers">
  <button class="button is-link is-medium">
    <span class="icon is-large">
      <i class="fab fa-r-project"></i>
    </span>
    <span>As seen on R Bloggers</span>
  </button>
</a>

</div>
</div>

      