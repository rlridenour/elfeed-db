<p>I wanted to add a small real-time visitor counter to my website. In other words, to openly display how many people are viewing my site at the exact moment you're on it. If you're alone: 1. If you and someone else on the other side of the world: 2. etc.</p>
<p><img alt="Presence counter in action" class="medium" src="https://img.andros.dev/j9JXDtrgDWlwMcKaB5AgnXveJ1E=/filters:format(avif)/https://andros.dev/media/blog/2025/12/presence-6.jpg" /></p>
<p>My website uses a WebSocket server, Django Channels (since all the dynamic parts are rendered using <a href="https://django-liveview.andros.dev/">Django LiveView</a>). With this, I thought, why not? It would be fun. I have all the necessary tools to calculate the number and notify visitors instantly.</p>
<p>If you're not familiar with some of these technologies, here's a quick overview:</p>
<ul>
<li><strong>Django</strong>: Web framework in Python</li>
<li><strong>Django Channels</strong>: Django extension for handling asynchronous connections, like WebSockets. Think of things like chats, push notifications, etc.</li>
<li><strong>Django LiveView</strong>: Inspired by Phoenix LiveView, it allows rendering HTML on the server and sending it to the client in real-time using WebSockets. Ideal for creating reactive interfaces without needing to write JavaScript</li>
</ul>
<p>In the past, I had already built a similar feature for a chat that indicated whether a user was connected or not. You can figure it out by keeping track of how many users connect to the WebSocket server and how many disconnect, and asking from time to time if they're still there. So, I knew the logic behind it. However, this time I wanted some easy-to-integrate extension. The minimum possible complexity.</p>
<p>I found a repository with just what I needed <a href="https://github.com/mitmedialab/django-channels-presence">django-channels-presence</a>. Unfortunately, it had been abandoned for 5 years, with Pull requests begging for some attention.</p>
<p>Instead of getting discouraged, or forcing myself to build it manually, I decided to fork it. I set out to update it to modern Django versions. It wasn't as complex a job as I imagined. With a small investment of time I created <a href="https://github.com/tanrax/django-channels-more-than-present">django-channels-more-than-present</a>.</p>
<p>You can currently install it with:</p>
<pre class="highlight"><code class="language-sh">pip install django-channels-more-than-present</code></pre>
<p>I updated dependencies, replaced deprecated functions (like <code>unique_together</code> with <code>UniqueConstraint</code> or removed the old Signal parameter <code>providing_args</code>), did a migration, tested everything, published it on <code>pypi</code> and... little else. It took me longer to understand how it worked than to change the code (spoiler: it's well designed!).</p>
<p>The question you'll ask yourself is: Why did I bother making the fork?:</p>
<ul>
<li>I would use it again in the future, and a Django app is an excellent way to integrate it quickly</li>
<li>It's code with potential</li>
<li>It improves the Django ecosystem</li>
</ul>
<p>And because that's how Open Source works. Developing it for myself would have been faster, yes, but it would only contribute to my project. Now anyone can benefit.</p>
<p>With the new package ready, and <a href="https://django-liveview.andros.dev/">Django LiveView</a> rendering HTML in real-time... <em>et voil√†!</em> With a feline theme, my visitors can know if they're alone or if there's someone else exploring the website at that precise moment.</p>
<p><img alt="Presence indicator" class="medium" src="https://img.andros.dev/tG0rVw11UjziwlST0kJiXJ5MgJw=/filters:format(avif)/https://andros.dev/media/blog/2025/12/presence-1.jpg" /></p>
<p><img alt="Django Channels Presence" class="medium" src="https://img.andros.dev/xvnXs7P6mSmfGoUriJEKMUyUb6I=/filters:format(avif)/https://andros.dev/media/blog/2025/12/presence-2.jpg" /></p>
<p><img alt="Fork updates" class="medium" src="https://img.andros.dev/e_29_Xm2cd_3C3TAkSn_USnVtco=/filters:format(avif)/https://andros.dev/media/blog/2025/12/presence-4.jpg" /></p>
<p><img alt="Presence counter in action" class="medium" src="https://img.andros.dev/j9JXDtrgDWlwMcKaB5AgnXveJ1E=/filters:format(avif)/https://andros.dev/media/blog/2025/12/presence-6.jpg" /></p>
<p>Now all that's left is to play with the design.</p>