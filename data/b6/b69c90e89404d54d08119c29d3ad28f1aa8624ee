<p>
There's a new <a href="https://gregnewman.io/blog/emacs-carnival-2025-07-writing-experience/">carnival</a> in town, and I'm joining in. The theme for this month is "Writing Experience", and boy what an experience it is. About 80% of my daily usage of Emacs is writing, but some parts of my workflow are tedious, or worse yet completely unused, and I've had some quality of life stuff that I've been itching to implement for a while. My configuration is not particularly well formatted either. So in all, I think it's a good time to do a bit of Winter cleaning (Southern Hemisphere rules) and build a better configuration for writing specifically.
</p>

<p>
Before looking at what my config looks like currently, let's look at what I'm actually using Emacs to write, since a use case is a good place to start from. When I write in Emacs, 99.9% of the time I'm writing in <code>org-mode</code> (the other 0.01% of the time is in <code>markdown-mode</code> with Emacs Everywhere, but I won't cover that here). By my own self-reflection, this is what I mostly use Emacs for in terms of writing (and in no particular order):
</p>
<ul class="org-ul">
<li>Fiction Writing:
<ul class="org-ul">
<li>Novels or Short Stories</li>
<li>Worldbuilding</li>
</ul></li>
<li>Technical Writing:
<ul class="org-ul">
<li>Essays and Mini-essays</li>
<li>Notes, and To-Dos</li>
<li>Knowledge Management</li>
<li>Literate Programming</li>
</ul></li>
<li>Blog Posts</li>
<li>Tabletop RPG Rules</li>
</ul>

<p>
The requirements for these are all relatively distinct, and my flow for some is more streamlined than others. For example, I'm quite happy with my RPG rules writing setup, at least for my current project; and I'm also pretty happy with Weblorg and blog writing/publishing. I feel like my main points of contention are essay writing and personal knowledge management. So let's have a look at what I'm doing now before I start thinking how to do it better.
</p>

<div class="note">
<p>
I initially started writing this with the intention to do up my fiction writing and TTRPG flows, but it really turned into a complete overhaul of my second brain/PKDB setup. Sorry about that!
</p>

</div>

<div class="outline-2">
<h2 id="the-now-and-reflection">The Now and Reflection</h2>
<div class="outline-text-2">
<p>
This is a list of every external package I'm currently using when writing in <code>org</code>:
</p>
<ul class="org-ul">
<li><code>wc-mode</code></li>
<li><code>org-modern</code></li>
<li><code>powerthesaurus</code></li>
<li><code>eglot</code> with <a href="https://www.cyan.sh/blog/posts/goodbye-languagetool-hello-harper.html">Harper</a></li>
<li><code>org-novelist</code></li>
<li><code>org-roam</code></li>
<li><code>company</code> for use with Harper and Ispell</li>
<li><code>org-transclusion</code></li>
<li><code>yasnippet</code></li>
<li><code>weblorg</code> and <code>templatel</code></li>
</ul>

<p>
I'm not including any packages like <code>ob-racket</code> that enable more language support for babel.
</p>

<p>
<code>wc-mode</code> is invaluable to me, however I wouldn't mind getting rid of the dependency and trying to implement it myself. It would be good practice with Elisp. For the sake of not reinventing the wheel, let's not do that here.
</p>

<p>
<code>org-modern</code> is excellent, but my use of it could probably be better. The incompatibility with <code>org-indent</code> bugs me in particular, which probably means I need to have a look at <code>org-modern-indent</code> instead.
</p>

<p>
<code>powerthesaurus</code> is also invaluable, more-so than <code>wc-mode</code>. However, it would be good to have at least some of this functionality available offline, since I don't always write with an internet connection.
</p>

<p>
<code>eglot</code> and Harper are excellent, but I want to tweak some of the rules. Unfortunately, Harper doesn't have native support for <code>org</code> so there will always be some incompatibility until then, but I'm willing to put up with that until it gets implemented (if it does).
</p>

<p>
<code>org-novelist</code> is&#x2026; good, but I don't make enough use of it to justify it's inclusion. I don't do enough story writing anymore, and the structure is not particularly helpful for worldbuilding or other document types.
</p>

<p>
<code>org-roam</code> is the most contentious thing here. I feel like my "organisation system", meaning my to-do files, commonplace notebook, and PKDB are where I see the biggest friction currently. Sure my current setup works, but it feels disorganised, and I don't use <code>org-roam</code> as much as I should - probably because the main killer feature, backlinks, just doesn't jive well with how my head works. It also doesn't have any good spaced repetition implementation, which I would like to have.
</p>

<p>
<code>company</code>. I'm not going to touch this too much; I already did that in my previous blog about Harper, and I'm quite happy in the state that it's in.
</p>

<p>
<code>org-transclusion</code>. I installed this on a whim because I thought it might be helpful in making <code>org-roam</code> fit better in my head, but I basically haven't touched it since. It might be time for this to go.
</p>

<p>
<code>yasnippet</code> is great, I use it all the time for things like date insertion, but I wouldn't mind adding some more templates to skeleton some document types.
</p>

<p>
I don't have much to say about <code>weblorg</code>, you're reading this right now thanks to it. I have two issues here: firstly, <a href="https://github.com/emacs-love/weblorg/issues/85">citations don't work</a>, and secondly the table of contents links don't work. I will try to fix these, but I'm doubtful that I can. We will see.
</p>
</div>
</div>

<div class="outline-2">
<h2 id="stuff-i-want-to-have">Stuff I Want To Have</h2>
<div class="outline-text-2">
<p>
Big one: I'm crap at writing Bibtex and I use citation generators. The issue is that these are outside Emacs, which causes friction. I think <code>biblio</code> should solve this.
</p>

<p>
The biggest thing I would absolutely love, is for my PKDB to be easily accessible and editable on my phone. Yes, I know Emacs can run on Android, but it's not exactly a pleasant experience - nor should it be, it's a touch interface not a keyboard interface. I've kinda tried to work around this with a <a href="https://www.clockworkpi.com/uconsole">uConsole</a>, but, eh, honestly that workflow has it's own problems. That whole device has it's own usability problems for me that I want to address separately. Back to the main desire here: ideally, I don't want to program my own app in Flutter (although that would be pretty neat, imagine an interactive <code>org-roam-ui</code>) because it's too time consuming currently. I use Orgzly Revived on mobile and I would like my note-taking to be compatible with it; or, in lieu of that, have it be compatible with Logseq (which actually seems like it may be the better solution here).
</p>

<p>
While we're on the topic of mobile, being able to share some files with my girlfriend would be useful - for example to track a shared grocery list. She is using an iPhone, which might make this more complicated.
</p>

<p>
I want to start journaling proper. I've been having fun with solo journaling TTRPGs lately and I think it's not a bad idea to integrate that into my daily life, even if it's just a paragraph or so.
</p>

<p>
If you're not familiar with mini-essays, I recommend watching <a href="https://www.youtube.com/watch?v=N4YjXJVzoZY">this video.</a> The takeaway is that I already sort of do this in <code>org-roam</code>, but that's not exactly the most frictionless setup. Zettelkasten is not made for this type of thing in my opinion, but that may just be because of my organisation.
</p>

<p>
While I'm loving Harper for picking up errors, I also want to be able to inspect the text style of my writing. Currently, I'm doing this with <a href="https://www.expresso-app.org/">Expresso</a> but having this available within Emacs would be greatly beneficial.
</p>

<p>
I want some cleaner text selection commands. Particularly, I want <code>mark-word</code> to select the whole word at the cursor and not just to the end of it. I also want something like <code>mark-sentence</code> (<code>forward-sentence</code> is also a bit buggy, so fixing that might be a good idea). Also along these lines, I want to implement some functionality from <a href="https://essay.app/">essay.app</a>, specifically sentence/paragraph reordering and "focused rewriting".
</p>

<p>
In general I want to change some key-binds to use custom multi-key selection menus through <code>transient</code>, because I find that having such a single entry-point will make it less likely I forget things.
</p>

<p>
More to the TTRPG side, I want to be able to do dice rolls via the standard syntax (<code>xDy+z</code>) and create roll tables that I can reference remotely easily. Card decks would also be very helpful.
</p>

<p>
Finally, I'm currently synchronising org files across devices with git. This sucks, and I want to swap to Syncthing as part of this.
</p>

<hr />

<p>
OK, that was a lot of words. I'm kind of using this document as a brain dump, so apologies for that in advance. I think though, I have a good idea of what I want to do to improve my experience in Org now. So, it's time to get to work.
</p>
</div>
</div>

<div class="outline-2">
<h2 id="structuring">Structuring</h2>
<div class="outline-text-2">
<p>
We need a cool project name for this workflow. Because why not. I'm in a phase of naming things after alchemical/hermetic terms currently (see <a href="https://git.cyan.sh/BirDt/animus">animus</a> and <a href="https://git.cyan.sh/BirDt/ouroboros-emacs-themes">ouroboros-emacs-themes</a>) so let's stick with that theme - I'll call it "org-logos".
</p>

<p>
My Emacs configuration depends on <code>straight</code>, and I will be using it here along with <code>use-package</code>. Besides that, I like to keep everything as self-contained as possible. If I'm referencing a package I have installed globally and not as part of this specific workflow, I'll bring this up here.
</p>

<p>
The best place to start is with configuring <code>org-mode</code> itself, before getting into any additional packages. This comes in 2 parts; one is changing a bunch of variables, and the other is adding an initialisation function which calls a bunch of other functions as a hook. Let's start with the latter.
</p>

<div class="org-src-container">
<pre class="src src-elisp">(<span class="org-keyword">defun</span> <span class="org-function-name">org-mode-init</span> ()
  <span class="org-doc">"This is called through org-mode-hook, so that I don't need to add-hook 20 million times."</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">I want org to display pictures inline.
</span>  (org-display-inline-images)
  <span class="org-comment-delimiter">;; </span><span class="org-comment">I don't want monospace text by default.
</span>(variable-pitch-mode))

(add-hook 'org-mode-hook #'org-mode-init)
</pre>
</div>

<p>
Regarding <code>variable-pitch-mode</code>, <a href="https://git.cyan.sh/BirDt/ouroboros-emacs-themes">ouroboros-emacs-themes</a> already supports this across all themes, including monospace formatting for code blocks and verbatims, so I won't go into my configuration for that here.
</p>

<p>
We'll add more lines to this as we go along. For now this is a good place to start. Onto the variable changes next.
</p>

<div class="org-src-container">
<pre class="src src-elisp">(<span class="org-keyword">setq</span> org-log-done 'time <span class="org-comment-delimiter">;; </span><span class="org-comment">I want to keep track of the time tasks are completed.
</span>    org-return-follows-link t <span class="org-comment-delimiter">;; </span><span class="org-comment">I want to be able to follow links easily.
</span>    org-hide-emphasis-markers t <span class="org-comment-delimiter">;; </span><span class="org-comment">This is a big one: hide markup syntax like ** and //.
</span>    org-pretty-entities t <span class="org-comment-delimiter">;; </span><span class="org-comment">These two variables together render latex entities as UTF8, which means that Greek letters, subscript, and superscript are all rendered correctly.
</span>    org-pretty-entities-include-sub-superscripts t
    org-enforce-todo-dependencies t <span class="org-comment-delimiter">;; </span><span class="org-comment">Prevent changing a parent to DONE if the children aren't
</span>    org-enforce-todo-checkbox-dependencies t
    org-agenda-skip-scheduled-if-done t <span class="org-comment-delimiter">;; </span><span class="org-comment">Don't show done stuff in the agenda view
</span>    org-agenda-skip-deadline-if-done t
    org-agenda-skip-timestamp-if-done t
    org-todo-keywords '((sequence <span class="org-string">"TODO"</span> <span class="org-string">"WIP"</span> <span class="org-string">"DELEGATED"</span> <span class="org-string">"WAITING"</span> <span class="org-string">"|"</span> <span class="org-string">"CANCELLED"</span> <span class="org-string">"DONE"</span>)) <span class="org-comment-delimiter">;; </span><span class="org-comment">Some extra keywords in addition to TODO and DONE
</span>    org-refile-targets '((org-agenda-files <span class="org-builtin">:maxlevel</span> . 2)) <span class="org-comment-delimiter">;; </span><span class="org-comment">Allow any agenda files to be refile targets
</span>    )
</pre>
</div>

<p>
I want to keep all my org agenda files in <code>~/.org</code>, so I'll be hard-coding that value for this next variable:
</p>

<div class="org-src-container">
<pre class="src src-elisp">(<span class="org-keyword">setq</span> org-cite-global-bibliography '(<span class="org-string">"~/.org/global.bib"</span>) <span class="org-comment-delimiter">;; </span><span class="org-comment">Global bibliography location)</span>
</pre>
</div>
</div>

<div class="outline-3">
<h3 id="agenda-and-the-exobrain-organisation">Agenda and The Exobrain - Organisation</h3>
<div class="outline-text-3">
<p>
Since I'm already looking at the org-agenda-files variable, this might be a good time to think about the structure of my agenda files and PKDB. Let's abstract a little.
</p>

<p>
There is an <a href="https://www.worthe-it.co.za/blog/2025-05-04-my-exobrain.html">excellent article by Justin Wernick</a> about his exobrain, and another good workshop on <a href="https://guildoftherose.org/workshops/creating-an-exobrain">Guild of the Rose</a> about the same topic. There are essentially three components that I want:
</p>
<ol class="org-ol">
<li>Task tracking and management: this is what org agenda is currently useful for.</li>
<li>Note taking: this is what most people use <code>org-roam</code> for.</li>
<li>Knowledge refinement: this is what I've been using <code>org-roam</code> for, and where things like mini-essays come in. Flashcards can also fall into this category.</li>
</ol>

<p>
Here's the issue that I've realised while writing this post: Zettelkasten is a great methodology for taking notes, specifically short-hand notes, but it's a terrible methodology for long-form knowledge storage <i>in my opinion</i>. I really want to stress that this is just my personal view - everyone's brains work different - but for example having I've been treating <code>org-roam</code> like a wiki with 1 node for each topic (1 for Python, 1 for SQL, etc). I think that having 1 node for an individual snippet of information, and linking everything with index cards, will be much more useful for synthesis at the refinement stage. That way I can also see backlinks being helpful for me.
</p>

<p>
OK, so what can I use to cover the knowledge refinement step? Well, I don't think it needs anything complex: in fact I think splitting the <code>org-roam</code> directory into multiple folders is the solution here.
</p>
</div>
</div>

<div class="outline-3">
<h3 id="prettifying">Prettifying</h3>
<div class="outline-text-3">
<p>
Before we get too stuck in on exobrain optimisation, let's first add some basic user experience enhancements. I like using <code>org-modern</code>, but I also want to fix some minor code block formatting issues that I have with <code>org-indent-mode</code>.
</p>

<div class="org-src-container">
<pre class="src src-elisp">  (<span class="org-keyword">use-package</span> org-modern
  <span class="org-builtin">:hook</span> ((org-mode . org-modern-mode)
         (org-agenda-finalize . org-modern-agenda)))

(<span class="org-keyword">use-package</span> org-modern-indent
  <span class="org-builtin">:straight</span> (org-modern-indent <span class="org-builtin">:type</span> git <span class="org-builtin">:host</span> github <span class="org-builtin">:repo</span> <span class="org-string">"jdtsmith/org-modern-indent"</span>)
  <span class="org-builtin">:hook</span> ((org-mode . org-modern-indent-mode)))

</pre>
</div>

<p>
Also need to set <code>org-startup-indented</code> to <code>t</code> in the big <code>setq</code> block. I also want <code>wc-mode</code>, as stated before.
</p>

<div class="org-src-container">
<pre class="src src-elisp">(<span class="org-keyword">use-package</span> wc-mode
  <span class="org-builtin">:hook</span> ((org-mode . wc-mode))
  <span class="org-builtin">:config</span> (<span class="org-keyword">setq</span> wc-modeline-format <span class="org-string">"WC[%tw]"</span>))
</pre>
</div>

<p>
That about covers everything I need or want as far as beautification is concerned.
</p>
</div>
</div>

<div class="outline-3">
<h3 id="generally-useful-stuff">Generally Useful Stuff</h3>
<div class="outline-text-3">
<p>
I want to work a bit on the stuff that's going to be generally useful no matter the form of writing.
</p>

<p>
Let's start with what's been bothering me the most: sentence-based navigation and word/sentence selection. Emacs already has a <code>backward-</code> and <code>forward-sentence</code> function but they don't work for me - they jump to the start and end of the paragraph. The reason for this is <a href="https://emacs.stackexchange.com/questions/71972/why-is-forward-sentence-moving-the-cursor-to-the-end-of-the-paragraph-and-not-wo">very simple</a> and very (in my opinion) stupid: <code>sentence-end-double-space</code> is <code>t</code> by default, which means that a sentence needs to end with two spaces following a period for Emacs to recognise it. Easy enough fix, just <code>setq</code> to <code>nil</code>.
</p>

<p>
With that fixed, we can have some fun with creating custom marking functions for sentences and words, since those don't behave properly either (by design).
</p>

<div class="org-src-container">
<pre class="src src-elisp">  (<span class="org-keyword">defun</span> <span class="org-function-name">mark-whole-word</span> ()
  <span class="org-doc">"Marks the whole word underneath the cursor."</span>
  (<span class="org-keyword">interactive</span>)
  (forward-word)
  (set-mark-command nil)
  (backward-word))

(<span class="org-keyword">defun</span> <span class="org-function-name">mark-sentence</span> ()
  <span class="org-doc">"Marks the entire sentence underneath the cursor."</span>
  (<span class="org-keyword">interactive</span>)
  (forward-sentence)
  (set-mark-command nil)
  (backward-sentence))
</pre>
</div>

<p>
Let's also have some fun with re-ordering sentences and paragraphs. These aren't perfect (for example, paragraph moving can be messy with code blocks) but they're "good enough". I've even made them compatible with <code>C-u</code>.
</p>

<div class="org-src-container">
<pre class="src src-elisp">  (<span class="org-keyword">defun</span> <span class="org-function-name">move-sentence-right</span> (<span class="org-type">&amp;optional</span> arg)
  <span class="org-doc">"Moves the whole sentence to the right of the next sentence."</span>
  (<span class="org-keyword">interactive</span> <span class="org-string">"^p"</span>)
  (<span class="org-keyword">or</span> arg (<span class="org-keyword">setq</span> arg 1))
  (<span class="org-keyword">while</span> (&gt; arg 0)
    (forward-sentence)
    (backward-sentence)
    (left-char) <span class="org-comment-delimiter">;; </span><span class="org-comment">Capture previous space
</span>    (kill-sentence)
    (forward-sentence)
    (yank)
    (backward-sentence)
    (<span class="org-keyword">setq</span> arg (1- arg))))

(<span class="org-keyword">defun</span> <span class="org-function-name">move-sentence-left</span> (<span class="org-type">&amp;optional</span> arg)
  <span class="org-doc">"Moves the whole sentence to the left of the previous sentence."</span>
  (<span class="org-keyword">interactive</span> <span class="org-string">"^p"</span>)
  (<span class="org-keyword">or</span> arg (<span class="org-keyword">setq</span> arg 1))
  (<span class="org-keyword">while</span> (&gt; arg 0)
    (forward-sentence)
    (backward-sentence)
    (left-char) <span class="org-comment-delimiter">;; </span><span class="org-comment">Capture previous space
</span>    (kill-sentence)
    (backward-sentence)
    (left-char) <span class="org-comment-delimiter">;; </span><span class="org-comment">Capture previous space
</span>    (yank)
    (backward-sentence)
    (<span class="org-keyword">setq</span> arg (1- arg))))

(<span class="org-keyword">defun</span> <span class="org-function-name">move-paragraph-up</span> (<span class="org-type">&amp;optional</span> arg)
  <span class="org-doc">"Moves the whole paragraph above the previous paragraph."</span>
  (<span class="org-keyword">interactive</span> <span class="org-string">"^p"</span>)
  (<span class="org-keyword">or</span> arg (<span class="org-keyword">setq</span> arg 1))
  (<span class="org-keyword">while</span> (&gt; arg 0)
    (forward-paragraph)
    (backward-paragraph)
    (kill-paragraph nil)
    (backward-paragraph)
    (yank)
    (backward-paragraph)
    (<span class="org-keyword">setq</span> arg (1- arg))))

(<span class="org-keyword">defun</span> <span class="org-function-name">move-paragraph-down</span> (<span class="org-type">&amp;optional</span> arg)
  <span class="org-doc">"Moves the whole paragraph above the previous paragraph."</span>
  (<span class="org-keyword">interactive</span> <span class="org-string">"^p"</span>)
  (<span class="org-keyword">or</span> arg (<span class="org-keyword">setq</span> arg 1))
  (<span class="org-keyword">while</span> (&gt; arg 0)
    (forward-paragraph)
    (backward-paragraph)
    (kill-paragraph nil)
    (forward-paragraph)
    (yank)
    (backward-paragraph)
    (<span class="org-keyword">setq</span> arg (1- arg))))
</pre>
</div>

<p>
If you're not aware, you can already narrow the buffer to a paragraph with <code>narrow-to-defun</code>. That's not enough to give me "focused rewriting" by itself though. Let's implement that next, by copying from <a href="https://www.youtube.com/watch?v=E-yk_V5TnNU">this video</a>.
</p>

<div class="org-src-container">
<pre class="src src-elisp">(<span class="org-keyword">defun</span> <span class="org-function-name">break-out-sentence</span> ()
  <span class="org-doc">"Breaks a sentence out into it's own buffer for editing."</span>
  (<span class="org-keyword">interactive</span>)
  (backward-sentence)
  (kill-sentence)
  (<span class="org-keyword">let</span> ((buf (generate-new-buffer <span class="org-string">"*break-out*"</span>))
      (window (split-window-below -10)))
    (set-window-buffer window buf)
    (select-window window))
  (erase-buffer)
  (yank)
  (org-mode))

(<span class="org-keyword">defun</span> <span class="org-function-name">break-out-choose-sentence</span> ()
  <span class="org-doc">"Chooses a sentence from the break-out buffer."</span>
  (<span class="org-keyword">interactive</span>)
  (backward-sentence)
  (kill-sentence)
  (other-window -1)
  (yank)
  (select-window (get-buffer-window <span class="org-string">"*break-out*"</span>))
  (kill-buffer-and-window))
</pre>
</div>

<p>
Powerthesaurus is next. I don't need such a complex configuration for this.
</p>

<div class="org-src-container">
<pre class="src src-elisp">(<span class="org-keyword">use-package</span> powerthesaurus
  <span class="org-builtin">:bind</span> (<span class="org-string">"C-x t"</span> . powerthesaurus-transient))
</pre>
</div>

<p>
I'm going to use <code>C-c o</code> as my personal command prefix in Org, but Powerthesaurus is generally useful everywhere so I want to keep it on an easily accessible binding. On that note:
</p>

<div class="org-src-container">
<pre class="src src-elisp">  (<span class="org-keyword">defun</span> <span class="org-function-name">break-out-dwim</span> ()
  <span class="org-doc">"Either break-out or choose sentency depending on buffer name."</span>
  (<span class="org-keyword">interactive</span>)
  (<span class="org-keyword">if</span> (equal (buffer-name) <span class="org-string">"*break-out*"</span>)
      (break-out-choose-sentence)
    (break-out-sentence)))

(define-key org-mode-map (kbd <span class="org-string">"C-c o b"</span>) #'break-out-dwim)
</pre>
</div>

<p>
Let's also bind some keys for the paragraph and sentence manipulation from before, and marking.
</p>

<div class="org-src-container">
<pre class="src src-elisp">(define-key org-mode-map (kbd <span class="org-string">"C-M-&lt;left&gt;"</span>) #'move-sentence-left)
(define-key org-mode-map (kbd <span class="org-string">"C-M-&lt;right&gt;"</span>) #'move-sentence-right)
(define-key org-mode-map (kbd <span class="org-string">"C-M-&lt;up&gt;"</span>) #'move-paragraph-up)
(define-key org-mode-map (kbd <span class="org-string">"C-M-&lt;down&gt;"</span>) #'move-paragraph-down)

(define-key org-mode-map (kbd <span class="org-string">"C-@"</span>) #'mark-whole-word)
(define-key org-mode-map (kbd <span class="org-string">"M-@"</span>) #'mark-sentence)
</pre>
</div>

<p>
I also want to put all of these manipulation keys into a transient menu.
</p>

<div class="org-src-container">
<pre class="src src-elisp">(<span class="org-keyword">require</span> '<span class="org-constant">transient</span>)

(transient-define-prefix reorder-transient ()
  <span class="org-string">"Transient menu for text re-ordering commands."</span>
  [<span class="org-string">"Move sentence..."</span> (<span class="org-string">"l"</span> <span class="org-string">"Left"</span> move-sentence-left)
   (<span class="org-string">"r"</span> <span class="org-string">"Right"</span> move-sentence-right)]
  [<span class="org-string">"Move paragraph..."</span> (<span class="org-string">"u"</span> <span class="org-string">"Up"</span> move-paragraph-up)
   (<span class="org-string">"d"</span> <span class="org-string">"Down"</span> move-paragraph-down)])

(transient-define-prefix mark-menu-transient ()
  <span class="org-string">"Transient menu for marking units of text."</span>
  [<span class="org-string">"Mark"</span> (<span class="org-string">"w"</span> <span class="org-string">"Word"</span> mark-whole-word)
   (<span class="org-string">"s"</span> <span class="org-string">"Sentence"</span> mark-sentence)
   (<span class="org-string">"p"</span> <span class="org-string">"Paragraph"</span> mark-paragraph)
   (<span class="org-string">"b"</span> <span class="org-string">"Buffer"</span> mark-whole-buffer)])

(define-key org-mode-map (kbd <span class="org-string">"C-c o SPC"</span>) #'mark-menu-transient)
(define-key org-mode-map (kbd <span class="org-string">"C-c o r"</span>) #'reorder-transient)
</pre>
</div>

<p>
Apparently this wouldn't be a post on my blog without glazing Harper, so let's add that in here quickly.
</p>

<div class="org-src-container">
<pre class="src src-elisp">(<span class="org-keyword">when</span> (<span class="org-keyword">and</span> (not (equal system-type 'windows-nt)) (locate-file <span class="org-string">"harper-ls"</span> exec-path))
  (<span class="org-keyword">with-eval-after-load</span> 'eglot
    (add-to-list 'eglot-server-programs
               '(org-mode . (<span class="org-string">"harper-ls"</span> <span class="org-string">"--stdio"</span>))))

  (<span class="org-keyword">setq-default</span> eglot-workspace-configuration
              '(<span class="org-builtin">:harper-ls</span> (<span class="org-builtin">:dialect</span> <span class="org-string">"Australian"</span>)))

  (add-hook 'org-mode-hook 'eglot-ensure))
</pre>
</div>

<p>
If you're curious, these are my bindings for using Eglot with Flymake to fix up errors. These are globally useful bindings, so I won't add them into the document here.
</p>

<div class="org-src-container">
<pre class="src src-elisp">(global-set-key (kbd <span class="org-string">"M-g &lt;left&gt;"</span>) 'flymake-goto-prev-error)
(global-set-key (kbd <span class="org-string">"M-g &lt;right&gt;"</span>) 'flymake-goto-next-error)
(global-set-key (kbd <span class="org-string">"C-x M-f"</span>) 'eglot-code-actions)
</pre>
</div>

<p>
Also a good idea to set up <code>company</code> with all the right backends.
</p>

<div class="org-src-container">
<pre class="src src-elisp">(<span class="org-keyword">defun</span> <span class="org-function-name">org-mode-company-hook</span> ()
    <span class="org-doc">"Set company backends for `</span><span class="org-doc"><span class="org-constant">org-mode</span></span><span class="org-doc">' usage."</span>
    (<span class="org-keyword">setq-local</span> company-backends
            '((company-capf company-dabbrev company-files company-ispell))))
(add-hook 'org-mode-hook #'org-mode-company-hook)
</pre>
</div>

<p>
That seems to be all the generally applicable stuff, except for text style metrics which I'm putting off indefinitely because I'm too stupid/lazy to implement it. Now it's time for the other thing I've been too lazy to touch.
</p>
</div>
</div>

<div class="outline-3">
<h3 id="exobrain-1-task-management">Exobrain 1: Task Management</h3>
<div class="outline-text-3">
<p>
Task management needs to be logically organised, and after a lot of thinking I've arrived on something that's a mix of GTD, PARA, and <a href="https://www.worthe-it.co.za/blog/2025-05-04-my-exobrain.html">Justin Wernick's system</a>.
</p>

<p>
First we need an inbox/capture step. In my <code>~/.org</code> directory, I'm going to have a directory structure like so:
</p>

<pre class="example">
.
├── lore
│   ├── raw
│   └── refined
│       ├── journal
│       └── wiki
└── tasks
    ├── maintenance
    └── projects
	└── career
</pre>

<p>
I'll touch on <code>lore</code> in the next two Exobrain sections, <code>tasks</code> is what's important here. Outside of this structure, I have <code>~/.org/inbox.org</code>, which is where I will dump absolutely everything from new tasks to quick notes. All of this will be refiled to the right place later.
</p>

<p>
Each file in maintenance is for tracking related tasks, such as house related stuff, and has a short preface to detail the area it refers to, followed by sections for scheduled tasks ("Calendar"), one-off tasks ("TO-DO"), recurring tasks ("Routines"), and finished tasks ("Archive"). I never really want to delete any tasks that build up (although I may modify recurring tasks instead of creating a new task) because you never truly know if you'll need that context in the future.
</p>

<p>
Projects are similar to maintenance tasks, except each of the above sections is a level 2 heading under a level 1 "Work" section (which also has a TO-DO state). There are also level 1 sections for acceptance criteria and ideas relevant to the project. Career projects are just tasks for my current job - I want to keep these separate from other tasks.
</p>

<p>
It seems like a pain to manually specify each file here as an agenda file, so let's do it <a href="https://www.reddit.com/r/orgmode/comments/6q6cdk/comment/dkvokt1/?utm_source=share&amp;utm_medium=web3x&amp;utm_name=web3xcss&amp;utm_term=1&amp;utm_content=share_button">automatically</a>.
</p>

<div class="org-src-container">
<pre class="src src-elisp">(<span class="org-keyword">setq</span> org-agenda-files (apply 'append (mapcar
                                 (<span class="org-keyword">lambda</span> (dir)
                                   (directory-files-recursively dir org-agenda-file-regexp))
                                 '(<span class="org-string">"~/.org/tasks"</span>))))
</pre>
</div>

<p>
I also want to make some functions for creating new maintenance areas and projects.
</p>

<div class="org-src-container">
<pre class="src src-elisp">(<span class="org-keyword">defun</span> <span class="org-function-name">new-maintenance-file</span> (maintenance-area)
  <span class="org-doc">"Create a new maintenance file for a given `</span><span class="org-doc"><span class="org-constant">MAINTENANCE-AREA</span></span><span class="org-doc">'."</span>
  (<span class="org-keyword">interactive</span> <span class="org-string">"sMaintenance area is: "</span>)
  (find-file (concat <span class="org-string">"~/.org/tasks/maintenance/"</span> maintenance-area <span class="org-string">".org"</span>))
  (insert <span class="org-string">"\n\n* Calendar\n\n* TO-DO\n\n* Routines\n\n* Archive\n"</span>)
  (goto-char (point-min)))

(<span class="org-keyword">defun</span> <span class="org-function-name">new-project-file</span> (project-name acceptance-criteria)
  <span class="org-doc">"Create a new project file for a given `</span><span class="org-doc"><span class="org-constant">PROJECT-NAME</span></span><span class="org-doc">', with some `</span><span class="org-doc"><span class="org-constant">ACCEPTANCE-CRITERIA</span></span><span class="org-doc">'."</span>
  (find-file (concat <span class="org-string">"~/.org/tasks/projects/"</span> project-name <span class="org-string">".org"</span>))
  (insert (concat <span class="org-string">"\n\n* Acceptance Criteria\n\n"</span> acceptance-criteria <span class="org-string">"\n\n* Ideas\n\n* TODO Work\n\n** Calendar\n\n** TO-DO\n\n** Routines\n\n** Archive\n"</span>))
  (goto-char (point-min)))

(<span class="org-keyword">defun</span> <span class="org-function-name">new-generic-project</span> (project-name acceptance-criteria)
  <span class="org-doc">"Interactive wrapper for `</span><span class="org-doc"><span class="org-constant">new-project-file</span></span><span class="org-doc">', for generic projects."</span>
  (<span class="org-keyword">interactive</span> <span class="org-string">"sProject name is: \nsAcceptance criteria is: "</span>)
  (new-project-file project-name acceptance-criteria))

(<span class="org-keyword">defun</span> <span class="org-function-name">new-career-project</span> (project-name acceptance-criteria)
  <span class="org-doc">"Interactive wrapper for `</span><span class="org-doc"><span class="org-constant">new-project-file</span></span><span class="org-doc">', for career projects."</span>
  (<span class="org-keyword">interactive</span> <span class="org-string">"sProject name is: \nsAcceptance criteria is: "</span>)
  (new-project-file (concat <span class="org-string">"career/"</span> project-name) acceptance-criteria))
</pre>
</div>

<p>
Now while we do have an inbox file, sometimes I know where something needs to go already and when I capture I would like to be able to specify the target location. This function can do that:
</p>

<div class="org-src-container">
<pre class="src src-elisp">(<span class="org-keyword">require</span> '<span class="org-constant">subr-x</span>)

(<span class="org-keyword">defun</span> <span class="org-function-name">select-task-area</span> (location headline)
  <span class="org-doc">"Prompt for a file in ~/.org/tasks/maintenance/ to insert the capture."</span>
  (<span class="org-keyword">let*</span> ((files (directory-files (concat <span class="org-string">"~/.org/tasks/"</span> location) t <span class="org-string">"\\.org$"</span>))
       (choices (mapcar
                 (<span class="org-keyword">lambda</span> (x) (string-remove-suffix <span class="org-string">".org"</span> x))
                 (mapcar #'file-name-nondirectory files)))
       (selected (completing-read <span class="org-string">"Choose a file: "</span> choices nil t)))
  (set-buffer (org-capture-target-buffer (concat <span class="org-string">"~/.org/tasks/"</span> location selected <span class="org-string">".org"</span>)))
  (org-capture-put-target-region-and-position)
  (widen)
  (goto-char (point-min))
  (<span class="org-keyword">setq</span> headline (org-capture-expand-headline headline))
  (re-search-forward (format org-complex-heading-regexp-format
                             (regexp-quote headline))
                     nil t)
  (forward-line 0)))


(<span class="org-keyword">defun</span> <span class="org-function-name">select-maintenance-area</span> (headline)
  (select-task-area <span class="org-string">"maintenance/"</span> headline))

(<span class="org-keyword">defun</span> <span class="org-function-name">select-project</span> (headline)
  (select-task-area <span class="org-string">"projects/"</span> headline))

(<span class="org-keyword">defun</span> <span class="org-function-name">select-career-project</span> (headline)
  (select-task-area <span class="org-string">"projects/career/"</span> headline))
</pre>
</div>

<p>
The astute Emacs guru may realise this is absolutely disgusting. It also doesn't work properly, and gives a bunch of <code>cl-assertion-failed</code> errors on <code>C-c C-c</code>. It also widens to the entire org file after insertion. So it's not exactly smooth, but it does the job.
</p>

<p>
Anyway, we can use this to make capture templates now.
</p>

<div class="org-src-container">
<pre class="src src-elisp">(<span class="org-keyword">setq</span> org-capture-templates
      '((<span class="org-string">"i"</span> <span class="org-string">"Idea"</span>)
      (<span class="org-string">"ii"</span> <span class="org-string">"Generic"</span> entry
       (file <span class="org-string">"~/.org/inbox.org"</span>)
       <span class="org-string">"* %^{TITLE} :idea: \n:Created: %T\n%?"</span>
       <span class="org-builtin">:empty-lines</span> 1)
      (<span class="org-string">"ip"</span> <span class="org-string">"Project"</span> entry
       (<span class="org-keyword">function</span> (<span class="org-keyword">lambda</span> () (select-project <span class="org-string">"Ideas"</span>)))
       <span class="org-string">"* %^{TITLE} \n:Created: %T\n%?"</span>
       <span class="org-builtin">:empty-lines</span> 1)
      (<span class="org-string">"ic"</span> <span class="org-string">"Career"</span> entry
       (<span class="org-keyword">function</span> (<span class="org-keyword">lambda</span> () (select-career-project <span class="org-string">"Ideas"</span>)))
       <span class="org-string">"* %^{TITLE} \n:Created: %T\n%?"</span>
       <span class="org-builtin">:empty-lines</span> 1)

      (<span class="org-string">"t"</span> <span class="org-string">"Task"</span>)
      (<span class="org-string">"tt"</span> <span class="org-string">"Generic"</span>)
      (<span class="org-string">"ttt"</span> <span class="org-string">"Raw"</span> entry
       (file <span class="org-string">"~/.org/inbox.org"</span>)
       <span class="org-string">"* TODO [%^{priority|#A|#B|#C|#D}] %^{TITLE} :task:\n:Created: %T\n%?"</span>
       <span class="org-builtin">:empty-lines</span> 1)
      (<span class="org-string">"ttm"</span> <span class="org-string">"Maintenance"</span> entry
       (<span class="org-keyword">function</span> (<span class="org-keyword">lambda</span> () (select-maintenance-area <span class="org-string">"TO-DO"</span>)))
       <span class="org-string">"* TODO [%^{priority|#A|#B|#C|#D}] %^{TITLE}\n:Created: %T\n%?"</span>
       <span class="org-builtin">:empty-lines</span> 1)
      (<span class="org-string">"ttp"</span> <span class="org-string">"Project"</span> entry
       (<span class="org-keyword">function</span> (<span class="org-keyword">lambda</span> () (select-project <span class="org-string">"TO-DO"</span>)))
       <span class="org-string">"* TODO [%^{priority|#A|#B|#C|#D}] %^{TITLE}\n:Created: %T\n%?"</span>
       <span class="org-builtin">:empty-lines</span> 1)
      (<span class="org-string">"ttc"</span> <span class="org-string">"Career"</span> entry
       (<span class="org-keyword">function</span> (<span class="org-keyword">lambda</span> () (select-career-project <span class="org-string">"TO-DO"</span>)))
       <span class="org-string">"* TODO [%^{priority|#A|#B|#C|#D}] %^{TITLE}\n:Created: %T\n%?"</span>
       <span class="org-builtin">:empty-lines</span> 1)
      (<span class="org-string">"ts"</span> <span class="org-string">"Scheduled"</span>)
      (<span class="org-string">"tss"</span> <span class="org-string">"Raw"</span> entry
       (file <span class="org-string">"~/.org/inbox.org"</span>)
       <span class="org-string">"* TODO [%^{priority|#A|#B|#C|#D}] %^{TITLE} :scheduled:\n:SCHEDULED: %^T\n%?"</span>
       <span class="org-builtin">:empty-lines</span> 1
       <span class="org-builtin">:time-prompt</span> t)
      (<span class="org-string">"tsm"</span> <span class="org-string">"Maintenance"</span> entry
       (<span class="org-keyword">function</span> (<span class="org-keyword">lambda</span> () (select-maintenance-area <span class="org-string">"Calendar"</span>)))
       <span class="org-string">"* TODO [%^{priority|#A|#B|#C|#D}] %^{TITLE} \n:SCHEDULED: %^T\n%?"</span>
       <span class="org-builtin">:empty-lines</span> 1
       <span class="org-builtin">:time-prompt</span> t)
      (<span class="org-string">"tsp"</span> <span class="org-string">"Project"</span> entry
       (<span class="org-keyword">function</span> (<span class="org-keyword">lambda</span> () (select-project <span class="org-string">"Calendar"</span>)))
       <span class="org-string">"* TODO [%^{priority|#A|#B|#C|#D}] %^{TITLE} \n:SCHEDULED: %^T\n%?"</span>
       <span class="org-builtin">:empty-lines</span> 1
       <span class="org-builtin">:time-prompt</span> t)
      (<span class="org-string">"tsc"</span> <span class="org-string">"Career"</span> entry
       (<span class="org-keyword">function</span> (<span class="org-keyword">lambda</span> () (select-career-project <span class="org-string">"Calendar"</span>)))
       <span class="org-string">"* TODO [%^{priority|#A|#B|#C|#D}] %^{TITLE} \n:SCHEDULED: %^T\n%?"</span>
       <span class="org-builtin">:empty-lines</span> 1
       <span class="org-builtin">:time-prompt</span> t)

      (<span class="org-string">"n"</span> <span class="org-string">"Note"</span>)
      (<span class="org-string">"nn"</span> <span class="org-string">"Raw"</span> entry
       (file <span class="org-string">"~/.org/inbox.org"</span>)
       <span class="org-string">"* %^{TITLE} :note: \n:Created: %T\n%?"</span>
       <span class="org-builtin">:empty-lines</span> 1)
      (<span class="org-string">"nm"</span> <span class="org-string">"Meeting"</span>)
      (<span class="org-string">"nmm"</span> <span class="org-string">"Raw"</span> entry
       (file <span class="org-string">"~/.org/inbox.org"</span>)
       <span class="org-string">"* %^{TITLE} :meeting: \n:Created: %T\n%?"</span>
       <span class="org-builtin">:clock-in</span> t
       <span class="org-builtin">:clock-resume</span> t)
      (<span class="org-string">"nmc"</span> <span class="org-string">"Career"</span> entry
       (<span class="org-keyword">function</span> (<span class="org-keyword">lambda</span> () (select-career-project <span class="org-string">"Calendar"</span>)))
       <span class="org-string">"* %^{TITLE} \n:Created: %T\n%?"</span>
       <span class="org-builtin">:empty-lines</span> 1
       <span class="org-builtin">:clock-in</span> t
       <span class="org-builtin">:clock-resume</span> t)))
</pre>
</div>

<p>
Wow that's a lot of words! It's a bit messy (it could definitely be better by putting all the magic strings into variables) but it gets the job done. One final thing, I want to expose all of these commands under a transient menu, and make some bindings for <code>org-capture</code> and <code>org-agenda</code>.
</p>

<div class="org-src-container">
<pre class="src src-elisp">(<span class="org-keyword">defun</span> <span class="org-function-name">open-inbox</span> ()
  <span class="org-doc">"Opens `</span><span class="org-doc"><span class="org-constant">~/.org/inbox.org</span></span><span class="org-doc">'"</span>
  (<span class="org-keyword">interactive</span>)
  (find-file <span class="org-string">"~/.org/inbox.org"</span>))

(<span class="org-keyword">defun</span> <span class="org-function-name">open-maintenance</span> ()
  <span class="org-doc">"Opens `</span><span class="org-doc"><span class="org-constant">~/.org/tasks/maintenance/</span></span><span class="org-doc">'"</span>
  (<span class="org-keyword">interactive</span>)
  (find-file <span class="org-string">"~/.org/tasks/maintenance/"</span>))

(<span class="org-keyword">defun</span> <span class="org-function-name">open-projects</span> ()
  <span class="org-doc">"Opens `</span><span class="org-doc"><span class="org-constant">~/.org/tasks/projects/</span></span><span class="org-doc">'"</span>
  (<span class="org-keyword">interactive</span>)
  (find-file <span class="org-string">"~/.org/tasks/projects/"</span>))

(<span class="org-keyword">defun</span> <span class="org-function-name">open-career</span> ()
  <span class="org-doc">"Opens `</span><span class="org-doc"><span class="org-constant">~/.org/tasks/projects/career/</span></span><span class="org-doc">'"</span>
  (<span class="org-keyword">interactive</span>)
  (find-file <span class="org-string">"~/.org/tasks/projects/career/"</span>))

(transient-define-prefix task-management-menu ()
  <span class="org-string">"Transient menu for task management shortcuts."</span>
  [<span class="org-string">"Go To"</span> (<span class="org-string">"i"</span> <span class="org-string">"Inbox"</span> open-inbox)
   (<span class="org-string">"m"</span> <span class="org-string">"Maintenance Directory"</span> open-maintenance)
   (<span class="org-string">"p"</span> <span class="org-string">"Projects Directory"</span> open-projects)
   (<span class="org-string">"c"</span> <span class="org-string">"Career Directory"</span> open-career)]
  [<span class="org-string">"Create New"</span> (<span class="org-string">"M"</span> <span class="org-string">"Maintenance File"</span> new-maintenance-file)
   (<span class="org-string">"P"</span> <span class="org-string">"Project"</span> new-generic-project)
   (<span class="org-string">"C"</span> <span class="org-string">"Career Project"</span> new-career-project)])

(define-key global-map (kbd <span class="org-string">"C-c o t"</span>) #'task-management-menu)  
(define-key global-map (kbd <span class="org-string">"C-c a"</span>) #'org-agenda)
(define-key global-map (kbd <span class="org-string">"C-c a"</span>) #'org-capture)
</pre>
</div>

<p>
And in terms of task management, that's pretty much it. I'm going to ignore Outlook and Jira integration for now because it's a pain (especially if I want it to be portable), and Orgzly Revived will give me an interface to this on mobile (though without the capture templates obviously).
</p>
</div>
</div>

<div class="outline-3">
<h3 id="exobrain-2-note-taking">Exobrain 2: Note Taking</h3>
<div class="outline-text-3">
<p>
As I said earlier, my goal is to use <code>org-roam</code> for capturing notes and snippets, instead of using it as a wiki (which should be reserved for refinement), chained together by index cards. Both this "web" of raw notes and the journals from the next section should work with Logseq, so we need to do some configuration on that end. I'm following closely <a href="https://sbgrl.me/posts/logseq-org-roam-1/">this</a> blog, as well as <a href="https://coredumped.dev/2021/05/26/taking-org-roam-everywhere-with-logseq/">this</a> one. You may remember the previously mentioned structure of <code>~/.org</code> - all the raw notes I'm capturing with <code>org-roam</code> will be in <code>lore/raw</code>.
</p>

<div class="org-src-container">
<pre class="src src-elisp">(<span class="org-keyword">use-package</span> org-roam
  <span class="org-builtin">:straight</span> nil
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:init</span>
  (<span class="org-keyword">setq</span> org-roam-v2-ack t)
  <span class="org-builtin">:custom</span>
  (org-roam-directory (file-truename <span class="org-string">"~/.org/lore/raw/"</span>))
  (org-dailies-directory (file-truename <span class="org-string">"~/.org/refined/journal/"</span>))
  (org-roam-file-exclude-regexp <span class="org-string">"\\.git/.*</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">logseq/.*$"</span>)
  (org-roam-completion-everywhere)
  (org-roam-capture-templates
    '((<span class="org-string">"d"</span> <span class="org-string">"default"</span> plain
       <span class="org-string">"%?"</span>
       <span class="org-builtin">:target</span> (file+head <span class="org-string">"${slug}.org"</span> <span class="org-string">"#+title: ${title}\n"</span>)
       <span class="org-builtin">:unnarrowed</span> t)))
  (org-roam-dailies-capture-templates
    '((<span class="org-string">"d"</span> <span class="org-string">"default"</span> entry
       <span class="org-string">"* %?"</span>
       <span class="org-builtin">:target</span> (file+head <span class="org-string">"%&lt;%Y-%m-%d&gt;.org"</span> <span class="org-comment-delimiter">;; </span><span class="org-comment">format matches Logseq
</span>                          <span class="org-string">"#+title: %&lt;%Y-%m-%d&gt;\n"</span>))))
  <span class="org-builtin">:bind</span> ((<span class="org-string">"C-c n f"</span> . org-roam-node-find)
       (<span class="org-string">"C-c n i"</span> . org-roam-node-insert)
       <span class="org-builtin">:map</span> org-roam-dailies-map
       (<span class="org-string">"Y"</span> . org-roam-dailies-capture-yesterday)
       (<span class="org-string">"T"</span> . org-roam-dailies-capture-tomorrow))
  <span class="org-builtin">:bind-keymap</span> (<span class="org-string">"C-c n d"</span> . org-roam-dailies-map)
  <span class="org-builtin">:config</span>
  (<span class="org-keyword">require</span> '<span class="org-constant">org-roam-dailies</span>) <span class="org-comment-delimiter">;; </span><span class="org-comment">Ensure the keymap is available
</span>  (org-roam-db-autosync-mode))
</pre>
</div>

<p>
This configuration sets up all the binds for dailies and nodes. It also sets the filenames for <code>org-roam</code> notes and dailies to be the same as what Logseq is using. I should not that Logseq cannot have multiple pages directories, so it will never be usable for mini-essays, but I don't really care since long writing on a phone is terrible anyway.
</p>

<p>
I'm going to add a <code>(setq org-attach-id-dir "~/.org/lore/assets")</code> so that Logseq can store and see attachments. Logseq also has some interoperability kinks regarding links, but thankfully this package should sort everything out:
</p>

<div class="org-src-container">
<pre class="src src-elisp">(<span class="org-keyword">use-package</span> logseq-org-roam
  <span class="org-builtin">:straight</span> (<span class="org-builtin">:host</span> github
          <span class="org-builtin">:repo</span> <span class="org-string">"sbougerel/logseq-org-roam"</span>
          <span class="org-builtin">:files</span> (<span class="org-string">"*.el"</span>)))
</pre>
</div>

<p>
As some notes might go to the inbox, I want a function to refile them to <code>org-roam</code>. There's a <a href="https://org-roam.discourse.group/t/creating-an-org-roam-note-from-an-existing-headline/978">good forum thread</a> that has a great example for this functionality.
</p>

<div class="org-src-container">
<pre class="src src-elisp">(<span class="org-keyword">defun</span> <span class="org-function-name">org-roam-create-note-from-headline</span> ()
  <span class="org-doc">"Create an Org-roam note from the current headline and jump to it.

Normally, insert the headline&#8217;s title using the &#8217;#title:&#8217; file-level property
and delete the Org-mode headline. However, if the current headline has a
Org-mode properties drawer already, keep the headline and don&#8217;t insert
&#8216;#+title:'. Org-roam can extract the title from both kinds of notes, but using
&#8216;#+title:&#8217; is a bit cleaner for a short note, which Org-roam encourages."</span>
  (<span class="org-keyword">interactive</span>)
  (<span class="org-keyword">let</span> ((title (nth 4 (org-heading-components)))
        (has-properties (org-get-property-block)))
    (org-cut-subtree)
    (org-roam-find-file title nil nil 'no-confirm)
    (org-paste-subtree)
    (<span class="org-keyword">unless</span> has-properties
      (kill-line)
      (<span class="org-keyword">while</span> (outline-next-heading)
        (org-promote)))
    (goto-char (point-min))
    (<span class="org-keyword">when</span> has-properties
      (kill-line)
      (kill-line))))
</pre>
</div>

<p>
For now, I'm going to leave this as it is. I really need to live in this workflow to see how it feels and what changes need to be made. I will make a transient menu for all the <code>org-roam</code> functions however.
</p>

<div class="org-src-container">
<pre class="src src-elisp">(transient-define-prefix org-roam-menu ()
  <span class="org-string">"Transient menu for task management shortcuts."</span>
  [<span class="org-string">"Node"</span> (<span class="org-string">"f"</span> <span class="org-string">"Capture"</span> org-roam-node-find)
   (<span class="org-string">"i"</span> <span class="org-string">"Insert"</span> org-roam-node-insert)
   (<span class="org-string">"r"</span> <span class="org-string">"Refile"</span> org-roam-create-node-from-headline)
   (<span class="org-string">"v"</span> <span class="org-string">"Visit"</span> org-roam-node-visit)   ]
  [<span class="org-string">"Dailies"</span> (<span class="org-string">"t"</span> <span class="org-string">"Today"</span> org-roam-dailies-capture-today)
   (<span class="org-string">"y"</span> <span class="org-string">"Yesterday"</span> org-roam-dailies-capture-yesterday)
   (<span class="org-string">"n"</span> <span class="org-string">"Tomorrow"</span> org-roam-dailies-capture-tomorrow)]
  [<span class="org-string">"Logseq"</span> (<span class="org-string">"R"</span> <span class="org-string">"Fix links"</span> logseq-org-roam)])

(define-key global-map (kbd <span class="org-string">"C-c o n"</span>) #'org-roam-menu)
</pre>
</div>
</div>
</div>

<div class="outline-3">
<h3 id="exobrain-3-refinement">Exobrain 3: Refinement</h3>
<div class="outline-text-3">
<p>
Refinement covers three things in particular:
</p>
<ol class="org-ol">
<li>Journaling</li>
<li>Mini-essay writing and information "aggregation"</li>
<li>"Output", meaning anything that makes use of the information in a broader sense (such as proper essays, or even using my notes for work).</li>
</ol>

<p>
Journaling is already covered by <code>org-roam-dailies</code> and Logseq, so we'll skip it over. Mini essays, and proper essays, are where I can make some improvements. Firstly, I want to update my referencing workflow.
</p>

<p>
I use BibTeX to store all my sources when I'm working on a bigger writing project. Most of my references will sit in <code>global.bib</code>, unless I'm working on a self-contained project. There's two parts to making my citation workflow a bit nicer: first, I want to have some way of pulling source formatting automatically for resources like arXiv and doi.org, and second I want a transient menu for inserting references in BibTeX.
</p>

<p>
The first can be solved just by installing <code>biblio</code>, since it already allows pulling sources from doi and arXiv. Simple enough.
</p>

<div class="org-src-container">
<pre class="src src-elisp">(<span class="org-keyword">use-package</span> biblio)
</pre>
</div>

<p>
And done. Now for the transient menu. I want quick access to doi and arXiv - as well as quick access to some existing entry templates (mainly I'll use this for online resources).
</p>

<div class="org-src-container">
<pre class="src src-elisp">(<span class="org-keyword">defun</span> <span class="org-function-name">bibtex-online-entry</span> ()
  (<span class="org-keyword">interactive</span>)
  (bibtex-entry <span class="org-string">"Online"</span>))

(<span class="org-keyword">defun</span> <span class="org-function-name">bibtex-misc-entry</span> ()
  (<span class="org-keyword">interactive</span>)
  (bibtex-entry <span class="org-string">"Misc"</span>))

(<span class="org-keyword">defun</span> <span class="org-function-name">bibtex-software-entry</span> ()
  (<span class="org-keyword">interactive</span>)
  (bibtex-entry <span class="org-string">"Software"</span>))

(transient-define-prefix bibtex-transient-menu ()
  <span class="org-string">"Transient menu for task management shortcuts."</span>
  [<span class="org-string">"Biblio"</span> (<span class="org-string">"d"</span> <span class="org-string">"doi.org"</span> doi-insert-bibtex)
   (<span class="org-string">"x"</span> <span class="org-string">"arXiv"</span> arxiv-lookup)]
  [<span class="org-string">"Templates"</span> (<span class="org-string">"o"</span> <span class="org-string">"Online Resource"</span> bibtex-online-entry)
   (<span class="org-string">"m"</span> <span class="org-string">"Misc"</span> bibtex-misc-entry)
   (<span class="org-string">"s"</span> <span class="org-string">"Software"</span> bibtex-software-entry)])

(define-key bibtex-mode-map (kbd <span class="org-string">"C-c r"</span>) #'bibtex-transient-menu)
</pre>
</div>

<p>
Now I'm quite happy with my essay writing workflow already, but I wouldn't mind some extra helper functions for mini-essays. I actually want to make use of org-roam for this, so I'm going to slightly modify the configuration. First, the <code>org-roam-directory</code> will be changed to just <code>~/.org/lore</code>, then I'll update the capture template to push to raw. I'll create another capture template specifically for mini-essays - the goal here is to keep them discoverable within <code>org-roam</code>.
</p>

<div class="org-src-container">
<pre class="src src-elisp">(<span class="org-keyword">use-package</span> org-roam
<span class="org-builtin">:straight</span> nil
<span class="org-builtin">:ensure</span> t
<span class="org-builtin">:init</span>
(<span class="org-keyword">setq</span> org-roam-v2-ack t)
<span class="org-builtin">:custom</span>
(org-roam-directory (file-truename <span class="org-string">"~/.org/lore/"</span>))
(org-dailies-directory (file-truename <span class="org-string">"~/.org/lore/refined/journal/"</span>))
(org-roam-file-exclude-regexp <span class="org-string">"\\.git/.*</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">logseq/.*$"</span>)
(org-roam-completion-everywhere)
(org-roam-capture-templates
 '((<span class="org-string">"c"</span> <span class="org-string">"Raw"</span> plain
    <span class="org-string">"%?"</span>
    <span class="org-builtin">:target</span> (file+head <span class="org-string">"raw/${slug}.org"</span> <span class="org-string">"#+title: ${title}\n"</span>)
    <span class="org-builtin">:unnarrowed</span> t)
   (<span class="org-string">"r"</span> <span class="org-string">"Refined"</span>)
   (<span class="org-string">"rm"</span> <span class="org-string">"Mini-essay"</span> plain
    <span class="org-string">"%?"</span>
    <span class="org-builtin">:target</span> (file+head <span class="org-string">"refined/wiki/${slug}.org"</span> <span class="org-string">"#+title: ${title}\n#+author: Jakub Nowak"</span>)
    <span class="org-builtin">:unnarrowed</span> t)))
(org-roam-dailies-capture-templates
 '((<span class="org-string">"d"</span> <span class="org-string">"default"</span> entry
    <span class="org-string">"* %?"</span>
    <span class="org-builtin">:target</span> (file+head <span class="org-string">"%&lt;%Y-%m-%d&gt;.org"</span> <span class="org-comment-delimiter">;; </span><span class="org-comment">format matches Logseq
</span>                       <span class="org-string">"#+title: %&lt;%Y-%m-%d&gt;\n"</span>))))
<span class="org-builtin">:bind</span> ((<span class="org-string">"C-c n l"</span> . org-roam-buffer-toggle)
       (<span class="org-string">"C-c n f"</span> . org-roam-node-find)
       (<span class="org-string">"C-c n g"</span> . org-roam-graph)
       (<span class="org-string">"C-c n i"</span> . org-roam-node-insert)
       (<span class="org-string">"C-c n c"</span> . org-roam-capture)
       <span class="org-builtin">:map</span> org-roam-dailies-map
       (<span class="org-string">"Y"</span> . org-roam-dailies-capture-yesterday)
       (<span class="org-string">"T"</span> . org-roam-dailies-capture-tomorrow))
<span class="org-builtin">:bind-keymap</span> (<span class="org-string">"C-c n d"</span> . org-roam-dailies-map)
<span class="org-builtin">:config</span>
(<span class="org-keyword">require</span> '<span class="org-constant">org-roam-dailies</span>) <span class="org-comment-delimiter">;; </span><span class="org-comment">Ensure the keymap is available
</span>(org-roam-db-autosync-mode))
</pre>
</div>

<p>
Now that is essentially done. I may add extra templates for additional refinement stuff - index cards come to mind - but for now this is good enough.
</p>
</div>
</div>

<div class="outline-3">
<h3 id="stuff-i-didn-t-do">Stuff I Didn't Do</h3>
<div class="outline-text-3">
<p>
This was rather a lot of work, but I think I'm done with messing with this configuration for now. I did also set up Syncthing over the course of writing this post. There are some things that I left out as they're too annoying to implement for me currently, namely:
</p>
<ol class="org-ol">
<li>Something similar to Expresso</li>
<li>Dice and cards</li>
<li>Jira and Outlook integration with Agenda</li>
<li>A better system for worldbuilding</li>
</ol>

<p>
However I do feel like I addressed my main points of friction with <code>org-roam</code> - I feel comfortable getting more use out of it now that I have it available on mobile. In general it feels nicer to have everything be more organised.
</p>

<p>
So yeah, that's it. This was a bit of a messy journey that turned into a complete reorganisation of my life, but I hope you enjoyed it and got some useful things out of it as well. You can find the full configuration file <a href="https://git.cyan.sh/BirDt/org-logos/src/branch/master/logos.el">here</a>.
</p>
</div>
</div>
</div>
