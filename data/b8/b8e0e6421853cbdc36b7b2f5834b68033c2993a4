<p>Wanted to try out some code, but needed to ensure never checked in. Git pre-commit hooks are handy in this space. Add the following script to search for either @COMMITFAIL or @NOCOMMIT in the staged files. If found, attempts to commit will fail.</p>
<p>Based on <a href="https://gist.github.com/rex/223b4be50285f6b8b3e06dea50d15887">https://gist.github.com/rex/223b4be50285f6b8b3e06dea50d15887</a>:</p>
<pre><code class="language-{.bash">#!/bin/bash

set -o nounset
set -o errexit

echo &quot;Arguments:&quot;
echo &quot;$@&quot;
echo &quot;---&quot;

readonly FILES_PATTERN='(\..+)?$'
readonly FORBIDDEN='(@?NOCOMMIT|@?COMMITFAIL)'

if ( git diff --cached --name-only | grep -E &quot;$FILES_PATTERN&quot; | xargs grep -E --with-filename -n &quot;$FORBIDDEN&quot; ); then
  echo &quot;ERROR: @COMMITFAIL or @NOCOMMIT found. Exiting to save you from yourself.&quot;
  exit 1
fi
</code></pre>
<p>Save to a file and create a symbolic link to your .git/hooks directory:</p>
<pre><code class="language-{.bash">ln -s ../../git/commit-fail-pre-hook.sh .git/hooks/pre-commit
</code></pre>
