<p>I have updated my emacs package <a href="https://github.com/captainflasmr/selected-window-accent-mode"><strong>selected-window-accent-mode</strong></a></p>
<figure><img src="https://emacs.dyerdwelling.family/ox-hugo/20240816203918-emacs--selected-window-accent-mode-added-pywal-accent-based-on-wallpaper.jpg" width="100%">
</figure>

<blockquote>
<p>The Selected Window Accent Mode is an Emacs package designed to visually distinguish the currently selected window by applying a unique accent color to its fringes, mode line, header line, and margins.</p>
</blockquote>
<h2 id="v0-dot-9-dot-0">v0.9.0 <span class="timestamp-wrapper"><span class="timestamp">&lt;2024-08-10 Sat&gt;</span></span></h2>
<p>Added Pywal color integration to selected-window-accent-mode to allow the accent color to be consistent with the wallpaper of the operating system.</p>
<blockquote>
<p>Pywal is a tool on linux that generates color schemes from images, allowing users to apply these colors to their desktop and application themes for a cohesive and dynamic look.</p>
</blockquote>
<p><strong>Note: will only work on linux.</strong></p>
<ul>
<li>Introduced `selected-window-accent-use-pywal` option to use a Pywal-generated color palette.</li>
<li>Update logic in `selected-window-accent` function to use Pywal color if enabled.</li>
<li>Require `json` package for handling Pywal palette.</li>
</ul>
<p>Example use:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(setq selected-window-accent-use-pywal <span style="color:#66d9ef">t</span>)
</span></span></code></pre></div><p>When enabled, <code>color1</code> is selected as the accent color, taken from the file : <code>~/.cache/wal/colors.json</code> which is a generic color file typically generated by pywal.</p>
<p>This means that the accent color can be more tied in with the current wallpaper once pywal is connected to the wallpaper change mechanism of your operating system.</p>
<p>Note that this feature will require an external pywal generation step, triggered on wallpaper change, examples given below.</p>
<p>See below for an example <code>colors.json</code> file</p>
<p>Technically any tool that can write to a json file in a similar format will have a carry through affect on the accent color associated with this package.  Here is an example :</p>
<pre tabindex="0"><code class="language-js-json" data-lang="js-json">{
    &#34;wallpaper&#34;: &#34;/home/jdyer/.last_wallpaper.jpg&#34;,
    &#34;alpha&#34;: &#34;100&#34;,

    &#34;special&#34;: {
        &#34;background&#34;: &#34;#0d1a05&#34;,
        &#34;foreground&#34;: &#34;#c8cfdb&#34;,
        &#34;cursor&#34;: &#34;#c8cfdb&#34;
    },
    &#34;colors&#34;: {
        &#34;color0&#34;: &#34;#0d1a05&#34;,
        &#34;color1&#34;: &#34;#8FA944&#34;,
        &#34;color2&#34;: &#34;#165E97&#34;,
        &#34;color3&#34;: &#34;#5C7391&#34;,
        &#34;color4&#34;: &#34;#748AA6&#34;,
        &#34;color5&#34;: &#34;#7498C4&#34;,
        &#34;color6&#34;: &#34;#8D9BB1&#34;,
        &#34;color7&#34;: &#34;#c8cfdb&#34;,
        &#34;color8&#34;: &#34;#8c9099&#34;,
        &#34;color9&#34;: &#34;#8FA944&#34;,
        &#34;color10&#34;: &#34;#165E97&#34;,
        &#34;color11&#34;: &#34;#5C7391&#34;,
        &#34;color12&#34;: &#34;#748AA6&#34;,
        &#34;color13&#34;: &#34;#7498C4&#34;,
        &#34;color14&#34;: &#34;#8D9BB1&#34;,
        &#34;color15&#34;: &#34;#c8cfdb&#34;
    }
}
</code></pre><p>On linux, install <code>python-pywal</code> using your package manager of choice.</p>
<p>At which point you can generate a <code>colors.json</code> with the following commands:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>wal -c
</span></span><span style="display:flex;"><span>wal -i ~/.last_wallpaper.jpg -q -n
</span></span></code></pre></div><h3 id="wallpaper-change-example">Wallpaper Change Example</h3>
<p>Changing a wallpaper and hooking <code>pywal</code> up accordingly, which technically should work for both Wayland and X11.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>wallpaper_path<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span>find ~/wallpaper-dir -type f | shuf -n 1<span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>echo $wallpaper_path &gt; ~/.last_wallpaper_path
</span></span><span style="display:flex;"><span>cp -f $wallpaper_path ~/.last_wallpaper.jpg
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#f92672">[[</span> $XDG_SESSION_TYPE <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;x11&#34;</span> <span style="color:#f92672">]]</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>   feh --bg-scale <span style="color:#e6db74">&#34;</span>$wallpaper_path<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#f92672">[[</span> $XDG_SESSION_TYPE <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;wayland&#34;</span> <span style="color:#f92672">]]</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>   swww img <span style="color:#e6db74">&#34;</span>$wallpaper_path<span style="color:#e6db74">&#34;</span> --transition-step <span style="color:#ae81ff">20</span> --transition-fps<span style="color:#f92672">=</span><span style="color:#ae81ff">20</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># lets run pywal for colour scheme generation</span>
</span></span><span style="display:flex;"><span>wal -c
</span></span><span style="display:flex;"><span>wal -i ~/.last_wallpaper.jpg -q -n
</span></span></code></pre></div>