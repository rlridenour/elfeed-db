<h2>Install libclang on Mac</h2>
<pre><code class="language-{.bash">brew install llvm --with-clang
</code></pre>
<h2>Configure Emacs</h2>
<pre><code class="language-{.commonlisp">(use-package irony :ensure t
  :config
  (add-hook 'objc-mode-hook 'irony-mode)
  (add-hook 'irony-mode-hook 'irony-cdb-autosetup-compile-options))

(use-package company-irony :ensure t
  :config
  (add-hook  'objc-mode-hook (lambda ()
                               (setq-local company-backends '((company-irony)))))
  (add-hook 'irony-mode-hook 'company-irony-setup-begin-commands))
</code></pre>
<h2>install irony server</h2>
<p>Run:</p>
<pre><code class="language-example">M-x irony-install-server
</code></pre>
<p>NOTE: Needs libclang: Install with &quot;brew install llvm â€“with-clang&quot; By default, irony-install-server did not find libclang on Mac OS. <em>irony-install-server</em> invokes cmake for you. Work around by adding:</p>
<pre><code class="language-example">-DCMAKE_PREFIX_PATH=/Users/your-user-name/homebrew/opt/llvm
</code></pre>
<p>For example:</p>
<pre><code class="language-example">cmake -DCMAKE_PREFIX_PATH=/Users/your-user-name/homebrew/opt/llvm -DCMAKE_INSTALL_PREFIX\=/Users/your-user-name/.emacs.d/irony/ /Users/your-user-name/.emacs.d/elpa/irony-20160106.1223/server &amp;&amp; cmake --build . --use-stderr --config Release --target install
</code></pre>
<h2>Compilation database</h2>
<h3>Install xctool</h3>
<pre><code class="language-{.bash">brew install xctool
</code></pre>
<h3>Generate compilation database</h3>
<pre><code class="language-{.bash">xctool -sdk iphonesimulator -arch x86_64 -scheme SomeScheme -reporter pretty -reporter json-compilation-database:compile_commands.json clean build
</code></pre>
<h2>Set Irony's database path</h2>
<blockquote>
<p>M-x irony-cdb-json-add-compile-commands-path</p>
</blockquote>
