<p>UPDATE(2019-05-19 Sun): Plan A and B use options no longer available since the recent changes to <a href="https://github.com/Homebrew/homebrew-core/issues/31510">remove all options from Homebrew/homebrew-core formulae</a>. See Plan C.</p>
<h2><s>Plan A</s></h2>
<h3><s>Install gnuplot Qt</s></h3>
<p><s>If you have the resources, you can try the Qt flavor. You need at least 15GB to download and a long build. Ran out of space on my Macbook Air. Aborted.</s></p>
<pre><code class="language-{.bash">brew install gnuplot --with-qt
</code></pre>
<h2><s>Plan B</s></h2>
<h3><s>Install xquartz</s></h3>
<pre><code class="language-{.bash">brew install Caskroom/cask/xquartz
</code></pre>
<h3><s>Install gnuplot x11</s></h3>
<pre><code class="language-{.bash">brew install gnuplot --with-x11
</code></pre>
<h2>Install feedgnuplot</h2>
<p>Feedgnuplot is handy for plotting data streams realtime.</p>
<pre><code class="language-{.bash">brew install feedgnuplot
</code></pre>
<h2>Plan C</h2>
<h3>Install with no options</h3>
<pre><code class="language-{.bash">brew install gnuplot
</code></pre>
<p>So far so good, but default gnuplot formula uses Qt and the Cocoa plugin could not be loaded:</p>
<blockquote>
<p>qt.qpa.plugin: Could not find the Qt platform plugin &quot;cocoa&quot; in &quot;&quot;</p>
</blockquote>
<h3>Debugging</h3>
<ol>
<li>
<p>QT_DEBUG_PLUGINS</p>
<p>Turns out you can get plugin logs using the QT_DEBUG_PLUGINS environment variable:</p>
<pre><code class="language-{.bash">export QT_DEBUG_PLUGINS=1
</code></pre>
<blockquote>
<p>QFactoryLoader::QFactoryLoader() checking directory path &quot;/Users/myuser/homebrew/Cellar/gnuplot/5.2.6_1/libexec/gnuplot/5.2/platforms&quot; â€¦</p>
</blockquote>
<p>This led me to find out about the <em>gnuplot/5.2/gnuplot_qt</em> binary.</p>
</li>
<li>
<p>qt_prfxpath</p>
<p>Getting the Qt prefix can be done by inspecting QtCore's strings:</p>
<pre><code class="language-{.bash">strings /Users/myuser/homebrew/Cellar/qt/5.12.3/Frameworks/QtCore.framework/QtCore | grep qt_prfxpath
</code></pre>
<pre><code class="language-example">qt_prfxpath=/usr/local/Cellar/qt/5.12.3
</code></pre>
<p>Ok so qt_prfxpath is pointing to <em><em>usr/local/Cellar/qt</em>, while my installation's is at //Users/myuser/homebrew/Cellar/qt</em>. This is problematic and indeed my fault for installing homebrew in <em><em>Users/myuser/homebrew</em> instead of the recommended //usr/local</em>.</p>
<p>Symlinking did the job:</p>
<pre><code class="language-{.bash">sudo mkdir -p /usr/local/Cellar
sudo ln -s ~/homebrew/Cellar/qt /usr/local/Cellar/qt
</code></pre>
<pre><code class="language-{.bash">/Users/myuser/homebrew/Cellar/gnuplot/5.2.6_1/libexec/gnuplot/5.2/gnuplot_qt
</code></pre>
<p>Success.</p>
</li>
</ol>
