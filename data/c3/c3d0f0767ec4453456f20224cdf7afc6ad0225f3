<p>Searching for text in a directory tree of files is a commonplace task. For people who use plain text files there are a number of tools that can accomplish this. One such tool that is ubiquitous in Unix-flavored (predominantly Linux and macOS) systems is the command line utility <code>grep</code>. Emacs builds on this with the <code>rgrep</code> command, invoking <code>grep</code> recursively and presenting its results in a <code>grep-mode</code> buffer. In other editors and IDEs, this feature is named “Find in Files” or “Find in Project”.</p>
<p>Recently I went down the rabbit hole of wanting to get the results of <code>rgrep</code> but with the following twist: report the match results in order of recently modified file, descending. The implementation I ended up with is a two-pass solution that’s brute force but effective.</p>
<p>Announcing <a href="https://github.com/kickingvegas/recent-rgrep">recent-rgrep</a>, available on GitHub.</p>
<h1>Features</h1>
<ul>
<li>Reports matches in order most recently modified files descending (that is, the most recent files are reported first).</li>
<li>Search only in non-binary files.</li>
<li>Avoids searching in common SCM directories (<code>.git</code>, <code>.hg</code>, <code>.svn</code>, <code>.cvs</code>).</li>
<li>Uses the existing <code>grep</code> that you have installed on your system.</li>
<li>Default search is case-insensitive.</li>
<li>Supports usage from both the command line and Emacs.</li>
</ul>
<h1>What about ripgrep?</h1>
<p>NGL, you’re likely better off using <a href="https://github.com/BurntSushi/ripgrep">ripgrep</a> if you have it installed. But if not, then this modest script can achieve the desired result described above.</p>
<h1>Closing Thoughts</h1>
<p>If this all seems interesting, I invite you to try <code>recent-rgrep</code> out. In practice, I’ve found it to make my searches more effective as I’m usually more interested in the files that I last worked on. While there’s a performance hit with making two passes, I generally don’t encounter it in the places I use it. YMMV.</p>