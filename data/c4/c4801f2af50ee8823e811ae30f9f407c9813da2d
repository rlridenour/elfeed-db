<p>UPDATE: <code>chatgpt-shell</code> <a href="https://xenodium.com/chatgpt-shell-available-on-melpa/">has evolved a bit</a> and is now <a href="https://melpa.org/#/chatgpt-shell">on MELPA</a>.</p>
<p>I had been meaning to give <a href="https://openai.com/blog/chatgpt">ChatGPT</a> a good try, preferably from Emacs. As an <a href="https://www.gnu.org/software/emacs/manual/html_mono/eshell.html">eshell</a> fan, ChatGPT seemed like the perfect fit for a shell interface of sorts. With that in mind, I set out to wire ChatGPT with Emacs's general command interpreter (<a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Shell-Prompts.html">comint</a>).</p>
<p>I had no previous experience building anything comint-related, so I figured I could just take a peek at an existing comint-derived mode to achieve a similar purpose. <code>inferior-emacs-lisp-mode</code> (<a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Lisp-Interaction.html">ielm</a>) seemed to fit the bill just fine, so I borrowed quite a bit to assemble a basic shell experience.</p>
<p>From then on, it was mostly about sending each request over to the ChatGPT API to get a response. For now, I'm relying on <a href="https://curl.se/docs/manpage.html">curl</a> to make each request. The invocation is fairly straightforward:</p>
<pre><code class="language-{.bash">curl &quot;https://api.openai.com/v1/chat/completions&quot; \
     -H &quot;Authorization: Bearer YOUR_OPENAI_KEY&quot; \
     -H &quot;Content-Type: application/json&quot; \
     -d &quot;{
     \&quot;model\&quot;: \&quot;gpt-3.5-turbo\&quot;,
     \&quot;messages\&quot;: [{\&quot;role\&quot;: \&quot;user\&quot;, \&quot;content\&quot;: \&quot;YOUR PROMPT\&quot;}]
     }&quot;
</code></pre>
<p>There are two bits of information needed in each request. The API key, which you must get from <a href="https://openai.com/">OpenAI</a>, and the prompt text itself (i.e. whatever you want ChatGPT to help you with). The results are not too shabby.</p>
<p><img src="https://xenodium.github.io/images/a-chatgpt-emacs-shell/chatgpt.gif" alt=""></p>
<p>I've uploaded the code to GitHub as a tiny <a href="https://github.com/xenodium/chatgpt-shell">chatgpt-shell</a> package. It's a little experimental and rough still, but hey, it does the job for now. Head over to <a href="https://github.com/xenodium/chatgpt-shell">github</a> to take a look. The latest iteration handles multiline prompts (use C-j for newlines) and basic code highlighting.</p>
<p>Let's see where it all goes. Pull requests for improvements totally welcome ;-)</p>
