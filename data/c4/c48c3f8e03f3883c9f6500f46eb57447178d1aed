<p>Steps to locally download emacs packages for offline installation.</p>
<figure class="emacs-img"><img src="https://emacs.dyerdwelling.family/ox-hugo/20220715142225-emacs--Download-Local-Emacs-Packages.jpg">
</figure>

<p>&mdash; TOC</p>
<div class="ox-hugo-toc toc local">
<ul>
<li><a href="https://emacs.dyerdwelling.family/emacs/20220715142225-emacs--download-local-emacs-packages/#local-elpa-melpa-org">Local ELPA MELPA ORG</a></li>
<li><a href="https://emacs.dyerdwelling.family/emacs/20220715142225-emacs--download-local-emacs-packages/#local-from-mirror">Local from Mirror</a></li>
<li><a href="https://emacs.dyerdwelling.family/emacs/20220715142225-emacs--download-local-emacs-packages/#extra">Extra</a></li>
</ul>
</div>
<!--endtoc-->
<hr>
<h2 id="local-elpa-melpa-org">Local ELPA MELPA ORG</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>cd ~ mkdir -p emacs-pkgs/melpa mkdir -p emacs-pkgs/elpa
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># mirror the melpa emacs archive</span>
</span></span><span style="display:flex;"><span>echo
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;updating MELPA...&#34;</span>
</span></span><span style="display:flex;"><span>echo
</span></span><span style="display:flex;"><span>rsync -avz --delete --progress rsync://melpa.org/packages/ ~/emacs-pkgs/melpa/.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># elpa</span>
</span></span><span style="display:flex;"><span>echo
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;updating ELPA...&#34;</span>
</span></span><span style="display:flex;"><span>echo
</span></span><span style="display:flex;"><span>rsync -avz --delete --progress elpa.gnu.org::elpa/. ~/emacs-pkgs/elpa
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># org (currently no rsync support)</span>
</span></span><span style="display:flex;"><span>echo
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;updating ORG...&#34;</span>
</span></span><span style="display:flex;"><span>echo
</span></span><span style="display:flex;"><span>cd ~/emacs-pkgs
</span></span><span style="display:flex;"><span>git clone https://git.savannah.gnu.org/git/emacs/org-mode.git
</span></span></code></pre></div><p>I then copy the emacs-pkgs directory to the offline target machine and change the default package manager archives to point to these packages.</p>
<p>Modify <strong>.emacs</strong> in the following manner commenting out the online package communication:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span><span style="color:#75715e">;; (setq package-archives &#39;((&#34;melpa&#34; . &#34;https://melpa.org/packages/&#34;)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;;                          (&#34;org&#34; . &#34;https://orgmode.org/elpa/&#34;)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;;                          (&#34;elpa&#34; . &#34;https://elpa.gnu.org/packages/&#34;)))</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(setq package-archives <span style="color:#f92672">&#39;</span>((<span style="color:#e6db74">&#34;melpa&#34;</span><span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;~/emacs-pkgs/melpa&#34;</span>)
</span></span><span style="display:flex;"><span>                          (<span style="color:#e6db74">&#34;org&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;~/emacs-pkgs/elpa&#34;</span>)
</span></span><span style="display:flex;"><span>                          (<span style="color:#e6db74">&#34;elpa&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;~/emacs-pkgs/org-mode/lisp&#34;</span>)))
</span></span></code></pre></div><h2 id="local-from-mirror">Local from Mirror</h2>
<p>First, you need to clone this repository.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git clone --depth <span style="color:#ae81ff">1</span> git@gitlab.com:d12frosted/elpa-mirror.git ~/.elpa-mirror
</span></span></code></pre></div><p>And then setup package-archives in your init.el file.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(setq package-archives
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">`</span>((<span style="color:#e6db74">&#34;melpa&#34;</span> <span style="color:#f92672">.</span> <span style="color:#f92672">,</span>(<span style="color:#a6e22e">concat</span> user-home-directory <span style="color:#e6db74">&#34;.elpa-mirror/melpa/&#34;</span>))
</span></span><span style="display:flex;"><span>     (<span style="color:#e6db74">&#34;org&#34;</span>   <span style="color:#f92672">.</span> <span style="color:#f92672">,</span>(<span style="color:#a6e22e">concat</span> user-home-directory <span style="color:#e6db74">&#34;.elpa-mirror/org/&#34;</span>))
</span></span><span style="display:flex;"><span>     (<span style="color:#e6db74">&#34;gnu&#34;</span>   <span style="color:#f92672">.</span> <span style="color:#f92672">,</span>(<span style="color:#a6e22e">concat</span> user-home-directory <span style="color:#e6db74">&#34;.elpa-mirror/gnu/&#34;</span>))))
</span></span></code></pre></div><p><a href="https://github.com/d12frosted/elpa-mirror">https://github.com/d12frosted/elpa-mirror</a></p>
<h2 id="extra">Extra</h2>
<h3 id="ada-mode">ada-mode</h3>
<p>ada-mode.el version 4.0 before AdaCore</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(add-to-list <span style="color:#e6db74">&#39;load-path</span> <span style="color:#e6db74">&#34;~/emacs-pkgs/old/ada-mode-4.1&#34;</span>)
</span></span><span style="display:flex;"><span>(require <span style="color:#e6db74">&#39;ada-mode</span>)
</span></span></code></pre></div>