<p>Irreal posted about <a href="https://irreal.org/blog/?p=12984" target="_blank" rel="noopener">The Best Emacs Keyboards</a> and I want to chime in with my setup. <a href="https://github.com/railwaycat/homebrew-emacsmacport" target="_blank" rel="noopener">I use the Railwaycat port of Mituharu Emacs from homebrew</a>. Not sure if this works in other versions. Also, please note that I don&#8217;t suffer from Emacs pinky‚Äîdunno why‚Äîso I make use of Caps Lock in another way.</p>
<p>UPDATE: Here&#8217;s a picture of the layout thrown together quickly:</p>
<p><img decoding="async" class="alignnone size-full wp-image-6890" src="https://plrj.org/wp-content/uploads/2025/05/My-Emacs-Keyboard.png" alt="My Emacs keyboard layout with dedicated Alt and Meta keys" width="1199" height="331" srcset="https://plrj.org/wp-content/uploads/2025/05/My-Emacs-Keyboard.png 1199w, https://plrj.org/wp-content/uploads/2025/05/My-Emacs-Keyboard-300x83.png 300w, https://plrj.org/wp-content/uploads/2025/05/My-Emacs-Keyboard-1024x283.png 1024w, https://plrj.org/wp-content/uploads/2025/05/My-Emacs-Keyboard-768x212.png 768w, https://plrj.org/wp-content/uploads/2025/05/My-Emacs-Keyboard-900x248.png 900w" sizes="(max-width: 1199px) 100vw, 1199px" /></p>
<p>‚Ä¶ and on the MacBook Air:</p>
<p><img decoding="async" class="alignnone size-full wp-image-6893" src="https://plrj.org/wp-content/uploads/2025/05/MacBook-showing-its-keyboard.png" alt="My MacBook Air Emacs keyboard layout" width="1920" height="1080" srcset="https://plrj.org/wp-content/uploads/2025/05/MacBook-showing-its-keyboard.png 1920w, https://plrj.org/wp-content/uploads/2025/05/MacBook-showing-its-keyboard-300x169.png 300w, https://plrj.org/wp-content/uploads/2025/05/MacBook-showing-its-keyboard-1024x576.png 1024w, https://plrj.org/wp-content/uploads/2025/05/MacBook-showing-its-keyboard-768x432.png 768w, https://plrj.org/wp-content/uploads/2025/05/MacBook-showing-its-keyboard-1536x864.png 1536w, https://plrj.org/wp-content/uploads/2025/05/MacBook-showing-its-keyboard-900x506.png 900w" sizes="(max-width: 1920px) 100vw, 1920px" /></p>
<p>I use <a href="https://karabiner-elements.pqrs.org/" target="_blank" rel="noopener">Karbiner Elements</a> on MacOS to help me get the Caps Lock key to do what I want. In MacOS I leverage <a href="https://www.keyboardmaestro.com/main/" target="_blank" rel="noopener">Keyboard Maestro</a> to launch or surface apps (Caps-E to raise Emacs when I&#8217;m in Firefox, for example). In Emacs, Caps then the letter f launches or raises Firefox. If anyone is interested in that code I can post it.</p>
<h1>Karbiner Elements</h1>
<p>Here&#8217;s my karbiner.json file (placed in ~/.config/karbiner/)</p>
<pre>{
    "profiles": [
        {
            "complex_modifications": {
                "rules": [
                    {
                        "description": "Change caps_lock key to command+control+option+shift. (Post f13 key when pressed alone. Use shift+caps_lock as caps_lock)",
                        "manipulators": [
                            {
                                "from": {
                                    "key_code": "caps_lock",
                                    "modifiers": {
                                        "mandatory": ["shift"],
                                        "optional": ["caps_lock"]
                                    }
                                },
                                "to": [{ "key_code": "caps_lock" }],
                                "type": "basic"
                            },
                            {
                                "from": {
                                    "key_code": "caps_lock",
                                    "modifiers": { "optional": ["any"] }
                                },
                                "to": [
                                    {
                                        "key_code": "left_shift",
                                        "modifiers": ["left_command", "left_control", "left_option"]
                                    }
                                ],
                                "to_if_alone": [{ "key_code": "f13" }],
                                "type": "basic"
                            }
                        ]
                    },
                    {
                        "description": "Map Fn + Backspace to Forward Delete",
                        "manipulators": [
                            {
                                "from": {
                                    "key_code": "delete_or_backspace",
                                    "modifiers": { "mandatory": ["fn"] }
                                },
                                "to": [{ "key_code": "delete_forward" }],
                                "type": "basic"
                            }
                        ]
                    }
                ]
            },
            "devices": [
                {
                    "identifiers": { "is_keyboard": true },
                    "simple_modifications": [
                        {
                            "from": { "apple_vendor_top_case_key_code": "keyboard_fn" },
                            "to": [{ "key_code": "left_control" }]
                        },
                        {
                            "from": { "key_code": "left_control" },
                            "to": [{ "apple_vendor_top_case_key_code": "keyboard_fn" }]
                        }
                    ]
                },
                {
                    "identifiers": {
                        "is_keyboard": true,
                        "product_id": 615,
                        "vendor_id": 1452
                    },
                    "simple_modifications": [
                        {
                            "from": { "apple_vendor_top_case_key_code": "keyboard_fn" },
                            "to": [{ "key_code": "left_control" }]
                        },
                        {
                            "from": { "key_code": "left_control" },
                            "to": [{ "apple_vendor_top_case_key_code": "keyboard_fn" }]
                        }
                    ]
                },
                {
                    "identifiers": {
                        "is_keyboard": true,
                        "product_id": 615,
                        "vendor_id": 76
                    },
                    "simple_modifications": [
                        {
                            "from": { "apple_vendor_top_case_key_code": "keyboard_fn" },
                            "to": [{ "key_code": "left_control" }]
                        },
                        {
                            "from": { "key_code": "left_control" },
                            "to": [{ "apple_vendor_top_case_key_code": "keyboard_fn" }]
                        }
                    ]
                },
                {
                    "identifiers": {
                        "is_keyboard": true,
                        "product_id": 666,
                        "vendor_id": 76
                    },
                    "simple_modifications": [
                        {
                            "from": { "apple_vendor_top_case_key_code": "keyboard_fn" },
                            "to": [{ "key_code": "left_control" }]
                        },
                        {
                            "from": { "key_code": "left_control" },
                            "to": [{ "apple_vendor_top_case_key_code": "keyboard_fn" }]
                        }
                    ]
                },
                {
                    "identifiers": {
                        "is_keyboard": true,
                        "product_id": 666,
                        "vendor_id": 1452
                    },
                    "simple_modifications": [
                        {
                            "from": { "apple_vendor_top_case_key_code": "keyboard_fn" },
                            "to": [{ "key_code": "left_control" }]
                        },
                        {
                            "from": { "key_code": "left_control" },
                            "to": [{ "apple_vendor_top_case_key_code": "keyboard_fn" }]
                        }
                    ]
                }
            ],
            "name": "&#x1f1fa;&#x1f1f8;",
            "selected": true,
            "virtual_hid_keyboard": { "keyboard_type_v2": "ansi" }
        }
    ]
}
</pre>
<h1>Emacs</h1>
<p>Here is my Emacs config. Note that I use option/alt on the Apple Keyboard as Alt (A-) in Emacs and not Meta (M-)</p>
<pre>(use-package emacs
  :if (memq window-system '(mac ns))
  :config
  ;; Left &amp; right command ‚åò is (s)uper
  ;; Left &amp; right option ‚å• is (A)lt
  ;; Esc ‚êõ is (M)eta (sticky-key)
  ;; Caps Lock ‚á™ is F13 when pressed alone (sticky-key), s-M-A-S when in combination (set externally using karabiner-elements)
  ;; fn &#x1f310; is (H)yper unless the hardware or OS takes it
  ;; (C)ontrol ‚åÉ, (S)hift ‚áß are as default
  (setq
   mac-command-modifier       'super
   mac-function-modifier      'hyper
   mac-option-modifier        'alt
   mac-right-command-modifier 'super
   mac-right-option-modifier  'alt
   )
  )
</pre>
<p>Think of Caps Lock like an App key.</p>
<p>As for the use of Alt, I dedicate it to org-mode functions so that my most commonly used commands are in easy reach.</p>
<h2>Freeing up the Alt keybindings</h2>
<p>Since I live in Org-mode, I want commands to be easily accessible. The below releases the Alt keybindings from UTF-8 symbols, which are accessible in other ways. In the org-mode configuration I will take advantage of this. Put the following in your early-init.el file:</p>
<pre>;; This is needed to unbind Alt key mappings to UTF
;;   symbols as an abbreviation for C-x 8 map in
;;   iso-transl.el
;; To be more clear, makes it so that one can remap
;;   the entire Alt keybinding space to whatever.
;;   iso-transl.el loads exceedingly early in recent
;;   Emacs versions. It takes ownership of the Alt
;;   map and the usual keymap tools will not change
;;   iso-transl.el assignments.
;; https://lists.gnu.org/archive/html/bug-gnu-emacs/2021-10/msg02500.html
;; Thanks to Eli Zaratskii, Gregory Heytings, and
;;   especially Mark Bestley for the solution!

(dolist (transl-char iso-transl-char-map)
  (let ((vec (vconcat (car transl-char))))
    (aset vec 0 (logior (aref vec 0) ?\A-\^@))
    (define-key key-translation-map vec nil))
  )
</pre>
<h2>fn to hyper unavailable keys</h2>
<p>I set &#8220;Press <img src="https://s.w.org/images/core/emoji/15.1.0/72x72/1f310.png" alt="üåê" class="wp-smiley" style="height: 1em; max-height: 1em;" /> to&#8221; Do Nothing in MacOS Keyboard preferences. Use F1, F2, etc. keys as standard function keys is on.</p>
<p>Under Shortcuts, I disable Quick Note. I move Spotlight search to Shift-Command-Space.</p>
<p>I turn Dictation off.</p>
<p>This table shows the OS-level use of the fn <img src="https://s.w.org/images/core/emoji/15.1.0/72x72/1f310.png" alt="üåê" class="wp-smiley" style="height: 1em; max-height: 1em;" /> key, as far as I can tell.</p>
<pre>| Key | Function                                         |
|-----+--------------------------------------------------|
| A   | Toggle showing Launchpad                         |
| F1  | Decrease brightness                              |
| F10 | Toggle mute                                      |
| F11 | Volume down                                      |
| F12 | Volume up                                        |
| F14 | \ (with or without fn &#x1f310;)                        |
| F16 | clipboard-kill-ring-save (with or without fn &#x1f310;) |
| F18 | clipboard-yank (with or without fn &#x1f310;)           |
| F20 | clipboard-kill-region (with or without fn &#x1f310;)    |
| F2  | Increase brightness                              |
| F3  | Expose                                           |
| F4  | Spotlight search ?                               |
| F5  | Decrease keyboard brightness                     |
| F6  | Increase keyboard brightness                     |
| F7  | Skip reverse                                     |
| F8  | Pause/Play                                       |
| F9  | Skip forward                                     |
| a   | Toggle showing Dock                              |
| c   | Toggle showing Control Center                    |
| h   | Toggle showing the Desktop                       |
| m   | Open Apple Menu                                  |
| n   | Toggle showing Notification Center               |
</pre>
<h2>My leader key maps</h2>
<p>The use-package declarations for define-prefix-key need to be in an init block and not config.</p>
<pre>(use-package emacs
    :bind
    ("&lt;F9&gt;"  . my-writing-key-map)
    ("&lt;f13&gt;" . my-leader-key-map )
    :init
    (progn
      ;; define set of key sequences
      (define-prefix-command 'my-leader-key-map )
      (define-prefix-command 'my-writing-key-map)
      )
    )
</pre>
<p>‚Ä¶ and then I do a bunch more configuration stuff based on that.</p>
