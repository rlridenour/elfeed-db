
	
<p>
Music is an inherently mathematical form of art. Ancient Greek mathematician Pythagoras was the first to describe the logic of the scales that form melody and harmony. Numbers can also represent the rhythm of the music. Even the lyrics have a mathematical structure. Poets structure syllables and repeat words to create pleasing sounding prose. This article shows how to decode lyrics from pop songs and visualise them using the Songsim method to analyse their metre.</p>
<div id="outline-container-headline-1" class="outline-2">
<h2 id="headline-1">
Decode Lyrics using the Songsim algorithm
</h2>
<div id="outline-text-headline-1" class="outline-text-2">
<p>Data visualiser, pop music appreciator and machine learner <a href="https://twitter.com/HalfEatenScone">Colin Morris</a> has extensively analysed the repetitiveness of song lyrics. Colin demonstrated that lyrics are becoming more repetitive since the early days of pop music. The most repetitive song is <em>Around the World</em> by Daft Punk, which should not be a surprise since the artist repeats the same phrase 144 times. <em>Bohemian Rhapsody</em> by Queen has some of the least repetitive lyrics in popular music.</p>
<p>
The TedX presentation (see below) by Colin Morris shows how he visualises the repetitiveness of song lyrics with what he calls the <a href="https://colinmorris.github.io/SongSim/">Songsim</a> algorithm. As a result, the more points in the graph, the more often the composer repeated a word</p>
<figure>
<img src="https://lucidmanager.org/images/digital-humanities/daft-punk-queen.png" alt="Visualisation of the lyrics of Daft Punk&#39;s &#39;Around the World&#39; and Queen&#39;s &#39;Bohemian Rhapsody&#39;" title="Visualisation of the lyrics of Daft Punk&#39;s &#39;Around the World&#39; and Queen&#39;s &#39;Bohemian Rhapsody&#39;"/>
<figcaption>
Visualisation of the lyrics of Daft Punk&#39;s &#39;Around the World&#39; and Queen&#39;s &#39;Bohemian Rhapsody&#39;.
</figcaption>
</figure>
</div>
</div>
<div id="outline-container-headline-2" class="outline-2">
<h2 id="headline-2">
The visual language of song lyrics
</h2>
<div id="outline-text-headline-2" class="outline-text-2">
<p>Morris decided to use a self-similarity matrix, which biologists use to visualise DNA sequences, to decode lyrics. In this method, the individual words of the song are the names of the columns and the names of the rows in a matrix. For every point in the song where the row name equals the column name, shows a dot. By definition, the diagonal of every similarity matrix is filled. The timeline of the song thus runs along the diagonal from top left to bottom right.</p>
<p>
Patterns away from the diagonal represent two different points in time that have the same words. The more of these patterns we see, the more repetitive a song is. Let&#39;s demonstrate this with the <a href="https://www.youtube.com/watch?v=g3qPT30LejM">first words ever recorded</a> by Thomas Edison in 1877.</p>
<figure>
<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/g3qPT30LejM?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"></iframe>
    </div>

<figcaption>
Original Edison 1877 tin foil recording.
</figcaption>
</figure>
<blockquote>
<p>Mary had a little lamb, whose fleece was white as snow. And everywhere that Mary went, the lamb was sure to go.</p>
</blockquote>
<p>
The similarity matrix below visualises the two first sentences of the famous nursery rhyme. It shows where the words &#34;Mary&#34;, &#34;lamb&#34; and &#34;was&#34; are repeated once.</p>
<figure>
<img src="https://lucidmanager.org/images/digital-humanities/edison-little-lamb.png" alt="Self-similarity matrix for Mary had a Little Lamb by Thomas Edison." title="Self-similarity matrix for Mary had a Little Lamb by Thomas Edison."/>
<figcaption>
Self-similarity matrix for Mary had a Little Lamb by Thomas Edison.
</figcaption>
</figure>
<p>
The snowflake diagrams are a visual language to decode lyrics. The verses are the gutters with only diagonal lines. A verse is not very repetitive besides some stop words. The verse repeats through the song. Many songs have a bridge that contrasts with the rest of the song. As a result, the bridge is in most songs a unique pattern with self-similarity.</p>
<p>
The diagram below visualises the lyrics of one of the most famous pop songs ever, <em>Waterloo</em> by Abba. The first 30 words are the opening verse, which shows little repetition, other than stop words such as and the pronoun I. After that we see diagonal lines appearing that represent the repetitive use of the song title. Towards the end of the song, we see the bridge, which is like a little snowflake within the diagram.</p>
<figure>
<img src="https://lucidmanager.org/images/digital-humanities/abba-waterloo.png" alt="/images/digital-humanities/abba-waterloo.png" title="Decoding lyrics: Waterloo by Abba." at="Decoding lyrics: Waterloo by Abba."/>
<figcaption>
Decoding lyrics: Waterloo by Abba.
</figcaption>
</figure>
<p>
The next section shows how to implement this approach with ggplot, scraping pop song lyrics from the azlyrics.com website.</p>
<figure>
<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/_tjFwcmHy5M?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"></iframe>
    </div>

<figcaption>
Pop Music is Stuck on Repeat | Colin Morris | TEDxPenn
</figcaption>
</figure>
</div>
</div>
<div id="outline-container-headline-3" class="outline-2">
<h2 id="headline-3">
Implementing Songsim with ggplot
</h2>
<div id="outline-text-headline-3" class="outline-text-2">
<p>The code below visualises song lyrics or poetry as suggested by Colin Morris. The code uses four libraries. I use the tidyverse series of libraries because it makes life very easy. The tidytext library uses the tidyverse principles to analyse text. The old reshape2 library helps to transform a matrix, and lastly, rvest helps to scrape song lyrics from the azlyrics website.</p>
<p>
The first function scrapes song lyrics from the azlyrics website using the artist and song as input. The first three lines clean the artist and song variables. This code removes any character that is not a number or a letter, converts to lowercase and lastly removes the definite article in the artist name. These two fields are then concatenated to create the URL, which the function prints. The remainder of the code scrapes the lyrics from the website or trips on an error 404 when it cannot find the song/artist combination.</p>
<p>
The second function implements the Morris method to visualise the lyrics. The code extracts single words from the text and places them in a data frame (tibble). This data frame is subsequently converted to a boolean matrix that contains the visualisation.</p>
<p>
The code looks at each word and places the value TRUE where reappears in the song. Each of the vectors is then concatenated to a matrix. Lastly, ggplot visualises the matrix is visualised as a raster.</p>
<p>
What does your favourite song look like a snowflake diagram?</p>
<p>
<a href = "https://github.com///" target="_blank"
   title="Download  from GitHub"
   alt="Download  from GitHub">
  <button class="button is-medium is-primary">
    <span class="icon is-large">
      <i class="fab fa-github"></i>
    </span>
    <span style="font-family: monospace"></span>
  </button>
</a>

</p>
<div class="src src-r">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>  <span style="color:#888">## Decoding lyrics</span>
</span></span><span style="display:flex;"><span>  <span style="color:#06b;font-weight:bold">library</span>(tidyverse)
</span></span><span style="display:flex;"><span>  <span style="color:#06b;font-weight:bold">library</span>(tidytext)
</span></span><span style="display:flex;"><span>  <span style="color:#06b;font-weight:bold">library</span>(reshape2)
</span></span><span style="display:flex;"><span>  <span style="color:#06b;font-weight:bold">library</span>(rvest)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  get_lyrics <span style="color:#333">&lt;-</span> <span style="color:#080;font-weight:bold">function</span>(artist, song) {
</span></span><span style="display:flex;"><span>      artist <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">gsub</span>(<span style="background-color:#fff0f0">&#34;[^A-Za-z0-9]+&#34;</span>, <span style="background-color:#fff0f0">&#34;&#34;</span>, <span style="color:#06b;font-weight:bold">tolower</span>(artist))
</span></span><span style="display:flex;"><span>      song <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">gsub</span>(<span style="background-color:#fff0f0">&#34;[^A-Za-z0-9]+&#34;</span>, <span style="background-color:#fff0f0">&#34;&#34;</span>, <span style="color:#06b;font-weight:bold">tolower</span>(song))
</span></span><span style="display:flex;"><span>      artist <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">gsub</span>(<span style="background-color:#fff0f0">&#34;^the&#34;</span>, <span style="background-color:#fff0f0">&#34;&#34;</span>, artist)
</span></span><span style="display:flex;"><span>      url <span style="color:#333">=</span> <span style="color:#06b;font-weight:bold">paste</span>(<span style="background-color:#fff0f0">&#34;http://azlyrics.com/lyrics/&#34;</span>, 
</span></span><span style="display:flex;"><span>                  artist, <span style="background-color:#fff0f0">&#34;/&#34;</span>, song, <span style="background-color:#fff0f0">&#34;.html&#34;</span>, sep <span style="color:#333">=</span> <span style="background-color:#fff0f0">&#34;&#34;</span>)
</span></span><span style="display:flex;"><span>      <span style="color:#06b;font-weight:bold">print</span>(url)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      azlyrics <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">read_html</span>(url)
</span></span><span style="display:flex;"><span>      lyrics <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">html_nodes</span>(azlyrics, <span style="background-color:#fff0f0">&#34;div&#34;</span>)
</span></span><span style="display:flex;"><span>      lyrics <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">html_text</span>(lyrics[23])
</span></span><span style="display:flex;"><span>      <span style="color:#06b;font-weight:bold">gsub</span>(<span style="background-color:#fff0f0">&#34;\r|\n&#34;</span>, <span style="background-color:#fff0f0">&#34; &#34;</span>, lyrics)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  plot_snowflake <span style="color:#333">&lt;-</span> <span style="color:#080;font-weight:bold">function</span>(artist, song){
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      lyrics <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">get_lyrics</span>(artist, song)
</span></span><span style="display:flex;"><span>      lyrics <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">data_frame</span>(line <span style="color:#333">=</span> lyrics) <span style="color:#333">%&gt;%</span>
</span></span><span style="display:flex;"><span>          <span style="color:#06b;font-weight:bold">filter</span>(line <span style="color:#333">!=</span> <span style="background-color:#fff0f0">&#34;&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      words <span style="color:#333">&lt;-</span> lyrics  <span style="color:#333">%&gt;%</span>
</span></span><span style="display:flex;"><span>          <span style="color:#06b;font-weight:bold">unnest_tokens</span>(word, line) 
</span></span><span style="display:flex;"><span>      words_matrix <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">lapply</span>(<span style="color:#60e;font-weight:bold">1</span><span style="color:#333">:</span><span style="color:#06b;font-weight:bold">nrow</span>(words),
</span></span><span style="display:flex;"><span>                             <span style="color:#080;font-weight:bold">function</span>(w){
</span></span><span style="display:flex;"><span>                                 <span style="color:#06b;font-weight:bold">as.character</span>(words[w, <span style="color:#60e;font-weight:bold">1</span>]) <span style="color:#333">==</span> words
</span></span><span style="display:flex;"><span>                             }
</span></span><span style="display:flex;"><span>                             ) <span style="color:#333">%&gt;%</span>
</span></span><span style="display:flex;"><span>          <span style="color:#06b;font-weight:bold">do.call</span>(cbind, .)
</span></span><span style="display:flex;"><span>      <span style="color:#06b;font-weight:bold">rownames</span>(words_matrix) <span style="color:#333">&lt;-</span> <span style="color:#60e;font-weight:bold">1</span><span style="color:#333">:</span><span style="color:#06b;font-weight:bold">nrow</span>(words)
</span></span><span style="display:flex;"><span>      <span style="color:#06b;font-weight:bold">colnames</span>(words_matrix) <span style="color:#333">&lt;-</span> <span style="color:#60e;font-weight:bold">1</span><span style="color:#333">:</span><span style="color:#06b;font-weight:bold">nrow</span>(words)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>      <span style="color:#06b;font-weight:bold">melt</span>(words_matrix, varnames <span style="color:#333">=</span> <span style="color:#06b;font-weight:bold">c</span>(<span style="background-color:#fff0f0">&#34;x&#34;</span>,  <span style="background-color:#fff0f0">&#34;y&#34;</span>)) <span style="color:#333">%&gt;%</span>
</span></span><span style="display:flex;"><span>          <span style="color:#06b;font-weight:bold">ggplot</span>(<span style="color:#06b;font-weight:bold">aes</span>(x, <span style="color:#333">-</span>y, fill <span style="color:#333">=</span> value)) <span style="color:#333">+</span>
</span></span><span style="display:flex;"><span>          <span style="color:#06b;font-weight:bold">geom_raster</span>() <span style="color:#333">+</span>
</span></span><span style="display:flex;"><span>          <span style="color:#06b;font-weight:bold">scale_fill_manual</span>(values <span style="color:#333">=</span> <span style="color:#06b;font-weight:bold">c</span>(<span style="background-color:#fff0f0">&#34;white&#34;</span>, <span style="background-color:#fff0f0">&#34;dodgerblue4&#34;</span>), guide <span style="color:#333">=</span> <span style="color:#080;font-weight:bold">FALSE</span>) <span style="color:#333">+</span>
</span></span><span style="display:flex;"><span>          <span style="color:#06b;font-weight:bold">theme_void</span>() <span style="color:#333">+</span>     
</span></span><span style="display:flex;"><span>          <span style="color:#06b;font-weight:bold">ggtitle</span>(artist, subtitle <span style="color:#333">=</span> song)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#06b;font-weight:bold">plot_snowflake</span>(<span style="background-color:#fff0f0">&#34;Abba&#34;</span>, <span style="background-color:#fff0f0">&#34;Waterloo&#34;</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#06b;font-weight:bold">ggsave</span>(<span style="background-color:#fff0f0">&#34;Abba-Waterloo.png&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  artist <span style="color:#333">=</span> <span style="background-color:#fff0f0">&#34;Thomas Edison&#34;</span>
</span></span><span style="display:flex;"><span>  song <span style="color:#333">&lt;-</span> <span style="background-color:#fff0f0">&#34;Mary Had a Little Lamb&#34;</span>
</span></span><span style="display:flex;"><span>  lyrics <span style="color:#333">&lt;-</span> <span style="background-color:#fff0f0">&#34;Mary had a little lamb, whose fleece was white as snow. And everywhere that Mary went, the lamb was sure to go.&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#06b;font-weight:bold">library</span>(gridExtra)
</span></span><span style="display:flex;"><span>  <span style="color:#06b;font-weight:bold">png</span>(<span style="background-color:#fff0f0">&#34;DaftPunk-Queen.png&#34;</span>, width <span style="color:#333">=</span> <span style="color:#60e;font-weight:bold">1024</span>, height <span style="color:#333">=</span> <span style="color:#60e;font-weight:bold">768</span>)
</span></span><span style="display:flex;"><span>  l1 <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">plot_snowflake</span>(<span style="background-color:#fff0f0">&#34;Daft Punk&#34;</span>, <span style="background-color:#fff0f0">&#34;Around the world&#34;</span>)
</span></span><span style="display:flex;"><span>  l2 <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">plot_snowflake</span>(<span style="background-color:#fff0f0">&#34;Queen&#34;</span>, <span style="background-color:#fff0f0">&#34;Bohemian Rhapsody&#34;</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#06b;font-weight:bold">grid.arrange</span>(l1, l2, ncol <span style="color:#333">=</span> <span style="color:#60e;font-weight:bold">2</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#06b;font-weight:bold">dev.off</span>()
</span></span><span style="display:flex;"><span>  <span style="color:#06b;font-weight:bold">getwd</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  artist <span style="color:#333">&lt;-</span> <span style="background-color:#fff0f0">&#34;Frank Zappa&#34;</span>
</span></span><span style="display:flex;"><span>  song <span style="color:#333">&lt;-</span> <span style="background-color:#fff0f0">&#34;Titties Beer&#34;</span></span></span></code></pre></div>
</div>
<a href = "https://www.r-bloggers.com/" target="_blank" title="Proudly associated with R-Bloggers">
  <button class="button is-link is-medium">
    <span class="icon is-large">
      <i class="fab fa-r-project"></i>
    </span>
    <span>As seen on R Bloggers</span>
  </button>
</a>

</div>
</div>

      