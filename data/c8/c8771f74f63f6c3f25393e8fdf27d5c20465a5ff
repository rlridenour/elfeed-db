<p>A quick one… I recently wanted to trim the black borders around a video screenshot. While I could use an image editor to manually select and trim, I wondered if there was an <a href="https://imagemagick.org/">imagemagick</a> trick somewhere out there for such a thing… and of course there was:</p>
<pre><code class="language-{.bash">magick convert -fuzz 3% -define trim:percent-background=0% -trim +repage path/to/input.png path/to/output.png
</code></pre>
<p>Pretty neat. It does the job, but I won't remember it next time. May as well make another <a href="https://github.com/xenodium/dwim-shell-command">dwim-shell-command</a> function out of it and conveniently invoke from Emacs via a memorable name plus fuzzy search.</p>
<p><img src="https://xenodium.github.io/images/trimming-video-screenshots/trim.gif" alt=""></p>
<pre><code class="language-{.commonlisp">(defun dwim-shell-commands-image-trim-borders ()
  &quot;Trim image(s) border (useful for video screenshots).&quot;
  (interactive)
  (dwim-shell-command-on-marked-files
   &quot;Trim image border&quot;
   &quot;magick convert -fuzz 3% -define trim:percent-background=0% -trim +repage '&lt;&lt;f&gt;&gt;' '&lt;&lt;fne&gt;&gt;_trimmed.&lt;&lt;e&gt;&gt;'&quot;
   :utils &quot;magick&quot;))
</code></pre>
<p>While the screenshot I've just used was a little blurry, it's from the movie <a href="https://www.imdb.com/title/tt1104001/">Tron Legacy</a>, and it features Emacs eshell. This is old news, though <a href="https://irreal.org/blog/?p=9573">well covered</a>.</p>
<p><img src="https://xenodium.github.io/images/trimming-video-screenshots/eshell_trimmed.png" alt=""></p>
<p><code>dwim-shell-commands-image-trim-borders</code> is now <a href="https://github.com/xenodium/dwim-shell-command/commit/5bed2f6b40761db4913c8d8f58bb147c71a9ceb7">added to dwim-shell-commands.el</a></p>
