<p>If you spend any time browsing files in Emacs, you&rsquo;ve probably wished for a bit more visual distinction in dired buffers?. While packages like <code>all-the-icons-dired</code> provide beautiful icon sets, they come with dependencies, font requirements, and potential compatibility issues. What if you could get meaningful visual file type indicators with just a few simple lines of pure Elisp? I have adapted the original idea provided by <code>Emacs-solo</code> and focused more on the earlier Unicode characters that are most likely to always be present in an Emacs environment.</p>
<p>Popular dired icon packages often require:</p>
<ul>
<li>Installing specific icon fonts</li>
<li>Managing font fallbacks across different systems</li>
<li>Dealing with alignment issues in terminal Emacs</li>
<li>Large dependency chains that slow down startup</li>
<li>Compatibility headaches when sharing configs</li>
</ul>
<p>I have also noticed that Emacs can just crash if it is dealing with an icon that isn&rsquo;t installed on the system.</p>
<p>Here&rsquo;s an implementation that adds visual file type indicators using only standard Unicode characters. Of course the icons-map isn&rsquo;t exhaustive but might be a sensible minimal starting point.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(defvar dired-icons-map
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#39;</span>((<span style="color:#e6db74">&#34;el&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;λ&#34;</span>) (<span style="color:#e6db74">&#34;rb&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;◆&#34;</span>) (<span style="color:#e6db74">&#34;js&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;○&#34;</span>) (<span style="color:#e6db74">&#34;ts&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;●&#34;</span>) (<span style="color:#e6db74">&#34;json&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;◎&#34;</span>) (<span style="color:#e6db74">&#34;md&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;■&#34;</span>)
</span></span><span style="display:flex;"><span>    (<span style="color:#e6db74">&#34;txt&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;□&#34;</span>) (<span style="color:#e6db74">&#34;html&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;▲&#34;</span>) (<span style="color:#e6db74">&#34;css&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;▼&#34;</span>) (<span style="color:#e6db74">&#34;png&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;◉&#34;</span>) (<span style="color:#e6db74">&#34;jpg&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;◉&#34;</span>)
</span></span><span style="display:flex;"><span>    (<span style="color:#e6db74">&#34;pdf&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;▣&#34;</span>) (<span style="color:#e6db74">&#34;zip&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;▢&#34;</span>) (<span style="color:#e6db74">&#34;py&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;∆&#34;</span>) (<span style="color:#e6db74">&#34;c&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;◇&#34;</span>) (<span style="color:#e6db74">&#34;sql&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;▦&#34;</span>)
</span></span><span style="display:flex;"><span>    (<span style="color:#e6db74">&#34;mp3&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;♪&#34;</span>) (<span style="color:#e6db74">&#34;mp4&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;▶&#34;</span>) (<span style="color:#e6db74">&#34;exe&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;▪&#34;</span>)))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(defun dired-add-icons ()
</span></span><span style="display:flex;"><span>  (when (derived-mode-p <span style="color:#e6db74">&#39;dired-mode</span>)
</span></span><span style="display:flex;"><span>    (let ((inhibit-read-only <span style="color:#66d9ef">t</span>))
</span></span><span style="display:flex;"><span>      (save-excursion
</span></span><span style="display:flex;"><span>        (<span style="color:#a6e22e">goto-char</span> (<span style="color:#a6e22e">point-min</span>))
</span></span><span style="display:flex;"><span>        (while (and (not (<span style="color:#a6e22e">eobp</span>)) (<span style="color:#a6e22e">&lt;</span> (line-number-at-pos) <span style="color:#ae81ff">200</span>))
</span></span><span style="display:flex;"><span>          (condition-case <span style="color:#66d9ef">nil</span>
</span></span><span style="display:flex;"><span>              (let ((line (<span style="color:#a6e22e">buffer-substring-no-properties</span> (<span style="color:#a6e22e">line-beginning-position</span>) (<span style="color:#a6e22e">line-end-position</span>))))
</span></span><span style="display:flex;"><span>                (when (and (<span style="color:#a6e22e">&gt;</span> (<span style="color:#a6e22e">length</span> line) <span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>                           (<span style="color:#a6e22e">string-match</span> <span style="color:#e6db74">&#34;\\([rwxd-]\\{10\\}\\)&#34;</span> line)
</span></span><span style="display:flex;"><span>                           (dired-move-to-filename <span style="color:#66d9ef">t</span>)
</span></span><span style="display:flex;"><span>                           (not (<span style="color:#a6e22e">looking-at</span> <span style="color:#e6db74">&#34;[▶◦λ◆○●◎■□▲▼◉▣▢◇∆▦♪▪] &#34;</span>)))
</span></span><span style="display:flex;"><span>                  (let* ((is-dir (<span style="color:#a6e22e">eq</span> (<span style="color:#a6e22e">aref</span> line (<span style="color:#a6e22e">match-beginning</span> <span style="color:#ae81ff">1</span>)) <span style="color:#e6db74">?d</span>))
</span></span><span style="display:flex;"><span>                         (filename (and (<span style="color:#a6e22e">string-match</span> <span style="color:#e6db74">&#34;\\([^ ]+\\)$&#34;</span> line) (match-string <span style="color:#ae81ff">1</span> line)))
</span></span><span style="display:flex;"><span>                         (icon (cond (is-dir <span style="color:#e6db74">&#34;▶&#34;</span>)
</span></span><span style="display:flex;"><span>                                    ((and filename (<span style="color:#a6e22e">string-match</span> <span style="color:#e6db74">&#34;\\.\\([^.]+\\)$&#34;</span> filename))
</span></span><span style="display:flex;"><span>                                     (or (<span style="color:#a6e22e">cdr</span> (<span style="color:#a6e22e">assoc</span> (<span style="color:#a6e22e">downcase</span> (match-string <span style="color:#ae81ff">1</span> filename)) dired-icons-map)) <span style="color:#e6db74">&#34;◦&#34;</span>))
</span></span><span style="display:flex;"><span>                                    (<span style="color:#66d9ef">t</span> <span style="color:#e6db74">&#34;◦&#34;</span>))))
</span></span><span style="display:flex;"><span>                    (<span style="color:#a6e22e">insert</span> icon <span style="color:#e6db74">&#34; &#34;</span>))))
</span></span><span style="display:flex;"><span>            (<span style="color:#a6e22e">error</span> <span style="color:#66d9ef">nil</span>))
</span></span><span style="display:flex;"><span>          (<span style="color:#a6e22e">forward-line</span>))))))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(add-hook <span style="color:#e6db74">&#39;dired-after-readin-hook</span> <span style="color:#e6db74">&#39;dired-add-icons</span>)
</span></span></code></pre></div><p>The icons use only standard Unicode geometric shapes and mathematical symbols that have been supported in every font since the 1990s. No special fonts required, it works identically in:</p>
<ul>
<li>Terminal Emacs</li>
<li>GUI Emacs on any platform</li>
<li>Ancient and modern Emacs versions</li>
</ul>
<p>There are some advantages to be had:</p>
<ul>
<li><strong>Zero dependencies</strong>: Pure Elisp, no external packages</li>
<li><strong>Tiny footprint</strong>: 30 lines vs hundreds in full icon packages</li>
<li><strong>Instant startup</strong>: No font loading or icon caching</li>
<li><strong>Robust error handling</strong>: Gracefully skips problematic files</li>
<li><strong>Performance limits</strong>: Processes max 200 files to prevent freezing but of course that can be modified to taste</li>
</ul>
<p>Once added to your config, it just works. No font updates, no package maintenance, no breaking changes from upstream dependencies.</p>
<p>Here is a typical example:</p>
<p>After:</p>
<figure><img src="https://emacs.dyerdwelling.family/ox-hugo/20250612223745-emacs--Emacs-Dired-with-Ultra-Lightweight-Visual-Icons.jpg" width="100%">
</figure>

<p>Before:</p>
<figure><img src="https://emacs.dyerdwelling.family/ox-hugo/20250612223745-emacs--Emacs-Dired-with-Ultra-Lightweight-Visual-Icons2.jpg" width="100%">
</figure>

<p>Want different icons? Just modify the <code>dired-icons-map</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span><span style="color:#75715e">;; Prefer asterisks for code files?</span>
</span></span><span style="display:flex;"><span>(<span style="color:#e6db74">&#34;js&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;*&#34;</span>) (<span style="color:#e6db74">&#34;py&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;*&#34;</span>) (<span style="color:#e6db74">&#34;rb&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;*&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Like filled shapes for documents?</span>
</span></span><span style="display:flex;"><span>(<span style="color:#e6db74">&#34;md&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;▪&#34;</span>) (<span style="color:#e6db74">&#34;txt&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;▪&#34;</span>) (<span style="color:#e6db74">&#34;pdf&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;▪&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Add your own file types</span>
</span></span><span style="display:flex;"><span>(<span style="color:#e6db74">&#34;log&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;□&#34;</span>) (<span style="color:#e6db74">&#34;cfg&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;○&#34;</span>) (<span style="color:#e6db74">&#34;bak&#34;</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;▫&#34;</span>)
</span></span></code></pre></div><p>Simply copy the code into your <code>init.el</code> and off you go!</p>
