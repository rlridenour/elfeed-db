<h2 id="but-why-though">But why though?</h2>
<p>macOS has arguably the best looking, most succinct and most user friendly GUI in all the OS commonly used on personal computers.</p>
<p>With this comes a bunch of fantastic GUI based tools for everything – including a lot for emailing.</p>
<p>The following list is but a selection of some.</p>
<ul>
<li>Mail.app</li>
<li><a href="https://apps.apple.com/de/app/spark-email-app-by-readdle/id1176895641?l=en&amp;mt=12">Spark</a></li>
<li><a href="https://apps.apple.com/de/app/microsoft-outlook/id985367838?l=en&amp;mt=12">Microsoft Outlook</a></li>
<li><a href="https://apps.apple.com/de/app/canary-mail-app/id1236045954?l=en&amp;mt=12">Canary Mail App</a></li>
<li><a href="https://apps.apple.com/de/app/airmail-5/id918858936?l=en&amp;mt=12">Airmail 5</a></li>
</ul>
<p>Just with this selection, I am quite sure a lot of people would find their match. Personally I happily used the default macOS <code>Mail.app</code>. It did everything, that I needed. It is well integrated into the OS and <a href="https://www.icloud.com">iCloud</a> of course. Together with Calendar.app and Contacts.app this quite a potent and well oiled machinery.</p>
<p>Then why did I switch to a text based workflow?</p>
<p>A few articles ago I wrote about my <a href="https://macowners.club/posts/favorite-apps-tools-2/">obsession with Emacs</a>. Since I started using Emacs, I have been down the rabbit hole of migrating most of my workflows into it. Emacs is a fantastic text based – for lack of a better word – environment.</p>
<p>Breaking things to their basic nature takes away the distraction and it does not get any more basic than plain text.</p>
<p>Granted, I noticed that the appeal is not just the text based nature of the application, but also the focus on fuzzy searching/finding. In Emacs one can do this on any imaginable type of list.</p>
<p>Most of my navigation is initiated by a <a href="https://macowners.club/posts/from-ivy-to-vertico/">fuzzy completion interface</a>. I accomplish this with a whole host of applications, programs and add-ons.</p>
<ul>
<li><a href="https://macowners.club/posts/favorite-apps-tools-6/">Alfred</a></li>
<li><a href="https://macowners.club/posts/from-ivy-to-vertico/">Vertico &amp; consult</a> in Emacs</li>
<li><a href="https://macowners.club/posts/favorite-apps-tools-4/">fzf</a> and more&hellip;</li>
</ul>
<style>.orange {color: #f7821b;}</style>
<div class="orange">
<p>So I handle emails in plain text. But how?</p>
</div>
<h2 id="the-toolchain">The Toolchain</h2>
<p>First things first. Let&rsquo;s take a look at the tools and programs that I user to achieve that.</p>
<h3 id="emacs-and-mu4e">Emacs &amp; mu4e</h3>
<p>As mentioned before I already wrote up my setup to handle emails with Emacs. This is extensively illustrated in <a href="https://macowners.club/posts/email-emacs-mu4e-macos/">this article</a>.</p>
<figure><img src="https://macowners.club/images/emacs_mu4e.png" width="800px">
</figure>

<h3 id="neomutt">NeoMutt</h3>
<p>For the rare cases I don&rsquo;t have Emacs running and I just want a glance into my mailboxes I can quickly launch NeoMutt on the command line. This also has the added benefit of having a backup client for my email.</p>
<p>Both Mu4e and NeoMutt use <code>mbsync</code> and the same email directory structure located in <code>~/.maildir</code>. Again demonstrated in the aforementioned article.</p>
<p><a href="https://neomutt.org">NeoMutt</a>, which to my knowledge is based <a href="http://www.mutt.org/">Mutt</a>, is a wonderful email client for the command line. It is quite customizable, both in behaviour (keybindings, email handling) and look &amp; feel.</p>
<p>It is however quite intense to configure. Luckily <a href="https://neomutt.org/guide/">the guide</a> online is detailed enough.</p>
<p>In this post I will not go through the details on how to configure NeoMutt. I will rather layout some of the special custom settings that might not be documented in the guide.</p>
<p>In my case the configuration files are in the <code>~/.mutt</code> directory as documented <a href="https://neomutt.org/guide/configuration#1-2-%C2%A0location-of-user-config-files">here</a>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">├── accounts           <span class="c1"># configuration for every account in a separate file</span>
</span></span><span class="line"><span class="cl">│   ├── aimebertrand
</span></span><span class="line"><span class="cl">│   ├── icloud
</span></span><span class="line"><span class="cl">│   ├── mocarchive
</span></span><span class="line"><span class="cl">│   └── moclub
</span></span><span class="line"><span class="cl">├── bindings           <span class="c1"># file containing the keybindings</span>
</span></span><span class="line"><span class="cl">├── colors             <span class="c1"># theming</span>
</span></span><span class="line"><span class="cl">├── muttrc             <span class="c1"># main configuration</span>
</span></span><span class="line"><span class="cl">└── signatures         <span class="c1"># signature are kept separate as well</span>
</span></span><span class="line"><span class="cl">    ├── aimebertrand-sign
</span></span><span class="line"><span class="cl">    ├── icloud-sign
</span></span><span class="line"><span class="cl">    ├── mocarchive-sign
</span></span><span class="line"><span class="cl">    └── moclub-sign
</span></span></code></pre></div><p>Once configured, the result looks like this:</p>
<figure><img src="https://macowners.club/images/neomutt.png" width="800px">
</figure>

<p>Some of the custom settings, that you will not find in the guide include a mailbox switcher/selector using <a href="https://macowners.club/posts/favorite-apps-tools-4/">fzf</a>. I use a script which is then bound to a key in the binding file.</p>
<p><strong>bash script <code>muttfzf.sh</code>:</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">match_folder<span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    find <span class="nv">$HOME</span>/.maildir -name <span class="s1">&#39;*&#39;</span> -type d <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-mindepth <span class="m">2</span> -maxdepth <span class="m">2</span> <span class="p">|</span><span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>grep -v <span class="s1">&#39;.git&#39;</span> <span class="p">|</span> grep -v <span class="s1">&#39;\/mu&#39;</span> <span class="p">|</span><span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        fzf --reverse
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">folder</span><span class="o">=</span><span class="k">$(</span>match_folder<span class="k">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;push &#39;c</span><span class="nv">$folder</span><span class="s2">&lt;enter&gt;&#39;&#34;</span>
</span></span></code></pre></div><p><strong>Keybinding:</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">macro index,pager J <span class="s2">&#34;:source ~/.dotfiles/bin/muttfzf.sh|&lt;enter&gt;&#34;</span>
</span></span></code></pre></div><h3 id="notmuch">Notmuch</h3>
<p><a href="https://notmuchmail.org">Notmuch</a> is an email indexing and search tool – just like <a href="https://www.djcbsoftware.nl/code/mu/mu4e.html">mu/mu4e</a> – based on <a href="https://xapian.org">Xapian</a>. This provides a way to index my emails from the <code>~/.maildir</code>. However separate to the mu xapian database.</p>
<p>This is useful because I can use the terminal to quickly fuzzy search for an email and display it quite fast on the command line. To achieve I use a custom function, that chains notmuch, fzf, mu &amp; nvim.</p>
<figure><img src="https://macowners.club/images/notmuch.png" width="800px">
</figure>

<figure><img src="https://macowners.club/images/notmuch1.png" width="800px">
</figure>

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="k">function</span> nmail<span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nb">set</span> -o pipefail
</span></span><span class="line"><span class="cl">    <span class="nv">mail</span><span class="o">=</span><span class="k">$(</span>notmuch show --format<span class="o">=</span>text <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>                   <span class="k">$(</span>notmuch search date:1970..2021 <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>                         fzf --reverse --preview <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>                             <span class="s2">&#34;echo {} | cut -d&#39; &#39; -f1 | cut -d&#39;:&#39; -f2 | \
</span></span></span><span class="line"><span class="cl"><span class="s2">xargs notmuch show --format=text | \
</span></span></span><span class="line"><span class="cl"><span class="s2">grep &#39;message{&#39; | head -n 1 | cut -d&#39;:&#39; -f6,7 | \
</span></span></span><span class="line"><span class="cl"><span class="s2">sed &#39;s/\ /\\\ /g&#39; | xargs mu view&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>                         cut -d<span class="s1">&#39; &#39;</span> -f1 <span class="p">|</span> cut -d<span class="s1">&#39;:&#39;</span> -f2<span class="k">)</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>               grep <span class="s1">&#39;message{&#39;</span> <span class="p">|</span> head -n <span class="m">1</span> <span class="p">|</span> cut -d<span class="s1">&#39;:&#39;</span> -f6,7 <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>               sed <span class="s1">&#39;s/\ /\\\ /g&#39;</span> <span class="p">|</span> xargs mu view<span class="k">)</span> <span class="o">&amp;&amp;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        <span class="nb">echo</span> <span class="nv">$mail</span> <span class="p">|</span> nvim -c <span class="s1">&#39;set ft=mail&#39;</span> -c <span class="s1">&#39;nmap q :q!&lt;CR&gt;&#39;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><p>This is beautifully convenient and fast, when I just want to quickly fuzzy match a subject in all of my emails and take a peak of the content. And I don&rsquo;t need to open a fully fledged client and search.</p>
<h2 id="conclusion">Conclusion</h2>
<p>Looking at this from a purely sober perspective it looks like a lot of hoops to go through. And granted the overhead is quite challenging. But the result speaks for itself. the convenience of finding emails at the speed of thought is a great one. Plus I have the added benefit of having all my email archive stored in a format that is readable by almost any sort of digital device.</p>
