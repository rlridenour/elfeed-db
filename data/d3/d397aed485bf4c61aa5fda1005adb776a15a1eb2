<p>Previously I wrote about the incompatibility of some Emacs themes with the tab-bar and my temporary fix:</p>
<p><a href="https://emacs.dyerdwelling.family/emacs/20240817082349-emacs--syncing-tab-bar-to-theme/">Syncing Tab Bar To Theme</a></p>
<figure><img src="https://emacs.dyerdwelling.family/ox-hugo/20241001092329-emacs--Syncing-Tab-Theme-After-Theme-Load.jpg" width="100%">
</figure>

<p>The tab bar was introduced in Emacs 27.1, during which I created a function to apply some simple logic to make the tabs look moderately decent and fit in with the new theme. The only thing I couldn&rsquo;t figure out was how to activate the function after a theme load, as there didn&rsquo;t seem to be a hook.</p>
<p>Well, actually there does seem to be such a hook and it seems to have gone into Emacs 29.  As with a lot of these little tweaks I found this on reddit in the emacs subreddit:</p>
<p><a href="https://www.reddit.com/r/emacs/comments/1ft3wwm/did_the_much_needed_theme_change_hook_arrive_with/">https://www.reddit.com/r/emacs/comments/1ft3wwm/did_the_much_needed_theme_change_hook_arrive_with/</a></p>
<p>From my previous post I wrote :</p>
<blockquote>
<p>Now that the <code>defun</code> is available, how to activate it? My first thought was to add a hook for when a theme is loaded, but there doesn&rsquo;t seem to be such a feature!?  I also tried advising around `load-theme`, but that didnâ€™t go well either, it worked for themes that were not loaded, but for those that were, a change in state was not detected, and the tab theme tweak was not applied.</p>
</blockquote>
<p>The solution is to simply add the following to your init file. Now that I know about this, I might even find some other use for it.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(defun my/after-theme-loaded(theme)
</span></span><span style="display:flex;"><span>  (my/sync-tab-bar-to-theme))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(add-hook <span style="color:#e6db74">&#39;enable-theme-functions</span> <span style="color:#e6db74">&#39;my/after-theme-loaded</span>)
</span></span></code></pre></div><p>with the original <code>my/sync-tab-bar-to-theme</code> as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(defun my/sync-tab-bar-to-theme ()
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;Synchronize tab-bar faces with the current theme.&#34;</span>
</span></span><span style="display:flex;"><span>  (interactive)
</span></span><span style="display:flex;"><span>  (let ((default-bg (face-background <span style="color:#e6db74">&#39;default</span>))
</span></span><span style="display:flex;"><span>        (default-fg (face-foreground <span style="color:#e6db74">&#39;default</span>))
</span></span><span style="display:flex;"><span>        (inactive-fg (face-foreground <span style="color:#e6db74">&#39;mode-line-inactive</span>))) <span style="color:#75715e">;; Fallback to mode-line-inactive</span>
</span></span><span style="display:flex;"><span>    (custom-set-faces
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">`</span>(tab-bar ((<span style="color:#66d9ef">t</span> (:inherit default :background <span style="color:#f92672">,</span>default-bg :foreground <span style="color:#f92672">,</span>default-fg))))
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">`</span>(tab-bar-tab ((<span style="color:#66d9ef">t</span> (:inherit default :background <span style="color:#f92672">,</span>default-fg :foreground <span style="color:#f92672">,</span>default-bg))))
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">`</span>(tab-bar-tab-inactive ((<span style="color:#66d9ef">t</span> (:inherit default :background <span style="color:#f92672">,</span>default-bg :foreground <span style="color:#f92672">,</span>inactive-fg)))))))
</span></span></code></pre></div><p>My tab theme fix is now activated on every theme load, and I no longer have to rely on muscle memory to make Emacs look colour-coherent when changing themes, which I do a lot!! ðŸ˜€</p>