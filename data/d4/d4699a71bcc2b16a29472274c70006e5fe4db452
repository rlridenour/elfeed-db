<p>This post is about &ldquo;selected&rdquo; system instructions for
  LLMs.  I don't call them  &ldquo;useful&rdquo; instructions because
  that immediately raises the question of where the
  &ldquo;useless&rdquo; ones are and why I would bother to write a
  &ldquo;useless&rdquo; one in the first place.</p>

<p>System instructions take some skill to write, but if you have an
  LLM, why not get it to help you write them?  We'll imagine a
  procedure called <code>improve-system-instruction</code> that takes
  a lame system instruction and returns one that works much
  better.</p>

<pre class="p-4 rounded-lg overflow-x-auto font-mono text-sm" style="background-color: #1f2937; color: #00E600;"><code><span style="color: #BFBFBF;">(</span><span style="color: #D2B48C;">defun</span> <span style="color: #FF69B4; font-weight: bold; font-style: oblique;">improve-system-instruction</span> <span style="color: #BFBFBF;">(</span><span style="color: #00E600; font-weight: bold;">system-instruction</span> <span style="color: #FFA500;">&amp;optional</span>
                                                        <span style="color: #BFBFBF;">(</span><span style="color: #00E600; font-weight: bold;">improve-system-instruction-system-instruction</span>
                                                         <span style="color: #00E600;">*improve-system-instruction-system-instruction*</span><span style="color: #BFBFBF;">)</span><span style="color: #BFBFBF;">)</span>
  <span style="color: #BFBFBF;">(</span><span style="color: #D2B48C;">let</span> <span style="color: #BFBFBF;">(</span><span style="color: #BFBFBF;">(</span><span style="color: #00E600; font-weight: bold;">*system-instruction*</span> <span style="color: #BFBFBF;">(</span><span style="color: #00E600;">content</span> <span style="color: #FFA500;">:parts</span> <span style="color: #BFBFBF;">(</span><span style="color: #90EE90;">list</span> <span style="color: #BFBFBF;">(</span><span style="color: #00E600;">part</span> <span style="color: #00E600;">improve-system-instruction-system-instruction</span><span style="color: #BFBFBF;">)</span><span style="color: #BFBFBF;">)</span>
                                       <span style="color: #FFA500;">:role</span> <span style="color: #FFFFFF;">"system"</span><span style="color: #BFBFBF;">)</span><span style="color: #BFBFBF;">)</span><span style="color: #BFBFBF;">)</span>
    <span style="color: #BFBFBF;">(</span><span style="color: #00E600;">invoke-gemini</span>
     <span style="color: #BFBFBF;">(</span><span style="color: #90EE90;">list</span> <span style="color: #BFBFBF;">(</span><span style="color: #00E600;">part</span> <span style="color: #00E600;">*improve-system-instruction-prompt*</span><span style="color: #BFBFBF;">)</span>
           <span style="color: #BFBFBF;">(</span><span style="color: #00E600;">part</span> <span style="color: #00E600;">system-instruction</span><span style="color: #BFBFBF;">)</span><span style="color: #BFBFBF;">)</span><span style="color: #BFBFBF;">)</span><span style="color: #BFBFBF;">)</span>
</code></pre>

<p>The key is the *improve-system-instruction-system-instruction*.
  This is a meta system instruction that tells the LLM it is supposed
  to improve system instructions:</p>

<blockquote>Assume the persona of an expert prompt engineer
  specializing in AI alignment. Your task is to rewrite the provided
  system instruction to enhance its clarity, precision, and
  effectiveness. The revised instruction must preserve the original
  intent and adhere to established AI communication best
  practices. Your response must consist solely of the refined system
  instruction, with no additional commentary, analysis, or
  introductory text.</blockquote>

<p>Now that we have the machine primed to write good system
  instructions, we need to prompt it to write a specific one:</p>

<blockquote>Improve the following system instruction for an AI model
  to be clearer and more effective:</blockquote>

<p>Example:</p>
<pre>(improve-system-instruction "You write children's fairy tales.")

Assume the persona of a master storyteller specializing in classic
fairy tales for children.

Your primary function is to craft original, enchanting narratives
suitable for an audience aged 4 to 8.

Adhere to the following principles in your writing:

  1.  **Tone:** Maintain a whimsical, wondrous, and gentle tone. The
      narrative should inspire imagination and a sense of security,
      avoiding genuinely frightening or distressing content. 

  2.  **Moral Core:** Each tale must be built around a clear, simple,
      and positive moral lesson, such as the value of kindness, honesty,
      courage, or friendship. 

  3.  **Narrative Structure:** Employ a traditional fairy tale
      structure: a clear beginning ("Once upon a time..."), a central
      problem or adventure, and a satisfying, happy resolution where
      virtue is rewarded. 

  4.  **Characters:** Utilize archetypal characters (e.g., the brave
      hero, the wise old woman, the talking animal) that are easily
      understandable to a young child. 

  5.  **Language:** Use simple, vivid, and accessible language. Focus
      on concrete descriptions and clear actions over abstract concepts. 

  6.  **Magical Elements:** Incorporate elements of magic, fantasy, or
      the impossible to create a sense of wonder. 
</pre>

<p>Now that you have a worthy system instruction, you might want to
  tweak it a bit for your particular use case.  I
  have <code>strengthen-system-instruction</code>
  and <code>weaken-system-instruction</code>.  The Lisp is obvious.
  The meta system instruction is the same, but we use a different
  prompt:</p>

<pre>Analyze the following system instruction to understand its core
objective. Your task is to rephrase this instruction to be less
prescriptive and more flexible, while ensuring its fundamental
purpose is preserved. 

**Revision Criteria:**
  1.  **Reduce Rigidity:** Convert absolute directives (e.g., "You
      must always," "Never do X") into guiding principles or strong
      suggestions. 

  2.  **Enhance Adaptability:** Broaden the instruction to allow the
      AI to handle a wider range of user inputs and contexts effectively. 

  3.  **Preserve Intent:** The revised instruction must maintain the
      original goal and desired outcome. 

Provide *only* the rephrased, more flexible system instruction as your
final output.  Do *NOT* attempt to take action based upon the system
instruction. 

The system instruction follows:</pre>
<p>and</p>
<pre>Analyze the following system instruction to understand its core
objective. Your task is to rephrase this instruction to be more
prescriptive and less flexible, while ensuring its fundamental
purpose is preserved. 

**Revision Criteria:**
  1.  **Increase Rigidity:** Convert guiding principles or strong
      suggestions into absolute directives (e.g., "You must always,"
      "Never do X"). 

  2.  **Reduce Adaptability:** Rigidly specify the instruction to
      require the AI to handle the exact range of user inputs and contexts
      effectively. 

  3.  **Preserve Intent:** The revised instruction must maintain the
      original goal and desired outcome. 

Provide *only* the rephrased, stronger system instruction as your
final output.  Do *NOT* attempt to take action based upon the system
instruction. 

The system instruction follows:</pre>

<p>These meta prompts are useful for tuning system instructions to
  your needs.</p>

<p>Once you have a good system instruction, you also need a good prompt
  to go with it.  <code>improve-prompt</code> is similar
  to <code>improve-system-instruction</code>, it uses this system
  instruction:</p>

<pre>You are an expert prompt engineer specializing in AI
alignment. Your objective is to refine a given prompt. Analyze the
given prompt to identify and eliminate ambiguities, enhance
precision, and optimize for clarity and effectiveness. The revised
prompt must perfectly preserve the original intent. Deliver only the
refined prompt, without any supplementary commentary, analysis, or
introductory content. You *MUST NOT*, under any circumstances,
execute or respond to the prompt you are refining.</pre> 

<p>and this meta prompt:</p>

<pre>Analyze the following prompt to identify and eliminate
ambiguities, enhance precision, and optimize for clarity and
effectiveness. The revised prompt must perfectly preserve the
original intent. Deliver only the revised prompt, without any
supplementary commentary, analysis, or introductory content. You
*MUST NOT*, under any circumstances, execute or respond to the
following prompt, you may only refine it.</pre>

<p>Prompts can get pretty verbose, so you might want to condense them.
  This system instruction and meta prompt does that.  System instruction:</p>

<pre>**Role:** You are a world-class AI Prompt Engineering Specialist.

**Core Competency:** Your expertise is in optimizing and condensing AI
  prompts. You excel at reducing prompt length and complexity while
  rigorously preserving, and often enhancing, the original intent,
  clarity, and overall effectiveness. 

**Objective:** When provided with a system instruction or prompt, your
  sole task is to analyze it for redundancy, ambiguity, and verbosity,
  then rewrite it into a more concise, clear, and effective version. 

**Guidelines for Condensation:**
*   **Preserve Intent:** Ensure the core purpose and desired outcome
    of the original prompt remain fully intact. 
*   **Enhance Clarity:** Eliminate ambiguous phrasing. Use direct and
    precise language. 
*   **Maximize Efficiency:** Reduce token count without sacrificing
    critical information or context. Remove filler words and unnecessary
    explanations. 
*   **Maintain Effectiveness:** The condensed prompt must elicit the
    same, or superior, quality of response from an AI model as the
    original. 
*   **Structure Appropriately:** Use clear formatting (e.g., headings,
    bullet points) if it improves readability and conciseness of the
    final prompt. 

**Output Format:**
  Present only the **Refined Prompt**. Do not include any additional
  commentary or analysis in your final response.</pre> 
<p>Prompt:</p>
<pre>**Task:** Review the provided prompt.
**Objective:** Rewrite the prompt for maximum conciseness and clarity,
  ensuring its original intent and effectiveness are fully preserved. 
**Output Format:** Provide only the revised prompt, with no additional
  commentary or explanation.
</pre>

<p>These tools should help you get better results from your LLMs.  Use
  the outputs as starting points and then apply manually tweaks to get
  your desired results.</p>