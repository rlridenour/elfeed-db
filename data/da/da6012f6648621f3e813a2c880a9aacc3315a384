<p>My <code>dired</code> replacement of Dolphin / linux terminal continues.  The next thing is something useful to me but uncommon and something that dired didn&rsquo;t seem to be able to do out of the box.</p>
<figure class="emacs-img"><img src="https://emacs.dyerdwelling.family/ox-hugo/emacs--dired-folder-size__emacs_linux.jpg">
</figure>

<p>That is to be able to recursively display the size of a folder / files.</p>
<p>Every now and again I like to keep my files and data under control especially as I am using syncthing to backup my core data to my phone.</p>
<p>It is very easy to let a large download or maybe an emacs exported large file sneak through.  My tools of choice have generally been the following and in time order:</p>
<ul>
<li>Terminal using <code>du -h --max-depth 1 &lt;folder&gt;</code></li>
<li>Gnome Disk Usage Analyser (boabab)</li>
<li>Filelight - now I have moved to KDE</li>
</ul>
<p>So how do I achieve this?</p>
<p>I could perhaps try something from emacs packages but as you already know my first port of call is to try and preserve vanilla emacs where possible which might mean in this case finding / or writing some elisp.</p>
<p>The <code>www.emacswiki.org</code> comes to the rescue once again! with yet another elisp snippet as thus:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(defun dired-get-size ()
</span></span><span style="display:flex;"><span>  (interactive)
</span></span><span style="display:flex;"><span>  (let ((files (dired-get-marked-files)))
</span></span><span style="display:flex;"><span>    (with-temp-buffer
</span></span><span style="display:flex;"><span>      (<span style="color:#a6e22e">apply</span> <span style="color:#e6db74">&#39;call-process</span> <span style="color:#e6db74">&#34;/usr/bin/du&#34;</span> <span style="color:#66d9ef">nil</span> <span style="color:#66d9ef">t</span> <span style="color:#66d9ef">nil</span> <span style="color:#e6db74">&#34;-sch&#34;</span> files)
</span></span><span style="display:flex;"><span>      (<span style="color:#a6e22e">message</span> <span style="color:#e6db74">&#34;Size of all marked files: %s&#34;</span>
</span></span><span style="display:flex;"><span>        (progn
</span></span><span style="display:flex;"><span>          (<span style="color:#a6e22e">re-search-backward</span> <span style="color:#e6db74">&#34;\\(^[0-9.,]+[A-Za-z]+\\).*total$&#34;</span>)
</span></span><span style="display:flex;"><span>          (match-string <span style="color:#ae81ff">1</span>))))))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(<span style="color:#a6e22e">define-key</span> dired-mode-map (kbd <span style="color:#e6db74">&#34;?&#34;</span>) <span style="color:#e6db74">&#39;dired-get-size</span>)
</span></span></code></pre></div><p>I don&rsquo;t need anything too fancy here, for example a full dired integration like Solid Explorer on android but just showing the total size in the minibuffer is fine and why not leverage the existing operating system commands rather than completely depending on elisp!</p>