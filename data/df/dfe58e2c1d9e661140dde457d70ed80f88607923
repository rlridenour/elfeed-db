<h2 id="what-is-fzf">What is fzf</h2>
<figure><img src="https://macowners.club/images/fzf_fv.png" width="800px">
</figure>

<p>Again starting with quotes by the developer, <a href="https://github.com/junegunn">Junegunn Choi</a>.</p>
<blockquote>
<p>fzf is a general-purpose command-line fuzzy finder.</p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>It&rsquo;s an interactive Unix filter for command-line that can be used with any list; files, command history, processes, hostnames, bookmarks, git commits, etc.</p>
</blockquote>
<p>However with this one, I will take a shot at explaining some aspects together with some examples.</p>
<p><a href="https://github.com/junegunn/fzf">fzf</a> takes in a list of stuff through the <code>stdin</code>, gives you an interface to fuzzy match (a) line(s) and spits out the result(s) to the <code>stdout</code>. The delimiter for the list should be a new line <code>\n</code>.</p>
<p>A fantastic example of a tool that does one thing brilliantly. Unix philosophy and all.</p>
<p>This does not sound like much at first, but with the tool being on the command-line one can imagine what one can do with it in a pipeline.</p>
<p><code>fzf</code> has of course a few options to make it even more appealing. File preview, multi selector and sorting to name a few.</p>
<h2 id="few-examples-of-mine">Few Examples of mine</h2>
<p>For illustration purposes these are some examples that I use myself.</p>
<p><a href="https://gitlab.com/aimebertrand/dotfiles">My gitlab dotfiles repository</a> should have more of the stuff that I use <code>fzf</code> for if you like to go fishing there.</p>
<p><strong>Now if you want to get even more inspiration. There are a whole bunch of community examples in the <a href="https://github.com/junegunn/fzf/wiki">git repository</a> of the author.</strong></p>
<h3 id="find-and-open-files">Find &amp; open files</h3>
<p>This finds files with <a href="https://github.com/sharkdp/fd">fd</a>, pipes the list into <code>fzf</code> and the fuzzy matched results get opened with Vim. It also uses <a href="https://github.com/sharkdp/bat">bat</a> for file previews.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="k">function</span> fv<span class="o">()</span> <span class="o">(</span>
</span></span><span class="line"><span class="cl">    <span class="nb">export</span> <span class="nv">FZF_DEFAULT_COMMAND</span><span class="o">=</span><span class="s2">&#34;fd -p -i -H -L -t f -t l -t x \
</span></span></span><span class="line"><span class="cl"><span class="s2">-E &#39;icloud/*&#39; \
</span></span></span><span class="line"><span class="cl"><span class="s2">-E &#39;Library/*&#39; \
</span></span></span><span class="line"><span class="cl"><span class="s2">-E &#39;Pictures/Photos Library.photoslibrary/*&#39; \
</span></span></span><span class="line"><span class="cl"><span class="s2">-E &#39;.git&#39;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nv">IFS</span><span class="o">=</span><span class="s1">$&#39;\n&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>       <span class="nv">files</span><span class="o">=(</span><span class="k">$(</span>fzf --reverse <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>                    --preview <span class="s2">&#34;bat --theme=timu-spacegrey --color=always {}&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>                    --query<span class="o">=</span><span class="s2">&#34;</span><span class="nv">$1</span><span class="s2">&#34;</span> --multi --select-1 --exit-0<span class="k">)</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="o">[[</span> -n <span class="s2">&#34;</span><span class="nv">$files</span><span class="s2">&#34;</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> vim <span class="s2">&#34;</span><span class="si">${</span><span class="nv">files</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">)</span>
</span></span></code></pre></div><figure><img src="https://macowners.club/images/fzf_fv.gif" width="800px">
</figure>

<h3 id="change-directory">Change directory</h3>
<p>This uses <code>fzf</code>, <code>fd</code> and <code>cd</code> in the pipeline.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="k">function</span> fcd<span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nb">export</span> <span class="nv">FZF_DEFAULT_COMMAND</span><span class="o">=</span><span class="s2">&#34;fd -p -i -H -L -t d \
</span></span></span><span class="line"><span class="cl"><span class="s2">-E &#39;icloud/*&#39; \
</span></span></span><span class="line"><span class="cl"><span class="s2">-E &#39;Library/*&#39; \
</span></span></span><span class="line"><span class="cl"><span class="s2">-E &#39;Pictures/Photos Library.photoslibrary/*&#39; \
</span></span></span><span class="line"><span class="cl"><span class="s2">-E &#39;.git&#39;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">local</span> dir
</span></span><span class="line"><span class="cl">    <span class="nv">dir</span><span class="o">=</span><span class="k">$(</span><span class="nb">cd</span> <span class="o">&amp;&amp;</span> fzf --reverse +m<span class="k">)</span> <span class="o">&amp;&amp;</span> <span class="nb">cd</span> <span class="o">&amp;&amp;</span> <span class="nb">cd</span> <span class="s2">&#34;</span><span class="nv">$dir</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><h3 id="find-and-install-homebrew-cask">Find &amp; install Homebrew cask</h3>
<p>This one is fairly wonky but quite self-explanatory.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="k">function</span> bcinst<span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    curl -s https://formulae.brew.sh/cask/ <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    grep <span class="s1">&#39;&lt;td&gt;&#39;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    grep href <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    awk -F <span class="s1">&#39;/&#39;</span> <span class="s1">&#39;{print $3}&#39;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    awk -F <span class="s1">&#39;&#34;&#39;</span> <span class="s1">&#39;{print $1}&#39;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    fzf -m <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    xargs brew install --cask
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><h3 id="switch-folders-in-neomutt">Switch folders in neomutt</h3>
<p>I use <a href="https://neomutt.org/">NeoMutt</a> as a fallback from <a href="https://macowners.club/posts/favorite-apps-tools-2/#email-client">Mu4e in Emacs</a> for my emails. But I have gotten so used to the fuzzy matching interface in Emacs (ivy) to jump to emails folders that I need it here as well. <code>fzf</code> to the rescue:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">match_folder<span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    find <span class="nv">$HOME</span>/.maildir -name <span class="s1">&#39;*&#39;</span> -type d <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>         -mindepth <span class="m">2</span> -maxdepth <span class="m">2</span> <span class="p">|</span><span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        grep -v <span class="s1">&#39;.git&#39;</span> <span class="p">|</span> grep -v <span class="s1">&#39;\/mu&#39;</span> <span class="p">|</span><span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        fzf --reverse
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">folder</span><span class="o">=</span><span class="k">$(</span>match_folder<span class="k">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;push &#39;c</span><span class="nv">$folder</span><span class="s2">&lt;enter&gt;&#39;&#34;</span>
</span></span></code></pre></div><h3 id="ranger-integration">Ranger integration</h3>
<p>Admittedly and exactly because of the awesomeness of <code>fzf</code> I don&rsquo;t use <a href="https://github.com/ranger/ranger">ranger</a> as a file manager anymore. But while tinkering, I managed to integrate <code>fzf</code> in <code>ranger</code> as a command.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">fzfcd</span><span class="p">(</span><span class="n">Command</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">command</span> <span class="o">=</span> <span class="s2">&#34;cd &amp;&amp; fd -p -i -H -L -t d </span><span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="s2">-E &#39;icloud/*&#39; </span><span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="s2">-E &#39;Library/*&#39; </span><span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="s2">-E &#39;Pictures/Photos Library.photoslibrary/*&#39; </span><span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="s2">--no-ignore-vcs --exclude &#39;.git&#39; | fzf&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="n">fzf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fm</span><span class="o">.</span><span class="n">execute_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">stdout</span><span class="o">=</span><span class="n">PIPE</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">stdout</span><span class="p">,</span> <span class="n">stderr</span> <span class="o">=</span> <span class="n">fzf</span><span class="o">.</span><span class="n">communicate</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="n">directory</span> <span class="o">=</span> <span class="n">stdout</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">directory</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;HOME&#39;</span><span class="p">],</span> <span class="n">directory</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">fm</span><span class="o">.</span><span class="n">cd</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span>
</span></span></code></pre></div><h2 id="fzf-in-vim">Fzf in Vim</h2>
<p>The author of <code>fzf</code> created <a href="https://github.com/junegunn/fzf.vim">fzf.vim</a> as well. An awesome plugin for Vim that implements great fuzzy matching for a whole host of commands.</p>
<figure><img src="https://macowners.club/images/fzf_vim.png" width="800px">
</figure>

<dl>
<dt><code>:Files</code> [PATH]</dt>
<dd>Fuzzy match and switch to files.</dd>
<dt><code>:GFiles</code></dt>
<dd>Fuzzy match and switch to files in a git repository.</dd>
<dt><code>:Buffers</code></dt>
<dd>Fuzzy match and switch to buffer.</dd>
<dt><code>:Ag</code> or <code>:Rg</code> [PATTERN]</dt>
<dd>Fuzzy match and switch to search results with <a href="https://github.com/ggreer/the%5Fsilver%5Fsearcher">The Silver Searcher</a>, <code>ag</code> or <a href="https://github.com/BurntSushi/ripgrep">ripgrep</a>, <code>rg</code>.</dd>
</dl>
<p>This are just a few of the available commands. <code>:h Files</code> in Vim will get you to the help section with an exhaustive list.</p>
<h2 id="conclusion">Conclusion</h2>
<p>There is an argument to be made that fuzzy finding/matching is the best user interface out there. Not just for the CLI, but for any kind of navigation, period.</p>
<p>This is somewhat evident by the popularity of such programs as <a href="https://www.alfredapp.com/">Alfred</a> in macOS, completion frameworks in Emacs (<a href="https://github.com/minad/vertico">vertico</a>, <a href="https://github.com/abo-abo/swiper">ivy</a>, <a href="https://github.com/emacs-helm/helm">helm</a>, etc.), <a href="https://github.com/davatorium/rofi">rofi</a> &amp; <a href="https://tools.suckless.org/dmenu/">dmenu</a> for Gnu/Linux users and vast number of other tools, utilities and applications.</p>
<p><strong>As I believe to have shown here with just the few examples, <code>fzf</code> masters the fuzzy matching/finding on the command-line like a champ. Enough said!</strong></p>
