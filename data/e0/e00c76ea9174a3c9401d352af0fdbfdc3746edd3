<p>In <a href="https://www.rousette.org.uk/archives/exploring-desktop-linux/">my first post in this series</a> I was just getting comfortable with Hyprland and setting up my new Linux box the way I wanted it. In this part, I will talk about switching to <a href="https://aylur.github.io/ags-docs/">Aylur&rsquo;s GTK Shell</a> (<code>ags</code> for short) as my status bar and panel provider, and sorting out how to play music files locally.</p>
<h3 id="aylurs-gtk-shell">Aylur&rsquo;s GTK Shell</h3>
<figure role="group"><img
 srcset="https://www.rousette.org.uk/.netlify/images?url=https://f000.backblazeb2.com/file/bsag-blog-imgs/morse_ags_statusbar.png?&w=100 100w,https://www.rousette.org.uk/.netlify/images?url=https://f000.backblazeb2.com/file/bsag-blog-imgs/morse_ags_statusbar.png?&w=200 200w,https://www.rousette.org.uk/.netlify/images?url=https://f000.backblazeb2.com/file/bsag-blog-imgs/morse_ags_statusbar.png?&w=400 400w,https://www.rousette.org.uk/.netlify/images?url=https://f000.backblazeb2.com/file/bsag-blog-imgs/morse_ags_statusbar.png?&w=800 800w,https://www.rousette.org.uk/.netlify/images?url=https://f000.backblazeb2.com/file/bsag-blog-imgs/morse_ags_statusbar.png?&w=1000 1000w,https://www.rousette.org.uk/.netlify/images?url=https://f000.backblazeb2.com/file/bsag-blog-imgs/morse_ags_statusbar.png?&w=1500 1500w"
 src="https://www.rousette.org.uk/.netlify/images?url=https://f000.backblazeb2.com/file/bsag-blog-imgs/morse_ags_statusbar.png?&w=1000"
 sizes="(max-width: 768px) 100vw, 1000px"
 alt="Screenshot showing a statusbar at the top of a screen with icons and text. The background is dark blue and the icons are shades of pastel" width="3840" height="280"><figcaption>
 <p>Statusbar using ags on Hyprland.</p>
 </figcaption>
</figure>

<p>I was using <a href="https://github.com/Alexays/Waybar">Waybar</a> for my status bars and so on before, and liked it well enough, but I got interested in <a href="https://aylur.github.io/ags-docs/">Aylur&rsquo;s GTK Shell (ags)</a> after seeing some really fancy and functional looking status bars and panels, not least those in Aylur&rsquo;s own <a href="https://github.com/Aylur/dotfiles">dotfiles</a>. <code>ags</code> can provide a whole range of UI parts from status bars to launchers and on-screen notifications, so it can potentially replace a host of other utilities with a unified interface. It&rsquo;s written in Javascript (or maybe Typescript, I&rsquo;m not very familiar with the flavours of Javascript), and styled with good old CSS.</p>
<p>I&rsquo;m not particularly great with Javascript, so I took my usual bsag route of using someone else&rsquo;s config and tinkering with it to find out how it works and adapting the bits to suit me. I used Aylur&rsquo;s own <a href="https://github.com/Aylur/dotfiles">dotfiles</a> as they looked lovely, and were pretty close to the kind of thing I wanted anyway.</p>
<p>There&rsquo;s a status bar at the top, with (from left to right):</p>
<ul>
<li>a button for launching a launcher</li>
<li>a widget to show which workspace you are on and which workspaces are occupied with windows (the dots)</li>
<li>a taskbar with running applications (the active one indicated by a dot)</li>
<li>the time/date which shows a panel with a calendar and notifications on it</li>
<li>a tray for minimised applications/utilities</li>
<li>a button which launches a quicksettings panel with a load of useful stuff on it, and finally</li>
<li>a powerbutton which pops up a horizontal menu of options to suspend the box, logout, restart, power off and so on.</li>
</ul>
<figure role="group"><img
 srcset="https://www.rousette.org.uk/.netlify/images?url=https://f000.backblazeb2.com/file/bsag-blog-imgs/morse_ags_date_widget.png?&w=100 100w,https://www.rousette.org.uk/.netlify/images?url=https://f000.backblazeb2.com/file/bsag-blog-imgs/morse_ags_date_widget.png?&w=200 200w,https://www.rousette.org.uk/.netlify/images?url=https://f000.backblazeb2.com/file/bsag-blog-imgs/morse_ags_date_widget.png?&w=400 400w,https://www.rousette.org.uk/.netlify/images?url=https://f000.backblazeb2.com/file/bsag-blog-imgs/morse_ags_date_widget.png?&w=800 800w,https://www.rousette.org.uk/.netlify/images?url=https://f000.backblazeb2.com/file/bsag-blog-imgs/morse_ags_date_widget.png?&w=1000 1000w,https://www.rousette.org.uk/.netlify/images?url=https://f000.backblazeb2.com/file/bsag-blog-imgs/morse_ags_date_widget.png?&w=1500 1500w"
 src="https://www.rousette.org.uk/.netlify/images?url=https://f000.backblazeb2.com/file/bsag-blog-imgs/morse_ags_date_widget.png?&w=1000"
 sizes="(max-width: 768px) 100vw, 1000px"
 alt="A dark blue pop up panel showing notifications of a screenshot being saved and copied on the left, and the time and a calendar on the right." width="1800" height="1024"><figcaption>
 <p>The popup date panel.</p>
 </figcaption>
</figure>

<p>If you change the volume with the keyboard shortcut you have set up, by using the slider on the quicksettings panel, or by scrolling the mouse over the quicksettings button, you also get a live on-screen display showing you the current level.</p>
<p>The launcher (to launch applications with a <code>.desktop</code> entry is very fast and responsive, and shows you initially a list of default apps that you can set up, then shows additional options as you type to narrow down the name. You can launch it with the leftmost EndeavourOS icon widget, but I also set it so that I can just tap the Super key (i.e. Command key on a Mac) alone, and it will pop up. It&rsquo;s probably my most used widget. The workspaces widget will also pop up an overlay showing outlines of windows on each of the workspaces, and again I have set that to a keyboard shortcut (<code>super+tab</code>). Any of the widgets can be toggled by name in a script, so you can bind them to a keyboard shortcut. There is also a great Settings app that you can launch from the Quicksettings panel, and that enables you to configure a lot of aspects of <code>ags</code>, saving the configuration in <code>~/.cache/ags/options.json</code>.</p>
<figure role="group"><img
 srcset="https://www.rousette.org.uk/.netlify/images?url=https://f000.backblazeb2.com/file/bsag-blog-imgs/morse_ags_launcher.png?&w=100 100w,https://www.rousette.org.uk/.netlify/images?url=https://f000.backblazeb2.com/file/bsag-blog-imgs/morse_ags_launcher.png?&w=200 200w,https://www.rousette.org.uk/.netlify/images?url=https://f000.backblazeb2.com/file/bsag-blog-imgs/morse_ags_launcher.png?&w=400 400w,https://www.rousette.org.uk/.netlify/images?url=https://f000.backblazeb2.com/file/bsag-blog-imgs/morse_ags_launcher.png?&w=800 800w,https://www.rousette.org.uk/.netlify/images?url=https://f000.backblazeb2.com/file/bsag-blog-imgs/morse_ags_launcher.png?&w=1000 1000w,https://www.rousette.org.uk/.netlify/images?url=https://f000.backblazeb2.com/file/bsag-blog-imgs/morse_ags_launcher.png?&w=1500 1500w"
 src="https://www.rousette.org.uk/.netlify/images?url=https://f000.backblazeb2.com/file/bsag-blog-imgs/morse_ags_launcher.png?&w=1000"
 sizes="(max-width: 768px) 100vw, 1000px"
 alt="A dark coloured popup dialog box showing a list of applications with icons and descriptions. The text &#39;em&#39; is entered in the input box at the top to narrow down the list." width="3840" height="2160"><figcaption>
 <p>The application launcher.</p>
 </figcaption>
</figure>

<p>So far, I have only mildly tweaked Aylur&rsquo;s setup. I&rsquo;ve changed the theme to the <a href="https://catppuccin.com">Catppuccin theme</a>, which I decided that I preferred to TokyoNight. I&rsquo;ve pretty much Catppuccin-ed All The Things, except for Emacs. After you have used <a href="https://protesilaos.com/emacs/modus-themes">Prot&rsquo;s Modus themes</a>, nothing else feels quite as good. Luckily the Modus themes fit in fairly well with Catppuccin, so it looks reasonably consistent. I set Berkeley Mono as the UI font, after patching the font with <a href="https://www.nerdfonts.com">Nerd Fonts</a> so that the icons would display properly. I also managed to tweak the stying for the task bar to put the indicator dot under the icon rather than above, and to make it a thinner line rather than a dot. In the long term, I would like to move the task bar somewhere else (perhaps popping up at the bottom of the screen) so that you can toggle it on and off. I like it and find it useful to jump directly to an application, but I would quite like to use that spot to show the current window title. I&rsquo;ll let you know if I figure out how to do that.</p>
<h3 id="music">Music</h3>
<p>I have a NUC in the living room running <a href="https://roon.app/en/">Roon</a> which streams both my own music files and music from Qobuz to a variety of devices. This can be controlled via a streaming player attached to speakers in my office, or via the Roon app on my iPhone, so it wasn&rsquo;t strictly necessary to set up a player for local files. However, I do have a decent collection of FLAC and ALAC files, and <code>ags</code> has a nice player widget, plus a scrolling track notification in the status bar, so it seemed rude not to try.</p>
<p>One of the delights (but also slightly frustrating things) about moving to another OS is that you have no idea what the good applications are for different tasks. I have been on macOS for so long that I tend to know what the landscape is there, but not for Linux, particularly as things have moved on so much.</p>
<p>I had heard of <a href="https://www.musicpd.org">mpd</a> as a daemon for playing music and the commandline player to control it <a href="https://github.com/ncmpcpp/ncmpcpp">ncmpcpp</a>, so they were the first things I tried <sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>. This worked well to play my files, and I quite liked the barebones interface in <code>ncmpcpp</code>. I was really impressed that it handled my different hi-res file formats perfectly and without any configuration. I was expecting to have much more of a fight with that, but it just worked out of the box.</p>
<p>However, it was more of a struggle to integrate it with <code>ags</code>, as that used <a href="https://mpv.io/installation/">mpv</a>, which can play either audio or video files, so I ended up switching to that. I also came across <a href="https://harmonoid.com">Harmonoid</a>, which is a beautiful and streamlined player which works with <code>mpv</code>. With those two in place, I just needed <a href="https://github.com/hoyon/mpv-mpris">mpv-mpris</a> and <a href="https://github.com/acrisci/playerctl">playerctl</a> to enable me to control playback with the keyboard or the <code>ags</code> widget, and it all worked wonderfully. It took a bit of searching and experimenting to get everything set up correctly, but the result is great.</p>
<figure role="group"><img
 srcset="https://www.rousette.org.uk/.netlify/images?url=https://f000.backblazeb2.com/file/bsag-blog-imgs/morse_harmonoid_ags_quicksettings_widget.png?&w=100 100w,https://www.rousette.org.uk/.netlify/images?url=https://f000.backblazeb2.com/file/bsag-blog-imgs/morse_harmonoid_ags_quicksettings_widget.png?&w=200 200w,https://www.rousette.org.uk/.netlify/images?url=https://f000.backblazeb2.com/file/bsag-blog-imgs/morse_harmonoid_ags_quicksettings_widget.png?&w=400 400w,https://www.rousette.org.uk/.netlify/images?url=https://f000.backblazeb2.com/file/bsag-blog-imgs/morse_harmonoid_ags_quicksettings_widget.png?&w=800 800w,https://www.rousette.org.uk/.netlify/images?url=https://f000.backblazeb2.com/file/bsag-blog-imgs/morse_harmonoid_ags_quicksettings_widget.png?&w=1000 1000w,https://www.rousette.org.uk/.netlify/images?url=https://f000.backblazeb2.com/file/bsag-blog-imgs/morse_harmonoid_ags_quicksettings_widget.png?&w=1500 1500w"
 src="https://www.rousette.org.uk/.netlify/images?url=https://f000.backblazeb2.com/file/bsag-blog-imgs/morse_harmonoid_ags_quicksettings_widget.png?&w=1000"
 sizes="(max-width: 768px) 100vw, 1000px"
 alt="A music player shows a grid of album covers in the background, and a popup panel in the upper right shows volume levels, buttons for computer settings like wifi and bluetooth, and a mini player window showing the track being played in the music player." width="3840" height="2160"><figcaption>
 <p>Harmonoid music player showing the album view, and the Quicksettings ags window with miniplayer.</p>
 </figcaption>
</figure>

<h3 id="experience-so-far">Experience so far</h3>
<p>I am still having a lot of fun, despite moments of frustration. A theme that I think will come out of this adventure is that setting (most) things up on Linux involves a bit more fiddling initially, but is much more flexible and powerful once you get it set up.</p>
<p>I am loving using a proper tiling window manager again. Every time I use my work laptop which runs macOS, I get frustrated by how clunky it is working with windows on macOS. I also really like being able to create a whole UI with which to interact with my system. In particular, I like being able to set keyboard shortcuts for pretty much everything. One of the benefits of using a window manager like Hyprland rather than a Desktop Environment is that you have almost a blank slate to set up keyboard shortcuts in whatever scheme makes most sense to you. It&rsquo;s empowering and not a little intoxicating.</p>
<p>Next time, I&rsquo;ll talk about syncing files, and some recent changes I have made to the apps that I use to ease the cross-platform transition. I may also talk about going back to using org-mode in Emacs as my task manager. I have continued to use it for notes and writing, but had switched away for tasks. Please send appropriate thoughts and prayers while I go back down that particularly enticing rabbit hole!</p>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>Sidenote: Linux folk seem to like naming things with obscure acronyms. I found it incredibly difficult to remember what letters were involved in <code>ncmpcpp</code> in what order, and found it even more difficult to type correctly it on the commandline. I ended up aliasing it to &lsquo;player&rsquo;.&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>