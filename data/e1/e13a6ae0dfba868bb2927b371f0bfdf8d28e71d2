<p><img src="https://cdn3.brettterpstra.com/uploads/2026/01/md-fixup-header-rb.7517.jpg" width="800" height="226" style="margin:0 auto;clear:both;" class="header" /></p>
<p>I&rsquo;ve made a couple of improvements to <a href="https://github.com/ttscoff/md-fixup">md-fixup</a>, the opinionated Markdown formatting and linting tool I <a href="https://brettterpstra.com//2026/01/07/markdown-fixup-an-opinionated-markdown-linter/">shared this week</a>. The main additions are better emphasis handling and link conversion options.</p>

<h3 id="emphasis-handling">Emphasis Handling</h3>

<p>By default, md-fixup normalizes bold markers to <code class="language-plaintext highlighter-rouge">__</code> (double underscore) and italic markers to <code class="language-plaintext highlighter-rouge">*</code> (single asterisk). So <code class="language-plaintext highlighter-rouge">**bold**</code> becomes <code class="language-plaintext highlighter-rouge">__bold__</code> and <code class="language-plaintext highlighter-rouge">_italic_</code> becomes <code class="language-plaintext highlighter-rouge">*italic*</code>. This keeps everything consistent in your Markdown files.</p>

<p>But what if you prefer the other style? You can use the <code class="language-plaintext highlighter-rouge">--reverse-emphasis</code> flag to swap them:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight fixed"><code>md-fixup <span class="nt">--reverse-emphasis</span> file.md</code></pre></div></div>

<p>This will convert <code class="language-plaintext highlighter-rouge">__bold__</code> to <code class="language-plaintext highlighter-rouge">**bold**</code> and <code class="language-plaintext highlighter-rouge">*italic*</code> to <code class="language-plaintext highlighter-rouge">_italic_</code>. Handy if you&rsquo;re working with a different Markdown flavor or just have a preference.</p>

<p>And if you want to skip emphasis normalization entirely, just skip rule 25:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight fixed"><code>md-fixup <span class="nt">--skip</span> bold-italic file.md
<span class="c"># or</span>
md-fixup <span class="nt">--skip</span> 25 file.md</code></pre></div></div>

<h3 id="link-conversion">Link Conversion</h3>

<p>The new link conversion feature is one I should have had originally but kind of forgot. By default, md-fixup now converts all your links to numeric reference-style links, keeping your document body clean and all the URLs organized at the bottom.</p>

<p>Here&rsquo;s what happens:</p>

<p><strong>Before:</strong></p>
<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight fixed"><code>This is a <span class="p">[</span><span class="nv">link</span><span class="p">](</span><span class="sx">https://example.com</span><span class="p">)</span> in the text.
Another <span class="p">[</span><span class="nv">link</span><span class="p">](</span><span class="sx">https://example.com</span><span class="p">)</span> with the same URL.</code></pre></div></div>

<p><strong>After:</strong></p>
<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight fixed"><code>This is a <span class="p">[</span><span class="nv">link</span><span class="p">][</span><span class="ss">1</span><span class="p">]</span> in the text.
Another <span class="p">[</span><span class="nv">link</span><span class="p">][</span><span class="ss">1</span><span class="p">]</span> with the same URL.

<span class="p">[</span><span class="ss">1</span><span class="p">]:</span> <span class="sx">https://example.com</span></code></pre></div></div>

<p>Notice how the second link reuses the same reference number since it&rsquo;s the same URL. It de-duplicates for you automatically.</p>

<h3 id="reference-links-default">Reference Links (Default)</h3>

<p>Reference links are the default behavior (rule 28). Links get converted to <code class="language-plaintext highlighter-rouge">[text][number]</code> format, and all definitions are placed at the end of the document (rule 29, also default).</p>

<p>You can also put the link definitions at the beginning of the document instead. Just skip rule 29:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight fixed"><code>md-fixup <span class="nt">--skip</span> links-at-end file.md
<span class="c"># or</span>
md-fixup <span class="nt">--skip</span> 29 file.md</code></pre></div></div>

<p>This is useful if you prefer your reference definitions up top, or if you&rsquo;re using a tool that reads links from the beginning.</p>

<h3 id="inline-links">Inline Links</h3>

<p>If you prefer inline links instead, you can enable rule 30. This converts everything to <code class="language-plaintext highlighter-rouge">[text](url)</code> format and automatically disables the reference link behavior. Since inline links are disabled by default, the cleanest way to enable them is through a config file. Create <code class="language-plaintext highlighter-rouge">~/.config/md-fixup/config.yml</code>:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight fixed"><code><span class="na">rules</span><span class="pi">:</span>
  <span class="na">skip</span><span class="pi">:</span> <span class="s">all</span>
  <span class="na">include</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">inline-links</span></code></pre></div></div>

<p>Or if you&rsquo;re using the skip/include pattern already, just add <code class="language-plaintext highlighter-rouge">inline-links</code> to your include list. Inline links will override reference links when enabled.</p>

<h3 id="configuration-examples">Configuration Examples</h3>

<p>Here are some practical configuration setups:</p>

<p><strong>Default (reference links at end):</strong></p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight fixed"><code><span class="na">width</span><span class="pi">:</span> <span class="m">60</span>
<span class="na">overwrite</span><span class="pi">:</span> <span class="no">false</span>
<span class="c1"># No rules section needed - reference links are default</span></code></pre></div></div>

<p><strong>Reference links at beginning:</strong></p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight fixed"><code><span class="na">rules</span><span class="pi">:</span>
  <span class="na">skip</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">links-at-end</span>  <span class="c1"># This puts links at the beginning</span></code></pre></div></div>

<p><strong>Inline links:</strong></p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight fixed"><code><span class="na">rules</span><span class="pi">:</span>
  <span class="na">skip</span><span class="pi">:</span> <span class="s">all</span>
  <span class="na">include</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">inline-links</span>
    <span class="c1"># Other rules to include</span></code></pre></div></div>

<p><strong>Skip emphasis conversion:</strong></p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight fixed"><code><span class="na">rules</span><span class="pi">:</span>
  <span class="na">skip</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">bold-italic</span></code></pre></div></div>

<p><strong>Reverse emphasis markers:</strong></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight fixed"><code>md-fixup <span class="nt">--reverse-emphasis</span> file.md</code></pre></div></div>

<p>This can&rsquo;t be set in the config file yet—it&rsquo;s command-line only for now.</p>

<h3 id="what-gets-converted">What Gets Converted</h3>

<p>The link converter handles:</p>

<ul>
  <li>Inline links: <code class="language-plaintext highlighter-rouge">[text](url)</code> → <code class="language-plaintext highlighter-rouge">[text][1]</code></li>
  <li>Reference links: <code class="language-plaintext highlighter-rouge">[text][ref]</code> → <code class="language-plaintext highlighter-rouge">[text][1]</code> (renumbered)</li>
  <li>Implicit reference links: <code class="language-plaintext highlighter-rouge">[text]</code> → <code class="language-plaintext highlighter-rouge">[text][1]</code> (if definition exists)</li>
  <li>Links with titles: <code class="language-plaintext highlighter-rouge">[text](url "title")</code> → <code class="language-plaintext highlighter-rouge">[text][1]</code> with <code class="language-plaintext highlighter-rouge">[1]: url "title"</code></li>
</ul>

<p>It also smartly ignores links inside code blocks and code spans, so your examples don&rsquo;t get mangled.</p>

<blockquote>
  <p>I plan to continue modifying the link handling to maintain &ldquo;implicit links&rdquo; (links where there&rsquo;s just text surrounded by square brackets and the exact text is used in a link definition); I do actually use those frequently and I think they&rsquo;re great for readability. Stay tuned, I&rsquo;m sure I&rsquo;ll have another morning soon where I feel like hacking on that.</p>
</blockquote>

<p>The emphasis normalizer handles nested cases too, like <code class="language-plaintext highlighter-rouge">***bold italic***</code> becoming <code class="language-plaintext highlighter-rouge">__*bold italic*__</code> (or <code class="language-plaintext highlighter-rouge">_**bold italic**_</code> in reverse mode). It&rsquo;s aware of context and won&rsquo;t mess with code blocks or other protected regions.</p>

<h3 id="and-apex">And Apex</h3>

<p>Speaking of Markdown stuff, I also pushed <a href="https://github.com/ApexMarkdown/apex/releases/tag/v0.1.51">v0.1.51</a> of <a href="https://brettterpstra.com//projects/apex">Apex</a> today. It adds support for <code class="language-plaintext highlighter-rouge">: Caption</code> syntax before tables (previously only after), with or without IAL attributes, and handles blank lines between captions and tables.</p>

<p>It fixes table and other parsing when files don&rsquo;t end with a newline or use CR line endings. <code class="language-plaintext highlighter-rouge">cmark-gfm</code> already had great CRLF handling, but I broke some of it when building out the Apex extensions. Should be better now, and I&rsquo;ve added regression tests to ensure it stays that way.</p>

<p>Like or share this post <a title="This post on Mastodon" target="_blank" href="https://hachyderm.io/users/ttscoff/statuses/115867225108269152">on Mastodon</a>, <a title="Share on Bluesky" target="_blank" href="https://bsky.app/intent/compose?text=A+quick+Markdown+Fixup+update%0A%0Ahttps%3A%2F%2Fbrettterpstra.com%2F2026%2F01%2F09%2Fa-quick-markdown-fixup-update%2F">Bluesky</a>, or <a class="twitter" target="_blank" rel="nofollow" href="https://twitter.com/intent/tweet?original_referer=https%3A%2F%2Fbrettterpstra.com%2F2026%2F01%2F09%2Fa-quick-markdown-fixup-update%2F&text=A+quick+Markdown+Fixup+update&url=https%3A%2F%2Fbrettterpstra.com%2F2026%2F01%2F09%2Fa-quick-markdown-fixup-update%2F&via=ttscoff" title="Tweet this post">Twitter</a>.</p>
<hr style="margin:40px 0">

<p>BrettTerpstra.com is supported by readers like you. <a href="https://brettterpstra.com/support/">Click here if you'd
        like to help out.</a></p>
<p>Find Brett on <a rel="me" href="https://hachyderm.io/@ttscoff">Mastodon</a>, <a
        href="https://bsky.app/profile/ttscoff.bsky.social">Bluesky</a>, <a
        href="https://github.com/ttscoff">GitHub</a>, and <a href="https://brettterpstra.com/elsewhere">everywhere
        else</a>.</p><img src="https://brett.trpstra.net/link/535/17250368.gif" height="1" width="1"/>