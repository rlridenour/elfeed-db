
<p><code class="language-plaintext highlighter-rouge">lsgrep</code> is just a simple tool I use to quickly find files matching a search pattern in the current directory. I just figured I&rsquo;d share it because I end up using it a lot.</p>

<p>My primary shell is Fish, so I&rsquo;ll share that one first. This version uses silver searcher (ag) to search for matches. The search uses wildcards (<code class="language-plaintext highlighter-rouge">*</code> for multiple characters and <code class="language-plaintext highlighter-rouge">?</code> for a single character). Spaces get turned into <code class="language-plaintext highlighter-rouge">.*?</code> and extensions (e.g. <code class="language-plaintext highlighter-rouge">.sh</code>) get escaped so the period matches.</p>

<pre><code class="language-fish"># Defined in /Users/ttscoff/.config/fish/functions/lsgrep.fish @ line 1
function lsgrep --description 'Wildcard folder/file search'
  # Convert search to regex: change .X to \.X, ? to ., and space or * to .*?
set -l needle (echo $argv|sed -E 's/\.([a-z0-9]+)$/\\\.\1/'|sed -E 's/\?/./'| sed -E 's/[ *]/.*?/g')
command ag --hidden --depth 3 -SUg "$needle" 2&gt;/dev/null
end
</code></pre>

<p>Now I can run <code class="language-plaintext highlighter-rouge">lsgrep</code> in Fish like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight fixed"><code>$ lsgrep gist test</code></pre></div></div>

<p>This will find the file <code class="language-plaintext highlighter-rouge">gist_test.sh</code> in any subdirectory up to 3 levels deep from the current directory.</p>

<p>Here&rsquo;s a version in Bash (or Zsh) that uses <code class="language-plaintext highlighter-rouge">find</code> instead, requiring no extra tools:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight fixed"><code><span class="c">#!/bin/bash</span>

<span class="nv">NEEDLE</span><span class="o">=</span><span class="s2">".*</span><span class="si">$(</span><span class="nb">echo</span> <span class="nv">$@</span>|sed <span class="nt">-E</span> <span class="s1">'s/\.([a-z0-9]+)$/\\\.\1/'</span>|sed <span class="nt">-E</span> <span class="s1">'s/\?/./'</span>| <span class="nb">sed</span> <span class="nt">-E</span> <span class="s1">'s/[ *]/.*/g'</span><span class="si">)</span><span class="s2">.*"</span>

find <span class="nt">-E</span> <span class="nb">.</span> <span class="nt">-maxdepth</span> 3 <span class="nt">-regex</span> <span class="nv">$NEEDLE</span> 2&gt;/dev/null</code></pre></div></div>

<p>Because <code class="language-plaintext highlighter-rouge">find</code> doesn&rsquo;t allow for <code class="language-plaintext highlighter-rouge">.*?</code> operators in the regex, it&rsquo;s a little bit broader of a search, but in 99% of cases the results are the same as the <code class="language-plaintext highlighter-rouge">ag</code> version.</p>

<p>You can obviously change the max depth in either function to a higher number if you want to search deeper in the directory tree.</p>

<p>Hope that&rsquo;s useful!</p>

<p>Like or share this post <a title="This post on Mastodon" target="_blank" href="https://hachyderm.io/users/ttscoff/statuses/115039016303232983">on Mastodon</a>, <a title="Share on Bluesky" target="_blank" href="https://bsky.app/intent/compose?text=lsgrep+-+rapid+recursive+file+search%0A%0Ahttps%3A%2F%2Fbrettterpstra.com%2F2025%2F08%2F16%2Flsgrep-rapid-recursive-file-search%2F">Bluesky</a>, or <a class="twitter" target="_blank" rel="nofollow" href="https://twitter.com/intent/tweet?original_referer=https%3A%2F%2Fbrettterpstra.com%2F2025%2F08%2F16%2Flsgrep-rapid-recursive-file-search%2F&text=lsgrep+-+rapid+recursive+file+search&url=https%3A%2F%2Fbrettterpstra.com%2F2025%2F08%2F16%2Flsgrep-rapid-recursive-file-search%2F&via=ttscoff" title="Tweet this post">Twitter</a>.</p>
<hr style="margin:40px 0">

<p>BrettTerpstra.com is supported by readers like you. <a href="https://brettterpstra.com/support/">Click here if you'd
        like to help out.</a></p>
<p>Find Brett on <a rel="me" href="https://hachyderm.io/@ttscoff">Mastodon</a>, <a
        href="https://bsky.app/profile/ttscoff.bsky.social">Bluesky</a>, <a
        href="https://github.com/ttscoff">GitHub</a>, and <a href="https://brettterpstra.com/elsewhere">everywhere
        else</a>.</p><img src="https://brett.trpstra.net/link/535/17120739.gif" height="1" width="1"/>