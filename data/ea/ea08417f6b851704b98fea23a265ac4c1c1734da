
	
<p>
This <a href="http://projecteuler.net/problem=001">first Euler problem</a> provides a gentle introduction to solving mathematical problems with code. This problem involves finding the sum of two related arithmetic sequences.</p>
<p>
The natural numbers below 10 that are multiples of 3 or 5 results are 3, 5, 6 and 9. The sum of these numbers is $3+5+6+9=23$. Your assignment is to find the sum of all the multiples of 3 or 5 below 1000.</p>
<p>
This problem is similar to one posed to a mathematics child prodigy that lived around the same time as Euler. When Carl Friedrich Gauss (1777–1855) was ten years old, his teacher gave his pupils a maths problem to ponder on. The teacher was perhaps seeking some quiet time for himself by giving the kids a hard problem. He asked them to sum all the numbers from 1 to 100, which surely would give him enough time to enjoy a cuppa.</p>
<p>
Young Carl Gauss stood up after just a minute and confidently proudly raised his slate with 5050 written in large chalk letters to the teacher. All the other kids were still diligently adding numbers. How was Carl able to finish his task so quickly?  The <a href="https://doi.org/10.1511/2006.59.200">details and full truth of this story</a> are lost in history. Perhaps Carl realised the solution while writing the series forwards and backwards:</p>
<p>
$$1 + 2 + 3 + \ldots + 98 + 99 + 100$$</p>
<p>
$$100 + 99 + 98 + \ldots + 3 + 2 + 1$$</p>
<p>
Little Carl calculated the sum of some of the pairs and noticed a regularity:</p>
<p>
$$1 + 100 = 2 + 99 = 3 + 98 = \ldots 100 + 1 = 99 + 2 = 98 + 3 = 101$$</p>
<p>
Each of the pairs adds up to 101 and there are 50 pairs, therefore the sum of all numbers is half the sum of all pairs. Gauss was not the first to discover this method. Some thirteen hundred years earlier, Indian mathematician and astronomer Aryabhata had already discovered this method to sum a arithmetical sequence.</p>
<div id="outline-container-headline-1" class="outline-2">
<h2 id="headline-1">
Proposed Solutions
</h2>
<div id="outline-text-headline-1" class="outline-text-2">
<p>This anecdote shows that there are two ways to solve this first problem. The smart method that Gauss used or the slow brute force method that his fellow pupils used. The brute force solution requires many steps to find the answer. The smart solution uses a one-step formula, such as the young Gauss and Aryabhata had figured out.</p>
<p>
The most inefficient solution is to test whether all numbers between 1 and 999 are divisible by 3 or 5 and then add all these number. The R language provides several ways to step through a sequence of numbers.</p>
<p>
The code below loops trough the numbers between 1 and 999.</p>
<div class="src src-r">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>  <span style="color:#888"># Project Euler 1: Multiples of 3 and 5</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#888"># Loop</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  answer <span style="color:#333">&lt;-</span> <span style="color:#60e;font-weight:bold">0</span>
</span></span><span style="display:flex;"><span>  <span style="color:#080;font-weight:bold">for</span> (i <span style="color:#080;font-weight:bold">in</span> <span style="color:#60e;font-weight:bold">1</span><span style="color:#333">:</span><span style="color:#60e;font-weight:bold">999</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-weight:bold">if</span> (i <span style="color:#333">%%</span> <span style="color:#60e;font-weight:bold">3</span> <span style="color:#333">==</span> <span style="color:#60e;font-weight:bold">0</span> <span style="color:#333">|</span> i <span style="color:#333">%%</span> <span style="color:#60e;font-weight:bold">5</span> <span style="color:#333">==</span> <span style="color:#60e;font-weight:bold">0</span>) {
</span></span><span style="display:flex;"><span>      answer <span style="color:#333">&lt;-</span> answer <span style="color:#333">+</span> i
</span></span><span style="display:flex;"><span>      <span style="color:#06b;font-weight:bold">print</span>(i)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#06b;font-weight:bold">print</span>(answer)</span></span></code></pre></div>
</div>
<p>
This first solution is elaborate. Using for-loops in R should always be a last resort in R coding because they are the slowest way to compute over a series of steps. The next two solutions solve this problem by using vector arithmetic. These methods are much faster because they run the loop directly in machine code instead of having to compile each step.</p>
<p>
The solution for the first problem only requires one line of code when using vector arithmetic.</p>
<div class="src src-r">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>  <span style="color:#888"># Vector aritmetic</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#06b;font-weight:bold">sum</span>((<span style="color:#60e;font-weight:bold">1</span><span style="color:#333">:</span><span style="color:#60e;font-weight:bold">999</span>)<span style="color:#06b;font-weight:bold">[</span>((<span style="color:#60e;font-weight:bold">1</span><span style="color:#333">:</span><span style="color:#60e;font-weight:bold">999</span>) <span style="color:#333">%%</span> <span style="color:#60e;font-weight:bold">3</span> <span style="color:#333">==</span> <span style="color:#60e;font-weight:bold">0</span>) <span style="color:#333">|</span> ((<span style="color:#60e;font-weight:bold">1</span><span style="color:#333">:</span><span style="color:#60e;font-weight:bold">999</span>) <span style="color:#333">%%</span> <span style="color:#60e;font-weight:bold">5</span> <span style="color:#333">==</span> <span style="color:#60e;font-weight:bold">0</span>)])</span></span></code></pre></div>
</div>
</div>
</div>
<div id="outline-container-headline-2" class="outline-2">
<h2 id="headline-2">
Analytical solution
</h2>
<div id="outline-text-headline-2" class="outline-text-2">
<p>Although the vector arithmetic is much faster than the for-loop, it is still not as fast as using the methods discovered by Aryabhata and Gauss. The two brute-force solutions are very fast because of the low number of steps to find a solution. An analytical solution reduces the processing time significantly, as it only requires one step.</p>
<p>
The problem involves <em>arithmetic progressions</em>, which are sequences of numbers with a constant difference. The sequence 1, 4, 7, 10, 13, … is an arithmetic progression with a common difference of three.</p>
<p>
We can generalise the method discovered by Gauss. The sum of an arithmetic progression ($S_n$), where $n$ is the number of elements and $a_1$ and $a_n$ are the lowest and highest value, is:</p>
<p>
$$S_n= \frac{n(a_{1} + a_n)}{2}$$</p>
<p>
The numbers divisible by $n=3$ can be expressed as:</p>
<p>
$$\mathrm{sum}_3(999)=3+6+9+12+ \ldots + 999 = 3(1+2+3+4+ \ldots + 333)$$</p>
<p>
We can now calculate the sum of all divisors by combining the above progression with the formula for arithmetic progressions as expressed in the above code, where $m$ is the divisor and $n$ the extent of the sequence. $p$ is the highest number less than $n$ divisible by $m$. In the case of 5, this number is 995.</p>
<p>
$$p = n \lfloor (m/n) \rfloor$$</p>
<p>
Substitution gives:</p>
<p>
$$\mathrm{sum}_m(n) =  p \frac{1+(p/m)}{2}$$</p>
<div class="src src-r">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>  <span style="color:#888"># Analytical solution</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  SumDivBy <span style="color:#333">&lt;-</span> <span style="color:#080;font-weight:bold">function</span>(m, n) {
</span></span><span style="display:flex;"><span>      p <span style="color:#333">&lt;-</span> <span style="color:#06b;font-weight:bold">floor</span>(n <span style="color:#333">/</span> m) <span style="color:#333">*</span> m <span style="color:#888"># Round to multiple of n</span>
</span></span><span style="display:flex;"><span>      <span style="color:#080;font-weight:bold">return</span> (p <span style="color:#333">*</span> (<span style="color:#60e;font-weight:bold">1</span> <span style="color:#333">+</span> (p <span style="color:#333">/</span> m)) <span style="color:#333">/</span> <span style="color:#60e;font-weight:bold">2</span>)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#06b;font-weight:bold">SumDivBy</span>(<span style="color:#60e;font-weight:bold">3</span>, <span style="color:#60e;font-weight:bold">999</span>) <span style="color:#333">+</span> <span style="color:#06b;font-weight:bold">SumDivBy</span>(<span style="color:#60e;font-weight:bold">5</span>, <span style="color:#60e;font-weight:bold">999</span>) <span style="color:#333">-</span> <span style="color:#06b;font-weight:bold">SumDivBy</span>(<span style="color:#60e;font-weight:bold">15</span>, <span style="color:#60e;font-weight:bold">999</span>)</span></span></code></pre></div>
</div>
<p>
<a href = "https://www.r-bloggers.com/" target="_blank" title="Proudly associated with R-Bloggers">
  <button class="button is-link is-medium">
    <span class="icon is-large">
      <i class="fab fa-r-project"></i>
    </span>
    <span>As seen on R Bloggers</span>
  </button>
</a>
</p>
</div>
</div>

      