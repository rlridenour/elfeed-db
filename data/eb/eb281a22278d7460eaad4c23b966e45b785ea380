<p>Hey,</p>
<h2 id="the-problem">The problem</h2>
<p>Recently I wanted to create separated &ldquo;window&rdquo; for my weechat
so I can easily alt-tab to it.</p>
<p>I&rsquo;ve wrote the .desktop file and place it to <code>~/.local/share/applications</code> so
gnome-shell (I&rsquo;m on ubuntu 17.10) will show me it.</p>
<p>And it did, BUT when I start the weechat the icon turned to &ldquo;terminal-like&rdquo;.</p>
<p>Hm&hellip;</p>
<h2 id="play-with-terminal-icon">play with terminal icon</h2>
<p>Ok, there is terminals like <code>xfce4-terminal</code> that allows to set custom icon
when terminal is starting&hellip; so let&rsquo;s try</p>
<pre tabindex="0"><code>xfce4-terminal -I /the/icon/i/need -e /usr/bin/weechat
</code></pre><br/>
<p>&hellip;aaaand nothing!</p>
<p>There are other temrinals allows us to set custom icon but non of them was working.</p>
<h2 id="the-reason">The reason</h2>
<p>It turned out the gnome-shell overrides everything it thinks is a terminal with the icon from theme currently used.</p>
<h2 id="solution">Solution</h2>
<p>Discarding some guesses I decided that gnome-shell determines that app belongs to &ldquo;terminal family&rdquo; based on WM_CLASS
window property (you can see them using <code>xprop</code>). Thanks god (or gnome developers) the gnome-terminal has <code>--class</code> option
that overrides the WM_CLASS property. After that my .desktop file just works.</p>
<p>Here is an example:</p>
<pre tabindex="0"><code>[Desktop Entry]
Version=1.9.1
Name=Weechat
Comment=Weechat the IRC client
Exec=gnome-terminal --role=weechat --class=weechat -- /usr/bin/weechat
Icon=/usr/share/icons/hicolor/32x32/apps/weechat.png
Terminal=False
Type=Application
Categories=Chat;Development;
</code></pre><p>See <code>Exec</code> value with <code>--role</code> and <code>--class</code> options.</p>