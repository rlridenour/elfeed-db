<blockquote>
<p><em>Software reproducibility testing is a critical aspect of
software development and maintenance.
It ensures that software is reliable, consistent, and predictable and
that it can be easily replicated and verified by others.</em></p>
<p>Ana Pustan, <a href="https://testerwork.com/reproducibility-testing/"><em>Reproducibility Testing: A Complete Guide</em></a></p>
</blockquote>
<p>For many of us, it won&rsquo;t be a surprise that
the Emacs <a href="https://orgmode.org/">Org mode</a> is perfectly suited
for reproducibility testing.</p>
<p>In some of my projects I&rsquo;m using <a href="https://grpc.io">gRPC</a>, a modern
open source high performance Remote Procedure Call (RPC) framework
that can run in any environment. The gRPC framework is evolving very
rapidly so I have to update it to the most recent stable version time to time.
No doubt, I want to make sure that everything is working properly
after the update.</p>
<p>I&rsquo;ve built a tiny <em>hello-world</em> gRPC server for testing the
update. I use <a href="https://github.com/fullstorydev/grpcurl">grpcurl</a>,
a command-line tool that interacts with gRPC servers, as a client.</p>
<p>Now Emacs has to go be onstage.</p>
<h2 id="the-server">The Server</h2>
<p>I don&rsquo;t like having to leave Emacs for too long so I run my server in Eshell.</p>
<figure><a href="http://localhost:1313/img/grpc-server-start.png"><img src="http://localhost:1313/img/grpc-server-start.png"/></a><figcaption>
            <h4>Click or tap to view the full-size picture.</h4>
        </figcaption>
</figure>

<h2 id="the-client">The Client</h2>
<p>The Org mode code blocks &ndash; that&rsquo;s all we need now.</p>
<h3 id="listing-of-available-services-at-localhost-port-50051">Listing of available services at localhost port 50051</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-org" data-lang="org"><span style="display:flex;"><span><span style="color:#75715e">#+begin_src </span><span style="color:#75715e">bash</span><span style="color:#75715e"> :results verbatim
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  grpcurl -plaintext localhost:50051 list
</span></span><span style="display:flex;"><span><span style="color:#75715e">#+end_src</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#+RESULTS</span><span style="color:#75715e">:</span>
</span></span><span style="display:flex;"><span>: grpc.reflection.v1.ServerReflection
</span></span><span style="display:flex;"><span>: grpc.reflection.v1alpha.ServerReflection
</span></span><span style="display:flex;"><span>: helloworld.Greeter
</span></span></code></pre></div><p>Pressing <code>C-c C-c</code> when the point (cursor) is inside the code block
shows 3 services available at <em>localhost:50051</em> &ndash; 2 builtin services and
our <code>helloworld.Greeter</code> service, the last one.</p>
<h3 id="inspecting-helloworldgreeter-service">Inspecting helloworld.Greeter service</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-org" data-lang="org"><span style="display:flex;"><span><span style="color:#75715e">#+begin_src </span><span style="color:#75715e">shell</span><span style="color:#75715e"> :results verbatim
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  grpcurl -plaintext localhost:50051 describe helloworld.Greeter
</span></span><span style="display:flex;"><span><span style="color:#75715e">#+end_src</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#+RESULTS</span><span style="color:#75715e">:</span>
</span></span><span style="display:flex;"><span>: helloworld.Greeter is a service:
</span></span><span style="display:flex;"><span>: service Greeter {
</span></span><span style="display:flex;"><span>:   rpc SayHello ( .helloworld.HelloRequest ) returns ( .helloworld.HelloReply );
</span></span><span style="display:flex;"><span>: }
</span></span></code></pre></div><p>OK, everything seems to be in order.</p>
<h3 id="inspecting-helloworldgreetersayhello-method">Inspecting helloworld.Greeter.SayHello method</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-org" data-lang="org"><span style="display:flex;"><span><span style="color:#75715e">#+begin_src </span><span style="color:#75715e">bash</span><span style="color:#75715e"> :results verbatim
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  grpcurl -plaintext localhost:50051 describe helloworld.Greeter.SayHello
</span></span><span style="display:flex;"><span><span style="color:#75715e">#+end_src</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#+RESULTS</span><span style="color:#75715e">:</span>
</span></span><span style="display:flex;"><span>: helloworld.Greeter.SayHello is a method:
</span></span><span style="display:flex;"><span>: rpc SayHello ( .helloworld.HelloRequest ) returns ( .helloworld.HelloReply );
</span></span></code></pre></div><h3 id="querying-the-server">Querying the server</h3>
<p>Finally, let&rsquo;s query the server.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-org" data-lang="org"><span style="display:flex;"><span><span style="color:#75715e">#+begin_src </span><span style="color:#75715e">bash</span><span style="color:#75715e"> :results verbatim
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  grpcurl -plaintext -d <span style="color:#e6db74">&#39;{&#34;name&#34;: &#34;world&#34;}&#39;</span> localhost:50051 helloworld.Greeter.SayHello
</span></span><span style="display:flex;"><span><span style="color:#75715e">#+end_src</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#+RESULTS</span><span style="color:#75715e">:</span>
</span></span><span style="display:flex;"><span>: {
</span></span><span style="display:flex;"><span>:   &#34;message&#34;: &#34;Hello world!&#34;
</span></span><span style="display:flex;"><span>: }
</span></span></code></pre></div><p>That is the expected outcome &ndash; the server replied accordingly.</p>
<figure><a href="http://localhost:1313/img/grpc-server.png"><img src="http://localhost:1313/img/grpc-server.png"/></a><figcaption>
            <h4>Click or tap to view the full-size picture.</h4>
        </figcaption>
</figure>

<p>Now I can perform gRPC reproducibility testing every time after the update.</p>
<p>Happy emacsing!</p>
<p>&ndash; The Emacs Cat.</p>