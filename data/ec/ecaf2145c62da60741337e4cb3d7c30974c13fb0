<p>My significant other needed to share proof of address by providing a number of bank statements for a period of time. That's easy enough to download as pdfs from the bank, but statements typically provide more personal information than the recipient requires. For a proof of address, the first page is more than enough.</p>
<p>macOS's Preview app can easily delete pages from a pdf by selecting undesired pages and hitting the delete key. This is fine for one pdf but for a handful of them, I figured there's a command line incantation I could use out there, and indeed there is:</p>
<pre><code class="language-{.bash">qpdf my.pdf --pages . 1 -- my-one-page.pdf
</code></pre>
<p>With command in mind, I resorted to my now my typical approach of:</p>
<ul>
<li>Convert to a generic <a href="https://github.com/xenodium/dwim-shell-command">dwim-shell-command</a>.</li>
<li>Batch apply.</li>
</ul>
<p>I could be done at this point, but since I now have the command fresh in mindâ€¦</p>
<ul>
<li>Save command for future usage.</li>
</ul>
<p>So let's get on with it.</p>
<h2>Converting to dwim-shell-command</h2>
<pre><code class="language-{.bash">qpdf '&lt;&lt;f&gt;&gt;' --pages . 1 -- '&lt;&lt;fne&gt;&gt;_1.&lt;&lt;e&gt;&gt;'
</code></pre>
<h2>Batch apply</h2>
<p>Other than show it in action, it may be worth mentioning dwim-shell-command recognizes files in region (in addition to dired's mark of course), so you can just select and apply.</p>
<p><img src="https://xenodium.github.io/images/how-i-batch-apply-and-save-one-liners/keep-1-page.gif" alt=""></p>
<h2>Save for future usage</h2>
<p>Saving these commands for future usage typically consists of merely wrapping in an Emacs command so we can invoke via M-x (and your favorite narrowing framework for that fuzzy quick magic).</p>
<pre><code class="language-{.commonlisp">(defun dwim-shell-commands-keep-pdf-page ()
  &quot;Keep a page from pdf.&quot;
  (interactive)
  (let ((page-num (read-number &quot;Keep page number: &quot; 1)))
    (dwim-shell-command-on-marked-files
     &quot;Keep pdf page&quot;
     (format &quot;qpdf '&lt;&lt;f&gt;&gt;' --pages . %d -- '&lt;&lt;fne&gt;&gt;_%d.&lt;&lt;e&gt;&gt;'&quot; page-num page-num)
     :utils &quot;qpdf&quot;)))
</code></pre>
<p>For this instance, there's a tiny bit of additional logic to ask the user which page they'd like to keep.</p>
<p>While there's no way I'll remember <code>qpdf my.pdf --pages . 1 -- my-one-page.pdf</code>, I can easily find it in the future by searching with something like <code>M-x keep page</code>.</p>
<p><img src="https://xenodium.github.io/images/how-i-batch-apply-and-save-one-liners/keep-1-page-command.gif" alt=""></p>
<h2>My toolbox</h2>
<p>I've saved a bunch of these commands and use many of them regularly. You can find in the <a href="https://github.com/xenodium/dwim-shell-command?tab=readme-ov-file#my-toolbox">optional component of dwim-shell-command</a>.</p>
<h2>Enjoying this content? Using one of my Emacs packages?</h2>
<p>Help make the work sustainable. Consider <a href="https://github.com/sponsors/xenodium">sponsoring</a>. I'm also building <a href="https://lmno.lol/">lmno.lol</a>. A platform to <a href="https://indieweb.social/@xenodium/112265481282475542">drag and drop</a> your blog to the web.</p>
