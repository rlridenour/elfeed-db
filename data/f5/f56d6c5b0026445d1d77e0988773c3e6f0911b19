<p>I had fun using the <code>du</code> command in Emacs this morning (that&rsquo;s what I do when I don&rsquo;t sleep well; judge away).</p>
<p>In Linux (and macOS), the DU command (I believe it stands for Disk Usage) is usually used to figure out what folders take up space on your hard drive.</p>
<p>While different GUI tools exist, they are not useful on encrypted drives on Linux, as they show the encrypted blocks instead of the directories, which don&rsquo;t really tell you much (you could probably run those with escalated permissions, but I didn&rsquo;t try).</p>
<p>For a gamer like me, it&rsquo;s useful to see which games take up the most space. Here&rsquo;s an example with a few useful flags, in the command line:</p>
<p><code>du -hs ~/.steam/steam/steamapps/common/* | sort -h</code></p>
<p>Shows me the following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">    4.0K    /home/jtr/.steam/steam/steamapps/common/Steam.dll
    76K     /home/jtr/.steam/steam/steamapps/common/Steam Controller Configs
    100K    /home/jtr/.steam/steam/steamapps/common/SteamLinuxRuntime
    248M    /home/jtr/.steam/steam/steamapps/common/Steamworks Shared
    657M    /home/jtr/.steam/steam/steamapps/common/SteamLinuxRuntime_soldier
    776M    /home/jtr/.steam/steam/steamapps/common/SteamLinuxRuntime_sniper
    1.4G    /home/jtr/.steam/steam/steamapps/common/Proton - Experimental
    3.4G    /home/jtr/.steam/steam/steamapps/common/Deep Rock Survivor
    3.5G    /home/jtr/.steam/steam/steamapps/common/Deep Rock Galactic
    11G     /home/jtr/.steam/steam/steamapps/common/Hades II
    21G     /home/jtr/.steam/steam/steamapps/common/Yakuza Kiwami
    82G     /home/jtr/.steam/steam/steamapps/common/Space Marine <span style="color:#ae81ff">2</span>
    132G    /home/jtr/.steam/steam/steamapps/common/Helldivers <span style="color:#ae81ff">2</span>
</code></pre></div><p>Some of the Steam-related components are not games, but&hellip; Helldivers 2 takes <em>how much</em> space?? Anyway.</p>
<p>A quick review of the options I used:</p>
<p><code>-hs</code> for <em>human readable</em> (shows space in G for gigabyte and M for megabyte instead of writing in kilobytes) and <em>summary</em> (shows the top directory only)</p>
<p><code>~/.steam/steam/steamapps/common/*</code> for the target path (this is where Steam stores the games in Linux, at least in Debian distros)</p>
<p><code>|</code> to pipe the <code>du</code> command it into another command to read it better, in this case:</p>
<p><code>sort -h</code> the sort command, which will sort it nicely again by order in human format. We need this last part if we want to see the directory in order, with the biggest one at the bottom.</p>
<p>Some places recommend using <code>sort -hr</code>, the additional r for <em>reverse</em>, which means in this case we will see the biggest directory at the top of the list. I don&rsquo;t need it, because I want to see the biggest folder at the bottom, near the command line, which is where I&rsquo;m going to focus next.</p>
<p>In Emacs, this command is easier use and works better thanks to Dired. Find a folder, mark it (<code>m</code>) in dired, and run <code>dired-do-shell-command</code> (<code>!</code>) and follow up with <code>du -hs</code>.</p>
<p>But since we&rsquo;re in Emacs, and we might want to work with the results as text, we could use <code>dired-do-async-shell-command</code> (<code>&amp;</code>). This will place the output in a temporary buffer we can work with (so we can save it to a text file, for example, with <code>C-x C-w</code>).</p>
<p>And here&rsquo;s another thing I didn&rsquo;t know: you can run these commands in Dired on multiple directories. Just mark several directories in Dired, and the resulting buffer will give you a list of all the directories you&rsquo;ve marked. If you have this saved as a text buffer, it&rsquo;s pretty easy to work withthe results (for example, save it as an org file and add headers telling you what you want to do with each directory).</p>
<p>By the way, even though it&rsquo;s somewhat redundant with Dired&rsquo;s default listing of files, you can also add the <code>a</code> option for du in this case ( for <em>all</em>) to display the files in the directories you&rsquo;re viewing. This is useful in cases like the above, where you&rsquo;re already working with the <code>du</code> command in Emacs and interested in looking at individual files as well, not just directories. Of course, you can just go in and list the files in Dired and open another Dired buffer with another directory listing files by sizeâ€¦ this is Emacs, you have many ways to do whatever you want.</p>
