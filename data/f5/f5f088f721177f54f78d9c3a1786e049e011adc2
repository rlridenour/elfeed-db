<p>Just a quick one today.</p>
<p>In keeping with the ongoing effort to reduce friction in the venerable Emacs text editor, I realized that a common action I often perform is copying the entire contents of the buffer, usually for pasting elsewhere.</p>
<p>To perform this I have chained together some emacs commands, namely <code>(mark-whole-buffer)</code> and then <code>(kill-ring-save)</code></p>
<figure><img src="https://emacs.dyerdwelling.family/ox-hugo/20241118102423-emacs--Copying-Buffer-To-Kill-Ring.jpg" width="100%">
</figure>

<p>The problem with pushing the buffer to the kill ring in this manner is that I lose the current cursor position/point and end up using <code>isearch</code> to navigate my way back. Strangely, it is only recently that I have found this annoying!</p>
<p>There are a few options to address this:</p>
<ul>
<li>Use Emacs marks</li>
<li>Create a macro</li>
<li>Create a defun</li>
</ul>
<p>Initially I tried the setting <code>mark</code> option meaning that I <code>C-&lt;SPC&gt; C-&lt;SPC&gt;</code> to set the mark at the current position and then <code>C-u C-&lt;SPC&gt;</code> to pop back to my previous mark set.  The only issue is that <code>(mark-whole-buffer)</code> creates a mark at the end of the selected region and my first mark pop would be to this position, so I have to mark pop again.</p>
<p>The benefit of this approach is that I will start becoming more familiar with setting marks and navigating more efficiently within Emacs, which I really think I should learn. However, it all feels a little clunky, and you know what? I&rsquo;m just going to write a simple elisp defun and bind it.</p>
<p><code>save-excursion</code>, in this case, can be extremely useful!</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(defun my/copy-buffer-to-kill-ring ()
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;Copy the entire buffer to the kill ring without changing the point.&#34;</span>
</span></span><span style="display:flex;"><span>  (interactive)
</span></span><span style="display:flex;"><span>  (save-excursion
</span></span><span style="display:flex;"><span>    (kill-ring-save (<span style="color:#a6e22e">point-min</span>) (<span style="color:#a6e22e">point-max</span>))))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(bind-key* (kbd <span style="color:#e6db74">&#34;M-s z&#34;</span>) <span style="color:#a6e22e">#&#39;</span>my/copy-buffer-to-kill-ring)
</span></span></code></pre></div>