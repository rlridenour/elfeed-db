
        <p>Related Links :: <span class="label">Tags:</span> <span role="list" aria-label="Tags for “Managing Light/Dark Scheme in MacOS and Linux”">
<span role="listitem" aria-label="&ldquo;emacs&rdquo; tag navigation"><a href="https://takeonrules.com/2025/09/21/adding-more-link-description-defaults/" aria-label="Previous post tagged with &ldquo;emacs&rdquo; is &ldquo;Adding More Link Description Defaults&rdquo;" title="Older post tagged with &ldquo;emacs&rdquo; is &ldquo;Adding More Link Description Defaults&rdquo;"><small>&lt;</small></a>
<a href="https://takeonrules.com/tags/emacs/" class="p-category" aria-label="All posts tagged with &ldquo;emacs&rdquo;" title="All posts tagged with &ldquo;emacs&rdquo;">emacs</a> <a href="https://takeonrules.com/2025/12/09/extending-emacs-to-play-mythic-bastionland/" aria-label="Next post tagged with &ldquo;emacs&rdquo; is &ldquo;Extending Emacs to Play Mythic Bastionland&rdquo;" title="Newer post tagged with &ldquo;emacs&rdquo; is &ldquo;Extending Emacs to Play Mythic Bastionland&rdquo;"><small>&gt;</small></a>
</span><span aria-hidden=true> &middot; </span>
<span role="listitem" aria-label="&ldquo;programming&rdquo; tag navigation"><a href="https://takeonrules.com/2025/04/17/automating-adding-books-to-my-org-mode-document/" aria-label="Previous post tagged with &ldquo;programming&rdquo; is &ldquo;Automating Adding Books to My Org-Mode Document&rdquo;" title="Older post tagged with &ldquo;programming&rdquo; is &ldquo;Automating Adding Books to My Org-Mode Document&rdquo;"><small>&lt;</small></a>
<a href="https://takeonrules.com/tags/programming/" class="p-category" aria-label="All posts tagged with &ldquo;programming&rdquo;" title="All posts tagged with &ldquo;programming&rdquo;">programming</a> <a href="https://takeonrules.com/2025/12/09/extending-emacs-to-play-mythic-bastionland/" aria-label="Next post tagged with &ldquo;programming&rdquo; is &ldquo;Extending Emacs to Play Mythic Bastionland&rdquo;" title="Newer post tagged with &ldquo;programming&rdquo; is &ldquo;Extending Emacs to Play Mythic Bastionland&rdquo;"><small>&gt;</small></a>
</span><span aria-hidden=true> &middot; </span>
<span role="listitem" aria-label="&ldquo;technologies&rdquo; tag navigation"><a href="https://takeonrules.com/2025/11/06/gnome-and-a-trixie-debian/" aria-label="Previous post tagged with &ldquo;technologies&rdquo; is &ldquo;Gnome and a Trixie Debian&rdquo;" title="Older post tagged with &ldquo;technologies&rdquo; is &ldquo;Gnome and a Trixie Debian&rdquo;"><small>&lt;</small></a>
<a href="https://takeonrules.com/tags/technologies/" class="p-category" aria-label="All posts tagged with &ldquo;technologies&rdquo;" title="All posts tagged with &ldquo;technologies&rdquo;">technologies</a> <a href="https://takeonrules.com/2025/12/09/extending-emacs-to-play-mythic-bastionland/" aria-label="Next post tagged with &ldquo;technologies&rdquo; is &ldquo;Extending Emacs to Play Mythic Bastionland&rdquo;" title="Newer post tagged with &ldquo;technologies&rdquo; is &ldquo;Extending Emacs to Play Mythic Bastionland&rdquo;"><small>&gt;</small></a>
</span></span>

</p/><p><strong>Summary: </strong>
A code walk through of toggling dark/light scheme in Emacs.
</p>
        <p>On my personal machine I’m using <span><a href="http://debian.org/">Debian</a></span> <small><a class="ref" rel="tag opener" aria-label="Other site-wide references of “Debian”" title="Other site-wide references of “Debian”" href="https://takeonrules.com/site-map/glossary/#abbr-dfn-GLOSSARY-DEBIAN">&#128214;</a></small>
 with the <span><a href="https://www.gnome.org/">Gnome</a></span> <small><a class="ref" rel="tag opener" aria-label="Other site-wide references of “Gnome”" title="Other site-wide references of “Gnome”" href="https://takeonrules.com/site-map/glossary/#abbr-dfn-GLOSSARY-GNOME">&#128214;</a></small>
 desktop.  And my work
machine runs MacOS.  I have written an <span><a href="https://en.wikipedia.org/wiki/Emacs">Emacs</a></span> <small><a class="ref" rel="tag opener" aria-label="Other site-wide references of “Emacs”" title="Other site-wide references of “Emacs”" href="https://takeonrules.com/site-map/glossary/#abbr-dfn-GLOSSARY-EMACS">&#128214;</a></small>
 function (<code>M-x jf/dark</code>) that toggles
between light and dark for either my personal machine or work machine.  You can
<a href="https://github.com/jeremyf/dotemacs/blob/c636f26559b09617a11c0ee82875b6cc12078e0d/emacs.d/init.el#L2533-L2632">find the code up on Github</a>.</p>
<p>First we have the general function (and associated alias for ease of typing):</p>
<pre><code class="language-emacs-lisp">(defun jf/color-scheme-system-toggle ()
  &quot;Toggle system-wide Dark or Light setting.&quot;
  (interactive)
  (funcall
    (intern
      (format &quot;jf/color-scheme-system-toggle:%s&quot; system-type))))

(defalias 'jf/dark 'jf/color-scheme-system-toggle)
</code></pre>
<p>I’m opting to use a dispatch pattern, in which I dynamically construct the
function name(s) to call based on the <code>system-type</code> variable.  A disadvantage of
this approach is that I’m defining functions for an <span><a href="https://en.wikipedia.org/wiki/Operating_system">Operating System</a></span> (<abbr title="Operating System">OS</abbr> <small><a class="ref" rel="tag opener" aria-label="Other site-wide references of “Operating System”" title="Other site-wide references of “Operating System”" href="https://takeonrules.com/site-map/glossary/#abbr-dfn-GLOSSARY-OS">&#128214;</a></small>)
 that is not relevant to
the machine.</p>
<p>It would be simple to refactor, but for reasons of the example, I’ll keep them
separate.</p>
<p>For themes I have the following:</p>
<pre><code class="language-emacs-lisp">(defvar jf/themes-plist
  '(:dark ef-owl :light ef-elea-light))
</code></pre>
<p>And I use the following command to set the theme based on the color scheme:</p>
<pre><code class="language-emacs-lisp">(defun jf/color-scheme:emacs (&amp;optional given-scheme)
  &quot;Function to load named theme.&quot;
  (let ((scheme
         (or given-scheme
             (funcall
              (intern
               (format &quot;jf/color-scheme-func:%s&quot; system-type))))))
    (modus-themes-select (plist-get jf/themes-plist scheme))))
</code></pre>
<h1 id="for-macos">For MacOS</h1>
<p>I have the following:</p>
<pre><code class="language-emacs-lisp">(defun jf/color-scheme-system-toggle:darwin ()
  &quot;Toggle the darwin system scheme.&quot;1’
  (shell-command
   (concat &quot;osascript -e 'tell application \&quot;System Events\&quot; &quot;
           &quot;to tell appearance preferences &quot;
           &quot;to set dark mode to not dark mode'&quot;))
  (jf/color-scheme-set-for-emacs))
</code></pre>
<p>To determine the MacOS color scheme:</p>
<pre><code class="language-emacs-lisp">(defun jf/color-scheme-func:darwin ()
  &quot;Determine MacOS preferred/current theme.&quot;
  (if (equal &quot;Dark&quot;
             (substring
              (shell-command-to-string
               &quot;defaults read -g AppleInterfaceStyle&quot;) 0 4))
      :dark :light))
</code></pre>
<h1 id="for-gnulinux-with-gnome">For GNU/Linux with Gnome</h1>
<p>The command for Linux and Gnome is as follows:</p>
<pre><code class="language-emacs-lisp">(defun jf/color-scheme-system-toggle:gnu/linux ()
  &quot;Toggle the gnu/linux system scheme.&quot;
  (let* ((target_scheme
          (plist-get '(:dark :light :light :dark)
                     (jf/color-scheme-func:gnu/linux))))
    ;; Instead of all of the shelling out, we could assemble the shell
    ;; commands into a singular command and issue that.
    (dolist (setting jf/color-scheme-commands:gnu/linux)
      ;; In essence pipe the output to /dev/null
      (shell-command-to-string
       (format (plist-get setting :template)
               (plist-get setting target_scheme))))
    (jf/color-scheme:emacs target_scheme)))
</code></pre>
<p>The list of settings to change are as follows:</p>
<pre><code class="language-emacs-lisp">(defvar jf/color-scheme-system-toggle/gnome-settings
  '((:template &quot;gsettings set org.gnome.settings-daemon.plugins.color night-light-enabled %s&quot;
               :light &quot;false&quot; :dark &quot;true&quot;)
    (:template &quot;gsettings set org.gnome.desktop.interface color-scheme %s&quot;
               :light &quot;default&quot; :dark &quot;prefer-dark&quot;)
    (:template &quot;gsettings set org.gnome.desktop.interface gtk-theme %s&quot;
               :light &quot;default&quot; :dark &quot;prefer-dark&quot;))
  &quot;A list of plists with three parts:

- :template :: command to run.
- :dark :: what the setting should be to be in \&quot;dark\&quot; mode.
- :light :: what the setting should be to be in \&quot;light\&quot; mode.&quot;)
</code></pre>
<p>To determine the current color scheme in Gnome:</p>
<pre><code class="language-emacs-lisp">(defun jf/color-scheme-func:gnu/linux ()
  &quot;Determine Gnome preferred/current theme.&quot;
  (if (equal
        &quot;'prefer-dark'&quot;
        (s-trim
          (shell-command-to-string
            &quot;gsettings get org.gnome.desktop.interface color-scheme&quot;)))
    :dark :light))
</code></pre>

	<p><a class="reply-by-email" href="mailto:reply-to@takeonrules.com?subject=RE:Managing%20Light%2fDark%20Scheme%20in%20MacOS%20and%20Linux">Reply by Email</a></p>

      