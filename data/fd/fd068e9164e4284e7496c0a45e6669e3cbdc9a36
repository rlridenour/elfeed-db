<p>Async copying with TRAMP usually doesn’t work the way I want them to. Could be my wonky NAS, could be the file sizes.</p>

<p>Consistently, I have much better results with <code>rsync</code> from the terminal, but I don’t want to type the invocation every time I want to move a recorded video off my computer.</p>

<p>But there’s <code>dired-rsync</code> – and while a bit bare-bones when called interactively, it does the job.</p>

<div class="language-elisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nb">use-package</span> <span class="nv">dired-rsync</span> <span class="ss">:ensure</span><span class="p">)</span>
</code></pre></div></div>

<p>The rsync progress is tracked in a buffer – a buffer that shows the shell output like you know it. No fancy decorations or anything.</p>

<p>With the transient menu, I can tweak settings interactively beforehand, to e.g. move a file from local to remote instead of copying it:</p>

<div class="language-elisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nb">use-package</span> <span class="nv">dired-rsync-transient</span>
  <span class="ss">:ensure</span>
  <span class="ss">:after</span> <span class="p">(</span><span class="nv">dired-rsync</span> <span class="nv">transient</span><span class="p">))</span>
</code></pre></div></div>

<p>Because I’m a sucker for consistency, I also wanted to have that transient menu available from the <em>other</em> transient menu I like to start from – so here’s how to add this to <a href="https://github.com/kickingvegas/casual-dired/"><code>casual-dired</code></a> for discovery, bound to ‘Y’ (uppercase):</p>

<div class="language-elisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nv">with-eval-after-load</span> <span class="ss">'dired-rsync-transient</span>
  <span class="p">(</span><span class="nv">with-eval-after-load</span> <span class="ss">'casual-dired</span>
    <span class="p">(</span><span class="nv">transient-insert-suffix</span> <span class="ss">'casual-dired-tmenu</span> <span class="s">"R"</span>  <span class="c1">;; between Copy and Rename</span>
      <span class="o">'</span><span class="p">(</span><span class="s">"Y"</span> <span class="s">"Rsync"</span> <span class="nv">dired-rsync-transient</span><span class="p">))))</span>
</code></pre></div></div>
<hr><p><small><a href="https://christiantietze.de/hire-me/">Hire me</a> for freelance macOS/iOS work and consulting.</small></p><p><small><a href="https://christiantietze.de/apps/">Buy</a> my apps.</small></p><p><small><a href="https://christiantietze.de/newsletter/">Receive</a> new posts via email.</small></p>