<p>Every now and then you’d be trying out a new color theme, that you really like overall, but you’d
like to tweak a bit here and there to make it perfect. After all, that’s what Emacs
is all about - creating the perfect editor for yourself.</p>

<p>Sometimes you might be dealing with missing face definitions or configuration
options that you might want to submit upstream, but most of the time the changes
you’d like to see are probably quite subjective and belong in your personal
config. So, how do you make those changes?</p>

<p>There are 3 common ways to adjust font faces in Emacs and I’ll briefly cover all
of them. Option number 1 is the tried and true classic <code class="language-plaintext highlighter-rouge">custom-set-faces</code>:</p>

<div class="language-emacs-lisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nv">custom-set-faces</span>
 <span class="o">'</span><span class="p">(</span><span class="nv">region</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="ss">:inherit</span> <span class="no">nil</span> <span class="ss">:background</span> <span class="s">"RoyalBlue4"</span><span class="p">))))</span>
 <span class="o">'</span><span class="p">(</span><span class="nv">highlight</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="ss">:inherit</span> <span class="nv">region</span> <span class="ss">:background</span> <span class="s">"dark olive green"</span><span class="p">))))</span>
 <span class="o">'</span><span class="p">(</span><span class="nv">hl-line</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="ss">:inherit</span> <span class="nv">highlight</span><span class="p">)))))</span>
</code></pre></div></div>

<p>That’s what gets generate if you’re adjusting faces with something like <code class="language-plaintext highlighter-rouge">M-x customize-face</code>.
The bad thing about this approach is that those customizations will active regardless of your
currently selected color theme and if you like to switch themes that’s not cool. Fortunately, it’s
easily to narrow customizations to a particular theme with <code class="language-plaintext highlighter-rouge">custom-theme-set-faces</code>:</p>

<div class="language-emacs-lisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nv">custom-theme-set-faces</span>
 <span class="ss">'zenburn</span>
 <span class="o">'</span><span class="p">(</span><span class="nv">region</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="ss">:inherit</span> <span class="no">nil</span> <span class="ss">:background</span> <span class="s">"RoyalBlue4"</span><span class="p">))))</span>
 <span class="o">'</span><span class="p">(</span><span class="nv">highlight</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="ss">:inherit</span> <span class="nv">region</span> <span class="ss">:background</span> <span class="s">"dark olive green"</span><span class="p">))))</span>
 <span class="o">'</span><span class="p">(</span><span class="nv">hl-line</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="ss">:inherit</span> <span class="nv">highlight</span><span class="p">)))))</span>
</code></pre></div></div>

<p>Looking good!</p>

<p><strong>Note:</strong> <code class="language-plaintext highlighter-rouge">custom-set-faces</code> works by calling <code class="language-plaintext highlighter-rouge">custom-theme-set-faces</code> for the <code class="language-plaintext highlighter-rouge">user</code>
theme, a special theme referring to settings made via Customize.</p>

<p>Finally, you can just set a specific face using <code class="language-plaintext highlighter-rouge">set-face-attribute</code> like this:</p>

<div class="language-emacs-lisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nv">set-face-attribute</span> <span class="ss">'font-lock-builtin-face</span> <span class="no">nil</span> <span class="ss">:weight</span> <span class="ss">'bold</span><span class="p">)</span>
</code></pre></div></div>

<p>I’d suggest perusing the documentation of <code class="language-plaintext highlighter-rouge">set-face-attribute</code> (e.g. with <code class="language-plaintext highlighter-rouge">C-h f</code>)
as it explains in great detail all the possible attributes you can configure
for a font face. The number of properties you can set is truly epic, but most of
the time you’ll need to tweak only a couple of them. (e.g. <code class="language-plaintext highlighter-rouge">:foreground</code>, <code class="language-plaintext highlighter-rouge">:background</code>, etc)</p>

<p>Technically speaking, you can go a step further than that and define your own theme
that extends the color theme you want to modify<sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">1</a></sup>, but that’s an overkill unless you
plan to distribute this theme as a package.</p>

<p>All the examples above are kind of random, so I’ll conclude here with some real modifications
I do in my config to the popular Catppuccin theme:</p>

<div class="language-emacs-lisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nb">use-package</span> <span class="nv">catppuccin-theme</span>
  <span class="ss">:config</span>
  <span class="c1">;; or 'latte, 'macchiato, or 'mocha</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">catppuccin-flavor</span> <span class="ss">'macchiato</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">load-theme</span> <span class="ss">'catppuccin</span> <span class="no">t</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">custom-theme-set-faces</span>
   <span class="ss">'catppuccin</span>
   <span class="c1">;; by default the theme uses the same face as for comments, which is wrong IMO</span>
   <span class="o">'</span><span class="p">(</span><span class="nv">font-lock-doc-face</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="ss">:foreground</span> <span class="p">(</span><span class="nv">catppuccin-color</span> <span class="ss">'green</span><span class="p">)))))</span>
   <span class="c1">;; font-lock variable definitions like function definitions</span>
   <span class="o">'</span><span class="p">(</span><span class="nv">font-lock-variable-face</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="ss">:inherit</span> <span class="nv">font-lock-function-face</span><span class="p">))))))</span>
</code></pre></div></div>

<p>The example above also shows how to access the colors from the palette of some color theme
outside of its definition. Usually themes provide some API like <code class="language-plaintext highlighter-rouge">theme-name-color</code> to
get able to get the color codes easily.</p>

<p>Funny enough, as I’m writing this I realized that <code class="language-plaintext highlighter-rouge">use-package</code> actually has built-in
support for customizing faces that I could have used instead. Here’s an example of that
in action:</p>

<div class="language-emacs-lisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nb">use-package</span> <span class="nv">zenburn-theme</span>
  <span class="ss">:preface</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">my/zenburn-colors-alist</span>
        <span class="o">'</span><span class="p">((</span><span class="nv">fg</span> <span class="o">.</span> <span class="s">"#DCDCCC"</span><span class="p">)</span> <span class="p">(</span><span class="nv">bg</span> <span class="o">.</span> <span class="s">"#1C1C1C"</span><span class="p">)</span> <span class="p">(</span><span class="nv">cyan</span> <span class="o">.</span> <span class="s">"#93E0E3"</span><span class="p">)))</span>
  <span class="ss">:custom-face</span>
  <span class="p">(</span><span class="nv">region</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="ss">:background</span> <span class="o">,</span><span class="p">(</span><span class="nv">alist-get</span> <span class="nv">my/zenburn-colors-alist</span> <span class="ss">'cyan</span><span class="p">)))))</span>
  <span class="ss">:config</span>
  <span class="p">(</span><span class="nv">load-theme</span> <span class="ss">'zenburn</span> <span class="no">t</span><span class="p">))</span>
</code></pre></div></div>

<p>This example also reminded me that I should expose the Zenburn colors via functions.</p>

<p>So, to summarize:</p>

<ul>
  <li>If you’re using <code class="language-plaintext highlighter-rouge">use-package</code> it’s probably best to use it’s <code class="language-plaintext highlighter-rouge">:custom-face</code> functionality.</li>
  <li>The rest of the time you most likely need <code class="language-plaintext highlighter-rouge">custom-theme-set-faces</code>.</li>
</ul>

<p>One thing is certain - with Emacs there always numerous ways to achieve something!</p>

<p><strong>Note:</strong> To see the new font faces in action you’ll either have to restart Emacs or
evaluate Elisp code that sets them. (e.g. with <code class="language-plaintext highlighter-rouge">C-x C-e</code>)</p>

<p>One final tip - if you’re wondering what’s the face used by some text, the best
way to figure it out is with the <code class="language-plaintext highlighter-rouge">M-x describe-char</code> command. It will give you a ton of
information, including something like this near the end:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>There are text properties here:
  face                 (font-lock-keyword-face markdown-code-face)
  font-lock-fontified  t
  font-lock-multiline  t
  fontified            t
  markdown-gfm-code    (2617 3092)
</code></pre></div></div>

<p>I had placed my cursor over the word “use-package” in the code snippet above, while writing
this article in <code class="language-plaintext highlighter-rouge">markdown-mode</code>, therefore the faces <code class="language-plaintext highlighter-rouge">font-lock-keyword-face</code> (coming from <code class="language-plaintext highlighter-rouge">elisp-mode</code>)
and <code class="language-plaintext highlighter-rouge">markdown-code-face</code> (from <code class="language-plaintext highlighter-rouge">markdown-mode</code>).</p>

<p>Do you have any tips on customizing color themes that you’d like share?</p>

<p>That’s all I have for you today. Keep hacking!</p>

<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:1" role="doc-endnote">
      <p>Remember that Emacs allows you load multiple themes with them stacking one upon another. <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>